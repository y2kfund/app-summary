var Nf = Object.defineProperty;
var Kf = (A, e, t) => e in A ? Nf(A, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : A[e] = t;
var D = (A, e, t) => Kf(A, typeof e != "symbol" ? e + "" : e, t);
import { inject as nu, defineComponent as kr, shallowRef as ru, h as sa, ref as te, onMounted as Aa, onUnmounted as Vf, watch as jt, toRaw as na, nextTick as Gt, version as zf, isProxy as ou, reactive as lr, openBlock as G, createElementBlock as W, createElementVNode as y, withModifiers as St, withDirectives as et, vModelText as mt, vModelRadio as Pl, createTextVNode as ki, createCommentVNode as Se, toDisplayString as ue, computed as Ye, onBeforeUnmount as Gf, resolveComponent as Wf, Fragment as xi, renderList as ts, normalizeClass as yn, unref as hi, createBlock as jf, withCtx as Nl, vModelCheckbox as Xf, createVNode as En, normalizeStyle as Yf, TransitionGroup as Jf } from "vue";
import { useQueryClient as fl, useQuery as Is } from "@tanstack/vue-query";
import { useSupabase as au, usePositionsQuery as $f } from "@y2kfund/core";
class st {
  constructor(e) {
    this.table = e;
  }
  //////////////////////////////////////////
  /////////////// DataLoad /////////////////
  //////////////////////////////////////////
  reloadData(e, t, i) {
    return this.table.dataLoader.load(e, void 0, void 0, void 0, t, i);
  }
  //////////////////////////////////////////
  ///////////// Localization ///////////////
  //////////////////////////////////////////
  langText() {
    return this.table.modules.localize.getText(...arguments);
  }
  langBind() {
    return this.table.modules.localize.bind(...arguments);
  }
  langLocale() {
    return this.table.modules.localize.getLocale(...arguments);
  }
  //////////////////////////////////////////
  ////////// Inter Table Comms /////////////
  //////////////////////////////////////////
  commsConnections() {
    return this.table.modules.comms.getConnections(...arguments);
  }
  commsSend() {
    return this.table.modules.comms.send(...arguments);
  }
  //////////////////////////////////////////
  //////////////// Layout  /////////////////
  //////////////////////////////////////////
  layoutMode() {
    return this.table.modules.layout.getMode();
  }
  layoutRefresh(e) {
    return this.table.modules.layout.layout(e);
  }
  //////////////////////////////////////////
  /////////////// Event Bus ////////////////
  //////////////////////////////////////////
  subscribe() {
    return this.table.eventBus.subscribe(...arguments);
  }
  unsubscribe() {
    return this.table.eventBus.unsubscribe(...arguments);
  }
  subscribed(e) {
    return this.table.eventBus.subscribed(e);
  }
  subscriptionChange() {
    return this.table.eventBus.subscriptionChange(...arguments);
  }
  dispatch() {
    return this.table.eventBus.dispatch(...arguments);
  }
  chain() {
    return this.table.eventBus.chain(...arguments);
  }
  confirm() {
    return this.table.eventBus.confirm(...arguments);
  }
  dispatchExternal() {
    return this.table.externalEvents.dispatch(...arguments);
  }
  subscribedExternal(e) {
    return this.table.externalEvents.subscribed(e);
  }
  subscriptionChangeExternal() {
    return this.table.externalEvents.subscriptionChange(...arguments);
  }
  //////////////////////////////////////////
  //////////////// Options /////////////////
  //////////////////////////////////////////
  options(e) {
    return this.table.options[e];
  }
  setOption(e, t) {
    return typeof t < "u" && (this.table.options[e] = t), this.table.options[e];
  }
  //////////////////////////////////////////
  /////////// Deprecation Checks ///////////
  //////////////////////////////////////////
  deprecationCheck(e, t, i) {
    return this.table.deprecationAdvisor.check(e, t, i);
  }
  deprecationCheckMsg(e, t) {
    return this.table.deprecationAdvisor.checkMsg(e, t);
  }
  deprecationMsg(e) {
    return this.table.deprecationAdvisor.msg(e);
  }
  //////////////////////////////////////////
  //////////////// Modules /////////////////
  //////////////////////////////////////////
  module(e) {
    return this.table.module(e);
  }
}
class Ee {
  static elVisible(e) {
    return !(e.offsetWidth <= 0 && e.offsetHeight <= 0);
  }
  static elOffset(e) {
    var t = e.getBoundingClientRect();
    return {
      top: t.top + window.pageYOffset - document.documentElement.clientTop,
      left: t.left + window.pageXOffset - document.documentElement.clientLeft
    };
  }
  static retrieveNestedData(e, t, i) {
    var s = e ? t.split(e) : [t], n = s.length, r;
    for (let o = 0; o < n && (i = i[s[o]], r = i, !!i); o++)
      ;
    return r;
  }
  static deepClone(e, t, i = []) {
    var s = {}.__proto__, n = [].__proto__;
    t || (t = Object.assign(Array.isArray(e) ? [] : {}, e));
    for (var r in e) {
      let o = e[r], a, l;
      o != null && typeof o == "object" && (o.__proto__ === s || o.__proto__ === n) && (a = i.findIndex((h) => h.subject === o), a > -1 ? t[r] = i[a].copy : (l = Object.assign(Array.isArray(o) ? [] : {}, o), i.unshift({ subject: o, copy: l }), t[r] = this.deepClone(o, l, i)));
    }
    return t;
  }
}
let Zf = class lu extends st {
  constructor(e, t, i) {
    super(e), this.element = t, this.container = this._lookupContainer(), this.parent = i, this.reversedX = !1, this.childPopup = null, this.blurable = !1, this.blurCallback = null, this.blurEventsBound = !1, this.renderedCallback = null, this.visible = !1, this.hideable = !0, this.element.classList.add("tabulator-popup-container"), this.blurEvent = this.hide.bind(this, !1), this.escEvent = this._escapeCheck.bind(this), this.destroyBinding = this.tableDestroyed.bind(this), this.destroyed = !1;
  }
  tableDestroyed() {
    this.destroyed = !0, this.hide(!0);
  }
  _lookupContainer() {
    var e = this.table.options.popupContainer;
    return typeof e == "string" ? (e = document.querySelector(e), e || console.warn("Menu Error - no container element found matching selector:", this.table.options.popupContainer, "(defaulting to document body)")) : e === !0 && (e = this.table.element), e && !this._checkContainerIsParent(e) && (e = !1, console.warn("Menu Error - container element does not contain this table:", this.table.options.popupContainer, "(defaulting to document body)")), e || (e = document.body), e;
  }
  _checkContainerIsParent(e, t = this.table.element) {
    return e === t ? !0 : t.parentNode ? this._checkContainerIsParent(e, t.parentNode) : !1;
  }
  renderCallback(e) {
    this.renderedCallback = e;
  }
  containerEventCoords(e) {
    var t = !(e instanceof MouseEvent), i = t ? e.touches[0].pageX : e.pageX, s = t ? e.touches[0].pageY : e.pageY;
    if (this.container !== document.body) {
      let n = Ee.elOffset(this.container);
      i -= n.left, s -= n.top;
    }
    return { x: i, y: s };
  }
  elementPositionCoords(e, t = "right") {
    var i = Ee.elOffset(e), s, n, r;
    switch (this.container !== document.body && (s = Ee.elOffset(this.container), i.left -= s.left, i.top -= s.top), t) {
      case "right":
        n = i.left + e.offsetWidth, r = i.top - 1;
        break;
      case "bottom":
        n = i.left, r = i.top + e.offsetHeight;
        break;
      case "left":
        n = i.left, r = i.top - 1;
        break;
      case "top":
        n = i.left, r = i.top;
        break;
      case "center":
        n = i.left + e.offsetWidth / 2, r = i.top + e.offsetHeight / 2;
        break;
    }
    return { x: n, y: r, offset: i };
  }
  show(e, t) {
    var i, s, n, r, o;
    return this.destroyed || this.table.destroyed ? this : (e instanceof HTMLElement ? (n = e, o = this.elementPositionCoords(e, t), r = o.offset, i = o.x, s = o.y) : typeof e == "number" ? (r = { top: 0, left: 0 }, i = e, s = t) : (o = this.containerEventCoords(e), i = o.x, s = o.y, this.reversedX = !1), this.element.style.top = s + "px", this.element.style.left = i + "px", this.container.appendChild(this.element), typeof this.renderedCallback == "function" && this.renderedCallback(), this._fitToScreen(i, s, n, r, t), this.visible = !0, this.subscribe("table-destroy", this.destroyBinding), this.element.addEventListener("mousedown", (a) => {
      a.stopPropagation();
    }), this);
  }
  _fitToScreen(e, t, i, s, n) {
    var r = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop;
    (e + this.element.offsetWidth >= this.container.offsetWidth || this.reversedX) && (this.element.style.left = "", i ? this.element.style.right = this.container.offsetWidth - s.left + "px" : this.element.style.right = this.container.offsetWidth - e + "px", this.reversedX = !0);
    let o = Math.max(this.container.offsetHeight, r ? this.container.scrollHeight : 0);
    if (t + this.element.offsetHeight > o)
      if (i)
        switch (n) {
          case "bottom":
            this.element.style.top = parseInt(this.element.style.top) - this.element.offsetHeight - i.offsetHeight - 1 + "px";
            break;
          default:
            this.element.style.top = parseInt(this.element.style.top) - this.element.offsetHeight + i.offsetHeight + 1 + "px";
        }
      else
        this.element.style.height = o + "px";
  }
  isVisible() {
    return this.visible;
  }
  hideOnBlur(e) {
    return this.blurable = !0, this.visible && (setTimeout(() => {
      this.visible && (this.table.rowManager.element.addEventListener("scroll", this.blurEvent), this.subscribe("cell-editing", this.blurEvent), document.body.addEventListener("click", this.blurEvent), document.body.addEventListener("contextmenu", this.blurEvent), document.body.addEventListener("mousedown", this.blurEvent), window.addEventListener("resize", this.blurEvent), document.body.addEventListener("keydown", this.escEvent), this.blurEventsBound = !0);
    }, 100), this.blurCallback = e), this;
  }
  _escapeCheck(e) {
    e.keyCode == 27 && this.hide();
  }
  blockHide() {
    this.hideable = !1;
  }
  restoreHide() {
    this.hideable = !0;
  }
  hide(e = !1) {
    return this.visible && this.hideable && (this.blurable && this.blurEventsBound && (document.body.removeEventListener("keydown", this.escEvent), document.body.removeEventListener("click", this.blurEvent), document.body.removeEventListener("contextmenu", this.blurEvent), document.body.removeEventListener("mousedown", this.blurEvent), window.removeEventListener("resize", this.blurEvent), this.table.rowManager.element.removeEventListener("scroll", this.blurEvent), this.unsubscribe("cell-editing", this.blurEvent), this.blurEventsBound = !1), this.childPopup && this.childPopup.hide(), this.parent && (this.parent.childPopup = null), this.element.parentNode && this.element.parentNode.removeChild(this.element), this.visible = !1, this.blurCallback && !e && this.blurCallback(), this.unsubscribe("table-destroy", this.destroyBinding)), this;
  }
  child(e) {
    return this.childPopup && this.childPopup.hide(), this.childPopup = new lu(this.table, e, this), this.childPopup;
  }
};
class ne extends st {
  constructor(e, t) {
    super(e), this._handler = null;
  }
  initialize() {
  }
  ///////////////////////////////////
  ////// Options Registration ///////
  ///////////////////////////////////
  registerTableOption(e, t) {
    this.table.optionsList.register(e, t);
  }
  registerColumnOption(e, t) {
    this.table.columnManager.optionsList.register(e, t);
  }
  ///////////////////////////////////
  /// Public Function Registration ///
  ///////////////////////////////////
  registerTableFunction(e, t) {
    typeof this.table[e] > "u" ? this.table[e] = (...i) => (this.table.initGuard(e), t(...i)) : console.warn("Unable to bind table function, name already in use", e);
  }
  registerComponentFunction(e, t, i) {
    return this.table.componentFunctionBinder.bind(e, t, i);
  }
  ///////////////////////////////////
  ////////// Data Pipeline //////////
  ///////////////////////////////////
  registerDataHandler(e, t) {
    this.table.rowManager.registerDataPipelineHandler(e, t), this._handler = e;
  }
  registerDisplayHandler(e, t) {
    this.table.rowManager.registerDisplayPipelineHandler(e, t), this._handler = e;
  }
  displayRows(e) {
    var t = this.table.rowManager.displayRows.length - 1, i;
    if (this._handler && (i = this.table.rowManager.displayPipeline.findIndex((s) => s.handler === this._handler), i > -1 && (t = i)), e && (t = t + e), this._handler)
      return t > -1 ? this.table.rowManager.getDisplayRows(t) : this.activeRows();
  }
  activeRows() {
    return this.table.rowManager.activeRows;
  }
  refreshData(e, t) {
    t || (t = this._handler), t && this.table.rowManager.refreshActiveData(t, !1, e);
  }
  ///////////////////////////////////
  //////// Footer Management ////////
  ///////////////////////////////////
  footerAppend(e) {
    return this.table.footerManager.append(e);
  }
  footerPrepend(e) {
    return this.table.footerManager.prepend(e);
  }
  footerRemove(e) {
    return this.table.footerManager.remove(e);
  }
  ///////////////////////////////////
  //////// Popups Management ////////
  ///////////////////////////////////
  popup(e, t) {
    return new Zf(this.table, e, t);
  }
  ///////////////////////////////////
  //////// Alert Management ////////
  ///////////////////////////////////
  alert(e, t) {
    return this.table.alertManager.alert(e, t);
  }
  clearAlert() {
    return this.table.alertManager.clear();
  }
}
var qf = {
  rownum: function(A, e, t, i, s, n) {
    return n.getPosition();
  }
};
const Ps = class Ps extends ne {
  constructor(e) {
    super(e), this.allowedTypes = ["", "data", "download", "clipboard", "print", "htmlOutput"], this.registerColumnOption("accessor"), this.registerColumnOption("accessorParams"), this.registerColumnOption("accessorData"), this.registerColumnOption("accessorDataParams"), this.registerColumnOption("accessorDownload"), this.registerColumnOption("accessorDownloadParams"), this.registerColumnOption("accessorClipboard"), this.registerColumnOption("accessorClipboardParams"), this.registerColumnOption("accessorPrint"), this.registerColumnOption("accessorPrintParams"), this.registerColumnOption("accessorHtmlOutput"), this.registerColumnOption("accessorHtmlOutputParams");
  }
  initialize() {
    this.subscribe("column-layout", this.initializeColumn.bind(this)), this.subscribe("row-data-retrieve", this.transformRow.bind(this));
  }
  //initialize column accessor
  initializeColumn(e) {
    var t = !1, i = {};
    this.allowedTypes.forEach((s) => {
      var n = "accessor" + (s.charAt(0).toUpperCase() + s.slice(1)), r;
      e.definition[n] && (r = this.lookupAccessor(e.definition[n]), r && (t = !0, i[n] = {
        accessor: r,
        params: e.definition[n + "Params"] || {}
      }));
    }), t && (e.modules.accessor = i);
  }
  lookupAccessor(e) {
    var t = !1;
    switch (typeof e) {
      case "string":
        Ps.accessors[e] ? t = Ps.accessors[e] : console.warn("Accessor Error - No such accessor found, ignoring: ", e);
        break;
      case "function":
        t = e;
        break;
    }
    return t;
  }
  //apply accessor to row
  transformRow(e, t) {
    var i = "accessor" + (t.charAt(0).toUpperCase() + t.slice(1)), s = e.getComponent(), n = Ee.deepClone(e.data || {});
    return this.table.columnManager.traverse(function(r) {
      var o, a, l, h;
      r.modules.accessor && (a = r.modules.accessor[i] || r.modules.accessor.accessor || !1, a && (o = r.getFieldValue(n), o != "undefined" && (h = r.getComponent(), l = typeof a.params == "function" ? a.params(o, n, t, h, s) : a.params, r.setFieldValue(n, a.accessor(o, n, t, l, h, s)))));
    }), n;
  }
};
D(Ps, "moduleName", "accessor"), //load defaults
D(Ps, "accessors", qf);
let ra = Ps;
var eg = {
  method: "GET"
};
function oa(A, e) {
  var t = [];
  if (e = e || "", Array.isArray(A))
    A.forEach((s, n) => {
      t = t.concat(oa(s, e ? e + "[" + n + "]" : n));
    });
  else if (typeof A == "object")
    for (var i in A)
      t = t.concat(oa(A[i], e ? e + "[" + i + "]" : i));
  else
    t.push({ key: e, value: A });
  return t;
}
function tg(A) {
  var e = oa(A), t = [];
  return e.forEach(function(i) {
    t.push(encodeURIComponent(i.key) + "=" + encodeURIComponent(i.value));
  }), t.join("&");
}
function hu(A, e, t) {
  return A && t && Object.keys(t).length && (!e.method || e.method.toLowerCase() == "get") && (e.method = "get", A += (A.includes("?") ? "&" : "?") + tg(t)), A;
}
function ig(A, e, t) {
  var i;
  return new Promise((s, n) => {
    if (A = this.urlGenerator.call(this.table, A, e, t), e.method.toUpperCase() != "GET")
      if (i = typeof this.table.options.ajaxContentType == "object" ? this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType], i) {
        for (var r in i.headers)
          e.headers || (e.headers = {}), typeof e.headers[r] > "u" && (e.headers[r] = i.headers[r]);
        e.body = i.body.call(this, A, e, t);
      } else
        console.warn("Ajax Error - Invalid ajaxContentType value:", this.table.options.ajaxContentType);
    A ? (typeof e.headers > "u" && (e.headers = {}), typeof e.headers.Accept > "u" && (e.headers.Accept = "application/json"), typeof e.headers["X-Requested-With"] > "u" && (e.headers["X-Requested-With"] = "XMLHttpRequest"), typeof e.mode > "u" && (e.mode = "cors"), e.mode == "cors" ? (typeof e.headers.Origin > "u" && (e.headers.Origin = window.location.origin), typeof e.credentials > "u" && (e.credentials = "same-origin")) : typeof e.credentials > "u" && (e.credentials = "include"), fetch(A, e).then((o) => {
      o.ok ? o.json().then((a) => {
        s(a);
      }).catch((a) => {
        n(a), console.warn("Ajax Load Error - Invalid JSON returned", a);
      }) : (console.error("Ajax Load Error - Connection Error: " + o.status, o.statusText), n(o));
    }).catch((o) => {
      console.error("Ajax Load Error - Connection Error: ", o), n(o);
    })) : (console.warn("Ajax Load Error - No URL Set"), s([]));
  });
}
function aa(A, e) {
  var t = [];
  if (e = e || "", Array.isArray(A))
    A.forEach((s, n) => {
      t = t.concat(aa(s, e ? e + "[" + n + "]" : n));
    });
  else if (typeof A == "object")
    for (var i in A)
      t = t.concat(aa(A[i], e ? e + "[" + i + "]" : i));
  else
    t.push({ key: e, value: A });
  return t;
}
var sg = {
  json: {
    headers: {
      "Content-Type": "application/json"
    },
    body: function(A, e, t) {
      return JSON.stringify(t);
    }
  },
  form: {
    headers: {},
    body: function(A, e, t) {
      var i = aa(t), s = new FormData();
      return i.forEach(function(n) {
        s.append(n.key, n.value);
      }), s;
    }
  }
};
const Xt = class Xt extends ne {
  constructor(e) {
    super(e), this.config = {}, this.url = "", this.urlGenerator = !1, this.params = !1, this.loaderPromise = !1, this.registerTableOption("ajaxURL", !1), this.registerTableOption("ajaxURLGenerator", !1), this.registerTableOption("ajaxParams", {}), this.registerTableOption("ajaxConfig", "get"), this.registerTableOption("ajaxContentType", "form"), this.registerTableOption("ajaxRequestFunc", !1), this.registerTableOption("ajaxRequesting", function() {
    }), this.registerTableOption("ajaxResponse", !1), this.contentTypeFormatters = Xt.contentTypeFormatters;
  }
  //initialize setup options
  initialize() {
    this.loaderPromise = this.table.options.ajaxRequestFunc || Xt.defaultLoaderPromise, this.urlGenerator = this.table.options.ajaxURLGenerator || Xt.defaultURLGenerator, this.table.options.ajaxURL && this.setUrl(this.table.options.ajaxURL), this.setDefaultConfig(this.table.options.ajaxConfig), this.registerTableFunction("getAjaxUrl", this.getUrl.bind(this)), this.subscribe("data-loading", this.requestDataCheck.bind(this)), this.subscribe("data-params", this.requestParams.bind(this)), this.subscribe("data-load", this.requestData.bind(this));
  }
  requestParams(e, t, i, s) {
    var n = this.table.options.ajaxParams;
    return n && (typeof n == "function" && (n = n.call(this.table)), s = Object.assign(Object.assign({}, n), s)), s;
  }
  requestDataCheck(e, t, i, s) {
    return !!(!e && this.url || typeof e == "string");
  }
  requestData(e, t, i, s, n) {
    var r;
    return !n && this.requestDataCheck(e) ? (e && this.setUrl(e), r = this.generateConfig(i), this.sendRequest(this.url, t, r)) : n;
  }
  setDefaultConfig(e = {}) {
    this.config = Object.assign({}, Xt.defaultConfig), typeof e == "string" ? this.config.method = e : Object.assign(this.config, e);
  }
  //load config object
  generateConfig(e = {}) {
    var t = Object.assign({}, this.config);
    return typeof e == "string" ? t.method = e : Object.assign(t, e), t;
  }
  //set request url
  setUrl(e) {
    this.url = e;
  }
  //get request url
  getUrl() {
    return this.url;
  }
  //send ajax request
  sendRequest(e, t, i) {
    return this.table.options.ajaxRequesting.call(this.table, e, t) !== !1 ? this.loaderPromise(e, i, t).then((s) => (this.table.options.ajaxResponse && (s = this.table.options.ajaxResponse.call(this.table, e, t, s)), s)) : Promise.reject();
  }
};
D(Xt, "moduleName", "ajax"), //load defaults
D(Xt, "defaultConfig", eg), D(Xt, "defaultURLGenerator", hu), D(Xt, "defaultLoaderPromise", ig), D(Xt, "contentTypeFormatters", sg);
let la = Xt;
var Ag = {
  replace: function(A) {
    return this.table.setData(A);
  },
  update: function(A) {
    return this.table.updateOrAddData(A);
  },
  insert: function(A) {
    return this.table.addData(A);
  }
}, ng = {
  table: function(A) {
    var e = [], t = !0, i = this.table.columnManager.columns, s = [], n = [];
    return A = A.split(`
`), A.forEach(function(r) {
      e.push(r.split("	"));
    }), e.length && !(e.length === 1 && e[0].length < 2) ? (e[0].forEach(function(r) {
      var o = i.find(function(a) {
        return r && a.definition.title && r.trim() && a.definition.title.trim() === r.trim();
      });
      o ? s.push(o) : t = !1;
    }), t || (t = !0, s = [], e[0].forEach(function(r) {
      var o = i.find(function(a) {
        return r && a.field && r.trim() && a.field.trim() === r.trim();
      });
      o ? s.push(o) : t = !1;
    }), t || (s = this.table.columnManager.columnsByIndex)), t && e.shift(), e.forEach(function(r) {
      var o = {};
      r.forEach(function(a, l) {
        s[l] && (o[s[l].field] = a);
      }), n.push(o);
    }), n) : !1;
  }
}, rg = {
  copyToClipboard: ["ctrl + 67", "meta + 67"]
}, og = {
  copyToClipboard: function(A) {
    this.table.modules.edit.currentCell || this.table.modExists("clipboard", !0) && this.table.modules.clipboard.copy(!1, !0);
  }
}, ag = {
  keybindings: {
    bindings: rg,
    actions: og
  }
};
const Di = class Di extends ne {
  constructor(e) {
    super(e), this.mode = !0, this.pasteParser = function() {
    }, this.pasteAction = function() {
    }, this.customSelection = !1, this.rowRange = !1, this.blocked = !0, this.registerTableOption("clipboard", !1), this.registerTableOption("clipboardCopyStyled", !0), this.registerTableOption("clipboardCopyConfig", !1), this.registerTableOption("clipboardCopyFormatter", !1), this.registerTableOption("clipboardCopyRowRange", "active"), this.registerTableOption("clipboardPasteParser", "table"), this.registerTableOption("clipboardPasteAction", "insert"), this.registerColumnOption("clipboard"), this.registerColumnOption("titleClipboard");
  }
  initialize() {
    this.mode = this.table.options.clipboard, this.rowRange = this.table.options.clipboardCopyRowRange, (this.mode === !0 || this.mode === "copy") && this.table.element.addEventListener("copy", (e) => {
      var t, i, s;
      this.blocked || (e.preventDefault(), this.customSelection ? (t = this.customSelection, this.table.options.clipboardCopyFormatter && (t = this.table.options.clipboardCopyFormatter("plain", t))) : (s = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, "clipboard"), i = this.table.modules.export.generateHTMLTable(s), t = i ? this.generatePlainContent(s) : "", this.table.options.clipboardCopyFormatter && (t = this.table.options.clipboardCopyFormatter("plain", t), i = this.table.options.clipboardCopyFormatter("html", i))), window.clipboardData && window.clipboardData.setData ? window.clipboardData.setData("Text", t) : e.clipboardData && e.clipboardData.setData ? (e.clipboardData.setData("text/plain", t), i && e.clipboardData.setData("text/html", i)) : e.originalEvent && e.originalEvent.clipboardData.setData && (e.originalEvent.clipboardData.setData("text/plain", t), i && e.originalEvent.clipboardData.setData("text/html", i)), this.dispatchExternal("clipboardCopied", t, i), this.reset());
    }), (this.mode === !0 || this.mode === "paste") && this.table.element.addEventListener("paste", (e) => {
      this.paste(e);
    }), this.setPasteParser(this.table.options.clipboardPasteParser), this.setPasteAction(this.table.options.clipboardPasteAction), this.registerTableFunction("copyToClipboard", this.copy.bind(this));
  }
  reset() {
    this.blocked = !0, this.customSelection = !1;
  }
  generatePlainContent(e) {
    var t = [];
    return e.forEach((i) => {
      var s = [];
      i.columns.forEach((n) => {
        var r = "";
        if (n)
          if (i.type === "group" && (n.value = n.component.getKey()), n.value === null)
            r = "";
          else
            switch (typeof n.value) {
              case "object":
                r = JSON.stringify(n.value);
                break;
              case "undefined":
                r = "";
                break;
              default:
                r = n.value;
            }
        s.push(r);
      }), t.push(s.join("	"));
    }), t.join(`
`);
  }
  copy(e, t) {
    var i, s;
    this.blocked = !1, this.customSelection = !1, (this.mode === !0 || this.mode === "copy") && (this.rowRange = e || this.table.options.clipboardCopyRowRange, typeof window.getSelection < "u" && typeof document.createRange < "u" ? (e = document.createRange(), e.selectNodeContents(this.table.element), i = window.getSelection(), i.toString() && t && (this.customSelection = i.toString()), i.removeAllRanges(), i.addRange(e)) : typeof document.selection < "u" && typeof document.body.createTextRange < "u" && (s = document.body.createTextRange(), s.moveToElementText(this.table.element), s.select()), document.execCommand("copy"), i && i.removeAllRanges());
  }
  //PASTE EVENT HANDLING
  setPasteAction(e) {
    switch (typeof e) {
      case "string":
        this.pasteAction = Di.pasteActions[e], this.pasteAction || console.warn("Clipboard Error - No such paste action found:", e);
        break;
      case "function":
        this.pasteAction = e;
        break;
    }
  }
  setPasteParser(e) {
    switch (typeof e) {
      case "string":
        this.pasteParser = Di.pasteParsers[e], this.pasteParser || console.warn("Clipboard Error - No such paste parser found:", e);
        break;
      case "function":
        this.pasteParser = e;
        break;
    }
  }
  paste(e) {
    var t, i, s;
    this.checkPasteOrigin(e) && (t = this.getPasteData(e), i = this.pasteParser.call(this, t), i ? (e.preventDefault(), this.table.modExists("mutator") && (i = this.mutateData(i)), s = this.pasteAction.call(this, i), this.dispatchExternal("clipboardPasted", t, i, s)) : this.dispatchExternal("clipboardPasteError", t));
  }
  mutateData(e) {
    var t = [];
    return Array.isArray(e) ? e.forEach((i) => {
      t.push(this.table.modules.mutator.transformRow(i, "clipboard"));
    }) : t = e, t;
  }
  checkPasteOrigin(e) {
    var t = !0, i = this.confirm("clipboard-paste", [e]);
    return (i || !["DIV", "SPAN"].includes(e.target.tagName)) && (t = !1), t;
  }
  getPasteData(e) {
    var t;
    return window.clipboardData && window.clipboardData.getData ? t = window.clipboardData.getData("Text") : e.clipboardData && e.clipboardData.getData ? t = e.clipboardData.getData("text/plain") : e.originalEvent && e.originalEvent.clipboardData.getData && (t = e.originalEvent.clipboardData.getData("text/plain")), t;
  }
};
D(Di, "moduleName", "clipboard"), D(Di, "moduleExtensions", ag), //load defaults
D(Di, "pasteActions", Ag), D(Di, "pasteParsers", ng);
let ha = Di;
class lg {
  constructor(e) {
    return this._row = e, new Proxy(this, {
      get: function(t, i, s) {
        return typeof t[i] < "u" ? t[i] : t._row.table.componentFunctionBinder.handle("row", t._row, i);
      }
    });
  }
  getData(e) {
    return this._row.getData(e);
  }
  getElement() {
    return this._row.getElement();
  }
  getTable() {
    return this._row.table;
  }
  getCells() {
    var e = [];
    return this._row.getCells().forEach(function(t) {
      e.push(t.getComponent());
    }), e;
  }
  getCell(e) {
    var t = this._row.getCell(e);
    return t ? t.getComponent() : !1;
  }
  _getSelf() {
    return this._row;
  }
}
class cu {
  constructor(e) {
    return this._cell = e, new Proxy(this, {
      get: function(t, i, s) {
        return typeof t[i] < "u" ? t[i] : t._cell.table.componentFunctionBinder.handle("cell", t._cell, i);
      }
    });
  }
  getValue() {
    return this._cell.getValue();
  }
  getOldValue() {
    return this._cell.getOldValue();
  }
  getInitialValue() {
    return this._cell.initialValue;
  }
  getElement() {
    return this._cell.getElement();
  }
  getRow() {
    return this._cell.row.getComponent();
  }
  getData(e) {
    return this._cell.row.getData(e);
  }
  getType() {
    return "cell";
  }
  getField() {
    return this._cell.column.getField();
  }
  getColumn() {
    return this._cell.column.getComponent();
  }
  setValue(e, t) {
    typeof t > "u" && (t = !0), this._cell.setValue(e, t);
  }
  restoreOldValue() {
    this._cell.setValueActual(this._cell.getOldValue());
  }
  restoreInitialValue() {
    this._cell.setValueActual(this._cell.initialValue);
  }
  checkHeight() {
    this._cell.checkHeight();
  }
  getTable() {
    return this._cell.table;
  }
  _getSelf() {
    return this._cell;
  }
}
class rn extends st {
  constructor(e, t) {
    super(e.table), this.table = e.table, this.column = e, this.row = t, this.element = null, this.value = null, this.initialValue, this.oldValue = null, this.modules = {}, this.height = null, this.width = null, this.minWidth = null, this.component = null, this.loaded = !1, this.build();
  }
  //////////////// Setup Functions /////////////////
  //generate element
  build() {
    this.generateElement(), this.setWidth(), this._configureCell(), this.setValueActual(this.column.getFieldValue(this.row.data)), this.initialValue = this.value;
  }
  generateElement() {
    this.element = document.createElement("div"), this.element.className = "tabulator-cell", this.element.setAttribute("role", "gridcell"), this.column.isRowHeader && this.element.classList.add("tabulator-row-header");
  }
  _configureCell() {
    var e = this.element, t = this.column.getField(), i = {
      top: "flex-start",
      bottom: "flex-end",
      middle: "center"
    }, s = {
      left: "flex-start",
      right: "flex-end",
      center: "center"
    };
    if (e.style.textAlign = this.column.hozAlign, this.column.vertAlign && (e.style.display = "inline-flex", e.style.alignItems = i[this.column.vertAlign] || "", this.column.hozAlign && (e.style.justifyContent = s[this.column.hozAlign] || "")), t && e.setAttribute("tabulator-field", t), this.column.definition.cssClass) {
      var n = this.column.definition.cssClass.split(" ");
      n.forEach((r) => {
        e.classList.add(r);
      });
    }
    this.dispatch("cell-init", this), this.column.visible || this.hide();
  }
  //generate cell contents
  _generateContents() {
    var e;
    switch (e = this.chain("cell-format", this, null, () => this.element.innerHTML = this.value), typeof e) {
      case "object":
        if (e instanceof Node) {
          for (; this.element.firstChild; ) this.element.removeChild(this.element.firstChild);
          this.element.appendChild(e);
        } else
          this.element.innerHTML = "", e != null && console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:", e);
        break;
      case "undefined":
        this.element.innerHTML = "";
        break;
      default:
        this.element.innerHTML = e;
    }
  }
  cellRendered() {
    this.dispatch("cell-rendered", this);
  }
  //////////////////// Getters ////////////////////
  getElement(e) {
    return this.loaded || (this.loaded = !0, e || this.layoutElement()), this.element;
  }
  getValue() {
    return this.value;
  }
  getOldValue() {
    return this.oldValue;
  }
  //////////////////// Actions ////////////////////
  setValue(e, t, i) {
    var s = this.setValueProcessData(e, t, i);
    s && (this.dispatch("cell-value-updated", this), this.cellRendered(), this.column.definition.cellEdited && this.column.definition.cellEdited.call(this.table, this.getComponent()), this.dispatchExternal("cellEdited", this.getComponent()), this.subscribedExternal("dataChanged") && this.dispatchExternal("dataChanged", this.table.rowManager.getData()));
  }
  setValueProcessData(e, t, i) {
    var s = !1;
    return (this.value !== e || i) && (s = !0, t && (e = this.chain("cell-value-changing", [this, e], null, e))), this.setValueActual(e), s && this.dispatch("cell-value-changed", this), s;
  }
  setValueActual(e) {
    this.oldValue = this.value, this.value = e, this.dispatch("cell-value-save-before", this), this.column.setFieldValue(this.row.data, e), this.dispatch("cell-value-save-after", this), this.loaded && this.layoutElement();
  }
  layoutElement() {
    this._generateContents(), this.dispatch("cell-layout", this);
  }
  setWidth() {
    this.width = this.column.width, this.element.style.width = this.column.widthStyled;
  }
  clearWidth() {
    this.width = "", this.element.style.width = "";
  }
  getWidth() {
    return this.width || this.element.offsetWidth;
  }
  setMinWidth() {
    this.minWidth = this.column.minWidth, this.element.style.minWidth = this.column.minWidthStyled;
  }
  setMaxWidth() {
    this.maxWidth = this.column.maxWidth, this.element.style.maxWidth = this.column.maxWidthStyled;
  }
  checkHeight() {
    this.row.reinitializeHeight();
  }
  clearHeight() {
    this.element.style.height = "", this.height = null, this.dispatch("cell-height", this, "");
  }
  setHeight() {
    this.height = this.row.height, this.element.style.height = this.row.heightStyled, this.dispatch("cell-height", this, this.row.heightStyled);
  }
  getHeight() {
    return this.height || this.element.offsetHeight;
  }
  show() {
    this.element.style.display = this.column.vertAlign ? "inline-flex" : "";
  }
  hide() {
    this.element.style.display = "none";
  }
  delete() {
    this.dispatch("cell-delete", this), !this.table.rowManager.redrawBlock && this.element.parentNode && this.element.parentNode.removeChild(this.element), this.element = !1, this.column.deleteCell(this), this.row.deleteCell(this), this.calcs = {};
  }
  getIndex() {
    return this.row.getCellIndex(this);
  }
  //////////////// Object Generation /////////////////
  getComponent() {
    return this.component || (this.component = new cu(this)), this.component;
  }
}
class uu {
  constructor(e) {
    return this._column = e, this.type = "ColumnComponent", new Proxy(this, {
      get: function(t, i, s) {
        return typeof t[i] < "u" ? t[i] : t._column.table.componentFunctionBinder.handle("column", t._column, i);
      }
    });
  }
  getElement() {
    return this._column.getElement();
  }
  getDefinition() {
    return this._column.getDefinition();
  }
  getField() {
    return this._column.getField();
  }
  getTitleDownload() {
    return this._column.getTitleDownload();
  }
  getCells() {
    var e = [];
    return this._column.cells.forEach(function(t) {
      e.push(t.getComponent());
    }), e;
  }
  isVisible() {
    return this._column.visible;
  }
  show() {
    this._column.isGroup ? this._column.columns.forEach(function(e) {
      e.show();
    }) : this._column.show();
  }
  hide() {
    this._column.isGroup ? this._column.columns.forEach(function(e) {
      e.hide();
    }) : this._column.hide();
  }
  toggle() {
    this._column.visible ? this.hide() : this.show();
  }
  delete() {
    return this._column.delete();
  }
  getSubColumns() {
    var e = [];
    return this._column.columns.length && this._column.columns.forEach(function(t) {
      e.push(t.getComponent());
    }), e;
  }
  getParentColumn() {
    return this._column.getParentComponent();
  }
  _getSelf() {
    return this._column;
  }
  scrollTo(e, t) {
    return this._column.table.columnManager.scrollToColumn(this._column, e, t);
  }
  getTable() {
    return this._column.table;
  }
  move(e, t) {
    var i = this._column.table.columnManager.findColumn(e);
    i ? this._column.table.columnManager.moveColumn(this._column, i, t) : console.warn("Move Error - No matching column found:", i);
  }
  getNextColumn() {
    var e = this._column.nextColumn();
    return e ? e.getComponent() : !1;
  }
  getPrevColumn() {
    var e = this._column.prevColumn();
    return e ? e.getComponent() : !1;
  }
  updateDefinition(e) {
    return this._column.updateDefinition(e);
  }
  getWidth() {
    return this._column.getWidth();
  }
  setWidth(e) {
    var t;
    return e === !0 ? t = this._column.reinitializeWidth(!0) : t = this._column.setWidth(e), this._column.table.columnManager.rerenderColumns(!0), t;
  }
}
var du = {
  title: void 0,
  field: void 0,
  columns: void 0,
  visible: void 0,
  hozAlign: void 0,
  vertAlign: void 0,
  width: void 0,
  minWidth: 40,
  maxWidth: void 0,
  maxInitialWidth: void 0,
  cssClass: void 0,
  variableHeight: void 0,
  headerVertical: void 0,
  headerHozAlign: void 0,
  headerWordWrap: !1,
  editableTitle: void 0
};
const hs = class hs extends st {
  constructor(e, t, i) {
    super(t.table), this.definition = e, this.parent = t, this.type = "column", this.columns = [], this.cells = [], this.isGroup = !1, this.isRowHeader = i, this.element = this.createElement(), this.contentElement = !1, this.titleHolderElement = !1, this.titleElement = !1, this.groupElement = this.createGroupElement(), this.hozAlign = "", this.vertAlign = "", this.field = "", this.fieldStructure = "", this.getFieldValue = "", this.setFieldValue = "", this.titleDownload = null, this.titleFormatterRendered = !1, this.mapDefinitions(), this.setField(this.definition.field), this.modules = {}, this.width = null, this.widthStyled = "", this.maxWidth = null, this.maxWidthStyled = "", this.maxInitialWidth = null, this.minWidth = null, this.minWidthStyled = "", this.widthFixed = !1, this.visible = !0, this.component = null, this.definition.columns ? (this.isGroup = !0, this.definition.columns.forEach((s, n) => {
      var r = new hs(s, this);
      this.attachColumn(r);
    }), this.checkColumnVisibility()) : t.registerColumnField(this), this._initialize();
  }
  createElement() {
    var e = document.createElement("div");
    switch (e.classList.add("tabulator-col"), e.setAttribute("role", "columnheader"), e.setAttribute("aria-sort", "none"), this.isRowHeader && e.classList.add("tabulator-row-header"), this.table.options.columnHeaderVertAlign) {
      case "middle":
        e.style.justifyContent = "center";
        break;
      case "bottom":
        e.style.justifyContent = "flex-end";
        break;
    }
    return e;
  }
  createGroupElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-col-group-cols"), e;
  }
  mapDefinitions() {
    var e = this.table.options.columnDefaults;
    if (e)
      for (let t in e)
        typeof this.definition[t] > "u" && (this.definition[t] = e[t]);
    this.definition = this.table.columnManager.optionsList.generate(hs.defaultOptionList, this.definition);
  }
  checkDefinition() {
    Object.keys(this.definition).forEach((e) => {
      hs.defaultOptionList.indexOf(e) === -1 && console.warn("Invalid column definition option in '" + (this.field || this.definition.title) + "' column:", e);
    });
  }
  setField(e) {
    this.field = e, this.fieldStructure = e ? this.table.options.nestedFieldSeparator ? e.split(this.table.options.nestedFieldSeparator) : [e] : [], this.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData, this.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;
  }
  //register column position with column manager
  registerColumnPosition(e) {
    this.parent.registerColumnPosition(e);
  }
  //register column position with column manager
  registerColumnField(e) {
    this.parent.registerColumnField(e);
  }
  //trigger position registration
  reRegisterPosition() {
    this.isGroup ? this.columns.forEach(function(e) {
      e.reRegisterPosition();
    }) : this.registerColumnPosition(this);
  }
  //build header element
  _initialize() {
    for (var e = this.definition; this.element.firstChild; ) this.element.removeChild(this.element.firstChild);
    e.headerVertical && (this.element.classList.add("tabulator-col-vertical"), e.headerVertical === "flip" && this.element.classList.add("tabulator-col-vertical-flip")), this.contentElement = this._buildColumnHeaderContent(), this.element.appendChild(this.contentElement), this.isGroup ? this._buildGroupHeader() : this._buildColumnHeader(), this.dispatch("column-init", this);
  }
  //build header element for header
  _buildColumnHeader() {
    var e = this.definition;
    if (this.dispatch("column-layout", this), typeof e.visible < "u" && (e.visible ? this.show(!0) : this.hide(!0)), e.cssClass) {
      var t = e.cssClass.split(" ");
      t.forEach((i) => {
        this.element.classList.add(i);
      });
    }
    e.field && this.element.setAttribute("tabulator-field", e.field), this.setMinWidth(parseInt(e.minWidth)), e.maxInitialWidth && (this.maxInitialWidth = parseInt(e.maxInitialWidth)), e.maxWidth && this.setMaxWidth(parseInt(e.maxWidth)), this.reinitializeWidth(), this.hozAlign = this.definition.hozAlign, this.vertAlign = this.definition.vertAlign, this.titleElement.style.textAlign = this.definition.headerHozAlign;
  }
  _buildColumnHeaderContent() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-col-content"), this.titleHolderElement = document.createElement("div"), this.titleHolderElement.classList.add("tabulator-col-title-holder"), e.appendChild(this.titleHolderElement), this.titleElement = this._buildColumnHeaderTitle(), this.titleHolderElement.appendChild(this.titleElement), e;
  }
  //build title element of column
  _buildColumnHeaderTitle() {
    var e = this.definition, t = document.createElement("div");
    if (t.classList.add("tabulator-col-title"), e.headerWordWrap && t.classList.add("tabulator-col-title-wrap"), e.editableTitle) {
      var i = document.createElement("input");
      i.classList.add("tabulator-title-editor"), i.addEventListener("click", (s) => {
        s.stopPropagation(), i.focus();
      }), i.addEventListener("mousedown", (s) => {
        s.stopPropagation();
      }), i.addEventListener("change", () => {
        e.title = i.value, this.dispatchExternal("columnTitleChanged", this.getComponent());
      }), t.appendChild(i), e.field ? this.langBind("columns|" + e.field, (s) => {
        i.value = s || e.title || "&nbsp;";
      }) : i.value = e.title || "&nbsp;";
    } else
      e.field ? this.langBind("columns|" + e.field, (s) => {
        this._formatColumnHeaderTitle(t, s || e.title || "&nbsp;");
      }) : this._formatColumnHeaderTitle(t, e.title || "&nbsp;");
    return t;
  }
  _formatColumnHeaderTitle(e, t) {
    var i = this.chain("column-format", [this, t, e], null, () => t);
    switch (typeof i) {
      case "object":
        i instanceof Node ? e.appendChild(i) : (e.innerHTML = "", console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:", i));
        break;
      case "undefined":
        e.innerHTML = "";
        break;
      default:
        e.innerHTML = i;
    }
  }
  //build header element for column group
  _buildGroupHeader() {
    if (this.element.classList.add("tabulator-col-group"), this.element.setAttribute("role", "columngroup"), this.element.setAttribute("aria-title", this.definition.title), this.definition.cssClass) {
      var e = this.definition.cssClass.split(" ");
      e.forEach((t) => {
        this.element.classList.add(t);
      });
    }
    this.titleElement.style.textAlign = this.definition.headerHozAlign, this.element.appendChild(this.groupElement);
  }
  //flat field lookup
  _getFlatData(e) {
    return e[this.field];
  }
  //nested field lookup
  _getNestedData(e) {
    var t = e, i = this.fieldStructure, s = i.length, n;
    for (let r = 0; r < s && (t = t[i[r]], n = t, !!t); r++)
      ;
    return n;
  }
  //flat field set
  _setFlatData(e, t) {
    this.field && (e[this.field] = t);
  }
  //nested field set
  _setNestedData(e, t) {
    var i = e, s = this.fieldStructure, n = s.length;
    for (let r = 0; r < n; r++)
      if (r == n - 1)
        i[s[r]] = t;
      else {
        if (!i[s[r]])
          if (typeof t < "u")
            i[s[r]] = {};
          else
            break;
        i = i[s[r]];
      }
  }
  //attach column to this group
  attachColumn(e) {
    this.groupElement ? (this.columns.push(e), this.groupElement.appendChild(e.getElement()), e.columnRendered()) : console.warn("Column Warning - Column being attached to another column instead of column group");
  }
  //vertically align header in column
  verticalAlign(e, t) {
    var i = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : t || this.parent.getHeadersElement().clientHeight;
    this.element.style.height = i + "px", this.dispatch("column-height", this, this.element.style.height), this.isGroup && (this.groupElement.style.minHeight = i - this.contentElement.offsetHeight + "px"), this.columns.forEach(function(s) {
      s.verticalAlign(e);
    });
  }
  //clear vertical alignment
  clearVerticalAlign() {
    this.element.style.paddingTop = "", this.element.style.height = "", this.element.style.minHeight = "", this.groupElement.style.minHeight = "", this.columns.forEach(function(e) {
      e.clearVerticalAlign();
    }), this.dispatch("column-height", this, "");
  }
  //// Retrieve Column Information ////
  //return column header element
  getElement() {
    return this.element;
  }
  //return column group element
  getGroupElement() {
    return this.groupElement;
  }
  //return field name
  getField() {
    return this.field;
  }
  getTitleDownload() {
    return this.titleDownload;
  }
  //return the first column in a group
  getFirstColumn() {
    return this.isGroup ? this.columns.length ? this.columns[0].getFirstColumn() : !1 : this;
  }
  //return the last column in a group
  getLastColumn() {
    return this.isGroup ? this.columns.length ? this.columns[this.columns.length - 1].getLastColumn() : !1 : this;
  }
  //return all columns in a group
  getColumns(e) {
    var t = [];
    return e ? this.columns.forEach((i) => {
      t.push(i), t = t.concat(i.getColumns(!0));
    }) : t = this.columns, t;
  }
  //return all columns in a group
  getCells() {
    return this.cells;
  }
  //retrieve the top column in a group of columns
  getTopColumn() {
    return this.parent.isGroup ? this.parent.getTopColumn() : this;
  }
  //return column definition object
  getDefinition(e) {
    var t = [];
    return this.isGroup && e && (this.columns.forEach(function(i) {
      t.push(i.getDefinition(!0));
    }), this.definition.columns = t), this.definition;
  }
  //////////////////// Actions ////////////////////
  checkColumnVisibility() {
    var e = !1;
    this.columns.forEach(function(t) {
      t.visible && (e = !0);
    }), e ? (this.show(), this.dispatchExternal("columnVisibilityChanged", this.getComponent(), !1)) : this.hide();
  }
  //show column
  show(e, t) {
    this.visible || (this.visible = !0, this.element.style.display = "", this.parent.isGroup && this.parent.checkColumnVisibility(), this.cells.forEach(function(i) {
      i.show();
    }), !this.isGroup && this.width === null && this.reinitializeWidth(), this.table.columnManager.verticalAlignHeaders(), this.dispatch("column-show", this, t), e || this.dispatchExternal("columnVisibilityChanged", this.getComponent(), !0), this.parent.isGroup && this.parent.matchChildWidths(), this.silent || this.table.columnManager.rerenderColumns());
  }
  //hide column
  hide(e, t) {
    this.visible && (this.visible = !1, this.element.style.display = "none", this.table.columnManager.verticalAlignHeaders(), this.parent.isGroup && this.parent.checkColumnVisibility(), this.cells.forEach(function(i) {
      i.hide();
    }), this.dispatch("column-hide", this, t), e || this.dispatchExternal("columnVisibilityChanged", this.getComponent(), !1), this.parent.isGroup && this.parent.matchChildWidths(), this.silent || this.table.columnManager.rerenderColumns());
  }
  matchChildWidths() {
    var e = 0;
    this.contentElement && this.columns.length && (this.columns.forEach(function(t) {
      t.visible && (e += t.getWidth());
    }), this.contentElement.style.maxWidth = e - 1 + "px", this.table.initialized && (this.element.style.width = e + "px"), this.parent.isGroup && this.parent.matchChildWidths());
  }
  removeChild(e) {
    var t = this.columns.indexOf(e);
    t > -1 && this.columns.splice(t, 1), this.columns.length || this.delete();
  }
  setWidth(e) {
    this.widthFixed = !0, this.setWidthActual(e);
  }
  setWidthActual(e) {
    isNaN(e) && (e = Math.floor(this.table.element.clientWidth / 100 * parseInt(e))), e = Math.max(this.minWidth, e), this.maxWidth && (e = Math.min(this.maxWidth, e)), this.width = e, this.widthStyled = e ? e + "px" : "", this.element.style.width = this.widthStyled, this.isGroup || this.cells.forEach(function(t) {
      t.setWidth();
    }), this.parent.isGroup && this.parent.matchChildWidths(), this.dispatch("column-width", this), this.subscribedExternal("columnWidth") && this.dispatchExternal("columnWidth", this.getComponent());
  }
  checkCellHeights() {
    var e = [];
    this.cells.forEach(function(t) {
      t.row.heightInitialized && (t.row.getElement().offsetParent !== null ? (e.push(t.row), t.row.clearCellHeight()) : t.row.heightInitialized = !1);
    }), e.forEach(function(t) {
      t.calcHeight();
    }), e.forEach(function(t) {
      t.setCellHeight();
    });
  }
  getWidth() {
    var e = 0;
    return this.isGroup ? this.columns.forEach(function(t) {
      t.visible && (e += t.getWidth());
    }) : e = this.width, e;
  }
  getLeftOffset() {
    var e = this.element.offsetLeft;
    return this.parent.isGroup && (e += this.parent.getLeftOffset()), e;
  }
  getHeight() {
    return Math.ceil(this.element.getBoundingClientRect().height);
  }
  setMinWidth(e) {
    this.maxWidth && e > this.maxWidth && (e = this.maxWidth, console.warn("the minWidth (" + e + "px) for column '" + this.field + "' cannot be bigger that its maxWidth (" + this.maxWidthStyled + ")")), this.minWidth = e, this.minWidthStyled = e ? e + "px" : "", this.element.style.minWidth = this.minWidthStyled, this.cells.forEach(function(t) {
      t.setMinWidth();
    });
  }
  setMaxWidth(e) {
    this.minWidth && e < this.minWidth && (e = this.minWidth, console.warn("the maxWidth (" + e + "px) for column '" + this.field + "' cannot be smaller that its minWidth (" + this.minWidthStyled + ")")), this.maxWidth = e, this.maxWidthStyled = e ? e + "px" : "", this.element.style.maxWidth = this.maxWidthStyled, this.cells.forEach(function(t) {
      t.setMaxWidth();
    });
  }
  delete() {
    return new Promise((e, t) => {
      this.isGroup && this.columns.forEach(function(s) {
        s.delete();
      }), this.dispatch("column-delete", this);
      var i = this.cells.length;
      for (let s = 0; s < i; s++)
        this.cells[0].delete();
      this.element.parentNode && this.element.parentNode.removeChild(this.element), this.element = !1, this.contentElement = !1, this.titleElement = !1, this.groupElement = !1, this.parent.isGroup && this.parent.removeChild(this), this.table.columnManager.deregisterColumn(this), this.table.columnManager.rerenderColumns(!0), this.dispatch("column-deleted", this), e();
    });
  }
  columnRendered() {
    this.titleFormatterRendered && this.titleFormatterRendered(), this.dispatch("column-rendered", this);
  }
  //////////////// Cell Management /////////////////
  //generate cell for this column
  generateCell(e) {
    var t = new rn(this, e);
    return this.cells.push(t), t;
  }
  nextColumn() {
    var e = this.table.columnManager.findColumnIndex(this);
    return e > -1 ? this._nextVisibleColumn(e + 1) : !1;
  }
  _nextVisibleColumn(e) {
    var t = this.table.columnManager.getColumnByIndex(e);
    return !t || t.visible ? t : this._nextVisibleColumn(e + 1);
  }
  prevColumn() {
    var e = this.table.columnManager.findColumnIndex(this);
    return e > -1 ? this._prevVisibleColumn(e - 1) : !1;
  }
  _prevVisibleColumn(e) {
    var t = this.table.columnManager.getColumnByIndex(e);
    return !t || t.visible ? t : this._prevVisibleColumn(e - 1);
  }
  reinitializeWidth(e) {
    this.widthFixed = !1, typeof this.definition.width < "u" && !e && this.setWidth(this.definition.width), this.dispatch("column-width-fit-before", this), this.fitToData(e), this.dispatch("column-width-fit-after", this);
  }
  //set column width to maximum cell width for non group columns
  fitToData(e) {
    if (!this.isGroup) {
      this.widthFixed || (this.element.style.width = "", this.cells.forEach((s) => {
        s.clearWidth();
      }));
      var t = this.element.offsetWidth;
      if ((!this.width || !this.widthFixed) && (this.cells.forEach((s) => {
        var n = s.getWidth();
        n > t && (t = n);
      }), t)) {
        var i = t + 1;
        e ? this.setWidth(i) : (this.maxInitialWidth && !e && (i = Math.min(i, this.maxInitialWidth)), this.setWidthActual(i));
      }
    }
  }
  updateDefinition(e) {
    var t;
    return this.isGroup || this.parent.isGroup ? (console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"), Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")) : (t = Object.assign({}, this.getDefinition()), t = Object.assign(t, e), this.table.columnManager.addColumn(t, !1, this).then((i) => (t.field == this.field && (this.field = !1), this.delete().then(() => i.getComponent()))));
  }
  deleteCell(e) {
    var t = this.cells.indexOf(e);
    t > -1 && this.cells.splice(t, 1);
  }
  //////////////// Object Generation /////////////////
  getComponent() {
    return this.component || (this.component = new uu(this)), this.component;
  }
  getPosition() {
    return this.table.columnManager.getVisibleColumnsByIndex().indexOf(this) + 1;
  }
  getParentComponent() {
    return this.parent instanceof hs ? this.parent.getComponent() : !1;
  }
};
D(hs, "defaultOptionList", du);
let ps = hs;
class Or {
  constructor(e) {
    return this._row = e, new Proxy(this, {
      get: function(t, i, s) {
        return typeof t[i] < "u" ? t[i] : t._row.table.componentFunctionBinder.handle("row", t._row, i);
      }
    });
  }
  getData(e) {
    return this._row.getData(e);
  }
  getElement() {
    return this._row.getElement();
  }
  getCells() {
    var e = [];
    return this._row.getCells().forEach(function(t) {
      e.push(t.getComponent());
    }), e;
  }
  getCell(e) {
    var t = this._row.getCell(e);
    return t ? t.getComponent() : !1;
  }
  getIndex() {
    return this._row.getData("data")[this._row.table.options.index];
  }
  getPosition() {
    return this._row.getPosition();
  }
  watchPosition(e) {
    return this._row.watchPosition(e);
  }
  delete() {
    return this._row.delete();
  }
  scrollTo(e, t) {
    return this._row.table.rowManager.scrollToRow(this._row, e, t);
  }
  move(e, t) {
    this._row.moveToRow(e, t);
  }
  update(e) {
    return this._row.updateData(e);
  }
  normalizeHeight() {
    this._row.normalizeHeight(!0);
  }
  _getSelf() {
    return this._row;
  }
  reformat() {
    return this._row.reinitialize();
  }
  getTable() {
    return this._row.table;
  }
  getNextRow() {
    var e = this._row.nextRow();
    return e && e.getComponent();
  }
  getPrevRow() {
    var e = this._row.prevRow();
    return e && e.getComponent();
  }
}
class ot extends st {
  constructor(e, t, i = "row") {
    super(t.table), this.parent = t, this.data = {}, this.type = i, this.element = !1, this.modules = {}, this.cells = [], this.height = 0, this.heightStyled = "", this.manualHeight = !1, this.outerHeight = 0, this.initialized = !1, this.heightInitialized = !1, this.position = 0, this.positionWatchers = [], this.component = null, this.created = !1, this.setData(e);
  }
  create() {
    this.created || (this.created = !0, this.generateElement());
  }
  createElement() {
    var e = document.createElement("div");
    e.classList.add("tabulator-row"), e.setAttribute("role", "row"), this.element = e;
  }
  getElement() {
    return this.create(), this.element;
  }
  detachElement() {
    this.element && this.element.parentNode && this.element.parentNode.removeChild(this.element);
  }
  generateElement() {
    this.createElement(), this.dispatch("row-init", this);
  }
  generateCells() {
    this.cells = this.table.columnManager.generateCells(this);
  }
  //functions to setup on first render
  initialize(e, t) {
    if (this.create(), !this.initialized || e) {
      for (this.deleteCells(); this.element.firstChild; ) this.element.removeChild(this.element.firstChild);
      this.dispatch("row-layout-before", this), this.generateCells(), this.initialized = !0, this.table.columnManager.renderer.renderRowCells(this, t), e && this.normalizeHeight(), this.dispatch("row-layout", this), this.table.options.rowFormatter && this.table.options.rowFormatter(this.getComponent()), this.dispatch("row-layout-after", this);
    } else
      this.table.columnManager.renderer.rerenderRowCells(this, t);
  }
  rendered() {
    this.cells.forEach((e) => {
      e.cellRendered();
    });
  }
  reinitializeHeight() {
    this.heightInitialized = !1, this.element && this.element.offsetParent !== null && this.normalizeHeight(!0);
  }
  deinitialize() {
    this.initialized = !1;
  }
  deinitializeHeight() {
    this.heightInitialized = !1;
  }
  reinitialize(e) {
    this.initialized = !1, this.heightInitialized = !1, this.manualHeight || (this.height = 0, this.heightStyled = ""), this.element && this.element.offsetParent !== null && this.initialize(!0), this.dispatch("row-relayout", this);
  }
  //get heights when doing bulk row style calcs in virtual DOM
  calcHeight(e) {
    var t = 0, i = 0;
    this.table.options.rowHeight ? this.height = this.table.options.rowHeight : (i = this.calcMinHeight(), t = this.calcMaxHeight(), e ? this.height = Math.max(t, i) : this.height = this.manualHeight ? this.height : Math.max(t, i)), this.heightStyled = this.height ? this.height + "px" : "", this.outerHeight = this.element.offsetHeight;
  }
  calcMinHeight() {
    return this.table.options.resizableRows ? this.element.clientHeight : 0;
  }
  calcMaxHeight() {
    var e = 0;
    return this.cells.forEach(function(t) {
      var i = t.getHeight();
      i > e && (e = i);
    }), e;
  }
  //set of cells
  setCellHeight() {
    this.cells.forEach(function(e) {
      e.setHeight();
    }), this.heightInitialized = !0;
  }
  clearCellHeight() {
    this.cells.forEach(function(e) {
      e.clearHeight();
    });
  }
  //normalize the height of elements in the row
  normalizeHeight(e) {
    e && !this.table.options.rowHeight && this.clearCellHeight(), this.calcHeight(e), this.setCellHeight();
  }
  //set height of rows
  setHeight(e, t) {
    (this.height != e || t) && (this.manualHeight = !0, this.height = e, this.heightStyled = e ? e + "px" : "", this.setCellHeight(), this.outerHeight = this.element.offsetHeight, this.subscribedExternal("rowHeight") && this.dispatchExternal("rowHeight", this.getComponent()));
  }
  //return rows outer height
  getHeight() {
    return this.outerHeight;
  }
  //return rows outer Width
  getWidth() {
    return this.element.offsetWidth;
  }
  //////////////// Cell Management /////////////////
  deleteCell(e) {
    var t = this.cells.indexOf(e);
    t > -1 && this.cells.splice(t, 1);
  }
  //////////////// Data Management /////////////////
  setData(e) {
    this.data = this.chain("row-data-init-before", [this, e], void 0, e), this.dispatch("row-data-init-after", this);
  }
  //update the rows data
  updateData(e) {
    var t = this.element && Ee.elVisible(this.element), i = {}, s;
    return new Promise((n, r) => {
      typeof e == "string" && (e = JSON.parse(e)), this.dispatch("row-data-save-before", this), this.subscribed("row-data-changing") && (i = Object.assign(i, this.data), i = Object.assign(i, e)), s = this.chain("row-data-changing", [this, i, e], null, e);
      for (let o in s)
        this.data[o] = s[o];
      this.dispatch("row-data-save-after", this);
      for (let o in e)
        this.table.columnManager.getColumnsByFieldRoot(o).forEach((l) => {
          let h = this.getCell(l.getField());
          if (h) {
            let c = l.getFieldValue(s);
            h.getValue() !== c && (h.setValueProcessData(c), t && h.cellRendered());
          }
        });
      t ? (this.normalizeHeight(!0), this.table.options.rowFormatter && this.table.options.rowFormatter(this.getComponent())) : (this.initialized = !1, this.height = 0, this.heightStyled = ""), this.dispatch("row-data-changed", this, t, e), this.dispatchExternal("rowUpdated", this.getComponent()), this.subscribedExternal("dataChanged") && this.dispatchExternal("dataChanged", this.table.rowManager.getData()), n();
    });
  }
  getData(e) {
    return e ? this.chain("row-data-retrieve", [this, e], null, this.data) : this.data;
  }
  getCell(e) {
    var t = !1;
    return e = this.table.columnManager.findColumn(e), !this.initialized && this.cells.length === 0 && this.generateCells(), t = this.cells.find(function(i) {
      return i.column === e;
    }), t;
  }
  getCellIndex(e) {
    return this.cells.findIndex(function(t) {
      return t === e;
    });
  }
  findCell(e) {
    return this.cells.find((t) => t.element === e);
  }
  getCells() {
    return !this.initialized && this.cells.length === 0 && this.generateCells(), this.cells;
  }
  nextRow() {
    var e = this.table.rowManager.nextDisplayRow(this, !0);
    return e || !1;
  }
  prevRow() {
    var e = this.table.rowManager.prevDisplayRow(this, !0);
    return e || !1;
  }
  moveToRow(e, t) {
    var i = this.table.rowManager.findRow(e);
    i ? (this.table.rowManager.moveRowActual(this, i, !t), this.table.rowManager.refreshActiveData("display", !1, !0)) : console.warn("Move Error - No matching row found:", e);
  }
  ///////////////////// Actions  /////////////////////
  delete() {
    return this.dispatch("row-delete", this), this.deleteActual(), Promise.resolve();
  }
  deleteActual(e) {
    this.detachModules(), this.table.rowManager.deleteRow(this, e), this.deleteCells(), this.initialized = !1, this.heightInitialized = !1, this.element = !1, this.dispatch("row-deleted", this);
  }
  detachModules() {
    this.dispatch("row-deleting", this);
  }
  deleteCells() {
    var e = this.cells.length;
    for (let t = 0; t < e; t++)
      this.cells[0].delete();
  }
  wipe() {
    if (this.detachModules(), this.deleteCells(), this.element) {
      for (; this.element.firstChild; ) this.element.removeChild(this.element.firstChild);
      this.element.parentNode && this.element.parentNode.removeChild(this.element);
    }
    this.element = !1, this.modules = {};
  }
  isDisplayed() {
    return this.table.rowManager.getDisplayRows().includes(this);
  }
  getPosition() {
    return this.isDisplayed() ? this.position : !1;
  }
  setPosition(e) {
    e != this.position && (this.position = e, this.positionWatchers.forEach((t) => {
      t(this.position);
    }));
  }
  watchPosition(e) {
    this.positionWatchers.push(e), e(this.position);
  }
  getGroup() {
    return this.modules.group || !1;
  }
  //////////////// Object Generation /////////////////
  getComponent() {
    return this.component || (this.component = new Or(this)), this.component;
  }
}
var hg = {
  avg: function(A, e, t) {
    var i = 0, s = typeof t.precision < "u" ? t.precision : 2;
    return A.length && (i = A.reduce(function(n, r) {
      return Number(n) + Number(r);
    }), i = i / A.length, i = s !== !1 ? i.toFixed(s) : i), parseFloat(i).toString();
  },
  max: function(A, e, t) {
    var i = null, s = typeof t.precision < "u" ? t.precision : !1;
    return A.forEach(function(n) {
      n = Number(n), (n > i || i === null) && (i = n);
    }), i !== null ? s !== !1 ? i.toFixed(s) : i : "";
  },
  min: function(A, e, t) {
    var i = null, s = typeof t.precision < "u" ? t.precision : !1;
    return A.forEach(function(n) {
      n = Number(n), (n < i || i === null) && (i = n);
    }), i !== null ? s !== !1 ? i.toFixed(s) : i : "";
  },
  sum: function(A, e, t) {
    var i = 0, s = typeof t.precision < "u" ? t.precision : !1;
    return A.length && A.forEach(function(n) {
      n = Number(n), i += isNaN(n) ? 0 : Number(n);
    }), s !== !1 ? i.toFixed(s) : i;
  },
  concat: function(A, e, t) {
    var i = 0;
    return A.length && (i = A.reduce(function(s, n) {
      return String(s) + String(n);
    })), i;
  },
  count: function(A, e, t) {
    var i = 0;
    return A.length && A.forEach(function(s) {
      s && i++;
    }), i;
  },
  unique: function(A, e, t) {
    var i = A.filter((s, n) => (A || s === 0) && A.indexOf(s) === n);
    return i.length;
  }
};
const Si = class Si extends ne {
  constructor(e) {
    super(e), this.topCalcs = [], this.botCalcs = [], this.genColumn = !1, this.topElement = this.createElement(), this.botElement = this.createElement(), this.topRow = !1, this.botRow = !1, this.topInitialized = !1, this.botInitialized = !1, this.blocked = !1, this.recalcAfterBlock = !1, this.registerTableOption("columnCalcs", !0), this.registerColumnOption("topCalc"), this.registerColumnOption("topCalcParams"), this.registerColumnOption("topCalcFormatter"), this.registerColumnOption("topCalcFormatterParams"), this.registerColumnOption("bottomCalc"), this.registerColumnOption("bottomCalcParams"), this.registerColumnOption("bottomCalcFormatter"), this.registerColumnOption("bottomCalcFormatterParams");
  }
  createElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-calcs-holder"), e;
  }
  initialize() {
    this.genColumn = new ps({ field: "value" }, this), this.subscribe("cell-value-changed", this.cellValueChanged.bind(this)), this.subscribe("column-init", this.initializeColumnCheck.bind(this)), this.subscribe("row-deleted", this.rowsUpdated.bind(this)), this.subscribe("scroll-horizontal", this.scrollHorizontal.bind(this)), this.subscribe("row-added", this.rowsUpdated.bind(this)), this.subscribe("column-moved", this.recalcActiveRows.bind(this)), this.subscribe("column-add", this.recalcActiveRows.bind(this)), this.subscribe("data-refreshed", this.recalcActiveRowsRefresh.bind(this)), this.subscribe("table-redraw", this.tableRedraw.bind(this)), this.subscribe("rows-visible", this.visibleRows.bind(this)), this.subscribe("scrollbar-vertical", this.adjustForScrollbar.bind(this)), this.subscribe("redraw-blocked", this.blockRedraw.bind(this)), this.subscribe("redraw-restored", this.restoreRedraw.bind(this)), this.subscribe("table-redrawing", this.resizeHolderWidth.bind(this)), this.subscribe("column-resized", this.resizeHolderWidth.bind(this)), this.subscribe("column-show", this.resizeHolderWidth.bind(this)), this.subscribe("column-hide", this.resizeHolderWidth.bind(this)), this.registerTableFunction("getCalcResults", this.getResults.bind(this)), this.registerTableFunction("recalc", this.userRecalc.bind(this)), this.resizeHolderWidth();
  }
  resizeHolderWidth() {
    this.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + "px";
  }
  tableRedraw(e) {
    this.recalc(this.table.rowManager.activeRows), e && this.redraw();
  }
  blockRedraw() {
    this.blocked = !0, this.recalcAfterBlock = !1;
  }
  restoreRedraw() {
    this.blocked = !1, this.recalcAfterBlock && (this.recalcAfterBlock = !1, this.recalcActiveRowsRefresh());
  }
  ///////////////////////////////////
  ///////// Table Functions /////////
  ///////////////////////////////////
  userRecalc() {
    this.recalc(this.table.rowManager.activeRows);
  }
  ///////////////////////////////////
  ///////// Internal Logic //////////
  ///////////////////////////////////
  blockCheck() {
    return this.blocked && (this.recalcAfterBlock = !0), this.blocked;
  }
  visibleRows(e, t) {
    return this.topRow && t.unshift(this.topRow), this.botRow && t.push(this.botRow), t;
  }
  rowsUpdated(e) {
    this.table.options.groupBy ? this.recalcRowGroup(e) : this.recalcActiveRows();
  }
  recalcActiveRowsRefresh() {
    this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree ? this.recalcAll() : this.recalcActiveRows();
  }
  recalcActiveRows() {
    this.recalc(this.table.rowManager.activeRows);
  }
  cellValueChanged(e) {
    (e.column.definition.topCalc || e.column.definition.bottomCalc) && (this.table.options.groupBy ? ((this.table.options.columnCalcs == "table" || this.table.options.columnCalcs == "both") && this.recalcActiveRows(), this.table.options.columnCalcs != "table" && this.recalcRowGroup(e.row)) : this.recalcActiveRows());
  }
  initializeColumnCheck(e) {
    (e.definition.topCalc || e.definition.bottomCalc) && this.initializeColumn(e);
  }
  //initialize column calcs
  initializeColumn(e) {
    var t = e.definition, i = {
      topCalcParams: t.topCalcParams || {},
      botCalcParams: t.bottomCalcParams || {}
    };
    if (t.topCalc) {
      switch (typeof t.topCalc) {
        case "string":
          Si.calculations[t.topCalc] ? i.topCalc = Si.calculations[t.topCalc] : console.warn("Column Calc Error - No such calculation found, ignoring: ", t.topCalc);
          break;
        case "function":
          i.topCalc = t.topCalc;
          break;
      }
      i.topCalc && (e.modules.columnCalcs = i, this.topCalcs.push(e), this.table.options.columnCalcs != "group" && this.initializeTopRow());
    }
    if (t.bottomCalc) {
      switch (typeof t.bottomCalc) {
        case "string":
          Si.calculations[t.bottomCalc] ? i.botCalc = Si.calculations[t.bottomCalc] : console.warn("Column Calc Error - No such calculation found, ignoring: ", t.bottomCalc);
          break;
        case "function":
          i.botCalc = t.bottomCalc;
          break;
      }
      i.botCalc && (e.modules.columnCalcs = i, this.botCalcs.push(e), this.table.options.columnCalcs != "group" && this.initializeBottomRow());
    }
  }
  //dummy functions to handle being mock column manager
  registerColumnField() {
  }
  removeCalcs() {
    var e = !1;
    this.topInitialized && (this.topInitialized = !1, this.topElement.parentNode.removeChild(this.topElement), e = !0), this.botInitialized && (this.botInitialized = !1, this.footerRemove(this.botElement), e = !0), e && this.table.rowManager.adjustTableSize();
  }
  reinitializeCalcs() {
    this.topCalcs.length && this.initializeTopRow(), this.botCalcs.length && this.initializeBottomRow();
  }
  initializeTopRow() {
    var e = document.createDocumentFragment();
    this.topInitialized || (e.appendChild(document.createElement("br")), e.appendChild(this.topElement), this.table.columnManager.getContentsElement().insertBefore(e, this.table.columnManager.headersElement.nextSibling), this.topInitialized = !0);
  }
  initializeBottomRow() {
    this.botInitialized || (this.footerPrepend(this.botElement), this.botInitialized = !0);
  }
  scrollHorizontal(e) {
    this.botInitialized && this.botRow && (this.botElement.scrollLeft = e);
  }
  recalc(e) {
    var t, i;
    if (!this.blockCheck() && (this.topInitialized || this.botInitialized)) {
      if (t = this.rowsToData(e), this.topInitialized) {
        for (this.topRow && this.topRow.deleteCells(), i = this.generateRow("top", t), this.topRow = i; this.topElement.firstChild; ) this.topElement.removeChild(this.topElement.firstChild);
        this.topElement.appendChild(i.getElement()), i.initialize(!0);
      }
      if (this.botInitialized) {
        for (this.botRow && this.botRow.deleteCells(), i = this.generateRow("bottom", t), this.botRow = i; this.botElement.firstChild; ) this.botElement.removeChild(this.botElement.firstChild);
        this.botElement.appendChild(i.getElement()), i.initialize(!0);
      }
      this.table.rowManager.adjustTableSize(), this.table.modExists("frozenColumns") && this.table.modules.frozenColumns.layout();
    }
  }
  recalcRowGroup(e) {
    this.recalcGroup(this.table.modules.groupRows.getRowGroup(e));
  }
  recalcAll() {
    if ((this.topCalcs.length || this.botCalcs.length) && (this.table.options.columnCalcs !== "group" && this.recalcActiveRows(), this.table.options.groupBy && this.table.options.columnCalcs !== "table")) {
      var e = this.table.modules.groupRows.getChildGroups();
      e.forEach((t) => {
        this.recalcGroup(t);
      });
    }
  }
  recalcGroup(e) {
    var t, i;
    this.blockCheck() || e && e.calcs && (e.calcs.bottom && (t = this.rowsToData(e.rows), i = this.generateRowData("bottom", t), e.calcs.bottom.updateData(i), e.calcs.bottom.reinitialize()), e.calcs.top && (t = this.rowsToData(e.rows), i = this.generateRowData("top", t), e.calcs.top.updateData(i), e.calcs.top.reinitialize()));
  }
  //generate top stats row
  generateTopRow(e) {
    return this.generateRow("top", this.rowsToData(e));
  }
  //generate bottom stats row
  generateBottomRow(e) {
    return this.generateRow("bottom", this.rowsToData(e));
  }
  rowsToData(e) {
    var t = [], i = this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs, s = this.table.modules.dataTree;
    return e.forEach((n) => {
      var r;
      t.push(n.getData()), i && ((r = n.modules.dataTree) != null && r.open) && this.rowsToData(s.getFilteredTreeChildren(n)).forEach((o) => {
        t.push(n);
      });
    }), t;
  }
  //generate stats row
  generateRow(e, t) {
    var i = this.generateRowData(e, t), s;
    return this.table.modExists("mutator") && this.table.modules.mutator.disable(), s = new ot(i, this, "calc"), this.table.modExists("mutator") && this.table.modules.mutator.enable(), s.getElement().classList.add("tabulator-calcs", "tabulator-calcs-" + e), s.component = !1, s.getComponent = () => (s.component || (s.component = new lg(s)), s.component), s.generateCells = () => {
      var n = [];
      this.table.columnManager.columnsByIndex.forEach((r) => {
        this.genColumn.setField(r.getField()), this.genColumn.hozAlign = r.hozAlign, r.definition[e + "CalcFormatter"] && this.table.modExists("format") ? this.genColumn.modules.format = {
          formatter: this.table.modules.format.lookupFormatter(r.definition[e + "CalcFormatter"]),
          params: r.definition[e + "CalcFormatterParams"] || {}
        } : this.genColumn.modules.format = {
          formatter: this.table.modules.format.lookupFormatter("plaintext"),
          params: {}
        }, this.genColumn.definition.cssClass = r.definition.cssClass;
        var o = new rn(this.genColumn, s);
        o.getElement(), o.column = r, o.setWidth(), r.cells.push(o), n.push(o), r.visible || o.hide();
      }), s.cells = n;
    }, s;
  }
  //generate stats row
  generateRowData(e, t) {
    var i = {}, s = e == "top" ? this.topCalcs : this.botCalcs, n = e == "top" ? "topCalc" : "botCalc", r, o;
    return s.forEach(function(a) {
      var l = [];
      a.modules.columnCalcs && a.modules.columnCalcs[n] && (t.forEach(function(h) {
        l.push(a.getFieldValue(h));
      }), o = n + "Params", r = typeof a.modules.columnCalcs[o] == "function" ? a.modules.columnCalcs[o](l, t) : a.modules.columnCalcs[o], a.setFieldValue(i, a.modules.columnCalcs[n](l, t, r)));
    }), i;
  }
  hasTopCalcs() {
    return !!this.topCalcs.length;
  }
  hasBottomCalcs() {
    return !!this.botCalcs.length;
  }
  //handle table redraw
  redraw() {
    this.topRow && this.topRow.normalizeHeight(!0), this.botRow && this.botRow.normalizeHeight(!0);
  }
  //return the calculated
  getResults() {
    var e = {}, t;
    return this.table.options.groupBy && this.table.modExists("groupRows") ? (t = this.table.modules.groupRows.getGroups(!0), t.forEach((i) => {
      e[i.getKey()] = this.getGroupResults(i);
    })) : e = {
      top: this.topRow ? this.topRow.getData() : {},
      bottom: this.botRow ? this.botRow.getData() : {}
    }, e;
  }
  //get results from a group
  getGroupResults(e) {
    var t = e._getSelf(), i = e.getSubGroups(), s = {}, n = {};
    return i.forEach((r) => {
      s[r.getKey()] = this.getGroupResults(r);
    }), n = {
      top: t.calcs.top ? t.calcs.top.getData() : {},
      bottom: t.calcs.bottom ? t.calcs.bottom.getData() : {},
      groups: s
    }, n;
  }
  adjustForScrollbar(e) {
    this.botRow && (this.table.rtl ? this.botElement.style.paddingLeft = e + "px" : this.botElement.style.paddingRight = e + "px");
  }
};
D(Si, "moduleName", "columnCalcs"), //load defaults
D(Si, "calculations", hg);
let ca = Si;
class fu extends ne {
  constructor(e) {
    super(e), this.indent = 10, this.field = "", this.collapseEl = null, this.expandEl = null, this.branchEl = null, this.elementField = !1, this.startOpen = function() {
    }, this.registerTableOption("dataTree", !1), this.registerTableOption("dataTreeFilter", !0), this.registerTableOption("dataTreeSort", !0), this.registerTableOption("dataTreeElementColumn", !1), this.registerTableOption("dataTreeBranchElement", !0), this.registerTableOption("dataTreeChildIndent", 9), this.registerTableOption("dataTreeChildField", "_children"), this.registerTableOption("dataTreeCollapseElement", !1), this.registerTableOption("dataTreeExpandElement", !1), this.registerTableOption("dataTreeStartExpanded", !1), this.registerTableOption("dataTreeChildColumnCalcs", !1), this.registerTableOption("dataTreeSelectPropagate", !1), this.registerComponentFunction("row", "treeCollapse", this.collapseRow.bind(this)), this.registerComponentFunction("row", "treeExpand", this.expandRow.bind(this)), this.registerComponentFunction("row", "treeToggle", this.toggleRow.bind(this)), this.registerComponentFunction("row", "getTreeParent", this.getTreeParent.bind(this)), this.registerComponentFunction("row", "getTreeChildren", this.getRowChildren.bind(this)), this.registerComponentFunction("row", "addTreeChild", this.addTreeChildRow.bind(this)), this.registerComponentFunction("row", "isTreeExpanded", this.isRowExpanded.bind(this));
  }
  initialize() {
    if (this.table.options.dataTree) {
      var e = null, t = this.table.options;
      switch (this.field = t.dataTreeChildField, this.indent = t.dataTreeChildIndent, this.options("movableRows") && console.warn("The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior"), t.dataTreeBranchElement ? t.dataTreeBranchElement === !0 ? (this.branchEl = document.createElement("div"), this.branchEl.classList.add("tabulator-data-tree-branch")) : typeof t.dataTreeBranchElement == "string" ? (e = document.createElement("div"), e.innerHTML = t.dataTreeBranchElement, this.branchEl = e.firstChild) : this.branchEl = t.dataTreeBranchElement : (this.branchEl = document.createElement("div"), this.branchEl.classList.add("tabulator-data-tree-branch-empty")), t.dataTreeCollapseElement ? typeof t.dataTreeCollapseElement == "string" ? (e = document.createElement("div"), e.innerHTML = t.dataTreeCollapseElement, this.collapseEl = e.firstChild) : this.collapseEl = t.dataTreeCollapseElement : (this.collapseEl = document.createElement("div"), this.collapseEl.classList.add("tabulator-data-tree-control"), this.collapseEl.tabIndex = 0, this.collapseEl.innerHTML = "<div class='tabulator-data-tree-control-collapse'></div>"), t.dataTreeExpandElement ? typeof t.dataTreeExpandElement == "string" ? (e = document.createElement("div"), e.innerHTML = t.dataTreeExpandElement, this.expandEl = e.firstChild) : this.expandEl = t.dataTreeExpandElement : (this.expandEl = document.createElement("div"), this.expandEl.classList.add("tabulator-data-tree-control"), this.expandEl.tabIndex = 0, this.expandEl.innerHTML = "<div class='tabulator-data-tree-control-expand'></div>"), typeof t.dataTreeStartExpanded) {
        case "boolean":
          this.startOpen = function(i, s) {
            return t.dataTreeStartExpanded;
          };
          break;
        case "function":
          this.startOpen = t.dataTreeStartExpanded;
          break;
        default:
          this.startOpen = function(i, s) {
            return t.dataTreeStartExpanded[s];
          };
          break;
      }
      this.subscribe("row-init", this.initializeRow.bind(this)), this.subscribe("row-layout-after", this.layoutRow.bind(this)), this.subscribe("row-deleting", this.rowDeleting.bind(this)), this.subscribe("row-deleted", this.rowDelete.bind(this), 0), this.subscribe("row-data-changed", this.rowDataChanged.bind(this), 10), this.subscribe("cell-value-updated", this.cellValueChanged.bind(this)), this.subscribe("edit-cancelled", this.cellValueChanged.bind(this)), this.subscribe("column-moving-rows", this.columnMoving.bind(this)), this.subscribe("table-built", this.initializeElementField.bind(this)), this.subscribe("table-redrawing", this.tableRedrawing.bind(this)), this.registerDisplayHandler(this.getRows.bind(this), 30);
    }
  }
  tableRedrawing(e) {
    var t;
    e && (t = this.table.rowManager.getRows(), t.forEach((i) => {
      this.reinitializeRowChildren(i);
    }));
  }
  initializeElementField() {
    var e = this.table.columnManager.getFirstVisibleColumn();
    this.elementField = this.table.options.dataTreeElementColumn || (e ? e.field : !1);
  }
  getRowChildren(e) {
    return this.getTreeChildren(e, !0);
  }
  columnMoving() {
    var e = [];
    return this.table.rowManager.rows.forEach((t) => {
      e = e.concat(this.getTreeChildren(t, !1, !0));
    }), e;
  }
  rowDataChanged(e, t, i) {
    this.redrawNeeded(i) && (this.initializeRow(e), t && (this.layoutRow(e), this.refreshData(!0)));
  }
  cellValueChanged(e) {
    var t = e.column.getField();
    t === this.elementField && this.layoutRow(e.row);
  }
  initializeRow(e) {
    var t = e.getData()[this.field], i = Array.isArray(t), s = i || !i && typeof t == "object" && t !== null;
    !s && e.modules.dataTree && e.modules.dataTree.branchEl && e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl), !s && e.modules.dataTree && e.modules.dataTree.controlEl && e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl), e.modules.dataTree = {
      index: e.modules.dataTree ? e.modules.dataTree.index : 0,
      open: s ? e.modules.dataTree ? e.modules.dataTree.open : this.startOpen(e.getComponent(), 0) : !1,
      controlEl: e.modules.dataTree && s ? e.modules.dataTree.controlEl : !1,
      branchEl: e.modules.dataTree && s ? e.modules.dataTree.branchEl : !1,
      parent: e.modules.dataTree ? e.modules.dataTree.parent : !1,
      children: s
    };
  }
  reinitializeRowChildren(e) {
    var t = this.getTreeChildren(e, !1, !0);
    t.forEach(function(i) {
      i.reinitialize(!0);
    });
  }
  layoutRow(e) {
    var t = this.elementField ? e.getCell(this.elementField) : e.getCells()[0], i = t.getElement(), s = e.modules.dataTree;
    s.branchEl && (s.branchEl.parentNode && s.branchEl.parentNode.removeChild(s.branchEl), s.branchEl = !1), s.controlEl && (s.controlEl.parentNode && s.controlEl.parentNode.removeChild(s.controlEl), s.controlEl = !1), this.generateControlElement(e, i), e.getElement().classList.add("tabulator-tree-level-" + s.index), s.index && (this.branchEl ? (s.branchEl = this.branchEl.cloneNode(!0), i.insertBefore(s.branchEl, i.firstChild), this.table.rtl ? s.branchEl.style.marginRight = (s.branchEl.offsetWidth + s.branchEl.style.marginLeft) * (s.index - 1) + s.index * this.indent + "px" : s.branchEl.style.marginLeft = (s.branchEl.offsetWidth + s.branchEl.style.marginRight) * (s.index - 1) + s.index * this.indent + "px") : this.table.rtl ? i.style.paddingRight = parseInt(window.getComputedStyle(i, null).getPropertyValue("padding-right")) + s.index * this.indent + "px" : i.style.paddingLeft = parseInt(window.getComputedStyle(i, null).getPropertyValue("padding-left")) + s.index * this.indent + "px");
  }
  generateControlElement(e, t) {
    var i = e.modules.dataTree, s = i.controlEl;
    t = t || e.getCells()[0].getElement(), i.children !== !1 && (i.open ? (i.controlEl = this.collapseEl.cloneNode(!0), i.controlEl.addEventListener("click", (n) => {
      n.stopPropagation(), this.collapseRow(e);
    })) : (i.controlEl = this.expandEl.cloneNode(!0), i.controlEl.addEventListener("click", (n) => {
      n.stopPropagation(), this.expandRow(e);
    })), i.controlEl.addEventListener("mousedown", (n) => {
      n.stopPropagation();
    }), s && s.parentNode === t ? s.parentNode.replaceChild(i.controlEl, s) : t.insertBefore(i.controlEl, t.firstChild));
  }
  getRows(e) {
    var t = [];
    return e.forEach((i, s) => {
      var n, r;
      t.push(i), i instanceof ot && (i.create(), n = i.modules.dataTree, !n.index && n.children !== !1 && (r = this.getChildren(i, !1, !0), r.forEach((o) => {
        o.create(), t.push(o);
      })));
    }), t;
  }
  getChildren(e, t, i) {
    var s = e.modules.dataTree, n = [], r = [];
    return s.children !== !1 && (s.open || t) && (Array.isArray(s.children) || (s.children = this.generateChildren(e)), this.table.modExists("filter") && this.table.options.dataTreeFilter ? n = this.table.modules.filter.filter(s.children) : n = s.children, this.table.modExists("sort") && this.table.options.dataTreeSort && this.table.modules.sort.sort(n, i), n.forEach((o) => {
      r.push(o);
      var a = this.getChildren(o, !1, !0);
      a.forEach((l) => {
        r.push(l);
      });
    })), r;
  }
  generateChildren(e) {
    var t = [], i = e.getData()[this.field];
    return Array.isArray(i) || (i = [i]), i.forEach((s) => {
      var n = new ot(s || {}, this.table.rowManager);
      n.create(), n.modules.dataTree.index = e.modules.dataTree.index + 1, n.modules.dataTree.parent = e, n.modules.dataTree.children && (n.modules.dataTree.open = this.startOpen(n.getComponent(), n.modules.dataTree.index)), t.push(n);
    }), t;
  }
  expandRow(e, t) {
    var i = e.modules.dataTree;
    i.children !== !1 && (i.open = !0, e.reinitialize(), this.refreshData(!0), this.dispatchExternal("dataTreeRowExpanded", e.getComponent(), e.modules.dataTree.index));
  }
  collapseRow(e) {
    var t = e.modules.dataTree;
    t.children !== !1 && (t.open = !1, e.reinitialize(), this.refreshData(!0), this.dispatchExternal("dataTreeRowCollapsed", e.getComponent(), e.modules.dataTree.index));
  }
  toggleRow(e) {
    var t = e.modules.dataTree;
    t.children !== !1 && (t.open ? this.collapseRow(e) : this.expandRow(e));
  }
  isRowExpanded(e) {
    return e.modules.dataTree.open;
  }
  getTreeParent(e) {
    return e.modules.dataTree.parent ? e.modules.dataTree.parent.getComponent() : !1;
  }
  getTreeParentRoot(e) {
    return e.modules.dataTree && e.modules.dataTree.parent ? this.getTreeParentRoot(e.modules.dataTree.parent) : e;
  }
  getFilteredTreeChildren(e) {
    var t = e.modules.dataTree, i = [], s;
    return t.children && (Array.isArray(t.children) || (t.children = this.generateChildren(e)), this.table.modExists("filter") && this.table.options.dataTreeFilter ? s = this.table.modules.filter.filter(t.children) : s = t.children, s.forEach((n) => {
      n instanceof ot && i.push(n);
    })), i;
  }
  rowDeleting(e) {
    var t = e.modules.dataTree;
    t && t.children && Array.isArray(t.children) && t.children.forEach((i) => {
      i instanceof ot && i.wipe();
    });
  }
  rowDelete(e) {
    var t = e.modules.dataTree.parent, i;
    t && (i = this.findChildIndex(e, t), i !== !1 && t.data[this.field].splice(i, 1), t.data[this.field].length || delete t.data[this.field], this.initializeRow(t), this.layoutRow(t)), this.refreshData(!0);
  }
  addTreeChildRow(e, t, i, s) {
    var n = !1;
    typeof t == "string" && (t = JSON.parse(t)), Array.isArray(e.data[this.field]) || (e.data[this.field] = [], e.modules.dataTree.open = this.startOpen(e.getComponent(), e.modules.dataTree.index)), typeof s < "u" && (n = this.findChildIndex(s, e), n !== !1 && e.data[this.field].splice(i ? n : n + 1, 0, t)), n === !1 && (i ? e.data[this.field].unshift(t) : e.data[this.field].push(t)), this.initializeRow(e), this.layoutRow(e), this.refreshData(!0);
  }
  findChildIndex(e, t) {
    var i = !1;
    return typeof e == "object" ? e instanceof ot ? i = e.data : e instanceof Or ? i = e._getSelf().data : typeof HTMLElement < "u" && e instanceof HTMLElement ? t.modules.dataTree && (i = t.modules.dataTree.children.find((s) => s instanceof ot ? s.element === e : !1), i && (i = i.data)) : e === null && (i = !1) : typeof e > "u" ? i = !1 : i = t.data[this.field].find((s) => s.data[this.table.options.index] == e), i && (Array.isArray(t.data[this.field]) && (i = t.data[this.field].indexOf(i)), i == -1 && (i = !1)), i;
  }
  getTreeChildren(e, t, i) {
    var s = e.modules.dataTree, n = [];
    return s && s.children && (Array.isArray(s.children) || (s.children = this.generateChildren(e)), s.children.forEach((r) => {
      r instanceof ot && (n.push(t ? r.getComponent() : r), i && this.getTreeChildren(r, t, i).forEach((o) => {
        n.push(o);
      }));
    })), n;
  }
  getChildField() {
    return this.field;
  }
  redrawNeeded(e) {
    return (this.field ? typeof e[this.field] < "u" : !1) || (this.elementField ? typeof e[this.elementField] < "u" : !1);
  }
}
D(fu, "moduleName", "dataTree");
function cg(A, e = {}, t) {
  var i = e.delimiter ? e.delimiter : ",", s = [], n = [];
  A.forEach((r) => {
    var o = [];
    switch (r.type) {
      case "group":
        console.warn("Download Warning - CSV downloader cannot process row groups");
        break;
      case "calc":
        console.warn("Download Warning - CSV downloader cannot process column calculations");
        break;
      case "header":
        r.columns.forEach((a, l) => {
          a && a.depth === 1 && (n[l] = typeof a.value > "u" || a.value === null ? "" : '"' + String(a.value).split('"').join('""') + '"');
        });
        break;
      case "row":
        r.columns.forEach((a) => {
          if (a) {
            switch (typeof a.value) {
              case "object":
                a.value = a.value !== null ? JSON.stringify(a.value) : "";
                break;
              case "undefined":
                a.value = "";
                break;
            }
            o.push('"' + String(a.value).split('"').join('""') + '"');
          }
        }), s.push(o.join(i));
        break;
    }
  }), n.length && s.unshift(n.join(i)), s = s.join(`
`), e.bom && (s = "\uFEFF" + s), t(s, "text/csv");
}
function ug(A, e, t) {
  var i = [];
  A.forEach((s) => {
    var n = {};
    switch (s.type) {
      case "header":
        break;
      case "group":
        console.warn("Download Warning - JSON downloader cannot process row groups");
        break;
      case "calc":
        console.warn("Download Warning - JSON downloader cannot process column calculations");
        break;
      case "row":
        s.columns.forEach((r) => {
          r && (n[r.component.getTitleDownload() || r.component.getField()] = r.value);
        }), i.push(n);
        break;
    }
  }), i = JSON.stringify(i, null, "	"), t(i, "application/json");
}
function dg(A, e = {}, t) {
  var i = [], s = [], n = {}, r = e.rowGroupStyles || {
    fontStyle: "bold",
    fontSize: 12,
    cellPadding: 6,
    fillColor: 220
  }, o = e.rowCalcStyles || {
    fontStyle: "bold",
    fontSize: 10,
    cellPadding: 4,
    fillColor: 232
  }, a = e.jsPDF || {}, l = e.title ? e.title : "", h, c;
  a.orientation || (a.orientation = e.orientation || "landscape"), a.unit || (a.unit = "pt"), A.forEach((d) => {
    switch (d.type) {
      case "header":
        i.push(u(d));
        break;
      case "group":
        s.push(u(d, r));
        break;
      case "calc":
        s.push(u(d, o));
        break;
      case "row":
        s.push(u(d));
        break;
    }
  });
  function u(d, f) {
    var p = [];
    return d.columns.forEach((b) => {
      var w;
      if (b) {
        switch (typeof b.value) {
          case "object":
            b.value = b.value !== null ? JSON.stringify(b.value) : "";
            break;
          case "undefined":
            b.value = "";
            break;
        }
        w = {
          content: b.value,
          colSpan: b.width,
          rowSpan: b.height
        }, f && (w.styles = f), p.push(w);
      }
    }), p;
  }
  h = this.dependencyRegistry.lookup("jspdf", "jsPDF"), c = new h(a), e.autoTable && (typeof e.autoTable == "function" ? n = e.autoTable(c) || {} : n = e.autoTable), l && (n.didDrawPage = function(d) {
    c.text(l, 40, 30);
  }), n.head = i, n.body = s, c.autoTable(n), e.documentProcessing && e.documentProcessing(c), t(c.output("arraybuffer"), "application/pdf");
}
function fg(A, e, t) {
  var i = this, s = e.sheetName || "Sheet1", n = this.dependencyRegistry.lookup("XLSX"), r = n.utils.book_new(), o = new st(this), a = "compress" in e ? e.compress : !0, l = e.writeOptions || { bookType: "xlsx", bookSST: !0, compression: a }, h;
  l.type = "binary", r.SheetNames = [], r.Sheets = {};
  function c() {
    var f = [], p = [], b = {}, w = { s: { c: 0, r: 0 }, e: { c: A[0] ? A[0].columns.reduce((C, x) => C + (x && x.width ? x.width : 1), 0) : 0, r: A.length } };
    return A.forEach((C, x) => {
      var U = [];
      C.columns.forEach(function(E, H) {
        E ? (U.push(!(E.value instanceof Date) && typeof E.value == "object" ? JSON.stringify(E.value) : E.value), (E.width > 1 || E.height > -1) && (E.height > 1 || E.width > 1) && p.push({ s: { r: x, c: H }, e: { r: x + E.height - 1, c: H + E.width - 1 } })) : U.push("");
      }), f.push(U);
    }), n.utils.sheet_add_aoa(b, f), b["!ref"] = n.utils.encode_range(w), p.length && (b["!merges"] = p), b;
  }
  if (e.sheetOnly) {
    t(c());
    return;
  }
  if (e.sheets)
    for (var u in e.sheets)
      e.sheets[u] === !0 ? (r.SheetNames.push(u), r.Sheets[u] = c()) : (r.SheetNames.push(u), o.commsSend(e.sheets[u], "download", "intercept", {
        type: "xlsx",
        options: { sheetOnly: !0 },
        active: i.active,
        intercept: function(f) {
          r.Sheets[u] = f;
        }
      }));
  else
    r.SheetNames.push(s), r.Sheets[s] = c();
  e.documentProcessing && (r = e.documentProcessing(r));
  function d(f) {
    for (var p = new ArrayBuffer(f.length), b = new Uint8Array(p), w = 0; w != f.length; ++w) b[w] = f.charCodeAt(w) & 255;
    return p;
  }
  h = n.write(r, l), t(d(h), "application/octet-stream");
}
function gg(A, e, t) {
  this.modExists("export", !0) && t(this.modules.export.generateHTMLTable(A), "text/html");
}
function pg(A, e, t) {
  const i = [];
  A.forEach((s) => {
    const n = {};
    switch (s.type) {
      case "header":
        break;
      case "group":
        console.warn("Download Warning - JSON downloader cannot process row groups");
        break;
      case "calc":
        console.warn("Download Warning - JSON downloader cannot process column calculations");
        break;
      case "row":
        s.columns.forEach((r) => {
          r && (n[r.component.getTitleDownload() || r.component.getField()] = r.value);
        }), i.push(JSON.stringify(n));
        break;
    }
  }), t(i.join(`
`), "application/x-ndjson");
}
var mg = {
  csv: cg,
  json: ug,
  jsonLines: pg,
  pdf: dg,
  xlsx: fg,
  html: gg
};
const Ns = class Ns extends ne {
  constructor(e) {
    super(e), this.registerTableOption("downloadEncoder", function(t, i) {
      return new Blob([t], { type: i });
    }), this.registerTableOption("downloadConfig", {}), this.registerTableOption("downloadRowRange", "active"), this.registerColumnOption("download"), this.registerColumnOption("titleDownload");
  }
  initialize() {
    this.deprecatedOptionsCheck(), this.registerTableFunction("download", this.download.bind(this)), this.registerTableFunction("downloadToTab", this.downloadToTab.bind(this));
  }
  deprecatedOptionsCheck() {
  }
  ///////////////////////////////////
  ///////// Table Functions /////////
  ///////////////////////////////////
  downloadToTab(e, t, i, s) {
    this.download(e, t, i, s, !0);
  }
  ///////////////////////////////////
  ///////// Internal Logic //////////
  ///////////////////////////////////
  //trigger file download
  download(e, t, i, s, n) {
    var r = !1;
    function o(l, h) {
      n ? n === !0 ? this.triggerDownload(l, h, e, t, !0) : n(l) : this.triggerDownload(l, h, e, t);
    }
    if (typeof e == "function" ? r = e : Ns.downloaders[e] ? r = Ns.downloaders[e] : console.warn("Download Error - No such download type found: ", e), r) {
      var a = this.generateExportList(s);
      r.call(this.table, a, i || {}, o.bind(this));
    }
  }
  generateExportList(e) {
    var t = this.table.modules.export.generateExportList(this.table.options.downloadConfig, !1, e || this.table.options.downloadRowRange, "download"), i = this.table.options.groupHeaderDownload;
    return i && !Array.isArray(i) && (i = [i]), t.forEach((s) => {
      var n;
      s.type === "group" && (n = s.columns[0], i && i[s.indent] && (n.value = i[s.indent](n.value, s.component._group.getRowCount(), s.component._group.getData(), s.component)));
    }), t;
  }
  triggerDownload(e, t, i, s, n) {
    var r = document.createElement("a"), o = this.table.options.downloadEncoder(e, t);
    o && (n ? window.open(window.URL.createObjectURL(o)) : (s = s || "Tabulator." + (typeof i == "function" ? "txt" : i), navigator.msSaveOrOpenBlob ? navigator.msSaveOrOpenBlob(o, s) : (r.setAttribute("href", window.URL.createObjectURL(o)), r.setAttribute("download", s), r.style.display = "none", document.body.appendChild(r), r.click(), document.body.removeChild(r))), this.dispatchExternal("downloadComplete"));
  }
  commsReceived(e, t, i) {
    switch (t) {
      case "intercept":
        this.download(i.type, "", i.options, i.active, i.intercept);
        break;
    }
  }
};
D(Ns, "moduleName", "download"), //load defaults
D(Ns, "downloaders", mg);
let ua = Ns;
function Pr(A, e) {
  var t = e.mask, i = typeof e.maskLetterChar < "u" ? e.maskLetterChar : "A", s = typeof e.maskNumberChar < "u" ? e.maskNumberChar : "9", n = typeof e.maskWildcardChar < "u" ? e.maskWildcardChar : "*";
  function r(o) {
    var a = t[o];
    typeof a < "u" && a !== n && a !== i && a !== s && (A.value = A.value + "" + a, r(o + 1));
  }
  A.addEventListener("keydown", (o) => {
    var a = A.value.length, l = o.key;
    if (o.keyCode > 46 && !o.ctrlKey && !o.metaKey) {
      if (a >= t.length)
        return o.preventDefault(), o.stopPropagation(), !1;
      switch (t[a]) {
        case i:
          if (l.toUpperCase() == l.toLowerCase())
            return o.preventDefault(), o.stopPropagation(), !1;
          break;
        case s:
          if (isNaN(l))
            return o.preventDefault(), o.stopPropagation(), !1;
          break;
        case n:
          break;
        default:
          if (l !== t[a])
            return o.preventDefault(), o.stopPropagation(), !1;
      }
    }
  }), A.addEventListener("keyup", (o) => {
    o.keyCode > 46 && e.maskAutoFill && r(A.value.length);
  }), A.placeholder || (A.placeholder = t), e.maskAutoFill && r(A.value.length);
}
function bg(A, e, t, i, s) {
  var n = A.getValue(), r = document.createElement("input");
  if (r.setAttribute("type", s.search ? "search" : "text"), r.style.padding = "4px", r.style.width = "100%", r.style.boxSizing = "border-box", s.elementAttributes && typeof s.elementAttributes == "object")
    for (let a in s.elementAttributes)
      a.charAt(0) == "+" ? (a = a.slice(1), r.setAttribute(a, r.getAttribute(a) + s.elementAttributes["+" + a])) : r.setAttribute(a, s.elementAttributes[a]);
  r.value = typeof n < "u" ? n : "", e(function() {
    A.getType() === "cell" && (r.focus({ preventScroll: !0 }), r.style.height = "100%", s.selectContents && r.select());
  });
  function o(a) {
    (n === null || typeof n > "u") && r.value !== "" || r.value !== n ? t(r.value) && (n = r.value) : i();
  }
  return r.addEventListener("change", o), r.addEventListener("blur", o), r.addEventListener("keydown", function(a) {
    switch (a.keyCode) {
      case 13:
        o();
        break;
      case 27:
        i();
        break;
      case 35:
      case 36:
        a.stopPropagation();
        break;
    }
  }), s.mask && Pr(r, s), r;
}
function wg(A, e, t, i, s) {
  var n = A.getValue(), r = s.verticalNavigation || "hybrid", o = String(n !== null && typeof n < "u" ? n : ""), a = document.createElement("textarea"), l = 0;
  if (a.style.display = "block", a.style.padding = "2px", a.style.height = "100%", a.style.width = "100%", a.style.boxSizing = "border-box", a.style.whiteSpace = "pre-wrap", a.style.resize = "none", s.elementAttributes && typeof s.elementAttributes == "object")
    for (let c in s.elementAttributes)
      c.charAt(0) == "+" ? (c = c.slice(1), a.setAttribute(c, a.getAttribute(c) + s.elementAttributes["+" + c])) : a.setAttribute(c, s.elementAttributes[c]);
  a.value = o, e(function() {
    A.getType() === "cell" && (a.focus({ preventScroll: !0 }), a.style.height = "100%", a.scrollHeight, a.style.height = a.scrollHeight + "px", A.getRow().normalizeHeight(), s.selectContents && a.select());
  });
  function h(c) {
    (n === null || typeof n > "u") && a.value !== "" || a.value !== n ? (t(a.value) && (n = a.value), setTimeout(function() {
      A.getRow().normalizeHeight();
    }, 300)) : i();
  }
  return a.addEventListener("change", h), a.addEventListener("blur", h), a.addEventListener("keyup", function() {
    a.style.height = "";
    var c = a.scrollHeight;
    a.style.height = c + "px", c != l && (l = c, A.getRow().normalizeHeight());
  }), a.addEventListener("keydown", function(c) {
    switch (c.keyCode) {
      case 13:
        c.shiftKey && s.shiftEnterSubmit && h();
        break;
      case 27:
        i();
        break;
      case 38:
        (r == "editor" || r == "hybrid" && a.selectionStart) && (c.stopImmediatePropagation(), c.stopPropagation());
        break;
      case 40:
        (r == "editor" || r == "hybrid" && a.selectionStart !== a.value.length) && (c.stopImmediatePropagation(), c.stopPropagation());
        break;
      case 35:
      case 36:
        c.stopPropagation();
        break;
    }
  }), s.mask && Pr(a, s), a;
}
function vg(A, e, t, i, s) {
  var n = A.getValue(), r = s.verticalNavigation || "editor", o = document.createElement("input");
  if (o.setAttribute("type", "number"), typeof s.max < "u" && o.setAttribute("max", s.max), typeof s.min < "u" && o.setAttribute("min", s.min), typeof s.step < "u" && o.setAttribute("step", s.step), o.style.padding = "4px", o.style.width = "100%", o.style.boxSizing = "border-box", s.elementAttributes && typeof s.elementAttributes == "object")
    for (let h in s.elementAttributes)
      h.charAt(0) == "+" ? (h = h.slice(1), o.setAttribute(h, o.getAttribute(h) + s.elementAttributes["+" + h])) : o.setAttribute(h, s.elementAttributes[h]);
  o.value = n;
  var a = function(h) {
    l();
  };
  e(function() {
    A.getType() === "cell" && (o.removeEventListener("blur", a), o.focus({ preventScroll: !0 }), o.style.height = "100%", o.addEventListener("blur", a), s.selectContents && o.select());
  });
  function l() {
    var h = o.value;
    !isNaN(h) && h !== "" && (h = Number(h)), h !== n ? t(h) && (n = h) : i();
  }
  return o.addEventListener("keydown", function(h) {
    switch (h.keyCode) {
      case 13:
        l();
        break;
      case 27:
        i();
        break;
      case 38:
      case 40:
        r == "editor" && (h.stopImmediatePropagation(), h.stopPropagation());
        break;
      case 35:
      case 36:
        h.stopPropagation();
        break;
    }
  }), s.mask && Pr(o, s), o;
}
function Bg(A, e, t, i, s) {
  var n = A.getValue(), r = document.createElement("input");
  if (r.setAttribute("type", "range"), typeof s.max < "u" && r.setAttribute("max", s.max), typeof s.min < "u" && r.setAttribute("min", s.min), typeof s.step < "u" && r.setAttribute("step", s.step), r.style.padding = "4px", r.style.width = "100%", r.style.boxSizing = "border-box", s.elementAttributes && typeof s.elementAttributes == "object")
    for (let a in s.elementAttributes)
      a.charAt(0) == "+" ? (a = a.slice(1), r.setAttribute(a, r.getAttribute(a) + s.elementAttributes["+" + a])) : r.setAttribute(a, s.elementAttributes[a]);
  r.value = n, e(function() {
    A.getType() === "cell" && (r.focus({ preventScroll: !0 }), r.style.height = "100%");
  });
  function o() {
    var a = r.value;
    !isNaN(a) && a !== "" && (a = Number(a)), a != n ? t(a) && (n = a) : i();
  }
  return r.addEventListener("blur", function(a) {
    o();
  }), r.addEventListener("keydown", function(a) {
    switch (a.keyCode) {
      case 13:
        o();
        break;
      case 27:
        i();
        break;
    }
  }), r;
}
function Cg(A, e, t, i, s) {
  var n = s.format, r = s.verticalNavigation || "editor", o = n ? window.DateTime || luxon.DateTime : null, a = A.getValue(), l = document.createElement("input");
  function h(u) {
    var d;
    return o.isDateTime(u) ? d = u : n === "iso" ? d = o.fromISO(String(u)) : d = o.fromFormat(String(u), n), d.toFormat("yyyy-MM-dd");
  }
  if (l.type = "date", l.style.padding = "4px", l.style.width = "100%", l.style.boxSizing = "border-box", s.max && l.setAttribute("max", n ? h(s.max) : s.max), s.min && l.setAttribute("min", n ? h(s.min) : s.min), s.elementAttributes && typeof s.elementAttributes == "object")
    for (let u in s.elementAttributes)
      u.charAt(0) == "+" ? (u = u.slice(1), l.setAttribute(u, l.getAttribute(u) + s.elementAttributes["+" + u])) : l.setAttribute(u, s.elementAttributes[u]);
  a = typeof a < "u" ? a : "", n && (o ? a = h(a) : console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")), l.value = a, e(function() {
    A.getType() === "cell" && (l.focus({ preventScroll: !0 }), l.style.height = "100%", s.selectContents && l.select());
  });
  function c() {
    var u = l.value, d;
    if ((a === null || typeof a > "u") && u !== "" || u !== a) {
      if (u && n)
        switch (d = o.fromFormat(String(u), "yyyy-MM-dd"), n) {
          case !0:
            u = d;
            break;
          case "iso":
            u = d.toISO();
            break;
          default:
            u = d.toFormat(n);
        }
      t(u) && (a = l.value);
    } else
      i();
  }
  return l.addEventListener("blur", function(u) {
    (u.relatedTarget || u.rangeParent || u.explicitOriginalTarget !== l) && c();
  }), l.addEventListener("keydown", function(u) {
    switch (u.keyCode) {
      case 13:
        c();
        break;
      case 27:
        i();
        break;
      case 35:
      case 36:
        u.stopPropagation();
        break;
      case 38:
      case 40:
        r == "editor" && (u.stopImmediatePropagation(), u.stopPropagation());
        break;
    }
  }), l;
}
function yg(A, e, t, i, s) {
  var n = s.format, r = s.verticalNavigation || "editor", o = n ? window.DateTime || luxon.DateTime : null, a, l = A.getValue(), h = document.createElement("input");
  if (h.type = "time", h.style.padding = "4px", h.style.width = "100%", h.style.boxSizing = "border-box", s.elementAttributes && typeof s.elementAttributes == "object")
    for (let u in s.elementAttributes)
      u.charAt(0) == "+" ? (u = u.slice(1), h.setAttribute(u, h.getAttribute(u) + s.elementAttributes["+" + u])) : h.setAttribute(u, s.elementAttributes[u]);
  l = typeof l < "u" ? l : "", n && (o ? (o.isDateTime(l) ? a = l : n === "iso" ? a = o.fromISO(String(l)) : a = o.fromFormat(String(l), n), l = a.toFormat("HH:mm")) : console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")), h.value = l, e(function() {
    A.getType() == "cell" && (h.focus({ preventScroll: !0 }), h.style.height = "100%", s.selectContents && h.select());
  });
  function c() {
    var u = h.value, d;
    if ((l === null || typeof l > "u") && u !== "" || u !== l) {
      if (u && n)
        switch (d = o.fromFormat(String(u), "hh:mm"), n) {
          case !0:
            u = d;
            break;
          case "iso":
            u = d.toISO();
            break;
          default:
            u = d.toFormat(n);
        }
      t(u) && (l = h.value);
    } else
      i();
  }
  return h.addEventListener("blur", function(u) {
    (u.relatedTarget || u.rangeParent || u.explicitOriginalTarget !== h) && c();
  }), h.addEventListener("keydown", function(u) {
    switch (u.keyCode) {
      case 13:
        c();
        break;
      case 27:
        i();
        break;
      case 35:
      case 36:
        u.stopPropagation();
        break;
      case 38:
      case 40:
        r == "editor" && (u.stopImmediatePropagation(), u.stopPropagation());
        break;
    }
  }), h;
}
function Eg(A, e, t, i, s) {
  var n = s.format, r = s.verticalNavigation || "editor", o = n ? this.table.dependencyRegistry.lookup(["luxon", "DateTime"], "DateTime") : null, a, l = A.getValue(), h = document.createElement("input");
  if (h.type = "datetime-local", h.style.padding = "4px", h.style.width = "100%", h.style.boxSizing = "border-box", s.elementAttributes && typeof s.elementAttributes == "object")
    for (let u in s.elementAttributes)
      u.charAt(0) == "+" ? (u = u.slice(1), h.setAttribute(u, h.getAttribute(u) + s.elementAttributes["+" + u])) : h.setAttribute(u, s.elementAttributes[u]);
  l = typeof l < "u" ? l : "", n && (o ? (o.isDateTime(l) ? a = l : n === "iso" ? a = o.fromISO(String(l)) : a = o.fromFormat(String(l), n), l = a.toFormat("yyyy-MM-dd") + "T" + a.toFormat("HH:mm")) : console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")), h.value = l, e(function() {
    A.getType() === "cell" && (h.focus({ preventScroll: !0 }), h.style.height = "100%", s.selectContents && h.select());
  });
  function c() {
    var u = h.value, d;
    if ((l === null || typeof l > "u") && u !== "" || u !== l) {
      if (u && n)
        switch (d = o.fromISO(String(u)), n) {
          case !0:
            u = d;
            break;
          case "iso":
            u = d.toISO();
            break;
          default:
            u = d.toFormat(n);
        }
      t(u) && (l = h.value);
    } else
      i();
  }
  return h.addEventListener("blur", function(u) {
    (u.relatedTarget || u.rangeParent || u.explicitOriginalTarget !== h) && c();
  }), h.addEventListener("keydown", function(u) {
    switch (u.keyCode) {
      case 13:
        c();
        break;
      case 27:
        i();
        break;
      case 35:
      case 36:
        u.stopPropagation();
        break;
      case 38:
      case 40:
        r == "editor" && (u.stopImmediatePropagation(), u.stopPropagation());
        break;
    }
  }), h;
}
let Fg = class {
  constructor(e, t, i, s, n, r) {
    this.edit = e, this.table = e.table, this.cell = t, this.params = this._initializeParams(r), this.data = [], this.displayItems = [], this.currentItems = [], this.focusedItem = null, this.input = this._createInputElement(), this.listEl = this._createListElement(), this.initialValues = null, this.isFilter = t.getType() === "header", this.filterTimeout = null, this.filtered = !1, this.typing = !1, this.values = [], this.popup = null, this.listIteration = 0, this.lastAction = "", this.filterTerm = "", this.blurable = !0, this.actions = {
      success: s,
      cancel: n
    }, this._deprecatedOptionsCheck(), this._initializeValue(), i(this._onRendered.bind(this));
  }
  _deprecatedOptionsCheck() {
  }
  _initializeValue() {
    var e = this.cell.getValue();
    typeof e > "u" && typeof this.params.defaultValue < "u" && (e = this.params.defaultValue), this.initialValues = this.params.multiselect ? e : [e], this.isFilter && (this.input.value = this.initialValues ? this.initialValues.join(",") : "", this.headerFilterInitialListGen());
  }
  _onRendered() {
    var e = this.cell.getElement();
    function t(i) {
      i.stopPropagation();
    }
    this.isFilter || (this.input.style.height = "100%", this.input.focus({ preventScroll: !0 })), e.addEventListener("click", t), setTimeout(() => {
      e.removeEventListener("click", t);
    }, 1e3), this.input.addEventListener("mousedown", this._preventPopupBlur.bind(this));
  }
  _createListElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-edit-list"), e.addEventListener("mousedown", this._preventBlur.bind(this)), e.addEventListener("keydown", this._inputKeyDown.bind(this)), e;
  }
  _setListWidth() {
    var e = this.isFilter ? this.input : this.cell.getElement();
    this.listEl.style.minWidth = e.offsetWidth + "px", this.params.maxWidth && (this.params.maxWidth === !0 ? this.listEl.style.maxWidth = e.offsetWidth + "px" : typeof this.params.maxWidth == "number" ? this.listEl.style.maxWidth = this.params.maxWidth + "px" : this.listEl.style.maxWidth = this.params.maxWidth);
  }
  _createInputElement() {
    var e = this.params.elementAttributes, t = document.createElement("input");
    if (t.setAttribute("type", this.params.clearable ? "search" : "text"), t.style.padding = "4px", t.style.width = "100%", t.style.boxSizing = "border-box", this.params.autocomplete || (t.style.cursor = "default", t.style.caretColor = "transparent"), e && typeof e == "object")
      for (let i in e)
        i.charAt(0) == "+" ? (i = i.slice(1), t.setAttribute(i, t.getAttribute(i) + e["+" + i])) : t.setAttribute(i, e[i]);
    return this.params.mask && Pr(t, this.params), this._bindInputEvents(t), t;
  }
  _initializeParams(e) {
    var t = ["values", "valuesURL", "valuesLookup"], i;
    return e = Object.assign({}, e), e.verticalNavigation = e.verticalNavigation || "editor", e.placeholderLoading = typeof e.placeholderLoading > "u" ? "Searching ..." : e.placeholderLoading, e.placeholderEmpty = typeof e.placeholderEmpty > "u" ? "No Results Found" : e.placeholderEmpty, e.filterDelay = typeof e.filterDelay > "u" ? 300 : e.filterDelay, e.emptyValue = Object.keys(e).includes("emptyValue") ? e.emptyValue : "", i = Object.keys(e).filter((s) => t.includes(s)).length, i ? i > 1 && console.warn("list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor") : console.warn("list editor config error - either the values, valuesURL, or valuesLookup option must be set"), e.autocomplete ? e.multiselect && (e.multiselect = !1, console.warn("list editor config error - multiselect option is not available when autocomplete is enabled")) : (e.freetext && (e.freetext = !1, console.warn("list editor config error - freetext option is only available when autocomplete is enabled")), e.filterFunc && (e.filterFunc = !1, console.warn("list editor config error - filterFunc option is only available when autocomplete is enabled")), e.filterRemote && (e.filterRemote = !1, console.warn("list editor config error - filterRemote option is only available when autocomplete is enabled")), e.mask && (e.mask = !1, console.warn("list editor config error - mask option is only available when autocomplete is enabled")), e.allowEmpty && (e.allowEmpty = !1, console.warn("list editor config error - allowEmpty option is only available when autocomplete is enabled")), e.listOnEmpty && (e.listOnEmpty = !1, console.warn("list editor config error - listOnEmpty option is only available when autocomplete is enabled"))), e.filterRemote && !(typeof e.valuesLookup == "function" || e.valuesURL) && (e.filterRemote = !1, console.warn("list editor config error - filterRemote option should only be used when values list is populated from a remote source")), e;
  }
  //////////////////////////////////////
  ////////// Event Handling ////////////
  //////////////////////////////////////
  _bindInputEvents(e) {
    e.addEventListener("focus", this._inputFocus.bind(this)), e.addEventListener("click", this._inputClick.bind(this)), e.addEventListener("blur", this._inputBlur.bind(this)), e.addEventListener("keydown", this._inputKeyDown.bind(this)), e.addEventListener("search", this._inputSearch.bind(this)), this.params.autocomplete && e.addEventListener("keyup", this._inputKeyUp.bind(this));
  }
  _inputFocus(e) {
    this.rebuildOptionsList();
  }
  _filter() {
    this.params.filterRemote ? (clearTimeout(this.filterTimeout), this.filterTimeout = setTimeout(() => {
      this.rebuildOptionsList();
    }, this.params.filterDelay)) : this._filterList();
  }
  _inputClick(e) {
    e.stopPropagation();
  }
  _inputBlur(e) {
    this.blurable && (this.popup ? this.popup.hide() : this._resolveValue(!0));
  }
  _inputSearch() {
    this._clearChoices();
  }
  _inputKeyDown(e) {
    switch (e.keyCode) {
      case 38:
        this._keyUp(e);
        break;
      case 40:
        this._keyDown(e);
        break;
      case 37:
      case 39:
        this._keySide(e);
        break;
      case 13:
        this._keyEnter();
        break;
      case 27:
        this._keyEsc();
        break;
      case 36:
      case 35:
        this._keyHomeEnd(e);
        break;
      case 9:
        this._keyTab(e);
        break;
      default:
        this._keySelectLetter(e);
    }
  }
  _inputKeyUp(e) {
    switch (e.keyCode) {
      case 38:
      case 37:
      case 39:
      case 40:
      case 13:
      case 27:
        break;
      default:
        this._keyAutoCompLetter(e);
    }
  }
  _preventPopupBlur() {
    this.popup && this.popup.blockHide(), setTimeout(() => {
      this.popup && this.popup.restoreHide();
    }, 10);
  }
  _preventBlur() {
    this.blurable = !1, setTimeout(() => {
      this.blurable = !0;
    }, 10);
  }
  //////////////////////////////////////
  //////// Keyboard Navigation /////////
  //////////////////////////////////////
  _keyTab(e) {
    this.params.autocomplete && this.lastAction === "typing" ? this._resolveValue(!0) : this.focusedItem && this._chooseItem(this.focusedItem, !0);
  }
  _keyUp(e) {
    var t = this.displayItems.indexOf(this.focusedItem);
    (this.params.verticalNavigation == "editor" || this.params.verticalNavigation == "hybrid" && t) && (e.stopImmediatePropagation(), e.stopPropagation(), e.preventDefault(), t > 0 && this._focusItem(this.displayItems[t - 1]));
  }
  _keyDown(e) {
    var t = this.displayItems.indexOf(this.focusedItem);
    (this.params.verticalNavigation == "editor" || this.params.verticalNavigation == "hybrid" && t < this.displayItems.length - 1) && (e.stopImmediatePropagation(), e.stopPropagation(), e.preventDefault(), t < this.displayItems.length - 1 && (t == -1 ? this._focusItem(this.displayItems[0]) : this._focusItem(this.displayItems[t + 1])));
  }
  _keySide(e) {
    this.params.autocomplete || (e.stopImmediatePropagation(), e.stopPropagation(), e.preventDefault());
  }
  _keyEnter(e) {
    this.params.autocomplete && this.lastAction === "typing" ? this._resolveValue(!0) : this.focusedItem && this._chooseItem(this.focusedItem);
  }
  _keyEsc(e) {
    this._cancel();
  }
  _keyHomeEnd(e) {
    this.params.autocomplete && e.stopImmediatePropagation();
  }
  _keySelectLetter(e) {
    this.params.autocomplete || (e.preventDefault(), e.keyCode >= 38 && e.keyCode <= 90 && this._scrollToValue(e.keyCode));
  }
  _keyAutoCompLetter(e) {
    this._filter(), this.lastAction = "typing", this.typing = !0;
  }
  _scrollToValue(e) {
    clearTimeout(this.filterTimeout);
    var t = String.fromCharCode(e).toLowerCase();
    this.filterTerm += t.toLowerCase();
    var i = this.displayItems.find((s) => typeof s.label < "u" && s.label.toLowerCase().startsWith(this.filterTerm));
    i && this._focusItem(i), this.filterTimeout = setTimeout(() => {
      this.filterTerm = "";
    }, 800);
  }
  _focusItem(e) {
    this.lastAction = "focus", this.focusedItem && this.focusedItem.element && this.focusedItem.element.classList.remove("focused"), this.focusedItem = e, e && e.element && (e.element.classList.add("focused"), e.element.scrollIntoView({ behavior: "smooth", block: "nearest", inline: "start" }));
  }
  //////////////////////////////////////
  /////// Data List Generation /////////
  //////////////////////////////////////
  headerFilterInitialListGen() {
    this._generateOptions(!0);
  }
  rebuildOptionsList() {
    this._generateOptions().then(this._sortOptions.bind(this)).then(this._buildList.bind(this)).then(this._showList.bind(this)).catch((e) => {
      Number.isInteger(e) || console.error("List generation error", e);
    });
  }
  _filterList() {
    this._buildList(this._filterOptions()), this._showList();
  }
  _generateOptions(e) {
    var t = [], i = ++this.listIteration;
    return this.filtered = !1, this.params.values ? t = this.params.values : this.params.valuesURL ? t = this._ajaxRequest(this.params.valuesURL, this.input.value) : typeof this.params.valuesLookup == "function" ? t = this.params.valuesLookup(this.cell, this.input.value) : this.params.valuesLookup && (t = this._uniqueColumnValues(this.params.valuesLookupField)), t instanceof Promise ? (e || this._addPlaceholder(this.params.placeholderLoading), t.then().then((s) => this.listIteration === i ? this._parseList(s) : Promise.reject(i))) : Promise.resolve(this._parseList(t));
  }
  _addPlaceholder(e) {
    var t = document.createElement("div");
    typeof e == "function" && (e = e(this.cell.getComponent(), this.listEl)), e && (this._clearList(), e instanceof HTMLElement ? t = e : (t.classList.add("tabulator-edit-list-placeholder"), t.innerHTML = e), this.listEl.appendChild(t), this._showList());
  }
  _ajaxRequest(e, t) {
    var i = this.params.filterRemote ? { term: t } : {};
    return e = hu(e, {}, i), fetch(e).then((s) => s.ok ? s.json().catch((n) => (console.warn("List Ajax Load Error - Invalid JSON returned", n), Promise.reject(n))) : (console.error("List Ajax Load Error - Connection Error: " + s.status, s.statusText), Promise.reject(s))).catch((s) => (console.error("List Ajax Load Error - Connection Error: ", s), Promise.reject(s)));
  }
  _uniqueColumnValues(e) {
    var t = {}, i = this.table.getData(this.params.valuesLookup), s;
    return e ? s = this.table.columnManager.getColumnByField(e) : s = this.cell.getColumn()._getSelf(), s ? i.forEach((n) => {
      var r = s.getFieldValue(n);
      this._emptyValueCheck(r) || (this.params.multiselect && Array.isArray(r) ? r.forEach((o) => {
        this._emptyValueCheck(o) || (t[o] = !0);
      }) : t[r] = !0);
    }) : (console.warn("unable to find matching column to create select lookup list:", e), t = []), Object.keys(t);
  }
  _emptyValueCheck(e) {
    return e === null || typeof e > "u" || e === "";
  }
  _parseList(e) {
    var t = [];
    return Array.isArray(e) || (e = Object.entries(e).map(([i, s]) => ({
      label: s,
      value: i
    }))), e.forEach((i) => {
      typeof i != "object" && (i = {
        label: i,
        value: i
      }), this._parseListItem(i, t, 0);
    }), !this.currentItems.length && this.params.freetext && (this.input.value = this.initialValues, this.typing = !0, this.lastAction = "typing"), this.data = t, t;
  }
  _parseListItem(e, t, i) {
    var s = {};
    e.options ? s = this._parseListGroup(e, i + 1) : (s = {
      label: e.label,
      value: e.value,
      itemParams: e.itemParams,
      elementAttributes: e.elementAttributes,
      element: !1,
      selected: !1,
      visible: !0,
      level: i,
      original: e
    }, this.initialValues && this.initialValues.indexOf(e.value) > -1 && this._chooseItem(s, !0)), t.push(s);
  }
  _parseListGroup(e, t) {
    var i = {
      label: e.label,
      group: !0,
      itemParams: e.itemParams,
      elementAttributes: e.elementAttributes,
      element: !1,
      visible: !0,
      level: t,
      options: [],
      original: e
    };
    return e.options.forEach((s) => {
      this._parseListItem(s, i.options, t);
    }), i;
  }
  _sortOptions(e) {
    var t;
    return this.params.sort && (t = typeof this.params.sort == "function" ? this.params.sort : this._defaultSortFunction.bind(this), this._sortGroup(t, e)), e;
  }
  _sortGroup(e, t) {
    t.sort((i, s) => e(i.label, s.label, i.value, s.value, i.original, s.original)), t.forEach((i) => {
      i.group && this._sortGroup(e, i.options);
    });
  }
  _defaultSortFunction(e, t) {
    var i, s, n, r, o = 0, a, l = /(\d+)|(\D+)/g, h = /\d/, c = 0;
    if (this.params.sort === "desc" && ([e, t] = [t, e]), !e && e !== 0)
      c = !t && t !== 0 ? 0 : -1;
    else if (!t && t !== 0)
      c = 1;
    else {
      if (isFinite(e) && isFinite(t)) return e - t;
      if (i = String(e).toLowerCase(), s = String(t).toLowerCase(), i === s) return 0;
      if (!(h.test(i) && h.test(s))) return i > s ? 1 : -1;
      for (i = i.match(l), s = s.match(l), a = i.length > s.length ? s.length : i.length; o < a; )
        if (n = i[o], r = s[o++], n !== r)
          return isFinite(n) && isFinite(r) ? (n.charAt(0) === "0" && (n = "." + n), r.charAt(0) === "0" && (r = "." + r), n - r) : n > r ? 1 : -1;
      return i.length > s.length;
    }
    return c;
  }
  _filterOptions() {
    var e = this.params.filterFunc || this._defaultFilterFunc, t = this.input.value;
    return t ? (this.filtered = !0, this.data.forEach((i) => {
      this._filterItem(e, t, i);
    })) : this.filtered = !1, this.data;
  }
  _filterItem(e, t, i) {
    var s = !1;
    return i.group ? (i.options.forEach((n) => {
      this._filterItem(e, t, n) && (s = !0);
    }), i.visible = s) : i.visible = e(t, i.label, i.value, i.original), i.visible;
  }
  _defaultFilterFunc(e, t, i, s) {
    return e = String(e).toLowerCase(), t !== null && typeof t < "u" && (String(t).toLowerCase().indexOf(e) > -1 || String(i).toLowerCase().indexOf(e) > -1);
  }
  //////////////////////////////////////
  /////////// Display List /////////////
  //////////////////////////////////////
  _clearList() {
    for (; this.listEl.firstChild; ) this.listEl.removeChild(this.listEl.firstChild);
    this.displayItems = [];
  }
  _buildList(e) {
    this._clearList(), e.forEach((t) => {
      this._buildItem(t);
    }), this.displayItems.length || this._addPlaceholder(this.params.placeholderEmpty);
  }
  _buildItem(e) {
    var t = e.element, i;
    if (!this.filtered || e.visible) {
      if (!t) {
        if (t = document.createElement("div"), t.tabIndex = 0, i = this.params.itemFormatter ? this.params.itemFormatter(e.label, e.value, e.original, t) : e.label, i instanceof HTMLElement ? t.appendChild(i) : t.innerHTML = i, e.group ? t.classList.add("tabulator-edit-list-group") : t.classList.add("tabulator-edit-list-item"), t.classList.add("tabulator-edit-list-group-level-" + e.level), e.elementAttributes && typeof e.elementAttributes == "object")
          for (let s in e.elementAttributes)
            s.charAt(0) == "+" ? (s = s.slice(1), t.setAttribute(s, this.input.getAttribute(s) + e.elementAttributes["+" + s])) : t.setAttribute(s, e.elementAttributes[s]);
        e.group ? t.addEventListener("click", this._groupClick.bind(this, e)) : t.addEventListener("click", this._itemClick.bind(this, e)), t.addEventListener("mousedown", this._preventBlur.bind(this)), e.element = t;
      }
      this._styleItem(e), this.listEl.appendChild(t), e.group ? e.options.forEach((s) => {
        this._buildItem(s);
      }) : this.displayItems.push(e);
    }
  }
  _showList() {
    var e = this.popup && this.popup.isVisible();
    if (this.input.parentNode) {
      if (this.params.autocomplete && this.input.value === "" && !this.params.listOnEmpty) {
        this.popup && this.popup.hide(!0);
        return;
      }
      this._setListWidth(), this.popup || (this.popup = this.edit.popup(this.listEl)), this.popup.show(this.cell.getElement(), "bottom"), e || setTimeout(() => {
        this.popup.hideOnBlur(this._resolveValue.bind(this, !0));
      }, 10);
    }
  }
  _styleItem(e) {
    e && e.element && (e.selected ? e.element.classList.add("active") : e.element.classList.remove("active"));
  }
  //////////////////////////////////////
  ///////// User Interaction ///////////
  //////////////////////////////////////
  _itemClick(e, t) {
    t.stopPropagation(), this._chooseItem(e);
  }
  _groupClick(e, t) {
    t.stopPropagation();
  }
  //////////////////////////////////////
  ////// Current Item Management ///////
  //////////////////////////////////////
  _cancel() {
    this.popup.hide(!0), this.actions.cancel();
  }
  _clearChoices() {
    this.typing = !0, this.currentItems.forEach((e) => {
      e.selected = !1, this._styleItem(e);
    }), this.currentItems = [], this.focusedItem = null;
  }
  _chooseItem(e, t) {
    var i;
    this.typing = !1, this.params.multiselect ? (i = this.currentItems.indexOf(e), i > -1 ? (this.currentItems.splice(i, 1), e.selected = !1) : (this.currentItems.push(e), e.selected = !0), this.input.value = this.currentItems.map((s) => s.label).join(","), this._styleItem(e)) : (this.currentItems = [e], e.selected = !0, this.input.value = e.label, this._styleItem(e), t || this._resolveValue()), this._focusItem(e);
  }
  _resolveValue(e) {
    var t, i;
    if (this.popup && this.popup.hide(!0), this.params.multiselect)
      t = this.currentItems.map((s) => s.value);
    else if (e && this.params.autocomplete && this.typing)
      if (this.params.freetext || this.params.allowEmpty && this.input.value === "")
        t = this.input.value;
      else {
        this.actions.cancel();
        return;
      }
    else
      this.currentItems[0] ? t = this.currentItems[0].value : (i = Array.isArray(this.initialValues) ? this.initialValues[0] : this.initialValues, i === null || typeof i > "u" || i === "" ? t = i : t = this.params.emptyValue);
    t === "" && (t = this.params.emptyValue), this.actions.success(t), this.isFilter && (this.initialValues = t && !Array.isArray(t) ? [t] : t, this.currentItems = []);
  }
};
function xg(A, e, t, i, s) {
  var n = new Fg(this, A, e, t, i, s);
  return n.input;
}
function Qg(A, e, t, i, s) {
  var n = this, r = A.getElement(), o = A.getValue(), a = r.getElementsByTagName("svg").length || 5, l = r.getElementsByTagName("svg")[0] ? r.getElementsByTagName("svg")[0].getAttribute("width") : 14, h = [], c = document.createElement("div"), u = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  function d(w) {
    h.forEach(function(C, x) {
      x < w ? (n.table.browser == "ie" ? C.setAttribute("class", "tabulator-star-active") : C.classList.replace("tabulator-star-inactive", "tabulator-star-active"), C.innerHTML = '<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>') : (n.table.browser == "ie" ? C.setAttribute("class", "tabulator-star-inactive") : C.classList.replace("tabulator-star-active", "tabulator-star-inactive"), C.innerHTML = '<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>');
    });
  }
  function f(w) {
    var C = document.createElement("span"), x = u.cloneNode(!0);
    h.push(x), C.addEventListener("mouseenter", function(U) {
      U.stopPropagation(), U.stopImmediatePropagation(), d(w);
    }), C.addEventListener("mousemove", function(U) {
      U.stopPropagation(), U.stopImmediatePropagation();
    }), C.addEventListener("click", function(U) {
      U.stopPropagation(), U.stopImmediatePropagation(), t(w), r.blur();
    }), C.appendChild(x), c.appendChild(C);
  }
  function p(w) {
    o = w, d(w);
  }
  if (r.style.whiteSpace = "nowrap", r.style.overflow = "hidden", r.style.textOverflow = "ellipsis", c.style.verticalAlign = "middle", c.style.display = "inline-block", c.style.padding = "4px", u.setAttribute("width", l), u.setAttribute("height", l), u.setAttribute("viewBox", "0 0 512 512"), u.setAttribute("xml:space", "preserve"), u.style.padding = "0 1px", s.elementAttributes && typeof s.elementAttributes == "object")
    for (let w in s.elementAttributes)
      w.charAt(0) == "+" ? (w = w.slice(1), c.setAttribute(w, c.getAttribute(w) + s.elementAttributes["+" + w])) : c.setAttribute(w, s.elementAttributes[w]);
  for (var b = 1; b <= a; b++)
    f(b);
  return o = Math.min(parseInt(o), a), d(o), c.addEventListener("mousemove", function(w) {
    d(0);
  }), c.addEventListener("click", function(w) {
    t(0);
  }), r.addEventListener("blur", function(w) {
    i();
  }), r.addEventListener("keydown", function(w) {
    switch (w.keyCode) {
      case 39:
        p(o + 1);
        break;
      case 37:
        p(o - 1);
        break;
      case 13:
        t(o);
        break;
      case 27:
        i();
        break;
    }
  }), c;
}
function Ug(A, e, t, i, s) {
  var n = A.getElement(), r = typeof s.max > "u" ? n.getElementsByTagName("div")[0] && n.getElementsByTagName("div")[0].getAttribute("max") || 100 : s.max, o = typeof s.min > "u" ? n.getElementsByTagName("div")[0] && n.getElementsByTagName("div")[0].getAttribute("min") || 0 : s.min, a = (r - o) / 100, l = A.getValue() || 0, h = document.createElement("div"), c = document.createElement("div"), u, d;
  function f() {
    var p = window.getComputedStyle(n, null), b = a * Math.round(c.offsetWidth / ((n.clientWidth - parseInt(p.getPropertyValue("padding-left")) - parseInt(p.getPropertyValue("padding-right"))) / 100)) + o;
    t(b), n.setAttribute("aria-valuenow", b), n.setAttribute("aria-label", l);
  }
  if (h.style.position = "absolute", h.style.right = "0", h.style.top = "0", h.style.bottom = "0", h.style.width = "5px", h.classList.add("tabulator-progress-handle"), c.style.display = "inline-block", c.style.position = "relative", c.style.height = "100%", c.style.backgroundColor = "#488CE9", c.style.maxWidth = "100%", c.style.minWidth = "0%", s.elementAttributes && typeof s.elementAttributes == "object")
    for (let p in s.elementAttributes)
      p.charAt(0) == "+" ? (p = p.slice(1), c.setAttribute(p, c.getAttribute(p) + s.elementAttributes["+" + p])) : c.setAttribute(p, s.elementAttributes[p]);
  return n.style.padding = "4px 4px", l = Math.min(parseFloat(l), r), l = Math.max(parseFloat(l), o), l = Math.round((l - o) / a), c.style.width = l + "%", n.setAttribute("aria-valuemin", o), n.setAttribute("aria-valuemax", r), c.appendChild(h), h.addEventListener("mousedown", function(p) {
    u = p.screenX, d = c.offsetWidth;
  }), h.addEventListener("mouseover", function() {
    h.style.cursor = "ew-resize";
  }), n.addEventListener("mousemove", function(p) {
    u && (c.style.width = d + p.screenX - u + "px");
  }), n.addEventListener("mouseup", function(p) {
    u && (p.stopPropagation(), p.stopImmediatePropagation(), u = !1, d = !1, f());
  }), n.addEventListener("keydown", function(p) {
    switch (p.keyCode) {
      case 39:
        p.preventDefault(), c.style.width = c.clientWidth + n.clientWidth / 100 + "px";
        break;
      case 37:
        p.preventDefault(), c.style.width = c.clientWidth - n.clientWidth / 100 + "px";
        break;
      case 9:
      case 13:
        f();
        break;
      case 27:
        i();
        break;
    }
  }), n.addEventListener("blur", function() {
    i();
  }), c;
}
function _g(A, e, t, i, s) {
  var n = A.getValue(), r = document.createElement("input"), o = s.tristate, a = typeof s.indeterminateValue > "u" ? null : s.indeterminateValue, l = !1, h = Object.keys(s).includes("trueValue"), c = Object.keys(s).includes("falseValue");
  if (r.setAttribute("type", "checkbox"), r.style.marginTop = "5px", r.style.boxSizing = "border-box", s.elementAttributes && typeof s.elementAttributes == "object")
    for (let d in s.elementAttributes)
      d.charAt(0) == "+" ? (d = d.slice(1), r.setAttribute(d, r.getAttribute(d) + s.elementAttributes["+" + d])) : r.setAttribute(d, s.elementAttributes[d]);
  r.value = n, o && (typeof n > "u" || n === a || n === "") && (l = !0, r.indeterminate = !0), this.table.browser != "firefox" && this.table.browser != "safari" && e(function() {
    A.getType() === "cell" && r.focus({ preventScroll: !0 });
  }), r.checked = h ? n === s.trueValue : n === !0 || n === "true" || n === "True" || n === 1;
  function u(d) {
    var f = r.checked;
    return h && f ? f = s.trueValue : c && !f && (f = s.falseValue), o ? d ? l ? a : f : r.checked && !l ? (r.checked = !1, r.indeterminate = !0, l = !0, a) : (l = !1, f) : f;
  }
  return r.addEventListener("change", function(d) {
    t(u());
  }), r.addEventListener("blur", function(d) {
    t(u(!0));
  }), r.addEventListener("keydown", function(d) {
    d.keyCode == 13 && t(u()), d.keyCode == 27 && i();
  }), r;
}
function Hg(A, e, t, i, s) {
  var n = A._getSelf().column, r, o, a;
  function l(h) {
    var c = h.getValue(), u = "input";
    switch (typeof c) {
      case "number":
        u = "number";
        break;
      case "boolean":
        u = "tickCross";
        break;
      case "string":
        c.includes(`
`) && (u = "textarea");
        break;
    }
    return u;
  }
  return r = s.editorLookup ? s.editorLookup(A) : l(A), s.paramsLookup && (a = typeof s.paramsLookup == "function" ? s.paramsLookup(r, A) : s.paramsLookup[r]), o = this.table.modules.edit.lookupEditor(r, n), o.call(this, A, e, t, i, a || {});
}
var Mg = {
  input: bg,
  textarea: wg,
  number: vg,
  range: Bg,
  date: Cg,
  time: yg,
  datetime: Eg,
  list: xg,
  star: Qg,
  progress: Ug,
  tickCross: _g,
  adaptable: Hg
};
const zA = class zA extends ne {
  constructor(e) {
    super(e), this.currentCell = !1, this.mouseClick = !1, this.recursionBlock = !1, this.invalidEdit = !1, this.editedCells = [], this.convertEmptyValues = !1, this.editors = zA.editors, this.registerTableOption("editTriggerEvent", "focus"), this.registerTableOption("editorEmptyValue"), this.registerTableOption("editorEmptyValueFunc", this.emptyValueCheck.bind(this)), this.registerColumnOption("editable"), this.registerColumnOption("editor"), this.registerColumnOption("editorParams"), this.registerColumnOption("editorEmptyValue"), this.registerColumnOption("editorEmptyValueFunc"), this.registerColumnOption("cellEditing"), this.registerColumnOption("cellEdited"), this.registerColumnOption("cellEditCancelled"), this.registerTableFunction("getEditedCells", this.getEditedCells.bind(this)), this.registerTableFunction("clearCellEdited", this.clearCellEdited.bind(this)), this.registerTableFunction("navigatePrev", this.navigatePrev.bind(this)), this.registerTableFunction("navigateNext", this.navigateNext.bind(this)), this.registerTableFunction("navigateLeft", this.navigateLeft.bind(this)), this.registerTableFunction("navigateRight", this.navigateRight.bind(this)), this.registerTableFunction("navigateUp", this.navigateUp.bind(this)), this.registerTableFunction("navigateDown", this.navigateDown.bind(this)), this.registerComponentFunction("cell", "isEdited", this.cellIsEdited.bind(this)), this.registerComponentFunction("cell", "clearEdited", this.clearEdited.bind(this)), this.registerComponentFunction("cell", "edit", this.editCell.bind(this)), this.registerComponentFunction("cell", "cancelEdit", this.cellCancelEdit.bind(this)), this.registerComponentFunction("cell", "navigatePrev", this.navigatePrev.bind(this)), this.registerComponentFunction("cell", "navigateNext", this.navigateNext.bind(this)), this.registerComponentFunction("cell", "navigateLeft", this.navigateLeft.bind(this)), this.registerComponentFunction("cell", "navigateRight", this.navigateRight.bind(this)), this.registerComponentFunction("cell", "navigateUp", this.navigateUp.bind(this)), this.registerComponentFunction("cell", "navigateDown", this.navigateDown.bind(this));
  }
  initialize() {
    this.subscribe("cell-init", this.bindEditor.bind(this)), this.subscribe("cell-delete", this.clearEdited.bind(this)), this.subscribe("cell-value-changed", this.updateCellClass.bind(this)), this.subscribe("column-layout", this.initializeColumnCheck.bind(this)), this.subscribe("column-delete", this.columnDeleteCheck.bind(this)), this.subscribe("row-deleting", this.rowDeleteCheck.bind(this)), this.subscribe("row-layout", this.rowEditableCheck.bind(this)), this.subscribe("data-refreshing", this.cancelEdit.bind(this)), this.subscribe("clipboard-paste", this.pasteBlocker.bind(this)), this.subscribe("keybinding-nav-prev", this.navigatePrev.bind(this, void 0)), this.subscribe("keybinding-nav-next", this.keybindingNavigateNext.bind(this)), this.subscribe("keybinding-nav-up", this.navigateUp.bind(this, void 0)), this.subscribe("keybinding-nav-down", this.navigateDown.bind(this, void 0)), Object.keys(this.table.options).includes("editorEmptyValue") && (this.convertEmptyValues = !0);
  }
  ///////////////////////////////////
  ///////// Paste Negation //////////
  ///////////////////////////////////
  pasteBlocker(e) {
    if (this.currentCell)
      return !0;
  }
  ///////////////////////////////////
  ////// Keybinding Functions ///////
  ///////////////////////////////////
  keybindingNavigateNext(e) {
    var t = this.currentCell, i = this.options("tabEndNewRow");
    t && (this.navigateNext(t, e) || i && (t.getElement().firstChild.blur(), this.invalidEdit || (i === !0 ? i = this.table.addRow({}) : typeof i == "function" ? i = this.table.addRow(i(t.row.getComponent())) : i = this.table.addRow(Object.assign({}, i)), i.then(() => {
      setTimeout(() => {
        t.getComponent().navigateNext();
      });
    }))));
  }
  ///////////////////////////////////
  ///////// Cell Functions //////////
  ///////////////////////////////////
  cellIsEdited(e) {
    return !!e.modules.edit && e.modules.edit.edited;
  }
  cellCancelEdit(e) {
    e === this.currentCell ? this.table.modules.edit.cancelEdit() : console.warn("Cancel Editor Error - This cell is not currently being edited ");
  }
  ///////////////////////////////////
  ///////// Table Functions /////////
  ///////////////////////////////////
  updateCellClass(e) {
    this.allowEdit(e) ? e.getElement().classList.add("tabulator-editable") : e.getElement().classList.remove("tabulator-editable");
  }
  clearCellEdited(e) {
    e || (e = this.table.modules.edit.getEditedCells()), Array.isArray(e) || (e = [e]), e.forEach((t) => {
      this.table.modules.edit.clearEdited(t._getSelf());
    });
  }
  navigatePrev(e = this.currentCell, t) {
    var i, s;
    if (e) {
      if (t && t.preventDefault(), i = this.navigateLeft(), i)
        return !0;
      if (s = this.table.rowManager.prevDisplayRow(e.row, !0), s && (i = this.findPrevEditableCell(s, s.cells.length), i))
        return i.getComponent().edit(), !0;
    }
    return !1;
  }
  navigateNext(e = this.currentCell, t) {
    var i, s;
    if (e) {
      if (t && t.preventDefault(), i = this.navigateRight(), i)
        return !0;
      if (s = this.table.rowManager.nextDisplayRow(e.row, !0), s && (i = this.findNextEditableCell(s, -1), i))
        return i.getComponent().edit(), !0;
    }
    return !1;
  }
  navigateLeft(e = this.currentCell, t) {
    var i, s;
    return e && (t && t.preventDefault(), i = e.getIndex(), s = this.findPrevEditableCell(e.row, i), s) ? (s.getComponent().edit(), !0) : !1;
  }
  navigateRight(e = this.currentCell, t) {
    var i, s;
    return e && (t && t.preventDefault(), i = e.getIndex(), s = this.findNextEditableCell(e.row, i), s) ? (s.getComponent().edit(), !0) : !1;
  }
  navigateUp(e = this.currentCell, t) {
    var i, s;
    return e && (t && t.preventDefault(), i = e.getIndex(), s = this.table.rowManager.prevDisplayRow(e.row, !0), s) ? (s.cells[i].getComponent().edit(), !0) : !1;
  }
  navigateDown(e = this.currentCell, t) {
    var i, s;
    return e && (t && t.preventDefault(), i = e.getIndex(), s = this.table.rowManager.nextDisplayRow(e.row, !0), s) ? (s.cells[i].getComponent().edit(), !0) : !1;
  }
  findNextEditableCell(e, t) {
    var i = !1;
    if (t < e.cells.length - 1)
      for (var s = t + 1; s < e.cells.length; s++) {
        let n = e.cells[s];
        if (n.column.modules.edit && Ee.elVisible(n.getElement()) && this.allowEdit(n)) {
          i = n;
          break;
        }
      }
    return i;
  }
  findPrevEditableCell(e, t) {
    var i = !1;
    if (t > 0)
      for (var s = t - 1; s >= 0; s--) {
        let n = e.cells[s];
        if (n.column.modules.edit && Ee.elVisible(n.getElement()) && this.allowEdit(n)) {
          i = n;
          break;
        }
      }
    return i;
  }
  ///////////////////////////////////
  ///////// Internal Logic //////////
  ///////////////////////////////////
  initializeColumnCheck(e) {
    typeof e.definition.editor < "u" && this.initializeColumn(e);
  }
  columnDeleteCheck(e) {
    this.currentCell && this.currentCell.column === e && this.cancelEdit();
  }
  rowDeleteCheck(e) {
    this.currentCell && this.currentCell.row === e && this.cancelEdit();
  }
  rowEditableCheck(e) {
    e.getCells().forEach((t) => {
      t.column.modules.edit && typeof t.column.modules.edit.check == "function" && this.updateCellClass(t);
    });
  }
  //initialize column editor
  initializeColumn(e) {
    var t = Object.keys(e.definition).includes("editorEmptyValue"), i = {
      editor: !1,
      blocked: !1,
      check: e.definition.editable,
      params: e.definition.editorParams || {},
      convertEmptyValues: t,
      editorEmptyValue: e.definition.editorEmptyValue,
      editorEmptyValueFunc: e.definition.editorEmptyValueFunc
    };
    i.editor = this.lookupEditor(e.definition.editor, e), i.editor && (e.modules.edit = i);
  }
  lookupEditor(e, t) {
    var i;
    switch (typeof e) {
      case "string":
        this.editors[e] ? i = this.editors[e] : console.warn("Editor Error - No such editor found: ", e);
        break;
      case "function":
        i = e;
        break;
      case "boolean":
        e === !0 && (typeof t.definition.formatter != "function" ? this.editors[t.definition.formatter] ? i = this.editors[t.definition.formatter] : i = this.editors.input : console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ", t.definition.formatter));
        break;
    }
    return i;
  }
  getCurrentCell() {
    return this.currentCell ? this.currentCell.getComponent() : !1;
  }
  clearEditor(e) {
    var t = this.currentCell, i;
    if (this.invalidEdit = !1, t) {
      for (this.currentCell = !1, i = t.getElement(), this.dispatch("edit-editor-clear", t, e), i.classList.remove("tabulator-editing"); i.firstChild; ) i.removeChild(i.firstChild);
      t.row.getElement().classList.remove("tabulator-editing"), t.table.element.classList.remove("tabulator-editing");
    }
  }
  cancelEdit() {
    if (this.currentCell) {
      var e = this.currentCell, t = this.currentCell.getComponent();
      this.clearEditor(!0), e.setValueActual(e.getValue()), e.cellRendered(), (e.column.definition.editor == "textarea" || e.column.definition.variableHeight) && e.row.normalizeHeight(!0), e.column.definition.cellEditCancelled && e.column.definition.cellEditCancelled.call(this.table, t), this.dispatch("edit-cancelled", e), this.dispatchExternal("cellEditCancelled", t);
    }
  }
  //return a formatted value for a cell
  bindEditor(e) {
    if (e.column.modules.edit) {
      var t = this, i = e.getElement(!0);
      this.updateCellClass(e), i.setAttribute("tabindex", 0), i.addEventListener("mousedown", function(s) {
        s.button === 2 ? s.preventDefault() : t.mouseClick = !0;
      }), this.options("editTriggerEvent") === "dblclick" && i.addEventListener("dblclick", function(s) {
        i.classList.contains("tabulator-editing") || (i.focus({ preventScroll: !0 }), t.edit(e, s, !1));
      }), (this.options("editTriggerEvent") === "focus" || this.options("editTriggerEvent") === "click") && i.addEventListener("click", function(s) {
        i.classList.contains("tabulator-editing") || (i.focus({ preventScroll: !0 }), t.edit(e, s, !1));
      }), this.options("editTriggerEvent") === "focus" && i.addEventListener("focus", function(s) {
        t.recursionBlock || t.edit(e, s, !1);
      });
    }
  }
  focusCellNoEvent(e, t) {
    this.recursionBlock = !0, t && this.table.browser === "ie" || e.getElement().focus({ preventScroll: !0 }), this.recursionBlock = !1;
  }
  editCell(e, t) {
    this.focusCellNoEvent(e), this.edit(e, !1, t);
  }
  focusScrollAdjust(e) {
    if (this.table.rowManager.getRenderMode() == "virtual") {
      var t = this.table.rowManager.element.scrollTop, i = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop, s = e.row.getElement();
      s.offsetTop < t ? this.table.rowManager.element.scrollTop -= t - s.offsetTop : s.offsetTop + s.offsetHeight > i && (this.table.rowManager.element.scrollTop += s.offsetTop + s.offsetHeight - i);
      var n = this.table.rowManager.element.scrollLeft, r = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft, o = e.getElement();
      this.table.modExists("frozenColumns") && (n += parseInt(this.table.modules.frozenColumns.leftMargin || 0), r -= parseInt(this.table.modules.frozenColumns.rightMargin || 0)), this.table.options.renderHorizontal === "virtual" && (n -= parseInt(this.table.columnManager.renderer.vDomPadLeft), r -= parseInt(this.table.columnManager.renderer.vDomPadLeft)), o.offsetLeft < n ? this.table.rowManager.element.scrollLeft -= n - o.offsetLeft : o.offsetLeft + o.offsetWidth > r && (this.table.rowManager.element.scrollLeft += o.offsetLeft + o.offsetWidth - r);
    }
  }
  allowEdit(e) {
    var t = !!e.column.modules.edit;
    if (e.column.modules.edit)
      switch (typeof e.column.modules.edit.check) {
        case "function":
          e.row.initialized && (t = e.column.modules.edit.check(e.getComponent()));
          break;
        case "string":
          t = !!e.row.data[e.column.modules.edit.check];
          break;
        case "boolean":
          t = e.column.modules.edit.check;
          break;
      }
    return t;
  }
  edit(e, t, i) {
    var s = this, n = !0, r = function() {
    }, o = e.getElement(), a = !1, l, h, c;
    if (this.currentCell) {
      !this.invalidEdit && this.currentCell !== e && this.cancelEdit();
      return;
    }
    function u(w) {
      if (s.currentCell === e && !a) {
        var C = s.chain("edit-success", [e, w], !0, !0);
        return C === !0 || s.table.options.validationMode === "highlight" ? (a = !0, s.clearEditor(), e.modules.edit || (e.modules.edit = {}), e.modules.edit.edited = !0, s.editedCells.indexOf(e) == -1 && s.editedCells.push(e), w = s.transformEmptyValues(w, e), e.setValue(w, !0), C === !0) : (a = !0, s.invalidEdit = !0, s.focusCellNoEvent(e, !0), r(), setTimeout(() => {
          a = !1;
        }, 10), !1);
      }
    }
    function d() {
      s.currentCell === e && !a && s.cancelEdit();
    }
    function f(w) {
      r = w;
    }
    if (e.column.modules.edit.blocked)
      return this.mouseClick = !1, this.blur(o), !1;
    if (t && t.stopPropagation(), n = this.allowEdit(e), n || i) {
      if (s.cancelEdit(), s.currentCell = e, this.focusScrollAdjust(e), h = e.getComponent(), this.mouseClick && (this.mouseClick = !1, e.column.definition.cellClick && e.column.definition.cellClick.call(this.table, t, h)), e.column.definition.cellEditing && e.column.definition.cellEditing.call(this.table, h), this.dispatch("cell-editing", e), this.dispatchExternal("cellEditing", h), c = typeof e.column.modules.edit.params == "function" ? e.column.modules.edit.params(h) : e.column.modules.edit.params, l = e.column.modules.edit.editor.call(s, h, f, u, d, c), this.currentCell && l !== !1)
        if (l instanceof Node) {
          for (o.classList.add("tabulator-editing"), e.row.getElement().classList.add("tabulator-editing"), e.table.element.classList.add("tabulator-editing"); o.firstChild; ) o.removeChild(o.firstChild);
          o.appendChild(l), r();
          for (var p = o.children, b = 0; b < p.length; b++)
            p[b].addEventListener("click", function(w) {
              w.stopPropagation();
            });
        } else
          return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:", l), this.blur(o), !1;
      else
        return this.blur(o), !1;
      return !0;
    } else
      return this.mouseClick = !1, this.blur(o), !1;
  }
  emptyValueCheck(e) {
    return e === "" || e === null || typeof e > "u";
  }
  transformEmptyValues(e, t) {
    var i = t.column.modules.edit, s = i.convertEmptyValues || this.convertEmptyValues, n;
    return s && (n = i.editorEmptyValueFunc || this.options("editorEmptyValueFunc"), n && n(e) && (e = i.convertEmptyValues ? i.editorEmptyValue : this.options("editorEmptyValue"))), e;
  }
  blur(e) {
    this.confirm("edit-blur", [e]) || e.blur();
  }
  getEditedCells() {
    var e = [];
    return this.editedCells.forEach((t) => {
      e.push(t.getComponent());
    }), e;
  }
  clearEdited(e) {
    var t;
    e.modules.edit && e.modules.edit.edited && (e.modules.edit.edited = !1, this.dispatch("edit-edited-clear", e)), t = this.editedCells.indexOf(e), t > -1 && this.editedCells.splice(t, 1);
  }
};
D(zA, "moduleName", "edit"), //load defaults
D(zA, "editors", Mg);
let da = zA;
class Kl {
  constructor(e, t, i, s) {
    this.type = e, this.columns = t, this.component = i || !1, this.indent = s || 0;
  }
}
class bo {
  constructor(e, t, i, s, n) {
    this.value = e, this.component = t || !1, this.width = i, this.height = s, this.depth = n;
  }
}
var Dg = {}, Sg = {
  visible: function() {
    return this.rowManager.getVisibleRows(!1, !0);
  },
  all: function() {
    return this.rowManager.rows;
  },
  selected: function() {
    return this.modules.selectRow.selectedRows;
  },
  active: function() {
    return this.options.pagination ? this.rowManager.getDisplayRows(this.rowManager.displayRows.length - 2) : this.rowManager.getDisplayRows();
  }
};
const Ti = class Ti extends ne {
  constructor(e) {
    super(e), this.config = {}, this.cloneTableStyle = !0, this.colVisProp = "", this.colVisPropAttach = "", this.registerTableOption("htmlOutputConfig", !1), this.registerColumnOption("htmlOutput"), this.registerColumnOption("titleHtmlOutput");
  }
  initialize() {
    this.registerTableFunction("getHtml", this.getHtml.bind(this));
  }
  ///////////////////////////////////
  ///////// Internal Logic //////////
  ///////////////////////////////////
  generateExportList(e, t, i, s) {
    var n, r, o, a;
    return this.cloneTableStyle = t, this.config = e || {}, this.colVisProp = s, this.colVisPropAttach = this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1), a = Ti.columnLookups[i], a && (o = a.call(this.table), o = o.filter((l) => this.columnVisCheck(l))), n = this.config.columnHeaders !== !1 ? this.headersToExportRows(this.generateColumnGroupHeaders(o)) : [], o && (o = o.map((l) => l.getComponent())), r = this.bodyToExportRows(this.rowLookup(i), o), n.concat(r);
  }
  generateTable(e, t, i, s) {
    var n = this.generateExportList(e, t, i, s);
    return this.generateTableElement(n);
  }
  rowLookup(e) {
    var t = [], i;
    return typeof e == "function" ? e.call(this.table).forEach((s) => {
      s = this.table.rowManager.findRow(s), s && t.push(s);
    }) : (i = Ti.rowLookups[e] || Ti.rowLookups.active, t = i.call(this.table)), Object.assign([], t);
  }
  generateColumnGroupHeaders(e) {
    var t = [];
    return e || (e = this.config.columnGroups !== !1 ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex), e.forEach((i) => {
      var s = this.processColumnGroup(i);
      s && t.push(s);
    }), t;
  }
  processColumnGroup(e) {
    var t = e.columns, i = 0, s = e.definition["title" + this.colVisPropAttach] || e.definition.title, n = {
      title: s,
      column: e,
      depth: 1
    };
    if (t.length) {
      if (n.subGroups = [], n.width = 0, t.forEach((r) => {
        var o = this.processColumnGroup(r);
        o && (n.width += o.width, n.subGroups.push(o), o.depth > i && (i = o.depth));
      }), n.depth += i, !n.width)
        return !1;
    } else if (this.columnVisCheck(e))
      n.width = 1;
    else
      return !1;
    return n;
  }
  columnVisCheck(e) {
    var t = e.definition[this.colVisProp];
    return this.config.rowHeaders === !1 && e.isRowHeader ? !1 : (typeof t == "function" && (t = t.call(this.table, e.getComponent())), t === !1 || t === !0 ? t : e.visible && e.field);
  }
  headersToExportRows(e) {
    var t = [], i = 0, s = [];
    function n(r, o) {
      var a = i - o;
      if (typeof t[o] > "u" && (t[o] = []), r.height = r.subGroups ? 1 : a - r.depth + 1, t[o].push(r), r.height > 1)
        for (let l = 1; l < r.height; l++)
          typeof t[o + l] > "u" && (t[o + l] = []), t[o + l].push(!1);
      if (r.width > 1)
        for (let l = 1; l < r.width; l++)
          t[o].push(!1);
      r.subGroups && r.subGroups.forEach(function(l) {
        n(l, o + 1);
      });
    }
    return e.forEach(function(r) {
      r.depth > i && (i = r.depth);
    }), e.forEach(function(r) {
      n(r, 0);
    }), t.forEach((r) => {
      var o = [];
      r.forEach((a) => {
        if (a) {
          let l = typeof a.title > "u" ? "" : a.title;
          o.push(new bo(l, a.column.getComponent(), a.width, a.height, a.depth));
        } else
          o.push(null);
      }), s.push(new Kl("header", o));
    }), s;
  }
  bodyToExportRows(e, t = []) {
    var i = [];
    return t.length === 0 && this.table.columnManager.columnsByIndex.forEach((s) => {
      this.columnVisCheck(s) && t.push(s.getComponent());
    }), this.config.columnCalcs !== !1 && this.table.modExists("columnCalcs") && (this.table.modules.columnCalcs.topInitialized && e.unshift(this.table.modules.columnCalcs.topRow), this.table.modules.columnCalcs.botInitialized && e.push(this.table.modules.columnCalcs.botRow)), e = e.filter((s) => {
      switch (s.type) {
        case "group":
          return this.config.rowGroups !== !1;
        case "calc":
          return this.config.columnCalcs !== !1;
        case "row":
          return !(this.table.options.dataTree && this.config.dataTree === !1 && s.modules.dataTree.parent);
      }
      return !0;
    }), e.forEach((s, n) => {
      var r = s.getData(this.colVisProp), o = [], a = 0;
      switch (s.type) {
        case "group":
          a = s.level, o.push(new bo(s.key, s.getComponent(), t.length, 1));
          break;
        case "calc":
        case "row":
          t.forEach((l) => {
            o.push(new bo(l._column.getFieldValue(r), l, 1, 1));
          }), this.table.options.dataTree && this.config.dataTree !== !1 && (a = s.modules.dataTree.index);
          break;
      }
      i.push(new Kl(s.type, o, s.getComponent(), a));
    }), i;
  }
  generateTableElement(e) {
    var t = document.createElement("table"), i = document.createElement("thead"), s = document.createElement("tbody"), n = this.lookupTableStyles(), r = this.table.options["rowFormatter" + this.colVisPropAttach], o = {};
    return o.rowFormatter = r !== null ? r : this.table.options.rowFormatter, this.table.options.dataTree && this.config.dataTree !== !1 && this.table.modExists("columnCalcs") && (o.treeElementField = this.table.modules.dataTree.elementField), o.groupHeader = this.table.options["groupHeader" + this.colVisPropAttach], o.groupHeader && !Array.isArray(o.groupHeader) && (o.groupHeader = [o.groupHeader]), t.classList.add("tabulator-print-table"), this.mapElementStyles(this.table.columnManager.getHeadersElement(), i, ["border-top", "border-left", "border-right", "border-bottom", "background-color", "color", "font-weight", "font-family", "font-size"]), e.length > 1e3 && console.warn("It may take a long time to render an HTML table with more than 1000 rows"), e.forEach((a, l) => {
      let h;
      switch (a.type) {
        case "header":
          i.appendChild(this.generateHeaderElement(a, o, n));
          break;
        case "group":
          s.appendChild(this.generateGroupElement(a, o, n));
          break;
        case "calc":
          s.appendChild(this.generateCalcElement(a, o, n));
          break;
        case "row":
          h = this.generateRowElement(a, o, n), this.mapElementStyles(l % 2 && n.evenRow ? n.evenRow : n.oddRow, h, ["border-top", "border-left", "border-right", "border-bottom", "color", "font-weight", "font-family", "font-size", "background-color"]), s.appendChild(h);
          break;
      }
    }), i.innerHTML && t.appendChild(i), t.appendChild(s), this.mapElementStyles(this.table.element, t, ["border-top", "border-left", "border-right", "border-bottom"]), t;
  }
  lookupTableStyles() {
    var e = {};
    return this.cloneTableStyle && window.getComputedStyle && (e.oddRow = this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"), e.evenRow = this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"), e.calcRow = this.table.element.querySelector(".tabulator-row.tabulator-calcs"), e.firstRow = this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"), e.firstGroup = this.table.element.getElementsByClassName("tabulator-group")[0], e.firstRow && (e.styleCells = e.firstRow.getElementsByClassName("tabulator-cell"), e.styleRowHeader = e.firstRow.getElementsByClassName("tabulator-row-header")[0], e.firstCell = e.styleCells[0], e.lastCell = e.styleCells[e.styleCells.length - 1])), e;
  }
  generateHeaderElement(e, t, i) {
    var s = document.createElement("tr");
    return e.columns.forEach((n) => {
      if (n) {
        var r = document.createElement("th"), o = n.component._column.definition.cssClass ? n.component._column.definition.cssClass.split(" ") : [];
        r.colSpan = n.width, r.rowSpan = n.height, r.innerHTML = n.value, this.cloneTableStyle && (r.style.boxSizing = "border-box"), o.forEach(function(a) {
          r.classList.add(a);
        }), this.mapElementStyles(n.component.getElement(), r, ["text-align", "border-left", "border-right", "background-color", "color", "font-weight", "font-family", "font-size"]), this.mapElementStyles(n.component._column.contentElement, r, ["padding-top", "padding-left", "padding-right", "padding-bottom"]), n.component._column.visible ? this.mapElementStyles(n.component.getElement(), r, ["width"]) : n.component._column.definition.width && (r.style.width = n.component._column.definition.width + "px"), n.component._column.parent && n.component._column.parent.isGroup ? this.mapElementStyles(n.component._column.parent.groupElement, r, ["border-top"]) : this.mapElementStyles(n.component.getElement(), r, ["border-top"]), n.component._column.isGroup ? this.mapElementStyles(n.component.getElement(), r, ["border-bottom"]) : this.mapElementStyles(this.table.columnManager.getElement(), r, ["border-bottom"]), s.appendChild(r);
      }
    }), s;
  }
  generateGroupElement(e, t, i) {
    var s = document.createElement("tr"), n = document.createElement("td"), r = e.columns[0];
    return s.classList.add("tabulator-print-table-row"), t.groupHeader && t.groupHeader[e.indent] ? r.value = t.groupHeader[e.indent](r.value, e.component._group.getRowCount(), e.component._group.getData(), e.component) : t.groupHeader !== !1 && (r.value = e.component._group.generator(r.value, e.component._group.getRowCount(), e.component._group.getData(), e.component)), n.colSpan = r.width, n.innerHTML = r.value, s.classList.add("tabulator-print-table-group"), s.classList.add("tabulator-group-level-" + e.indent), r.component.isVisible() && s.classList.add("tabulator-group-visible"), this.mapElementStyles(i.firstGroup, s, ["border-top", "border-left", "border-right", "border-bottom", "color", "font-weight", "font-family", "font-size", "background-color"]), this.mapElementStyles(i.firstGroup, n, ["padding-top", "padding-left", "padding-right", "padding-bottom"]), s.appendChild(n), s;
  }
  generateCalcElement(e, t, i) {
    var s = this.generateRowElement(e, t, i);
    return s.classList.add("tabulator-print-table-calcs"), this.mapElementStyles(i.calcRow, s, ["border-top", "border-left", "border-right", "border-bottom", "color", "font-weight", "font-family", "font-size", "background-color"]), s;
  }
  generateRowElement(e, t, i) {
    var s = document.createElement("tr");
    if (s.classList.add("tabulator-print-table-row"), e.columns.forEach((n, r) => {
      if (n) {
        var o = document.createElement("td"), a = n.component._column, l = this.table, h = l.columnManager.findColumnIndex(a), c = n.value, u, d, f = {
          modules: {},
          getValue: function() {
            return c;
          },
          getField: function() {
            return a.definition.field;
          },
          getElement: function() {
            return o;
          },
          getType: function() {
            return "cell";
          },
          getColumn: function() {
            return a.getComponent();
          },
          getData: function() {
            return e.component.getData();
          },
          getRow: function() {
            return e.component;
          },
          getTable: function() {
            return l;
          },
          getComponent: function() {
            return f;
          },
          column: a
        }, p = a.definition.cssClass ? a.definition.cssClass.split(" ") : [];
        if (p.forEach(function(b) {
          o.classList.add(b);
        }), this.table.modExists("format") && this.config.formatCells !== !1)
          c = this.table.modules.format.formatExportValue(f, this.colVisProp);
        else
          switch (typeof c) {
            case "object":
              c = c !== null ? JSON.stringify(c) : "";
              break;
            case "undefined":
              c = "";
              break;
          }
        c instanceof Node ? o.appendChild(c) : o.innerHTML = c, d = ["padding-top", "padding-left", "padding-right", "padding-bottom", "border-top", "border-left", "border-right", "border-bottom", "color", "font-weight", "font-family", "font-size", "text-align"], a.isRowHeader ? (u = i.styleRowHeader, d.push("background-color")) : u = i.styleCells && i.styleCells[h] ? i.styleCells[h] : i.firstCell, u && (this.mapElementStyles(u, o, d), a.definition.align && (o.style.textAlign = a.definition.align)), this.table.options.dataTree && this.config.dataTree !== !1 && (t.treeElementField && t.treeElementField == a.field || !t.treeElementField && r == 0) && (e.component._row.modules.dataTree.controlEl && o.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0), o.firstChild), e.component._row.modules.dataTree.branchEl && o.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0), o.firstChild)), s.appendChild(o), f.modules.format && f.modules.format.renderedCallback && f.modules.format.renderedCallback();
      }
    }), t.rowFormatter && e.type === "row" && this.config.formatCells !== !1) {
      let n = Object.assign(e.component);
      n.getElement = function() {
        return s;
      }, t.rowFormatter(e.component);
    }
    return s;
  }
  generateHTMLTable(e) {
    var t = document.createElement("div");
    return t.appendChild(this.generateTableElement(e)), t.innerHTML;
  }
  getHtml(e, t, i, s) {
    var n = this.generateExportList(i || this.table.options.htmlOutputConfig, t, e, s || "htmlOutput");
    return this.generateHTMLTable(n);
  }
  mapElementStyles(e, t, i) {
    if (this.cloneTableStyle && e && t) {
      var s = {
        "background-color": "backgroundColor",
        color: "fontColor",
        width: "width",
        "font-weight": "fontWeight",
        "font-family": "fontFamily",
        "font-size": "fontSize",
        "text-align": "textAlign",
        "border-top": "borderTop",
        "border-left": "borderLeft",
        "border-right": "borderRight",
        "border-bottom": "borderBottom",
        "padding-top": "paddingTop",
        "padding-left": "paddingLeft",
        "padding-right": "paddingRight",
        "padding-bottom": "paddingBottom"
      };
      if (window.getComputedStyle) {
        var n = window.getComputedStyle(e);
        i.forEach(function(r) {
          t.style[s[r]] || (t.style[s[r]] = n.getPropertyValue(r));
        });
      }
    }
  }
};
D(Ti, "moduleName", "export"), D(Ti, "columnLookups", Dg), D(Ti, "rowLookups", Sg);
let fa = Ti;
var Tg = {
  //equal to
  "=": function(A, e, t, i) {
    return e == A;
  },
  //less than
  "<": function(A, e, t, i) {
    return e < A;
  },
  //less than or equal to
  "<=": function(A, e, t, i) {
    return e <= A;
  },
  //greater than
  ">": function(A, e, t, i) {
    return e > A;
  },
  //greater than or equal to
  ">=": function(A, e, t, i) {
    return e >= A;
  },
  //not equal to
  "!=": function(A, e, t, i) {
    return e != A;
  },
  regex: function(A, e, t, i) {
    return typeof A == "string" && (A = new RegExp(A)), A.test(e);
  },
  //contains the string
  like: function(A, e, t, i) {
    return A === null || typeof A > "u" ? e === A : typeof e < "u" && e !== null ? String(e).toLowerCase().indexOf(A.toLowerCase()) > -1 : !1;
  },
  //contains the keywords
  keywords: function(A, e, t, i) {
    var s = A.toLowerCase().split(typeof i.separator > "u" ? " " : i.separator), n = String(e === null || typeof e > "u" ? "" : e).toLowerCase(), r = [];
    return s.forEach((o) => {
      n.includes(o) && r.push(!0);
    }), i.matchAll ? r.length === s.length : !!r.length;
  },
  //starts with the string
  starts: function(A, e, t, i) {
    return A === null || typeof A > "u" ? e === A : typeof e < "u" && e !== null ? String(e).toLowerCase().startsWith(A.toLowerCase()) : !1;
  },
  //ends with the string
  ends: function(A, e, t, i) {
    return A === null || typeof A > "u" ? e === A : typeof e < "u" && e !== null ? String(e).toLowerCase().endsWith(A.toLowerCase()) : !1;
  },
  //in array
  in: function(A, e, t, i) {
    return Array.isArray(A) ? A.length ? A.indexOf(e) > -1 : !0 : (console.warn("Filter Error - filter value is not an array:", A), !1);
  }
};
const pi = class pi extends ne {
  constructor(e) {
    super(e), this.filterList = [], this.headerFilters = {}, this.headerFilterColumns = [], this.prevHeaderFilterChangeCheck = "", this.prevHeaderFilterChangeCheck = "{}", this.changed = !1, this.tableInitialized = !1, this.registerTableOption("filterMode", "local"), this.registerTableOption("initialFilter", !1), this.registerTableOption("initialHeaderFilter", !1), this.registerTableOption("headerFilterLiveFilterDelay", 300), this.registerTableOption("placeholderHeaderFilter", !1), this.registerColumnOption("headerFilter"), this.registerColumnOption("headerFilterPlaceholder"), this.registerColumnOption("headerFilterParams"), this.registerColumnOption("headerFilterEmptyCheck"), this.registerColumnOption("headerFilterFunc"), this.registerColumnOption("headerFilterFuncParams"), this.registerColumnOption("headerFilterLiveFilter"), this.registerTableFunction("searchRows", this.searchRows.bind(this)), this.registerTableFunction("searchData", this.searchData.bind(this)), this.registerTableFunction("setFilter", this.userSetFilter.bind(this)), this.registerTableFunction("refreshFilter", this.userRefreshFilter.bind(this)), this.registerTableFunction("addFilter", this.userAddFilter.bind(this)), this.registerTableFunction("getFilters", this.getFilters.bind(this)), this.registerTableFunction("setHeaderFilterFocus", this.userSetHeaderFilterFocus.bind(this)), this.registerTableFunction("getHeaderFilterValue", this.userGetHeaderFilterValue.bind(this)), this.registerTableFunction("setHeaderFilterValue", this.userSetHeaderFilterValue.bind(this)), this.registerTableFunction("getHeaderFilters", this.getHeaderFilters.bind(this)), this.registerTableFunction("removeFilter", this.userRemoveFilter.bind(this)), this.registerTableFunction("clearFilter", this.userClearFilter.bind(this)), this.registerTableFunction("clearHeaderFilter", this.userClearHeaderFilter.bind(this)), this.registerComponentFunction("column", "headerFilterFocus", this.setHeaderFilterFocus.bind(this)), this.registerComponentFunction("column", "reloadHeaderFilter", this.reloadHeaderFilter.bind(this)), this.registerComponentFunction("column", "getHeaderFilterValue", this.getHeaderFilterValue.bind(this)), this.registerComponentFunction("column", "setHeaderFilterValue", this.setHeaderFilterValue.bind(this));
  }
  initialize() {
    this.subscribe("column-init", this.initializeColumnHeaderFilter.bind(this)), this.subscribe("column-width-fit-before", this.hideHeaderFilterElements.bind(this)), this.subscribe("column-width-fit-after", this.showHeaderFilterElements.bind(this)), this.subscribe("table-built", this.tableBuilt.bind(this)), this.subscribe("placeholder", this.generatePlaceholder.bind(this)), this.table.options.filterMode === "remote" && this.subscribe("data-params", this.remoteFilterParams.bind(this)), this.registerDataHandler(this.filter.bind(this), 10);
  }
  tableBuilt() {
    this.table.options.initialFilter && this.setFilter(this.table.options.initialFilter), this.table.options.initialHeaderFilter && this.table.options.initialHeaderFilter.forEach((e) => {
      var t = this.table.columnManager.findColumn(e.field);
      if (t)
        this.setHeaderFilterValue(t, e.value);
      else
        return console.warn("Column Filter Error - No matching column found:", e.field), !1;
    }), this.tableInitialized = !0;
  }
  remoteFilterParams(e, t, i, s) {
    return s.filter = this.getFilters(!0, !0), s;
  }
  generatePlaceholder(e) {
    if (this.table.options.placeholderHeaderFilter && Object.keys(this.headerFilters).length)
      return this.table.options.placeholderHeaderFilter;
  }
  ///////////////////////////////////
  ///////// Table Functions /////////
  ///////////////////////////////////
  //set standard filters
  userSetFilter(e, t, i, s) {
    this.setFilter(e, t, i, s), this.refreshFilter();
  }
  //set standard filters
  userRefreshFilter() {
    this.refreshFilter();
  }
  //add filter to array
  userAddFilter(e, t, i, s) {
    this.addFilter(e, t, i, s), this.refreshFilter();
  }
  userSetHeaderFilterFocus(e) {
    var t = this.table.columnManager.findColumn(e);
    if (t)
      this.setHeaderFilterFocus(t);
    else
      return console.warn("Column Filter Focus Error - No matching column found:", e), !1;
  }
  userGetHeaderFilterValue(e) {
    var t = this.table.columnManager.findColumn(e);
    if (t)
      return this.getHeaderFilterValue(t);
    console.warn("Column Filter Error - No matching column found:", e);
  }
  userSetHeaderFilterValue(e, t) {
    var i = this.table.columnManager.findColumn(e);
    if (i)
      this.setHeaderFilterValue(i, t);
    else
      return console.warn("Column Filter Error - No matching column found:", e), !1;
  }
  //remove filter from array
  userRemoveFilter(e, t, i) {
    this.removeFilter(e, t, i), this.refreshFilter();
  }
  //clear filters
  userClearFilter(e) {
    this.clearFilter(e), this.refreshFilter();
  }
  //clear header filters
  userClearHeaderFilter() {
    this.clearHeaderFilter(), this.refreshFilter();
  }
  //search for specific row components
  searchRows(e, t, i) {
    return this.search("rows", e, t, i);
  }
  //search for specific data
  searchData(e, t, i) {
    return this.search("data", e, t, i);
  }
  ///////////////////////////////////
  ///////// Internal Logic //////////
  ///////////////////////////////////
  initializeColumnHeaderFilter(e) {
    var t = e.definition;
    t.headerFilter && this.initializeColumn(e);
  }
  //initialize column header filter
  initializeColumn(e, t) {
    var i = this, s = e.getField();
    function n(r) {
      var o = e.modules.filter.tagType == "input" && e.modules.filter.attrType == "text" || e.modules.filter.tagType == "textarea" ? "partial" : "match", a = "", l = "", h;
      if (typeof e.modules.filter.prevSuccess > "u" || e.modules.filter.prevSuccess !== r) {
        if (e.modules.filter.prevSuccess = r, e.modules.filter.emptyFunc(r))
          delete i.headerFilters[s];
        else {
          switch (e.modules.filter.value = r, typeof e.definition.headerFilterFunc) {
            case "string":
              pi.filters[e.definition.headerFilterFunc] ? (a = e.definition.headerFilterFunc, h = function(c) {
                var u = e.definition.headerFilterFuncParams || {}, d = e.getFieldValue(c);
                return u = typeof u == "function" ? u(r, d, c) : u, pi.filters[e.definition.headerFilterFunc](r, d, c, u);
              }) : console.warn("Header Filter Error - Matching filter function not found: ", e.definition.headerFilterFunc);
              break;
            case "function":
              h = function(c) {
                var u = e.definition.headerFilterFuncParams || {}, d = e.getFieldValue(c);
                return u = typeof u == "function" ? u(r, d, c) : u, e.definition.headerFilterFunc(r, d, c, u);
              }, a = h;
              break;
          }
          if (!h)
            switch (o) {
              case "partial":
                h = function(c) {
                  var u = e.getFieldValue(c);
                  return typeof u < "u" && u !== null ? String(u).toLowerCase().indexOf(String(r).toLowerCase()) > -1 : !1;
                }, a = "like";
                break;
              default:
                h = function(c) {
                  return e.getFieldValue(c) == r;
                }, a = "=";
            }
          i.headerFilters[s] = { value: r, func: h, type: a };
        }
        e.modules.filter.value = r, l = JSON.stringify(i.headerFilters), i.prevHeaderFilterChangeCheck !== l && (i.prevHeaderFilterChangeCheck = l, i.trackChanges(), i.refreshFilter());
      }
      return !0;
    }
    e.modules.filter = {
      success: n,
      attrType: !1,
      tagType: !1,
      emptyFunc: !1
    }, this.generateHeaderFilterElement(e);
  }
  generateHeaderFilterElement(e, t, i) {
    var s = this, n = e.modules.filter.success, r = e.getField(), o, a, l, h, c, u, d, f;
    e.modules.filter.value = t;
    function p() {
    }
    function b(w) {
      f = w;
    }
    if (e.modules.filter.headerElement && e.modules.filter.headerElement.parentNode && e.contentElement.removeChild(e.modules.filter.headerElement.parentNode), r) {
      switch (e.modules.filter.emptyFunc = e.definition.headerFilterEmptyCheck || function(w) {
        return !w && w !== 0;
      }, o = document.createElement("div"), o.classList.add("tabulator-header-filter"), typeof e.definition.headerFilter) {
        case "string":
          s.table.modules.edit.editors[e.definition.headerFilter] ? (a = s.table.modules.edit.editors[e.definition.headerFilter], (e.definition.headerFilter === "tick" || e.definition.headerFilter === "tickCross") && !e.definition.headerFilterEmptyCheck && (e.modules.filter.emptyFunc = function(w) {
            return w !== !0 && w !== !1;
          })) : console.warn("Filter Error - Cannot build header filter, No such editor found: ", e.definition.editor);
          break;
        case "function":
          a = e.definition.headerFilter;
          break;
        case "boolean":
          e.modules.edit && e.modules.edit.editor ? a = e.modules.edit.editor : e.definition.formatter && s.table.modules.edit.editors[e.definition.formatter] ? (a = s.table.modules.edit.editors[e.definition.formatter], (e.definition.formatter === "tick" || e.definition.formatter === "tickCross") && !e.definition.headerFilterEmptyCheck && (e.modules.filter.emptyFunc = function(w) {
            return w !== !0 && w !== !1;
          })) : a = s.table.modules.edit.editors.input;
          break;
      }
      if (a) {
        if (h = {
          getValue: function() {
            return typeof t < "u" ? t : "";
          },
          getField: function() {
            return e.definition.field;
          },
          getElement: function() {
            return o;
          },
          getColumn: function() {
            return e.getComponent();
          },
          getTable: () => this.table,
          getType: () => "header",
          getRow: function() {
            return {
              normalizeHeight: function() {
              }
            };
          }
        }, d = e.definition.headerFilterParams || {}, d = typeof d == "function" ? d.call(s.table, h) : d, l = a.call(this.table.modules.edit, h, b, n, p, d), !l) {
          console.warn("Filter Error - Cannot add filter to " + r + " column, editor returned a value of false");
          return;
        }
        if (!(l instanceof Node)) {
          console.warn("Filter Error - Cannot add filter to " + r + " column, editor should return an instance of Node, the editor returned:", l);
          return;
        }
        s.langBind("headerFilters|columns|" + e.definition.field, function(w) {
          l.setAttribute("placeholder", typeof w < "u" && w ? w : e.definition.headerFilterPlaceholder || s.langText("headerFilters|default"));
        }), l.addEventListener("click", function(w) {
          w.stopPropagation(), l.focus();
        }), l.addEventListener("focus", (w) => {
          var C = this.table.columnManager.contentsElement.scrollLeft, x = this.table.rowManager.element.scrollLeft;
          C !== x && (this.table.rowManager.scrollHorizontal(C), this.table.columnManager.scrollHorizontal(C));
        }), c = !1, u = function(w) {
          c && clearTimeout(c), c = setTimeout(function() {
            n(l.value);
          }, s.table.options.headerFilterLiveFilterDelay);
        }, e.modules.filter.headerElement = l, e.modules.filter.attrType = l.hasAttribute("type") ? l.getAttribute("type").toLowerCase() : "", e.modules.filter.tagType = l.tagName.toLowerCase(), e.definition.headerFilterLiveFilter !== !1 && (e.definition.headerFilter === "autocomplete" || e.definition.headerFilter === "tickCross" || (e.definition.editor === "autocomplete" || e.definition.editor === "tickCross") && e.definition.headerFilter === !0 || (l.addEventListener("keyup", u), l.addEventListener("search", u), e.modules.filter.attrType == "number" && l.addEventListener("change", function(w) {
          n(l.value);
        }), e.modules.filter.attrType == "text" && this.table.browser !== "ie" && l.setAttribute("type", "search")), (e.modules.filter.tagType == "input" || e.modules.filter.tagType == "select" || e.modules.filter.tagType == "textarea") && l.addEventListener("mousedown", function(w) {
          w.stopPropagation();
        })), o.appendChild(l), e.contentElement.appendChild(o), i || s.headerFilterColumns.push(e), f && f();
      }
    } else
      console.warn("Filter Error - Cannot add header filter, column has no field set:", e.definition.title);
  }
  //hide all header filter elements (used to ensure correct column widths in "fitData" layout mode)
  hideHeaderFilterElements() {
    this.headerFilterColumns.forEach(function(e) {
      e.modules.filter && e.modules.filter.headerElement && (e.modules.filter.headerElement.style.display = "none");
    });
  }
  //show all header filter elements (used to ensure correct column widths in "fitData" layout mode)
  showHeaderFilterElements() {
    this.headerFilterColumns.forEach(function(e) {
      e.modules.filter && e.modules.filter.headerElement && (e.modules.filter.headerElement.style.display = "");
    });
  }
  //programmatically set focus of header filter
  setHeaderFilterFocus(e) {
    e.modules.filter && e.modules.filter.headerElement ? e.modules.filter.headerElement.focus() : console.warn("Column Filter Focus Error - No header filter set on column:", e.getField());
  }
  //programmatically get value of header filter
  getHeaderFilterValue(e) {
    if (e.modules.filter && e.modules.filter.headerElement)
      return e.modules.filter.value;
    console.warn("Column Filter Error - No header filter set on column:", e.getField());
  }
  //programmatically set value of header filter
  setHeaderFilterValue(e, t) {
    e && (e.modules.filter && e.modules.filter.headerElement ? (this.generateHeaderFilterElement(e, t, !0), e.modules.filter.success(t)) : console.warn("Column Filter Error - No header filter set on column:", e.getField()));
  }
  reloadHeaderFilter(e) {
    e && (e.modules.filter && e.modules.filter.headerElement ? this.generateHeaderFilterElement(e, e.modules.filter.value, !0) : console.warn("Column Filter Error - No header filter set on column:", e.getField()));
  }
  refreshFilter() {
    this.tableInitialized && (this.table.options.filterMode === "remote" ? this.reloadData(null, !1, !1) : this.refreshData(!0));
  }
  //check if the filters has changed since last use
  trackChanges() {
    this.changed = !0, this.dispatch("filter-changed");
  }
  //check if the filters has changed since last use
  hasChanged() {
    var e = this.changed;
    return this.changed = !1, e;
  }
  //set standard filters
  setFilter(e, t, i, s) {
    this.filterList = [], Array.isArray(e) || (e = [{ field: e, type: t, value: i, params: s }]), this.addFilter(e);
  }
  //add filter to array
  addFilter(e, t, i, s) {
    var n = !1;
    Array.isArray(e) || (e = [{ field: e, type: t, value: i, params: s }]), e.forEach((r) => {
      r = this.findFilter(r), r && (this.filterList.push(r), n = !0);
    }), n && this.trackChanges();
  }
  findFilter(e) {
    var t;
    if (Array.isArray(e))
      return this.findSubFilters(e);
    var i = !1;
    return typeof e.field == "function" ? i = function(s) {
      return e.field(s, e.type || {});
    } : pi.filters[e.type] ? (t = this.table.columnManager.getColumnByField(e.field), t ? i = function(s) {
      return pi.filters[e.type](e.value, t.getFieldValue(s), s, e.params || {});
    } : i = function(s) {
      return pi.filters[e.type](e.value, s[e.field], s, e.params || {});
    }) : console.warn("Filter Error - No such filter type found, ignoring: ", e.type), e.func = i, e.func ? e : !1;
  }
  findSubFilters(e) {
    var t = [];
    return e.forEach((i) => {
      i = this.findFilter(i), i && t.push(i);
    }), t.length ? t : !1;
  }
  //get all filters
  getFilters(e, t) {
    var i = [];
    return e && (i = this.getHeaderFilters()), t && i.forEach(function(s) {
      typeof s.type == "function" && (s.type = "function");
    }), i = i.concat(this.filtersToArray(this.filterList, t)), i;
  }
  //filter to Object
  filtersToArray(e, t) {
    var i = [];
    return e.forEach((s) => {
      var n;
      Array.isArray(s) ? i.push(this.filtersToArray(s, t)) : (n = { field: s.field, type: s.type, value: s.value }, t && typeof n.type == "function" && (n.type = "function"), i.push(n));
    }), i;
  }
  //get all filters
  getHeaderFilters() {
    var e = [];
    for (var t in this.headerFilters)
      e.push({ field: t, type: this.headerFilters[t].type, value: this.headerFilters[t].value });
    return e;
  }
  //remove filter from array
  removeFilter(e, t, i) {
    Array.isArray(e) || (e = [{ field: e, type: t, value: i }]), e.forEach((s) => {
      var n = -1;
      typeof s.field == "object" ? n = this.filterList.findIndex((r) => s === r) : n = this.filterList.findIndex((r) => s.field === r.field && s.type === r.type && s.value === r.value), n > -1 ? this.filterList.splice(n, 1) : console.warn("Filter Error - No matching filter type found, ignoring: ", s.type);
    }), this.trackChanges();
  }
  //clear filters
  clearFilter(e) {
    this.filterList = [], e && this.clearHeaderFilter(), this.trackChanges();
  }
  //clear header filters
  clearHeaderFilter() {
    this.headerFilters = {}, this.prevHeaderFilterChangeCheck = "{}", this.headerFilterColumns.forEach((e) => {
      typeof e.modules.filter.value < "u" && delete e.modules.filter.value, e.modules.filter.prevSuccess = void 0, this.reloadHeaderFilter(e);
    }), this.trackChanges();
  }
  //search data and return matching rows
  search(e, t, i, s) {
    var n = [], r = [];
    return Array.isArray(t) || (t = [{ field: t, type: i, value: s }]), t.forEach((o) => {
      o = this.findFilter(o), o && r.push(o);
    }), this.table.rowManager.rows.forEach((o) => {
      var a = !0;
      r.forEach((l) => {
        this.filterRecurse(l, o.getData()) || (a = !1);
      }), a && n.push(e === "data" ? o.getData("data") : o.getComponent());
    }), n;
  }
  //filter row array
  filter(e, t) {
    var i = [], s = [];
    return this.subscribedExternal("dataFiltering") && this.dispatchExternal("dataFiltering", this.getFilters(!0)), this.table.options.filterMode !== "remote" && (this.filterList.length || Object.keys(this.headerFilters).length) ? e.forEach((n) => {
      this.filterRow(n) && i.push(n);
    }) : i = e.slice(0), this.subscribedExternal("dataFiltered") && (i.forEach((n) => {
      s.push(n.getComponent());
    }), this.dispatchExternal("dataFiltered", this.getFilters(!0), s)), i;
  }
  //filter individual row
  filterRow(e, t) {
    var i = !0, s = e.getData();
    this.filterList.forEach((r) => {
      this.filterRecurse(r, s) || (i = !1);
    });
    for (var n in this.headerFilters)
      this.headerFilters[n].func(s) || (i = !1);
    return i;
  }
  filterRecurse(e, t) {
    var i = !1;
    return Array.isArray(e) ? e.forEach((s) => {
      this.filterRecurse(s, t) && (i = !0);
    }) : i = e.func(t), i;
  }
};
D(pi, "moduleName", "filter"), //load defaults
D(pi, "filters", Tg);
let ga = pi;
function Lg(A, e, t) {
  return this.emptyToSpace(this.sanitizeHTML(A.getValue()));
}
function Rg(A, e, t) {
  return A.getValue();
}
function Ig(A, e, t) {
  return A.getElement().style.whiteSpace = "pre-wrap", this.emptyToSpace(this.sanitizeHTML(A.getValue()));
}
function kg(A, e, t) {
  var i = parseFloat(A.getValue()), s = "", n, r, o, a, l, h = e.decimal || ".", c = e.thousand || ",", u = e.negativeSign || "-", d = e.symbol || "", f = !!e.symbolAfter, p = typeof e.precision < "u" ? e.precision : 2;
  if (isNaN(i))
    return this.emptyToSpace(this.sanitizeHTML(A.getValue()));
  if (i < 0 && (i = Math.abs(i), s = u), n = p !== !1 ? i.toFixed(p) : i, n = String(n).split("."), r = n[0], o = n.length > 1 ? h + n[1] : "", e.thousand !== !1)
    for (a = /(\d+)(\d{3})/; a.test(r); )
      r = r.replace(a, "$1" + c + "$2");
  return l = r + o, s === !0 ? (l = "(" + l + ")", f ? l + d : d + l) : f ? s + l + d : s + d + l;
}
function Og(A, e, t) {
  var i = A.getValue(), s = e.urlPrefix || "", n = e.download, r = i, o = document.createElement("a"), a;
  function l(h, c) {
    var u = h.shift(), d = c[u];
    return h.length && typeof d == "object" ? l(h, d) : d;
  }
  if (e.labelField && (a = A.getData(), r = l(e.labelField.split(this.table.options.nestedFieldSeparator), a)), e.label)
    switch (typeof e.label) {
      case "string":
        r = e.label;
        break;
      case "function":
        r = e.label(A);
        break;
    }
  if (r) {
    if (e.urlField && (a = A.getData(), i = Ee.retrieveNestedData(this.table.options.nestedFieldSeparator, e.urlField, a)), e.url)
      switch (typeof e.url) {
        case "string":
          i = e.url;
          break;
        case "function":
          i = e.url(A);
          break;
      }
    return o.setAttribute("href", s + i), e.target && o.setAttribute("target", e.target), e.download && (typeof n == "function" ? n = n(A) : n = n === !0 ? "" : n, o.setAttribute("download", n)), o.innerHTML = this.emptyToSpace(this.sanitizeHTML(r)), o;
  } else
    return "&nbsp;";
}
function Pg(A, e, t) {
  var i = document.createElement("img"), s = A.getValue();
  switch (e.urlPrefix && (s = e.urlPrefix + A.getValue()), e.urlSuffix && (s = s + e.urlSuffix), i.setAttribute("src", s), typeof e.height) {
    case "number":
      i.style.height = e.height + "px";
      break;
    case "string":
      i.style.height = e.height;
      break;
  }
  switch (typeof e.width) {
    case "number":
      i.style.width = e.width + "px";
      break;
    case "string":
      i.style.width = e.width;
      break;
  }
  return i.addEventListener("load", function() {
    A.getRow().normalizeHeight();
  }), i;
}
function Ng(A, e, t) {
  var i = A.getValue(), s = A.getElement(), n = e.allowEmpty, r = e.allowTruthy, o = Object.keys(e).includes("trueValue"), a = typeof e.tickElement < "u" ? e.tickElement : '<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>', l = typeof e.crossElement < "u" ? e.crossElement : '<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';
  return o && i === e.trueValue || !o && (r && i || i === !0 || i === "true" || i === "True" || i === 1 || i === "1") ? (s.setAttribute("aria-checked", !0), a || "") : n && (i === "null" || i === "" || i === null || typeof i > "u") ? (s.setAttribute("aria-checked", "mixed"), "") : (s.setAttribute("aria-checked", !1), l || "");
}
function Kg(A, e, t) {
  var i = this.table.dependencyRegistry.lookup(["luxon", "DateTime"], "DateTime"), s = e.inputFormat || "yyyy-MM-dd HH:mm:ss", n = e.outputFormat || "dd/MM/yyyy HH:mm:ss", r = typeof e.invalidPlaceholder < "u" ? e.invalidPlaceholder : "", o = A.getValue();
  if (typeof i < "u") {
    var a;
    return i.isDateTime(o) ? a = o : s === "iso" ? a = i.fromISO(String(o)) : a = i.fromFormat(String(o), s), a.isValid ? (e.timezone && (a = a.setZone(e.timezone)), a.toFormat(n)) : r === !0 || !o ? o : typeof r == "function" ? r(o) : r;
  } else
    console.error("Format Error - 'datetime' formatter is dependant on luxon.js");
}
function Vg(A, e, t) {
  var i = this.table.dependencyRegistry.lookup(["luxon", "DateTime"], "DateTime"), s = e.inputFormat || "yyyy-MM-dd HH:mm:ss", n = typeof e.invalidPlaceholder < "u" ? e.invalidPlaceholder : "", r = typeof e.suffix < "u" ? e.suffix : !1, o = typeof e.unit < "u" ? e.unit : "days", a = typeof e.humanize < "u" ? e.humanize : !1, l = typeof e.date < "u" ? e.date : i.now(), h = A.getValue();
  if (typeof i < "u") {
    var c;
    return i.isDateTime(h) ? c = h : s === "iso" ? c = i.fromISO(String(h)) : c = i.fromFormat(String(h), s), c.isValid ? a ? c.diff(l, o).toHuman() + (r ? " " + r : "") : parseInt(c.diff(l, o)[o]) + (r ? " " + r : "") : n === !0 ? h : typeof n == "function" ? n(h) : n;
  } else
    console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js");
}
function zg(A, e, t) {
  var i = A.getValue();
  return typeof e[i] > "u" ? (console.warn("Missing display value for " + i), i) : e[i];
}
function Gg(A, e, t) {
  var i = A.getValue(), s = A.getElement(), n = e && e.stars ? e.stars : 5, r = document.createElement("span"), o = document.createElementNS("http://www.w3.org/2000/svg", "svg"), a = '<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>', l = '<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>';
  r.style.verticalAlign = "middle", o.setAttribute("width", "14"), o.setAttribute("height", "14"), o.setAttribute("viewBox", "0 0 512 512"), o.setAttribute("xml:space", "preserve"), o.style.padding = "0 1px", i = i && !isNaN(i) ? parseInt(i) : 0, i = Math.max(0, Math.min(i, n));
  for (var h = 1; h <= n; h++) {
    var c = o.cloneNode(!0);
    c.innerHTML = h <= i ? a : l, r.appendChild(c);
  }
  return s.style.whiteSpace = "nowrap", s.style.overflow = "hidden", s.style.textOverflow = "ellipsis", s.setAttribute("aria-label", i), r;
}
function Wg(A, e, t) {
  var i = this.sanitizeHTML(A.getValue()) || 0, s = document.createElement("span"), n = e && e.max ? e.max : 100, r = e && e.min ? e.min : 0, o = e && typeof e.color < "u" ? e.color : ["red", "orange", "green"], a = "#666666", l, h;
  if (!(isNaN(i) || typeof A.getValue() > "u")) {
    switch (s.classList.add("tabulator-traffic-light"), h = parseFloat(i) <= n ? parseFloat(i) : n, h = parseFloat(h) >= r ? parseFloat(h) : r, l = (n - r) / 100, h = Math.round((h - r) / l), typeof o) {
      case "string":
        a = o;
        break;
      case "function":
        a = o(i);
        break;
      case "object":
        if (Array.isArray(o)) {
          var c = 100 / o.length, u = Math.floor(h / c);
          u = Math.min(u, o.length - 1), u = Math.max(u, 0), a = o[u];
          break;
        }
    }
    return s.style.backgroundColor = a, s;
  }
}
function jg(A, e = {}, t) {
  var i = this.sanitizeHTML(A.getValue()) || 0, s = A.getElement(), n = e.max ? e.max : 100, r = e.min ? e.min : 0, o = e.legendAlign ? e.legendAlign : "center", a, l, h, c, u;
  switch (l = parseFloat(i) <= n ? parseFloat(i) : n, l = parseFloat(l) >= r ? parseFloat(l) : r, a = (n - r) / 100, l = Math.round((l - r) / a), typeof e.color) {
    case "string":
      h = e.color;
      break;
    case "function":
      h = e.color(i);
      break;
    case "object":
      if (Array.isArray(e.color)) {
        let b = 100 / e.color.length, w = Math.floor(l / b);
        w = Math.min(w, e.color.length - 1), w = Math.max(w, 0), h = e.color[w];
        break;
      }
    default:
      h = "#2DC214";
  }
  switch (typeof e.legend) {
    case "string":
      c = e.legend;
      break;
    case "function":
      c = e.legend(i);
      break;
    case "boolean":
      c = i;
      break;
    default:
      c = !1;
  }
  switch (typeof e.legendColor) {
    case "string":
      u = e.legendColor;
      break;
    case "function":
      u = e.legendColor(i);
      break;
    case "object":
      if (Array.isArray(e.legendColor)) {
        let b = 100 / e.legendColor.length, w = Math.floor(l / b);
        w = Math.min(w, e.legendColor.length - 1), w = Math.max(w, 0), u = e.legendColor[w];
      }
      break;
    default:
      u = "#000";
  }
  s.style.minWidth = "30px", s.style.position = "relative", s.setAttribute("aria-label", l);
  var d = document.createElement("div");
  d.style.display = "inline-block", d.style.width = l + "%", d.style.backgroundColor = h, d.style.height = "100%", d.setAttribute("data-max", n), d.setAttribute("data-min", r);
  var f = document.createElement("div");
  if (f.style.position = "relative", f.style.width = "100%", f.style.height = "100%", c) {
    var p = document.createElement("div");
    p.style.position = "absolute", p.style.top = 0, p.style.left = 0, p.style.textAlign = o, p.style.width = "100%", p.style.color = u, p.innerHTML = c;
  }
  return t(function() {
    if (!(A instanceof cu)) {
      var b = document.createElement("div");
      b.style.position = "absolute", b.style.top = "4px", b.style.bottom = "4px", b.style.left = "4px", b.style.right = "4px", s.appendChild(b), s = b;
    }
    s.appendChild(f), f.appendChild(d), c && f.appendChild(p);
  }), "";
}
function Xg(A, e, t) {
  return A.getElement().style.backgroundColor = this.sanitizeHTML(A.getValue()), "";
}
function Yg(A, e, t) {
  return '<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>';
}
function Jg(A, e, t) {
  return '<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';
}
function $g(A, e, t) {
  var i = A.getValue(), s = e.size || 15, n = s + "px", r, o, a = e.hasOwnProperty("onValue") ? e.onValue : !0, l = e.hasOwnProperty("offValue") ? e.offValue : !1, h = e.onTruthy ? i : i === a;
  return r = document.createElement("div"), r.classList.add("tabulator-toggle"), h ? (r.classList.add("tabulator-toggle-on"), r.style.flexDirection = "row-reverse", e.onColor && (r.style.background = e.onColor)) : e.offColor && (r.style.background = e.offColor), r.style.width = 2.5 * s + "px", r.style.borderRadius = n, e.clickable && r.addEventListener("click", (c) => {
    A.setValue(h ? l : a);
  }), o = document.createElement("div"), o.classList.add("tabulator-toggle-switch"), o.style.height = n, o.style.width = n, o.style.borderRadius = n, r.appendChild(o), r;
}
function Zg(A, e, t) {
  var i = document.createElement("span"), s = A.getRow(), n = A.getTable();
  return s.watchPosition((r) => {
    e.relativeToPage && (r += n.modules.page.getPageSize() * (n.modules.page.getPage() - 1)), i.innerText = r;
  }), i;
}
function qg(A, e, t) {
  return A.getElement().classList.add("tabulator-row-handle"), "<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>";
}
function ep(A, e, t) {
  var i, s, n;
  function r(o) {
    var a = o.getValue(), l = "plaintext";
    switch (typeof a) {
      case "boolean":
        l = "tickCross";
        break;
      case "string":
        a.includes(`
`) && (l = "textarea");
        break;
    }
    return l;
  }
  return i = e.formatterLookup ? e.formatterLookup(A) : r(A), e.paramsLookup && (n = typeof e.paramsLookup == "function" ? e.paramsLookup(i, A) : e.paramsLookup[i]), s = this.table.modules.format.lookupFormatter(i), s.call(this, A, n || {}, t);
}
function tp(A, e, t) {
  var i = e.delimiter || ",", s = A.getValue(), n = this.table, r;
  return e.valueMap && (typeof e.valueMap == "string" ? r = function(o) {
    return o.map((a) => Ee.retrieveNestedData(n.options.nestedFieldSeparator, e.valueMap, a));
  } : r = e.valueMap), Array.isArray(s) ? (r && (s = r(s)), s.join(i)) : s;
}
function ip(A, e, t) {
  var i = e.indent || "	", s = typeof e.multiline > "u" ? !0 : e.multiline, n = e.replacer || null, r = A.getValue();
  return s && (A.getElement().style.whiteSpace = "pre-wrap"), JSON.stringify(r, n, i);
}
var sp = {
  plaintext: Lg,
  html: Rg,
  textarea: Ig,
  money: kg,
  link: Og,
  image: Pg,
  tickCross: Ng,
  datetime: Kg,
  datetimediff: Vg,
  lookup: zg,
  star: Gg,
  traffic: Wg,
  progress: jg,
  color: Xg,
  buttonTick: Yg,
  buttonCross: Jg,
  toggle: $g,
  rownum: Zg,
  handle: qg,
  adaptable: ep,
  array: tp,
  json: ip
};
const Li = class Li extends ne {
  constructor(e) {
    super(e), this.registerColumnOption("formatter"), this.registerColumnOption("formatterParams"), this.registerColumnOption("formatterPrint"), this.registerColumnOption("formatterPrintParams"), this.registerColumnOption("formatterClipboard"), this.registerColumnOption("formatterClipboardParams"), this.registerColumnOption("formatterHtmlOutput"), this.registerColumnOption("formatterHtmlOutputParams"), this.registerColumnOption("titleFormatter"), this.registerColumnOption("titleFormatterParams");
  }
  initialize() {
    this.subscribe("cell-format", this.formatValue.bind(this)), this.subscribe("cell-rendered", this.cellRendered.bind(this)), this.subscribe("column-layout", this.initializeColumn.bind(this)), this.subscribe("column-format", this.formatHeader.bind(this));
  }
  //initialize column formatter
  initializeColumn(e) {
    e.modules.format = this.lookupTypeFormatter(e, ""), typeof e.definition.formatterPrint < "u" && (e.modules.format.print = this.lookupTypeFormatter(e, "Print")), typeof e.definition.formatterClipboard < "u" && (e.modules.format.clipboard = this.lookupTypeFormatter(e, "Clipboard")), typeof e.definition.formatterHtmlOutput < "u" && (e.modules.format.htmlOutput = this.lookupTypeFormatter(e, "HtmlOutput"));
  }
  lookupTypeFormatter(e, t) {
    var i = { params: e.definition["formatter" + t + "Params"] || {} }, s = e.definition["formatter" + t];
    return i.formatter = this.lookupFormatter(s), i;
  }
  lookupFormatter(e) {
    var t;
    switch (typeof e) {
      case "string":
        Li.formatters[e] ? t = Li.formatters[e] : (console.warn("Formatter Error - No such formatter found: ", e), t = Li.formatters.plaintext);
        break;
      case "function":
        t = e;
        break;
      default:
        t = Li.formatters.plaintext;
        break;
    }
    return t;
  }
  cellRendered(e) {
    e.modules.format && e.modules.format.renderedCallback && !e.modules.format.rendered && (e.modules.format.renderedCallback(), e.modules.format.rendered = !0);
  }
  //return a formatted value for a column header
  formatHeader(e, t, i) {
    var s, n, r, o;
    return e.definition.titleFormatter ? (s = this.lookupFormatter(e.definition.titleFormatter), r = (a) => {
      e.titleFormatterRendered = a;
    }, o = {
      getValue: function() {
        return t;
      },
      getElement: function() {
        return i;
      },
      getType: function() {
        return "header";
      },
      getColumn: function() {
        return e.getComponent();
      },
      getTable: () => this.table
    }, n = e.definition.titleFormatterParams || {}, n = typeof n == "function" ? n() : n, s.call(this, o, n, r)) : t;
  }
  //return a formatted value for a cell
  formatValue(e) {
    var t = e.getComponent(), i = typeof e.column.modules.format.params == "function" ? e.column.modules.format.params(t) : e.column.modules.format.params;
    function s(n) {
      e.modules.format || (e.modules.format = {}), e.modules.format.renderedCallback = n, e.modules.format.rendered = !1;
    }
    return e.column.modules.format.formatter.call(this, t, i, s);
  }
  formatExportValue(e, t) {
    var i = e.column.modules.format[t], s;
    if (i) {
      let n = function(r) {
        e.modules.format || (e.modules.format = {}), e.modules.format.renderedCallback = r, e.modules.format.rendered = !1;
      };
      return s = typeof i.params == "function" ? i.params(e.getComponent()) : i.params, i.formatter.call(this, e.getComponent(), s, n);
    } else
      return this.formatValue(e);
  }
  sanitizeHTML(e) {
    if (e) {
      var t = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;",
        "/": "&#x2F;",
        "`": "&#x60;",
        "=": "&#x3D;"
      };
      return String(e).replace(/[&<>"'`=/]/g, function(i) {
        return t[i];
      });
    } else
      return e;
  }
  emptyToSpace(e) {
    return e === null || typeof e > "u" || e === "" ? "&nbsp;" : e;
  }
};
D(Li, "moduleName", "format"), //load defaults
D(Li, "formatters", sp);
let pa = Li;
class gu extends ne {
  constructor(e) {
    super(e), this.leftColumns = [], this.rightColumns = [], this.initializationMode = "left", this.active = !1, this.blocked = !0, this.registerColumnOption("frozen");
  }
  //reset initial state
  reset() {
    this.initializationMode = "left", this.leftColumns = [], this.rightColumns = [], this.active = !1;
  }
  initialize() {
    this.subscribe("cell-layout", this.layoutCell.bind(this)), this.subscribe("column-init", this.initializeColumn.bind(this)), this.subscribe("column-width", this.layout.bind(this)), this.subscribe("row-layout-after", this.layoutRow.bind(this)), this.subscribe("table-layout", this.layout.bind(this)), this.subscribe("columns-loading", this.reset.bind(this)), this.subscribe("column-add", this.reinitializeColumns.bind(this)), this.subscribe("column-deleted", this.reinitializeColumns.bind(this)), this.subscribe("column-hide", this.reinitializeColumns.bind(this)), this.subscribe("column-show", this.reinitializeColumns.bind(this)), this.subscribe("columns-loaded", this.reinitializeColumns.bind(this)), this.subscribe("table-redraw", this.layout.bind(this)), this.subscribe("layout-refreshing", this.blockLayout.bind(this)), this.subscribe("layout-refreshed", this.unblockLayout.bind(this)), this.subscribe("scrollbar-vertical", this.adjustForScrollbar.bind(this));
  }
  blockLayout() {
    this.blocked = !0;
  }
  unblockLayout() {
    this.blocked = !1;
  }
  layoutCell(e) {
    this.layoutElement(e.element, e.column);
  }
  reinitializeColumns() {
    this.reset(), this.table.columnManager.columnsByIndex.forEach((e) => {
      this.initializeColumn(e);
    }), this.layout();
  }
  //initialize specific column
  initializeColumn(e) {
    var t = { margin: 0, edge: !1 };
    e.isGroup || (this.frozenCheck(e) ? (t.position = this.initializationMode, this.initializationMode == "left" ? this.leftColumns.push(e) : this.rightColumns.unshift(e), this.active = !0, e.modules.frozen = t) : this.initializationMode = "right");
  }
  frozenCheck(e) {
    return e.parent.isGroup && e.definition.frozen && console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"), e.parent.isGroup ? this.frozenCheck(e.parent) : e.definition.frozen;
  }
  //layout calculation rows
  layoutCalcRows() {
    this.table.modExists("columnCalcs") && (this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow && this.layoutRow(this.table.modules.columnCalcs.topRow), this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow && this.layoutRow(this.table.modules.columnCalcs.botRow), this.table.modExists("groupRows") && this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()));
  }
  layoutGroupCalcs(e) {
    e.forEach((t) => {
      t.calcs.top && this.layoutRow(t.calcs.top), t.calcs.bottom && this.layoutRow(t.calcs.bottom), t.groupList && t.groupList.length && this.layoutGroupCalcs(t.groupList);
    });
  }
  //calculate column positions and layout headers
  layoutColumnPosition(e) {
    var t = [], i = 0, s = 0;
    this.leftColumns.forEach((n, r) => {
      if (n.modules.frozen.marginValue = i, n.modules.frozen.margin = n.modules.frozen.marginValue + "px", n.visible && (i += n.getWidth()), r == this.leftColumns.length - 1 ? n.modules.frozen.edge = !0 : n.modules.frozen.edge = !1, n.parent.isGroup) {
        var o = this.getColGroupParentElement(n);
        t.includes(o) || (this.layoutElement(o, n), t.push(o)), o.classList.toggle("tabulator-frozen-left", n.modules.frozen.edge && n.modules.frozen.position === "left"), o.classList.toggle("tabulator-frozen-right", n.modules.frozen.edge && n.modules.frozen.position === "right");
      } else
        this.layoutElement(n.getElement(), n);
      e && n.cells.forEach((a) => {
        this.layoutElement(a.getElement(!0), n);
      });
    }), this.rightColumns.forEach((n, r) => {
      n.modules.frozen.marginValue = s, n.modules.frozen.margin = n.modules.frozen.marginValue + "px", n.visible && (s += n.getWidth()), r == this.rightColumns.length - 1 ? n.modules.frozen.edge = !0 : n.modules.frozen.edge = !1, n.parent.isGroup ? this.layoutElement(this.getColGroupParentElement(n), n) : this.layoutElement(n.getElement(), n), e && n.cells.forEach((o) => {
        this.layoutElement(o.getElement(!0), n);
      });
    });
  }
  getColGroupParentElement(e) {
    return e.parent.isGroup ? this.getColGroupParentElement(e.parent) : e.getElement();
  }
  //layout columns appropriately
  layout() {
    this.active && !this.blocked && (this.layoutColumnPosition(), this.reinitializeRows(), this.layoutCalcRows());
  }
  reinitializeRows() {
    var e = this.table.rowManager.getVisibleRows(!0), t = this.table.rowManager.getRows().filter((i) => !e.includes(i));
    t.forEach((i) => {
      i.deinitialize();
    }), e.forEach((i) => {
      i.type === "row" && this.layoutRow(i);
    });
  }
  layoutRow(e) {
    this.table.options.layout === "fitDataFill" && this.rightColumns.length && (this.table.rowManager.getTableElement().style.minWidth = "calc(100% - " + this.rightMargin + ")"), this.leftColumns.forEach((t) => {
      var i = e.getCell(t);
      i && this.layoutElement(i.getElement(!0), t);
    }), this.rightColumns.forEach((t) => {
      var i = e.getCell(t);
      i && this.layoutElement(i.getElement(!0), t);
    });
  }
  layoutElement(e, t) {
    var i;
    t.modules.frozen && e && (e.style.position = "sticky", this.table.rtl ? i = t.modules.frozen.position === "left" ? "right" : "left" : i = t.modules.frozen.position, e.style[i] = t.modules.frozen.margin, e.classList.add("tabulator-frozen"), e.classList.toggle("tabulator-frozen-left", t.modules.frozen.edge && t.modules.frozen.position === "left"), e.classList.toggle("tabulator-frozen-right", t.modules.frozen.edge && t.modules.frozen.position === "right"));
  }
  adjustForScrollbar(e) {
    this.rightColumns.length && (this.table.columnManager.getContentsElement().style.width = "calc(100% - " + e + "px)");
  }
  getFrozenColumns() {
    return this.leftColumns.concat(this.rightColumns);
  }
  _calcSpace(e, t) {
    var i = 0;
    for (let s = 0; s < t; s++)
      e[s].visible && (i += e[s].getWidth());
    return i;
  }
}
D(gu, "moduleName", "frozenColumns");
class pu extends ne {
  constructor(e) {
    super(e), this.topElement = document.createElement("div"), this.rows = [], this.registerComponentFunction("row", "freeze", this.freezeRow.bind(this)), this.registerComponentFunction("row", "unfreeze", this.unfreezeRow.bind(this)), this.registerComponentFunction("row", "isFrozen", this.isRowFrozen.bind(this)), this.registerTableOption("frozenRowsField", "id"), this.registerTableOption("frozenRows", !1);
  }
  initialize() {
    var e = document.createDocumentFragment();
    this.rows = [], this.topElement.classList.add("tabulator-frozen-rows-holder"), e.appendChild(document.createElement("br")), e.appendChild(this.topElement), this.table.columnManager.getContentsElement().insertBefore(e, this.table.columnManager.headersElement.nextSibling), this.subscribe("row-deleting", this.detachRow.bind(this)), this.subscribe("rows-visible", this.visibleRows.bind(this)), this.registerDisplayHandler(this.getRows.bind(this), 10), this.table.options.frozenRows && (this.subscribe("data-processed", this.initializeRows.bind(this)), this.subscribe("row-added", this.initializeRow.bind(this)), this.subscribe("table-redrawing", this.resizeHolderWidth.bind(this)), this.subscribe("column-resized", this.resizeHolderWidth.bind(this)), this.subscribe("column-show", this.resizeHolderWidth.bind(this)), this.subscribe("column-hide", this.resizeHolderWidth.bind(this))), this.resizeHolderWidth();
  }
  resizeHolderWidth() {
    this.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + "px";
  }
  initializeRows() {
    this.table.rowManager.getRows().forEach((e) => {
      this.initializeRow(e);
    });
  }
  initializeRow(e) {
    var t = this.table.options.frozenRows, i = typeof t;
    i === "number" ? e.getPosition() && e.getPosition() + this.rows.length <= t && this.freezeRow(e) : i === "function" ? t.call(this.table, e.getComponent()) && this.freezeRow(e) : Array.isArray(t) && t.includes(e.data[this.options("frozenRowsField")]) && this.freezeRow(e);
  }
  isRowFrozen(e) {
    var t = this.rows.indexOf(e);
    return t > -1;
  }
  isFrozen() {
    return !!this.rows.length;
  }
  visibleRows(e, t) {
    return this.rows.forEach((i) => {
      t.push(i);
    }), t;
  }
  //filter frozen rows out of display data
  getRows(e) {
    var t = e.slice(0);
    return this.rows.forEach(function(i) {
      var s = t.indexOf(i);
      s > -1 && t.splice(s, 1);
    }), t;
  }
  freezeRow(e) {
    e.modules.frozen ? console.warn("Freeze Error - Row is already frozen") : (e.modules.frozen = !0, this.topElement.appendChild(e.getElement()), e.initialize(), e.normalizeHeight(), this.rows.push(e), this.refreshData(!1, "display"), this.table.rowManager.adjustTableSize(), this.styleRows());
  }
  unfreezeRow(e) {
    e.modules.frozen ? (e.modules.frozen = !1, this.detachRow(e), this.table.rowManager.adjustTableSize(), this.refreshData(!1, "display"), this.rows.length && this.styleRows()) : console.warn("Freeze Error - Row is already unfrozen");
  }
  detachRow(e) {
    var t = this.rows.indexOf(e);
    if (t > -1) {
      var i = e.getElement();
      i.parentNode && i.parentNode.removeChild(i), this.rows.splice(t, 1);
    }
  }
  styleRows(e) {
    this.rows.forEach((t, i) => {
      this.table.rowManager.styleRow(t, i);
    });
  }
}
D(pu, "moduleName", "frozenRows");
class Ap {
  constructor(e) {
    return this._group = e, this.type = "GroupComponent", new Proxy(this, {
      get: function(t, i, s) {
        return typeof t[i] < "u" ? t[i] : t._group.groupManager.table.componentFunctionBinder.handle("group", t._group, i);
      }
    });
  }
  getKey() {
    return this._group.key;
  }
  getField() {
    return this._group.field;
  }
  getElement() {
    return this._group.element;
  }
  getRows() {
    return this._group.getRows(!0);
  }
  getSubGroups() {
    return this._group.getSubGroups(!0);
  }
  getParentGroup() {
    return this._group.parent ? this._group.parent.getComponent() : !1;
  }
  isVisible() {
    return this._group.visible;
  }
  show() {
    this._group.show();
  }
  hide() {
    this._group.hide();
  }
  toggle() {
    this._group.toggleVisibility();
  }
  scrollTo(e, t) {
    return this._group.groupManager.table.rowManager.scrollToRow(this._group, e, t);
  }
  _getSelf() {
    return this._group;
  }
  getTable() {
    return this._group.groupManager.table;
  }
}
class ks {
  constructor(e, t, i, s, n, r, o) {
    this.groupManager = e, this.parent = t, this.key = s, this.level = i, this.field = n, this.hasSubGroups = i < e.groupIDLookups.length - 1, this.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow, this.type = "group", this.old = o, this.rows = [], this.groups = [], this.groupList = [], this.generator = r, this.element = !1, this.elementContents = !1, this.height = 0, this.outerHeight = 0, this.initialized = !1, this.calcs = {}, this.initialized = !1, this.modules = {}, this.arrowElement = !1, this.visible = o ? o.visible : typeof e.startOpen[i] < "u" ? e.startOpen[i] : e.startOpen[0], this.component = null, this.createElements(), this.addBindings(), this.createValueGroups();
  }
  wipe(e) {
    e || (this.groupList.length ? this.groupList.forEach(function(t) {
      t.wipe();
    }) : this.rows.forEach((t) => {
      t.modules && delete t.modules.group;
    })), this.element = !1, this.arrowElement = !1, this.elementContents = !1;
  }
  createElements() {
    var e = document.createElement("div");
    e.classList.add("tabulator-arrow"), this.element = document.createElement("div"), this.element.classList.add("tabulator-row"), this.element.classList.add("tabulator-group"), this.element.classList.add("tabulator-group-level-" + this.level), this.element.setAttribute("role", "rowgroup"), this.arrowElement = document.createElement("div"), this.arrowElement.classList.add("tabulator-group-toggle"), this.arrowElement.appendChild(e), this.groupManager.table.options.movableRows !== !1 && this.groupManager.table.modExists("moveRow") && this.groupManager.table.modules.moveRow.initializeGroupHeader(this);
  }
  createValueGroups() {
    var e = this.level + 1;
    this.groupManager.allowedValues && this.groupManager.allowedValues[e] && this.groupManager.allowedValues[e].forEach((t) => {
      this._createGroup(t, e);
    });
  }
  addBindings() {
    var e;
    this.groupManager.table.options.groupToggleElement && (e = this.groupManager.table.options.groupToggleElement == "arrow" ? this.arrowElement : this.element, e.addEventListener("click", (t) => {
      this.groupManager.table.options.groupToggleElement === "arrow" && (t.stopPropagation(), t.stopImmediatePropagation()), setTimeout(() => {
        this.toggleVisibility();
      });
    }));
  }
  _createGroup(e, t) {
    var i = t + "_" + e, s = new ks(this.groupManager, this, t, e, this.groupManager.groupIDLookups[t].field, this.groupManager.headerGenerator[t] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[i] : !1);
    this.groups[i] = s, this.groupList.push(s);
  }
  _addRowToGroup(e) {
    var t = this.level + 1;
    if (this.hasSubGroups) {
      var i = this.groupManager.groupIDLookups[t].func(e.getData()), s = t + "_" + i;
      this.groupManager.allowedValues && this.groupManager.allowedValues[t] ? this.groups[s] && this.groups[s].addRow(e) : (this.groups[s] || this._createGroup(i, t), this.groups[s].addRow(e));
    }
  }
  _addRow(e) {
    this.rows.push(e), e.modules.group = this;
  }
  insertRow(e, t, i) {
    var s = this.conformRowData({});
    e.updateData(s);
    var n = this.rows.indexOf(t);
    n > -1 ? i ? this.rows.splice(n + 1, 0, e) : this.rows.splice(n, 0, e) : i ? this.rows.push(e) : this.rows.unshift(e), e.modules.group = this, this.groupManager.table.modExists("columnCalcs") && this.groupManager.table.options.columnCalcs != "table" && this.groupManager.table.modules.columnCalcs.recalcGroup(this), this.groupManager.updateGroupRows(!0);
  }
  scrollHeader(e) {
    this.arrowElement && (this.arrowElement.style.marginLeft = e, this.groupList.forEach(function(t) {
      t.scrollHeader(e);
    }));
  }
  getRowIndex(e) {
  }
  //update row data to match grouping constraints
  conformRowData(e) {
    return this.field ? e[this.field] = this.key : console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"), this.parent && (e = this.parent.conformRowData(e)), e;
  }
  removeRow(e) {
    var t = this.rows.indexOf(e), i = e.getElement();
    t > -1 && this.rows.splice(t, 1), !this.groupManager.table.options.groupValues && !this.rows.length ? (this.parent ? this.parent.removeGroup(this) : this.groupManager.removeGroup(this), this.groupManager.updateGroupRows(!0)) : (i.parentNode && i.parentNode.removeChild(i), this.groupManager.blockRedraw || (this.generateGroupHeaderContents(), this.groupManager.table.modExists("columnCalcs") && this.groupManager.table.options.columnCalcs != "table" && this.groupManager.table.modules.columnCalcs.recalcGroup(this)));
  }
  removeGroup(e) {
    var t = e.level + "_" + e.key, i;
    this.groups[t] && (delete this.groups[t], i = this.groupList.indexOf(e), i > -1 && this.groupList.splice(i, 1), this.groupList.length || (this.parent ? this.parent.removeGroup(this) : this.groupManager.removeGroup(this)));
  }
  getHeadersAndRows() {
    var e = [];
    return e.push(this), this._visSet(), this.calcs.top && (this.calcs.top.detachElement(), this.calcs.top.deleteCells()), this.calcs.bottom && (this.calcs.bottom.detachElement(), this.calcs.bottom.deleteCells()), this.visible ? this.groupList.length ? this.groupList.forEach(function(t) {
      e = e.concat(t.getHeadersAndRows());
    }) : (this.groupManager.table.options.columnCalcs != "table" && this.groupManager.table.modExists("columnCalcs") && this.groupManager.table.modules.columnCalcs.hasTopCalcs() && (this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows), e.push(this.calcs.top)), e = e.concat(this.rows), this.groupManager.table.options.columnCalcs != "table" && this.groupManager.table.modExists("columnCalcs") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs() && (this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows), e.push(this.calcs.bottom))) : !this.groupList.length && this.groupManager.table.options.columnCalcs != "table" && this.groupManager.table.modExists("columnCalcs") && (this.groupManager.table.modules.columnCalcs.hasTopCalcs() && this.groupManager.table.options.groupClosedShowCalcs && (this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows), e.push(this.calcs.top)), this.groupManager.table.modules.columnCalcs.hasBottomCalcs() && this.groupManager.table.options.groupClosedShowCalcs && (this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows), e.push(this.calcs.bottom))), e;
  }
  getData(e, t) {
    var i = [];
    return this._visSet(), (!e || e && this.visible) && this.rows.forEach((s) => {
      i.push(s.getData(t || "data"));
    }), i;
  }
  getRowCount() {
    var e = 0;
    return this.groupList.length ? this.groupList.forEach((t) => {
      e += t.getRowCount();
    }) : e = this.rows.length, e;
  }
  toggleVisibility() {
    this.visible ? this.hide() : this.show();
  }
  hide() {
    this.visible = !1, this.groupManager.table.rowManager.getRenderMode() == "basic" && !this.groupManager.table.options.pagination ? (this.element.classList.remove("tabulator-group-visible"), this.groupList.length ? this.groupList.forEach((e) => {
      var t = e.getHeadersAndRows();
      t.forEach((i) => {
        i.detachElement();
      });
    }) : this.rows.forEach((e) => {
      var t = e.getElement();
      t.parentNode.removeChild(t);
    }), this.groupManager.updateGroupRows(!0)) : this.groupManager.updateGroupRows(!0), this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged", this.getComponent(), !1);
  }
  show() {
    if (this.visible = !0, this.groupManager.table.rowManager.getRenderMode() == "basic" && !this.groupManager.table.options.pagination) {
      this.element.classList.add("tabulator-group-visible");
      var e = this.generateElement();
      this.groupList.length ? this.groupList.forEach((t) => {
        var i = t.getHeadersAndRows();
        i.forEach((s) => {
          var n = s.getElement();
          e.parentNode.insertBefore(n, e.nextSibling), s.initialize(), e = n;
        });
      }) : this.rows.forEach((t) => {
        var i = t.getElement();
        e.parentNode.insertBefore(i, e.nextSibling), t.initialize(), e = i;
      }), this.groupManager.updateGroupRows(!0);
    } else
      this.groupManager.updateGroupRows(!0);
    this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged", this.getComponent(), !0);
  }
  _visSet() {
    var e = [];
    typeof this.visible == "function" && (this.rows.forEach(function(t) {
      e.push(t.getData());
    }), this.visible = this.visible(this.key, this.getRowCount(), e, this.getComponent()));
  }
  getRowGroup(e) {
    var t = !1;
    return this.groupList.length ? this.groupList.forEach(function(i) {
      var s = i.getRowGroup(e);
      s && (t = s);
    }) : this.rows.find(function(i) {
      return i === e;
    }) && (t = this), t;
  }
  getSubGroups(e) {
    var t = [];
    return this.groupList.forEach(function(i) {
      t.push(e ? i.getComponent() : i);
    }), t;
  }
  getRows(e, t) {
    var i = [];
    return t && this.groupList.length ? this.groupList.forEach((s) => {
      i = i.concat(s.getRows(e, t));
    }) : this.rows.forEach(function(s) {
      i.push(e ? s.getComponent() : s);
    }), i;
  }
  generateGroupHeaderContents() {
    var e = [], t = this.getRows(!1, !0);
    for (t.forEach(function(i) {
      e.push(i.getData());
    }), this.elementContents = this.generator(this.key, this.getRowCount(), e, this.getComponent()); this.element.firstChild; ) this.element.removeChild(this.element.firstChild);
    typeof this.elementContents == "string" ? this.element.innerHTML = this.elementContents : this.element.appendChild(this.elementContents), this.element.insertBefore(this.arrowElement, this.element.firstChild);
  }
  getPath(e = []) {
    return e.unshift(this.key), this.parent && this.parent.getPath(e), e;
  }
  ////////////// Standard Row Functions //////////////
  getElement() {
    return this.elementContents ? this.element : this.generateElement();
  }
  generateElement() {
    this.addBindings = !1, this._visSet(), this.visible ? this.element.classList.add("tabulator-group-visible") : this.element.classList.remove("tabulator-group-visible");
    for (var e = 0; e < this.element.childNodes.length; ++e)
      this.element.childNodes[e].parentNode.removeChild(this.element.childNodes[e]);
    return this.generateGroupHeaderContents(), this.element;
  }
  detachElement() {
    this.element && this.element.parentNode && this.element.parentNode.removeChild(this.element);
  }
  //normalize the height of elements in the row
  normalizeHeight() {
    this.setHeight(this.element.clientHeight);
  }
  initialize(e) {
    (!this.initialized || e) && (this.normalizeHeight(), this.initialized = !0);
  }
  reinitialize() {
    this.initialized = !1, this.height = 0, Ee.elVisible(this.element) && this.initialize(!0);
  }
  setHeight(e) {
    this.height != e && (this.height = e, this.outerHeight = this.element.offsetHeight);
  }
  //return rows outer height
  getHeight() {
    return this.outerHeight;
  }
  getGroup() {
    return this;
  }
  reinitializeHeight() {
  }
  calcHeight() {
  }
  setCellHeight() {
  }
  clearCellHeight() {
  }
  deinitializeHeight() {
  }
  rendered() {
  }
  //////////////// Object Generation /////////////////
  getComponent() {
    return this.component || (this.component = new Ap(this)), this.component;
  }
}
class mu extends ne {
  constructor(e) {
    super(e), this.groupIDLookups = !1, this.startOpen = [function() {
      return !1;
    }], this.headerGenerator = [function() {
      return "";
    }], this.groupList = [], this.allowedValues = !1, this.groups = {}, this.displayHandler = this.getRows.bind(this), this.blockRedraw = !1, this.registerTableOption("groupBy", !1), this.registerTableOption("groupStartOpen", !0), this.registerTableOption("groupValues", !1), this.registerTableOption("groupUpdateOnCellEdit", !1), this.registerTableOption("groupHeader", !1), this.registerTableOption("groupHeaderPrint", null), this.registerTableOption("groupHeaderClipboard", null), this.registerTableOption("groupHeaderHtmlOutput", null), this.registerTableOption("groupHeaderDownload", null), this.registerTableOption("groupToggleElement", "arrow"), this.registerTableOption("groupClosedShowCalcs", !1), this.registerTableFunction("setGroupBy", this.setGroupBy.bind(this)), this.registerTableFunction("setGroupValues", this.setGroupValues.bind(this)), this.registerTableFunction("setGroupStartOpen", this.setGroupStartOpen.bind(this)), this.registerTableFunction("setGroupHeader", this.setGroupHeader.bind(this)), this.registerTableFunction("getGroups", this.userGetGroups.bind(this)), this.registerTableFunction("getGroupedData", this.userGetGroupedData.bind(this)), this.registerComponentFunction("row", "getGroup", this.rowGetGroup.bind(this));
  }
  //initialize group configuration
  initialize() {
    this.subscribe("table-destroy", this._blockRedrawing.bind(this)), this.subscribe("rows-wipe", this._blockRedrawing.bind(this)), this.subscribe("rows-wiped", this._restore_redrawing.bind(this)), this.table.options.groupBy && (this.table.options.groupUpdateOnCellEdit && (this.subscribe("cell-value-updated", this.cellUpdated.bind(this)), this.subscribe("row-data-changed", this.reassignRowToGroup.bind(this), 0)), this.subscribe("table-built", this.configureGroupSetup.bind(this)), this.subscribe("row-deleting", this.rowDeleting.bind(this)), this.subscribe("row-deleted", this.rowsUpdated.bind(this)), this.subscribe("scroll-horizontal", this.scrollHeaders.bind(this)), this.subscribe("rows-wipe", this.wipe.bind(this)), this.subscribe("rows-added", this.rowsUpdated.bind(this)), this.subscribe("row-moving", this.rowMoving.bind(this)), this.subscribe("row-adding-index", this.rowAddingIndex.bind(this)), this.subscribe("rows-sample", this.rowSample.bind(this)), this.subscribe("render-virtual-fill", this.virtualRenderFill.bind(this)), this.registerDisplayHandler(this.displayHandler, 20), this.initialized = !0);
  }
  _blockRedrawing() {
    this.blockRedraw = !0;
  }
  _restore_redrawing() {
    this.blockRedraw = !1;
  }
  configureGroupSetup() {
    if (this.table.options.groupBy) {
      var e = this.table.options.groupBy, t = this.table.options.groupStartOpen, i = this.table.options.groupHeader;
      if (this.allowedValues = this.table.options.groupValues, Array.isArray(e) && Array.isArray(i) && e.length > i.length && console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"), this.headerGenerator = [function() {
        return "";
      }], this.startOpen = [function() {
        return !1;
      }], this.langBind("groups|item", (n, r) => {
        this.headerGenerator[0] = (o, a, l) => (typeof o > "u" ? "" : o) + "<span>(" + a + " " + (a === 1 ? n : r.groups.items) + ")</span>";
      }), this.groupIDLookups = [], e)
        this.table.modExists("columnCalcs") && this.table.options.columnCalcs != "table" && this.table.options.columnCalcs != "both" && this.table.modules.columnCalcs.removeCalcs();
      else if (this.table.modExists("columnCalcs") && this.table.options.columnCalcs != "group") {
        var s = this.table.columnManager.getRealColumns();
        s.forEach((n) => {
          n.definition.topCalc && this.table.modules.columnCalcs.initializeTopRow(), n.definition.bottomCalc && this.table.modules.columnCalcs.initializeBottomRow();
        });
      }
      Array.isArray(e) || (e = [e]), e.forEach((n, r) => {
        var o, a;
        typeof n == "function" ? o = n : (a = this.table.columnManager.getColumnByField(n), a ? o = function(l) {
          return a.getFieldValue(l);
        } : o = function(l) {
          return l[n];
        }), this.groupIDLookups.push({
          field: typeof n == "function" ? !1 : n,
          func: o,
          values: this.allowedValues ? this.allowedValues[r] : !1
        });
      }), t && (Array.isArray(t) || (t = [t]), t.forEach((n) => {
      }), this.startOpen = t), i && (this.headerGenerator = Array.isArray(i) ? i : [i]);
    } else
      this.groupList = [], this.groups = {};
  }
  rowSample(e, t) {
    if (this.table.options.groupBy) {
      var i = this.getGroups(!1)[0];
      t.push(i.getRows(!1)[0]);
    }
    return t;
  }
  virtualRenderFill() {
    var e = this.table.rowManager.tableElement, t = this.table.rowManager.getVisibleRows();
    if (this.table.options.groupBy)
      t = t.filter((i) => i.type !== "group"), e.style.minWidth = t.length ? "" : this.table.columnManager.getWidth() + "px";
    else
      return t;
  }
  rowAddingIndex(e, t, i) {
    if (this.table.options.groupBy) {
      this.assignRowToGroup(e);
      var s = e.modules.group.rows;
      return s.length > 1 && (!t || t && s.indexOf(t) == -1 ? i ? s[0] !== e && (t = s[0], this.table.rowManager.moveRowInArray(e.modules.group.rows, e, t, !i)) : s[s.length - 1] !== e && (t = s[s.length - 1], this.table.rowManager.moveRowInArray(e.modules.group.rows, e, t, !i)) : this.table.rowManager.moveRowInArray(e.modules.group.rows, e, t, !i)), t;
    }
  }
  trackChanges() {
    this.dispatch("group-changed");
  }
  ///////////////////////////////////
  ///////// Table Functions /////////
  ///////////////////////////////////
  setGroupBy(e) {
    this.table.options.groupBy = e, this.initialized || this.initialize(), this.configureGroupSetup(), !e && this.table.modExists("columnCalcs") && this.table.options.columnCalcs === !0 && this.table.modules.columnCalcs.reinitializeCalcs(), this.refreshData(), this.trackChanges();
  }
  setGroupValues(e) {
    this.table.options.groupValues = e, this.configureGroupSetup(), this.refreshData(), this.trackChanges();
  }
  setGroupStartOpen(e) {
    this.table.options.groupStartOpen = e, this.configureGroupSetup(), this.table.options.groupBy ? (this.refreshData(), this.trackChanges()) : console.warn("Grouping Update - cant refresh view, no groups have been set");
  }
  setGroupHeader(e) {
    this.table.options.groupHeader = e, this.configureGroupSetup(), this.table.options.groupBy ? (this.refreshData(), this.trackChanges()) : console.warn("Grouping Update - cant refresh view, no groups have been set");
  }
  userGetGroups(e) {
    return this.getGroups(!0);
  }
  // get grouped table data in the same format as getData()
  userGetGroupedData() {
    return this.table.options.groupBy ? this.getGroupedData() : this.getData();
  }
  ///////////////////////////////////////
  ///////// Component Functions /////////
  ///////////////////////////////////////
  rowGetGroup(e) {
    return e.modules.group ? e.modules.group.getComponent() : !1;
  }
  ///////////////////////////////////
  ///////// Internal Logic //////////
  ///////////////////////////////////
  rowMoving(e, t, i) {
    if (this.table.options.groupBy) {
      !i && t instanceof ks && (t = this.table.rowManager.prevDisplayRow(e) || t);
      var s = t instanceof ks ? t : t.modules.group, n = e instanceof ks ? e : e.modules.group;
      s === n ? this.table.rowManager.moveRowInArray(s.rows, e, t, i) : (n && n.removeRow(e), s.insertRow(e, t, i));
    }
  }
  rowDeleting(e) {
    this.table.options.groupBy && e.modules.group && e.modules.group.removeRow(e);
  }
  rowsUpdated(e) {
    this.table.options.groupBy && this.updateGroupRows(!0);
  }
  cellUpdated(e) {
    this.table.options.groupBy && this.reassignRowToGroup(e.row);
  }
  //return appropriate rows with group headers
  getRows(e) {
    return this.table.options.groupBy && this.groupIDLookups.length ? (this.dispatchExternal("dataGrouping"), this.generateGroups(e), this.subscribedExternal("dataGrouped") && this.dispatchExternal("dataGrouped", this.getGroups(!0)), this.updateGroupRows()) : e.slice(0);
  }
  getGroups(e) {
    var t = [];
    return this.groupList.forEach(function(i) {
      t.push(e ? i.getComponent() : i);
    }), t;
  }
  getChildGroups(e) {
    var t = [];
    return e || (e = this), e.groupList.forEach((i) => {
      i.groupList.length ? t = t.concat(this.getChildGroups(i)) : t.push(i);
    }), t;
  }
  wipe() {
    this.table.options.groupBy && (this.groupList.forEach(function(e) {
      e.wipe();
    }), this.groupList = [], this.groups = {});
  }
  pullGroupListData(e) {
    var t = [];
    return e.forEach((i) => {
      var s = {};
      s.level = 0, s.rowCount = 0, s.headerContent = "";
      var n = [];
      i.hasSubGroups ? (n = this.pullGroupListData(i.groupList), s.level = i.level, s.rowCount = n.length - i.groupList.length, s.headerContent = i.generator(i.key, s.rowCount, i.rows, i), t.push(s), t = t.concat(n)) : (s.level = i.level, s.headerContent = i.generator(i.key, i.rows.length, i.rows, i), s.rowCount = i.getRows().length, t.push(s), i.getRows().forEach((r) => {
        t.push(r.getData("data"));
      }));
    }), t;
  }
  getGroupedData() {
    return this.pullGroupListData(this.groupList);
  }
  getRowGroup(e) {
    var t = !1;
    return this.options("dataTree") && (e = this.table.modules.dataTree.getTreeParentRoot(e)), this.groupList.forEach((i) => {
      var s = i.getRowGroup(e);
      s && (t = s);
    }), t;
  }
  countGroups() {
    return this.groupList.length;
  }
  generateGroups(e) {
    var t = this.groups;
    this.groups = {}, this.groupList = [], this.allowedValues && this.allowedValues[0] ? (this.allowedValues[0].forEach((i) => {
      this.createGroup(i, 0, t);
    }), e.forEach((i) => {
      this.assignRowToExistingGroup(i, t);
    })) : e.forEach((i) => {
      this.assignRowToGroup(i, t);
    }), Object.values(t).forEach((i) => {
      i.wipe(!0);
    });
  }
  createGroup(e, t, i) {
    var s = t + "_" + e, n;
    i = i || [], n = new ks(this, !1, t, e, this.groupIDLookups[0].field, this.headerGenerator[0], i[s]), this.groups[s] = n, this.groupList.push(n);
  }
  assignRowToExistingGroup(e, t) {
    var i = this.groupIDLookups[0].func(e.getData()), s = "0_" + i;
    this.groups[s] && this.groups[s].addRow(e);
  }
  assignRowToGroup(e, t) {
    var i = this.groupIDLookups[0].func(e.getData()), s = !this.groups["0_" + i];
    return s && this.createGroup(i, 0, t), this.groups["0_" + i].addRow(e), !s;
  }
  reassignRowToGroup(e) {
    if (e.type === "row") {
      var t = e.modules.group, i = t.getPath(), s = this.getExpectedPath(e), n;
      n = i.length == s.length && i.every((r, o) => r === s[o]), n || (t.removeRow(e), this.assignRowToGroup(e, this.groups), this.refreshData(!0));
    }
  }
  getExpectedPath(e) {
    var t = [], i = e.getData();
    return this.groupIDLookups.forEach((s) => {
      t.push(s.func(i));
    }), t;
  }
  updateGroupRows(e) {
    var t = [];
    return this.blockRedraw || (this.groupList.forEach((i) => {
      t = t.concat(i.getHeadersAndRows());
    }), e && this.refreshData(!0)), t;
  }
  scrollHeaders(e) {
    this.table.options.groupBy && (this.table.options.renderHorizontal === "virtual" && (e -= this.table.columnManager.renderer.vDomPadLeft), e = e + "px", this.groupList.forEach((t) => {
      t.scrollHeader(e);
    }));
  }
  removeGroup(e) {
    var t = e.level + "_" + e.key, i;
    this.groups[t] && (delete this.groups[t], i = this.groupList.indexOf(e), i > -1 && this.groupList.splice(i, 1));
  }
  checkBasicModeGroupHeaderWidth() {
    var e = this.table.rowManager.tableElement, t = !0;
    this.table.rowManager.getDisplayRows().forEach((i, s) => {
      this.table.rowManager.styleRow(i, s), e.appendChild(i.getElement()), i.initialize(!0), i.type !== "group" && (t = !1);
    }), t ? e.style.minWidth = this.table.columnManager.getWidth() + "px" : e.style.minWidth = "";
  }
}
D(mu, "moduleName", "groupRows");
var np = {
  cellEdit: function(A) {
    A.component.setValueProcessData(A.data.oldValue), A.component.cellRendered();
  },
  rowAdd: function(A) {
    A.component.deleteActual(), this.table.rowManager.checkPlaceholder();
  },
  rowDelete: function(A) {
    var e = this.table.rowManager.addRowActual(A.data.data, A.data.pos, A.data.index);
    this.table.options.groupBy && this.table.modExists("groupRows") && this.table.modules.groupRows.updateGroupRows(!0), this._rebindRow(A.component, e), this.table.rowManager.checkPlaceholder();
  },
  rowMove: function(A) {
    var e = A.data.posFrom - A.data.posTo > 0;
    this.table.rowManager.moveRowActual(A.component, this.table.rowManager.getRowFromPosition(A.data.posFrom), e), this.table.rowManager.regenerateRowPositions(), this.table.rowManager.reRenderInPosition();
  }
}, rp = {
  cellEdit: function(A) {
    A.component.setValueProcessData(A.data.newValue), A.component.cellRendered();
  },
  rowAdd: function(A) {
    var e = this.table.rowManager.addRowActual(A.data.data, A.data.pos, A.data.index);
    this.table.options.groupBy && this.table.modExists("groupRows") && this.table.modules.groupRows.updateGroupRows(!0), this._rebindRow(A.component, e), this.table.rowManager.checkPlaceholder();
  },
  rowDelete: function(A) {
    A.component.deleteActual(), this.table.rowManager.checkPlaceholder();
  },
  rowMove: function(A) {
    this.table.rowManager.moveRowActual(A.component, this.table.rowManager.getRowFromPosition(A.data.posTo), A.data.after), this.table.rowManager.regenerateRowPositions(), this.table.rowManager.reRenderInPosition();
  }
}, op = {
  undo: ["ctrl + 90", "meta + 90"],
  redo: ["ctrl + 89", "meta + 89"]
}, ap = {
  undo: function(A) {
    var e = !1;
    this.table.options.history && this.table.modExists("history") && this.table.modExists("edit") && (e = this.table.modules.edit.currentCell, e || (A.preventDefault(), this.table.modules.history.undo()));
  },
  redo: function(A) {
    var e = !1;
    this.table.options.history && this.table.modExists("history") && this.table.modExists("edit") && (e = this.table.modules.edit.currentCell, e || (A.preventDefault(), this.table.modules.history.redo()));
  }
}, lp = {
  keybindings: {
    bindings: op,
    actions: ap
  }
};
const Ri = class Ri extends ne {
  constructor(e) {
    super(e), this.history = [], this.index = -1, this.registerTableOption("history", !1);
  }
  initialize() {
    this.table.options.history && (this.subscribe("cell-value-updated", this.cellUpdated.bind(this)), this.subscribe("cell-delete", this.clearComponentHistory.bind(this)), this.subscribe("row-delete", this.rowDeleted.bind(this)), this.subscribe("rows-wipe", this.clear.bind(this)), this.subscribe("row-added", this.rowAdded.bind(this)), this.subscribe("row-move", this.rowMoved.bind(this))), this.registerTableFunction("undo", this.undo.bind(this)), this.registerTableFunction("redo", this.redo.bind(this)), this.registerTableFunction("getHistoryUndoSize", this.getHistoryUndoSize.bind(this)), this.registerTableFunction("getHistoryRedoSize", this.getHistoryRedoSize.bind(this)), this.registerTableFunction("clearHistory", this.clear.bind(this));
  }
  rowMoved(e, t, i) {
    this.action("rowMove", e, { posFrom: e.getPosition(), posTo: t.getPosition(), to: t, after: i });
  }
  rowAdded(e, t, i, s) {
    this.action("rowAdd", e, { data: t, pos: i, index: s });
  }
  rowDeleted(e) {
    var t, i;
    this.table.options.groupBy ? (i = e.getComponent().getGroup()._getSelf().rows, t = i.indexOf(e), t && (t = i[t - 1])) : (t = e.table.rowManager.getRowIndex(e), t && (t = e.table.rowManager.rows[t - 1])), this.action("rowDelete", e, { data: e.getData(), pos: !t, index: t });
  }
  cellUpdated(e) {
    this.action("cellEdit", e, { oldValue: e.oldValue, newValue: e.value });
  }
  clear() {
    this.history = [], this.index = -1;
  }
  action(e, t, i) {
    this.history = this.history.slice(0, this.index + 1), this.history.push({
      type: e,
      component: t,
      data: i
    }), this.index++;
  }
  getHistoryUndoSize() {
    return this.index + 1;
  }
  getHistoryRedoSize() {
    return this.history.length - (this.index + 1);
  }
  clearComponentHistory(e) {
    var t = this.history.findIndex(function(i) {
      return i.component === e;
    });
    t > -1 && (this.history.splice(t, 1), t <= this.index && this.index--, this.clearComponentHistory(e));
  }
  undo() {
    if (this.index > -1) {
      let e = this.history[this.index];
      return Ri.undoers[e.type].call(this, e), this.index--, this.dispatchExternal("historyUndo", e.type, e.component.getComponent(), e.data), !0;
    } else
      return console.warn(this.options("history") ? "History Undo Error - No more history to undo" : "History module not enabled"), !1;
  }
  redo() {
    if (this.history.length - 1 > this.index) {
      this.index++;
      let e = this.history[this.index];
      return Ri.redoers[e.type].call(this, e), this.dispatchExternal("historyRedo", e.type, e.component.getComponent(), e.data), !0;
    } else
      return console.warn(this.options("history") ? "History Redo Error - No more history to redo" : "History module not enabled"), !1;
  }
  //rebind rows to new element after deletion
  _rebindRow(e, t) {
    this.history.forEach(function(i) {
      if (i.component instanceof ot)
        i.component === e && (i.component = t);
      else if (i.component instanceof rn && i.component.row === e) {
        var s = i.component.column.getField();
        s && (i.component = t.getCell(s));
      }
    });
  }
};
D(Ri, "moduleName", "history"), D(Ri, "moduleExtensions", lp), //load defaults
D(Ri, "undoers", np), D(Ri, "redoers", rp);
let ma = Ri;
class bu extends ne {
  constructor(e) {
    super(e), this.fieldIndex = [], this.hasIndex = !1;
  }
  initialize() {
    this.tableElementCheck();
  }
  tableElementCheck() {
    this.table.originalElement && this.table.originalElement.tagName === "TABLE" && (this.table.originalElement.childNodes.length ? this.parseTable() : console.warn("Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element."));
  }
  parseTable() {
    var e = this.table.originalElement, t = this.table.options, i = e.getElementsByTagName("th"), s = e.getElementsByTagName("tbody")[0], n = [];
    this.hasIndex = !1, this.dispatchExternal("htmlImporting"), s = s ? s.getElementsByTagName("tr") : [], this._extractOptions(e, t), i.length ? this._extractHeaders(i, s) : this._generateBlankHeaders(i, s);
    for (var r = 0; r < s.length; r++) {
      var o = s[r], a = o.getElementsByTagName("td"), l = {};
      this.hasIndex || (l[t.index] = r);
      for (var h = 0; h < a.length; h++) {
        var c = a[h];
        typeof this.fieldIndex[h] < "u" && (l[this.fieldIndex[h]] = c.innerHTML);
      }
      n.push(l);
    }
    t.data = n, this.dispatchExternal("htmlImported");
  }
  //extract tabulator attribute options
  _extractOptions(e, t, i) {
    var s = e.attributes, n = Object.keys(i || t), r = {};
    n.forEach((h) => {
      r[h.toLowerCase()] = h;
    });
    for (var o in s) {
      var a = s[o], l;
      a && typeof a == "object" && a.name && a.name.indexOf("tabulator-") === 0 && (l = a.name.replace("tabulator-", ""), typeof r[l] < "u" && (t[r[l]] = this._attribValue(a.value)));
    }
  }
  //get value of attribute
  _attribValue(e) {
    return e === "true" ? !0 : e === "false" ? !1 : e;
  }
  //find column if it has already been defined
  _findCol(e) {
    var t = this.table.options.columns.find((i) => i.title === e);
    return t || !1;
  }
  //extract column from headers
  _extractHeaders(e, t) {
    for (var i = 0; i < e.length; i++) {
      var s = e[i], n = !1, r = this._findCol(s.textContent), o;
      r ? n = !0 : r = { title: s.textContent.trim() }, r.field || (r.field = s.textContent.trim().toLowerCase().replaceAll(" ", "_")), o = s.getAttribute("width"), o && !r.width && (r.width = o), this._extractOptions(s, r, this.table.columnManager.optionsList.registeredDefaults), this.fieldIndex[i] = r.field, r.field == this.table.options.index && (this.hasIndex = !0), n || this.table.options.columns.push(r);
    }
  }
  //generate blank headers
  _generateBlankHeaders(e, t) {
    for (var i = 0; i < e.length; i++) {
      var s = e[i], n = { title: "", field: "col" + i };
      this.fieldIndex[i] = n.field;
      var r = s.getAttribute("width");
      r && (n.width = r), this.table.options.columns.push(n);
    }
  }
}
D(bu, "moduleName", "htmlTableImport");
function hp(A) {
  var e = [], t = 0, i = 0, s = !1;
  for (let n = 0; n < A.length; n++) {
    let r = A[n], o = A[n + 1];
    if (e[t] || (e[t] = []), e[t][i] || (e[t][i] = ""), r == '"' && s && o == '"') {
      e[t][i] += r, n++;
      continue;
    }
    if (r == '"') {
      s = !s;
      continue;
    }
    if (r == "," && !s) {
      i++;
      continue;
    }
    if (r == "\r" && o == `
` && !s) {
      i = 0, t++, n++;
      continue;
    }
    if ((r == "\r" || r == `
`) && !s) {
      i = 0, t++;
      continue;
    }
    e[t][i] += r;
  }
  return e;
}
function cp(A) {
  try {
    return JSON.parse(A);
  } catch (e) {
    return console.warn("JSON Import Error - File contents is invalid JSON", e), Promise.reject();
  }
}
function up(A) {
  return A;
}
function dp(A) {
  var e = this.dependencyRegistry.lookup("XLSX"), t = e.read(A), i = t.Sheets[t.SheetNames[0]];
  return e.utils.sheet_to_json(i, { header: 1 });
}
var fp = {
  csv: hp,
  json: cp,
  array: up,
  xlsx: dp
};
const GA = class GA extends ne {
  constructor(e) {
    super(e), this.registerTableOption("importFormat"), this.registerTableOption("importReader", "text"), this.registerTableOption("importHeaderTransform"), this.registerTableOption("importValueTransform"), this.registerTableOption("importDataValidator"), this.registerTableOption("importFileValidator");
  }
  initialize() {
    this.registerTableFunction("import", this.importFromFile.bind(this)), this.table.options.importFormat && (this.subscribe("data-loading", this.loadDataCheck.bind(this), 10), this.subscribe("data-load", this.loadData.bind(this), 10));
  }
  loadDataCheck(e) {
    return this.table.options.importFormat && (typeof e == "string" || Array.isArray(e) && e.length && Array.isArray(e));
  }
  loadData(e, t, i, s, n) {
    return this.importData(this.lookupImporter(), e).then(this.structureData.bind(this)).catch((r) => (console.error("Import Error:", r || "Unable to import data"), Promise.reject(r)));
  }
  lookupImporter(e) {
    var t;
    return e || (e = this.table.options.importFormat), typeof e == "string" ? t = GA.importers[e] : t = e, t || console.error("Import Error - Importer not found:", e), t;
  }
  importFromFile(e, t, i) {
    var s = this.lookupImporter(e);
    if (s)
      return this.pickFile(t, i).then(this.importData.bind(this, s)).then(this.structureData.bind(this)).then(this.mutateData.bind(this)).then(this.validateData.bind(this)).then(this.setData.bind(this)).catch((n) => (this.dispatch("import-error", n), this.dispatchExternal("importError", n), console.error("Import Error:", n || "Unable to import file"), this.table.dataLoader.alertError(), setTimeout(() => {
        this.table.dataLoader.clearAlert();
      }, 3e3), Promise.reject(n)));
  }
  pickFile(e, t) {
    return new Promise((i, s) => {
      var n = document.createElement("input");
      n.type = "file", n.accept = e, n.addEventListener("change", (r) => {
        var o = n.files[0], a = new FileReader(), l = this.validateFile(o);
        if (l === !0) {
          switch (this.dispatch("import-importing", n.files), this.dispatchExternal("importImporting", n.files), t || this.table.options.importReader) {
            case "buffer":
              a.readAsArrayBuffer(o);
              break;
            case "binary":
              a.readAsBinaryString(o);
              break;
            case "url":
              a.readAsDataURL(o);
              break;
            case "text":
            default:
              a.readAsText(o);
          }
          a.onload = (h) => {
            i(a.result);
          }, a.onerror = (h) => {
            console.warn("File Load Error - Unable to read file"), s(h);
          };
        } else
          s(l);
      }), this.dispatch("import-choose"), this.dispatchExternal("importChoose"), n.click();
    });
  }
  importData(e, t) {
    var i;
    return this.table.dataLoader.alertLoader(), new Promise((s, n) => {
      setTimeout(() => {
        i = e.call(this.table, t), i instanceof Promise || i ? s(i) : n();
      }, 10);
    });
  }
  structureData(e) {
    var t = [];
    return Array.isArray(e) && e.length && Array.isArray(e[0]) ? (this.table.options.autoColumns ? t = this.structureArrayToObject(e) : t = this.structureArrayToColumns(e), t) : e;
  }
  mutateData(e) {
    var t = [];
    return Array.isArray(e) ? e.forEach((i) => {
      t.push(this.table.modules.mutator.transformRow(i, "import"));
    }) : t = e, t;
  }
  transformHeader(e) {
    var t = [];
    if (this.table.options.importHeaderTransform)
      e.forEach((i) => {
        t.push(this.table.options.importHeaderTransform.call(this.table, i, e));
      });
    else
      return e;
    return t;
  }
  transformData(e) {
    var t = [];
    if (this.table.options.importValueTransform)
      e.forEach((i) => {
        t.push(this.table.options.importValueTransform.call(this.table, i, e));
      });
    else
      return e;
    return t;
  }
  structureArrayToObject(e) {
    var t = this.transformHeader(e.shift()), i = e.map((s) => {
      var n = {};
      return s = this.transformData(s), t.forEach((r, o) => {
        n[r] = s[o];
      }), n;
    });
    return i;
  }
  structureArrayToColumns(e) {
    var t = [], i = this.transformHeader(e[0]), s = this.table.getColumns();
    return s[0] && i[0] && s[0].getDefinition().title === i[0] && e.shift(), e.forEach((n) => {
      var r = {};
      n = this.transformData(n), n.forEach((o, a) => {
        var l = s[a];
        l && (r[l.getField()] = o);
      }), t.push(r);
    }), t;
  }
  validateFile(e) {
    return this.table.options.importFileValidator ? this.table.options.importFileValidator.call(this.table, e) : !0;
  }
  validateData(e) {
    var t;
    return this.table.options.importDataValidator ? (t = this.table.options.importDataValidator.call(this.table, e), t === !0 ? e : Promise.reject(t)) : e;
  }
  setData(e) {
    return this.dispatch("import-imported", e), this.dispatchExternal("importImported", e), this.table.dataLoader.clearAlert(), this.table.setData(e);
  }
};
D(GA, "moduleName", "import"), //load defaults
D(GA, "importers", fp);
let ba = GA;
var ta;
let gp = (ta = class extends ne {
  constructor(e) {
    super(e), this.eventMap = {
      //row events
      rowClick: "row-click",
      rowDblClick: "row-dblclick",
      rowContext: "row-contextmenu",
      rowMouseEnter: "row-mouseenter",
      rowMouseLeave: "row-mouseleave",
      rowMouseOver: "row-mouseover",
      rowMouseOut: "row-mouseout",
      rowMouseMove: "row-mousemove",
      rowMouseDown: "row-mousedown",
      rowMouseUp: "row-mouseup",
      rowTap: "row",
      rowDblTap: "row",
      rowTapHold: "row",
      //cell events
      cellClick: "cell-click",
      cellDblClick: "cell-dblclick",
      cellContext: "cell-contextmenu",
      cellMouseEnter: "cell-mouseenter",
      cellMouseLeave: "cell-mouseleave",
      cellMouseOver: "cell-mouseover",
      cellMouseOut: "cell-mouseout",
      cellMouseMove: "cell-mousemove",
      cellMouseDown: "cell-mousedown",
      cellMouseUp: "cell-mouseup",
      cellTap: "cell",
      cellDblTap: "cell",
      cellTapHold: "cell",
      //column header events
      headerClick: "column-click",
      headerDblClick: "column-dblclick",
      headerContext: "column-contextmenu",
      headerMouseEnter: "column-mouseenter",
      headerMouseLeave: "column-mouseleave",
      headerMouseOver: "column-mouseover",
      headerMouseOut: "column-mouseout",
      headerMouseMove: "column-mousemove",
      headerMouseDown: "column-mousedown",
      headerMouseUp: "column-mouseup",
      headerTap: "column",
      headerDblTap: "column",
      headerTapHold: "column",
      //group header
      groupClick: "group-click",
      groupDblClick: "group-dblclick",
      groupContext: "group-contextmenu",
      groupMouseEnter: "group-mouseenter",
      groupMouseLeave: "group-mouseleave",
      groupMouseOver: "group-mouseover",
      groupMouseOut: "group-mouseout",
      groupMouseMove: "group-mousemove",
      groupMouseDown: "group-mousedown",
      groupMouseUp: "group-mouseup",
      groupTap: "group",
      groupDblTap: "group",
      groupTapHold: "group"
    }, this.subscribers = {}, this.touchSubscribers = {}, this.columnSubscribers = {}, this.touchWatchers = {
      row: {
        tap: null,
        tapDbl: null,
        tapHold: null
      },
      cell: {
        tap: null,
        tapDbl: null,
        tapHold: null
      },
      column: {
        tap: null,
        tapDbl: null,
        tapHold: null
      },
      group: {
        tap: null,
        tapDbl: null,
        tapHold: null
      }
    }, this.registerColumnOption("headerClick"), this.registerColumnOption("headerDblClick"), this.registerColumnOption("headerContext"), this.registerColumnOption("headerMouseEnter"), this.registerColumnOption("headerMouseLeave"), this.registerColumnOption("headerMouseOver"), this.registerColumnOption("headerMouseOut"), this.registerColumnOption("headerMouseMove"), this.registerColumnOption("headerMouseDown"), this.registerColumnOption("headerMouseUp"), this.registerColumnOption("headerTap"), this.registerColumnOption("headerDblTap"), this.registerColumnOption("headerTapHold"), this.registerColumnOption("cellClick"), this.registerColumnOption("cellDblClick"), this.registerColumnOption("cellContext"), this.registerColumnOption("cellMouseEnter"), this.registerColumnOption("cellMouseLeave"), this.registerColumnOption("cellMouseOver"), this.registerColumnOption("cellMouseOut"), this.registerColumnOption("cellMouseMove"), this.registerColumnOption("cellMouseDown"), this.registerColumnOption("cellMouseUp"), this.registerColumnOption("cellTap"), this.registerColumnOption("cellDblTap"), this.registerColumnOption("cellTapHold");
  }
  initialize() {
    this.initializeExternalEvents(), this.subscribe("column-init", this.initializeColumn.bind(this)), this.subscribe("cell-dblclick", this.cellContentsSelectionFixer.bind(this)), this.subscribe("scroll-horizontal", this.clearTouchWatchers.bind(this)), this.subscribe("scroll-vertical", this.clearTouchWatchers.bind(this));
  }
  clearTouchWatchers() {
    var e = Object.values(this.touchWatchers);
    e.forEach((t) => {
      for (let i in t)
        t[i] = null;
    });
  }
  cellContentsSelectionFixer(e, t) {
    var i;
    if (!(this.table.modExists("edit") && this.table.modules.edit.currentCell === t)) {
      e.preventDefault();
      try {
        document.selection ? (i = document.body.createTextRange(), i.moveToElementText(t.getElement()), i.select()) : window.getSelection && (i = document.createRange(), i.selectNode(t.getElement()), window.getSelection().removeAllRanges(), window.getSelection().addRange(i));
      } catch {
      }
    }
  }
  initializeExternalEvents() {
    for (let e in this.eventMap)
      this.subscriptionChangeExternal(e, this.subscriptionChanged.bind(this, e));
  }
  subscriptionChanged(e, t) {
    t ? this.subscribers[e] || (this.eventMap[e].includes("-") ? (this.subscribers[e] = this.handle.bind(this, e), this.subscribe(this.eventMap[e], this.subscribers[e])) : this.subscribeTouchEvents(e)) : this.eventMap[e].includes("-") ? this.subscribers[e] && !this.columnSubscribers[e] && !this.subscribedExternal(e) && (this.unsubscribe(this.eventMap[e], this.subscribers[e]), delete this.subscribers[e]) : this.unsubscribeTouchEvents(e);
  }
  subscribeTouchEvents(e) {
    var t = this.eventMap[e];
    this.touchSubscribers[t + "-touchstart"] || (this.touchSubscribers[t + "-touchstart"] = this.handleTouch.bind(this, t, "start"), this.touchSubscribers[t + "-touchend"] = this.handleTouch.bind(this, t, "end"), this.subscribe(t + "-touchstart", this.touchSubscribers[t + "-touchstart"]), this.subscribe(t + "-touchend", this.touchSubscribers[t + "-touchend"])), this.subscribers[e] = !0;
  }
  unsubscribeTouchEvents(e) {
    var t = !0, i = this.eventMap[e];
    if (this.subscribers[e] && !this.subscribedExternal(e)) {
      delete this.subscribers[e];
      for (let s in this.eventMap)
        this.eventMap[s] === i && this.subscribers[s] && (t = !1);
      t && (this.unsubscribe(i + "-touchstart", this.touchSubscribers[i + "-touchstart"]), this.unsubscribe(i + "-touchend", this.touchSubscribers[i + "-touchend"]), delete this.touchSubscribers[i + "-touchstart"], delete this.touchSubscribers[i + "-touchend"]);
    }
  }
  initializeColumn(e) {
    var t = e.definition;
    for (let i in this.eventMap)
      t[i] && (this.subscriptionChanged(i, !0), this.columnSubscribers[i] || (this.columnSubscribers[i] = []), this.columnSubscribers[i].push(e));
  }
  handle(e, t, i) {
    this.dispatchEvent(e, t, i);
  }
  handleTouch(e, t, i, s) {
    var n = this.touchWatchers[e];
    switch (e === "column" && (e = "header"), t) {
      case "start":
        n.tap = !0, clearTimeout(n.tapHold), n.tapHold = setTimeout(() => {
          clearTimeout(n.tapHold), n.tapHold = null, n.tap = null, clearTimeout(n.tapDbl), n.tapDbl = null, this.dispatchEvent(e + "TapHold", i, s);
        }, 1e3);
        break;
      case "end":
        n.tap && (n.tap = null, this.dispatchEvent(e + "Tap", i, s)), n.tapDbl ? (clearTimeout(n.tapDbl), n.tapDbl = null, this.dispatchEvent(e + "DblTap", i, s)) : n.tapDbl = setTimeout(() => {
          clearTimeout(n.tapDbl), n.tapDbl = null;
        }, 300), clearTimeout(n.tapHold), n.tapHold = null;
        break;
    }
  }
  dispatchEvent(e, t, i) {
    var s = i.getComponent(), n;
    this.columnSubscribers[e] && (i instanceof rn ? n = i.column.definition[e] : i instanceof ps && (n = i.definition[e]), n && n(t, s)), this.dispatchExternal(e, t, s);
  }
}, D(ta, "moduleName", "interaction"), ta);
var pp = {
  navPrev: "shift + 9",
  navNext: 9,
  navUp: 38,
  navDown: 40,
  navLeft: 37,
  navRight: 39,
  scrollPageUp: 33,
  scrollPageDown: 34,
  scrollToStart: 36,
  scrollToEnd: 35
}, mp = {
  keyBlock: function(A) {
    A.stopPropagation(), A.preventDefault();
  },
  scrollPageUp: function(A) {
    var e = this.table.rowManager, t = e.scrollTop - e.element.clientHeight;
    A.preventDefault(), e.displayRowsCount && (t >= 0 ? e.element.scrollTop = t : e.scrollToRow(e.getDisplayRows()[0])), this.table.element.focus();
  },
  scrollPageDown: function(A) {
    var e = this.table.rowManager, t = e.scrollTop + e.element.clientHeight, i = e.element.scrollHeight;
    A.preventDefault(), e.displayRowsCount && (t <= i ? e.element.scrollTop = t : e.scrollToRow(e.getDisplayRows()[e.displayRowsCount - 1])), this.table.element.focus();
  },
  scrollToStart: function(A) {
    var e = this.table.rowManager;
    A.preventDefault(), e.displayRowsCount && e.scrollToRow(e.getDisplayRows()[0]), this.table.element.focus();
  },
  scrollToEnd: function(A) {
    var e = this.table.rowManager;
    A.preventDefault(), e.displayRowsCount && e.scrollToRow(e.getDisplayRows()[e.displayRowsCount - 1]), this.table.element.focus();
  },
  navPrev: function(A) {
    this.dispatch("keybinding-nav-prev", A);
  },
  navNext: function(A) {
    this.dispatch("keybinding-nav-next", A);
  },
  navLeft: function(A) {
    this.dispatch("keybinding-nav-left", A);
  },
  navRight: function(A) {
    this.dispatch("keybinding-nav-right", A);
  },
  navUp: function(A) {
    this.dispatch("keybinding-nav-up", A);
  },
  navDown: function(A) {
    this.dispatch("keybinding-nav-down", A);
  }
};
const Ii = class Ii extends ne {
  constructor(e) {
    super(e), this.watchKeys = null, this.pressedKeys = null, this.keyupBinding = !1, this.keydownBinding = !1, this.registerTableOption("keybindings", {}), this.registerTableOption("tabEndNewRow", !1);
  }
  initialize() {
    var e = this.table.options.keybindings, t = {};
    this.watchKeys = {}, this.pressedKeys = [], e !== !1 && (Object.assign(t, Ii.bindings), Object.assign(t, e), this.mapBindings(t), this.bindEvents()), this.subscribe("table-destroy", this.clearBindings.bind(this));
  }
  mapBindings(e) {
    for (let t in e)
      Ii.actions[t] ? e[t] && (typeof e[t] != "object" && (e[t] = [e[t]]), e[t].forEach((i) => {
        var s = Array.isArray(i) ? i : [i];
        s.forEach((n) => {
          this.mapBinding(t, n);
        });
      })) : console.warn("Key Binding Error - no such action:", t);
  }
  mapBinding(e, t) {
    var i = {
      action: Ii.actions[e],
      keys: [],
      ctrl: !1,
      shift: !1,
      meta: !1
    }, s = t.toString().toLowerCase().split(" ").join("").split("+");
    s.forEach((n) => {
      switch (n) {
        case "ctrl":
          i.ctrl = !0;
          break;
        case "shift":
          i.shift = !0;
          break;
        case "meta":
          i.meta = !0;
          break;
        default:
          n = isNaN(n) ? n.toUpperCase().charCodeAt(0) : parseInt(n), i.keys.push(n), this.watchKeys[n] || (this.watchKeys[n] = []), this.watchKeys[n].push(i);
      }
    });
  }
  bindEvents() {
    var e = this;
    this.keyupBinding = function(t) {
      var i = t.keyCode, s = e.watchKeys[i];
      s && (e.pressedKeys.push(i), s.forEach(function(n) {
        e.checkBinding(t, n);
      }));
    }, this.keydownBinding = function(t) {
      var i = t.keyCode, s = e.watchKeys[i];
      if (s) {
        var n = e.pressedKeys.indexOf(i);
        n > -1 && e.pressedKeys.splice(n, 1);
      }
    }, this.table.element.addEventListener("keydown", this.keyupBinding), this.table.element.addEventListener("keyup", this.keydownBinding);
  }
  clearBindings() {
    this.keyupBinding && this.table.element.removeEventListener("keydown", this.keyupBinding), this.keydownBinding && this.table.element.removeEventListener("keyup", this.keydownBinding);
  }
  checkBinding(e, t) {
    var i = !0;
    return e.ctrlKey == t.ctrl && e.shiftKey == t.shift && e.metaKey == t.meta ? (t.keys.forEach((s) => {
      var n = this.pressedKeys.indexOf(s);
      n == -1 && (i = !1);
    }), i && t.action.call(this, e), !0) : !1;
  }
};
D(Ii, "moduleName", "keybindings"), //load defaults
D(Ii, "bindings", pp), D(Ii, "actions", mp);
let wa = Ii;
class wu extends ne {
  constructor(e) {
    super(e), this.menuContainer = null, this.nestedMenuBlock = !1, this.currentComponent = null, this.rootPopup = null, this.columnSubscribers = {}, this.registerTableOption("rowContextMenu", !1), this.registerTableOption("rowClickMenu", !1), this.registerTableOption("rowDblClickMenu", !1), this.registerTableOption("groupContextMenu", !1), this.registerTableOption("groupClickMenu", !1), this.registerTableOption("groupDblClickMenu", !1), this.registerColumnOption("headerContextMenu"), this.registerColumnOption("headerClickMenu"), this.registerColumnOption("headerDblClickMenu"), this.registerColumnOption("headerMenu"), this.registerColumnOption("headerMenuIcon"), this.registerColumnOption("contextMenu"), this.registerColumnOption("clickMenu"), this.registerColumnOption("dblClickMenu");
  }
  initialize() {
    this.deprecatedOptionsCheck(), this.initializeRowWatchers(), this.initializeGroupWatchers(), this.subscribe("column-init", this.initializeColumn.bind(this));
  }
  deprecatedOptionsCheck() {
  }
  initializeRowWatchers() {
    this.table.options.rowContextMenu && (this.subscribe("row-contextmenu", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu)), this.table.on("rowTapHold", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu))), this.table.options.rowClickMenu && this.subscribe("row-click", this.loadMenuEvent.bind(this, this.table.options.rowClickMenu)), this.table.options.rowDblClickMenu && this.subscribe("row-dblclick", this.loadMenuEvent.bind(this, this.table.options.rowDblClickMenu));
  }
  initializeGroupWatchers() {
    this.table.options.groupContextMenu && (this.subscribe("group-contextmenu", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu)), this.table.on("groupTapHold", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu))), this.table.options.groupClickMenu && this.subscribe("group-click", this.loadMenuEvent.bind(this, this.table.options.groupClickMenu)), this.table.options.groupDblClickMenu && this.subscribe("group-dblclick", this.loadMenuEvent.bind(this, this.table.options.groupDblClickMenu));
  }
  initializeColumn(e) {
    var t = e.definition;
    t.headerContextMenu && !this.columnSubscribers.headerContextMenu && (this.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, "headerContextMenu"), this.subscribe("column-contextmenu", this.columnSubscribers.headerContextMenu), this.table.on("headerTapHold", this.loadMenuTableColumnEvent.bind(this, "headerContextMenu"))), t.headerClickMenu && !this.columnSubscribers.headerClickMenu && (this.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, "headerClickMenu"), this.subscribe("column-click", this.columnSubscribers.headerClickMenu)), t.headerDblClickMenu && !this.columnSubscribers.headerDblClickMenu && (this.columnSubscribers.headerDblClickMenu = this.loadMenuTableColumnEvent.bind(this, "headerDblClickMenu"), this.subscribe("column-dblclick", this.columnSubscribers.headerDblClickMenu)), t.headerMenu && this.initializeColumnHeaderMenu(e), t.contextMenu && !this.columnSubscribers.contextMenu && (this.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, "contextMenu"), this.subscribe("cell-contextmenu", this.columnSubscribers.contextMenu), this.table.on("cellTapHold", this.loadMenuTableCellEvent.bind(this, "contextMenu"))), t.clickMenu && !this.columnSubscribers.clickMenu && (this.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, "clickMenu"), this.subscribe("cell-click", this.columnSubscribers.clickMenu)), t.dblClickMenu && !this.columnSubscribers.dblClickMenu && (this.columnSubscribers.dblClickMenu = this.loadMenuTableCellEvent.bind(this, "dblClickMenu"), this.subscribe("cell-dblclick", this.columnSubscribers.dblClickMenu));
  }
  initializeColumnHeaderMenu(e) {
    var t = e.definition.headerMenuIcon, i;
    i = document.createElement("span"), i.classList.add("tabulator-header-popup-button"), t ? (typeof t == "function" && (t = t(e.getComponent())), t instanceof HTMLElement ? i.appendChild(t) : i.innerHTML = t) : i.innerHTML = "&vellip;", i.addEventListener("click", (s) => {
      s.stopPropagation(), s.preventDefault(), this.loadMenuEvent(e.definition.headerMenu, s, e);
    }), e.titleElement.insertBefore(i, e.titleElement.firstChild);
  }
  loadMenuTableCellEvent(e, t, i) {
    i._cell && (i = i._cell), i.column.definition[e] && this.loadMenuEvent(i.column.definition[e], t, i);
  }
  loadMenuTableColumnEvent(e, t, i) {
    i._column && (i = i._column), i.definition[e] && this.loadMenuEvent(i.definition[e], t, i);
  }
  loadMenuEvent(e, t, i) {
    i._group ? i = i._group : i._row && (i = i._row), e = typeof e == "function" ? e.call(this.table, t, i.getComponent()) : e, this.loadMenu(t, i, e);
  }
  loadMenu(e, t, i, s, n) {
    var r = !(e instanceof MouseEvent), o = document.createElement("div"), a;
    if (o.classList.add("tabulator-menu"), r || e.preventDefault(), !(!i || !i.length)) {
      if (s)
        a = n.child(o);
      else {
        if (this.nestedMenuBlock) {
          if (this.rootPopup)
            return;
        } else
          this.nestedMenuBlock = setTimeout(() => {
            this.nestedMenuBlock = !1;
          }, 100);
        this.rootPopup && this.rootPopup.hide(), this.rootPopup = a = this.popup(o);
      }
      i.forEach((l) => {
        var h = document.createElement("div"), c = l.label, u = l.disabled;
        l.separator ? h.classList.add("tabulator-menu-separator") : (h.classList.add("tabulator-menu-item"), typeof c == "function" && (c = c.call(this.table, t.getComponent())), c instanceof Node ? h.appendChild(c) : h.innerHTML = c, typeof u == "function" && (u = u.call(this.table, t.getComponent())), u ? (h.classList.add("tabulator-menu-item-disabled"), h.addEventListener("click", (d) => {
          d.stopPropagation();
        })) : l.menu && l.menu.length ? h.addEventListener("click", (d) => {
          d.stopPropagation(), this.loadMenu(d, t, l.menu, h, a);
        }) : l.action && h.addEventListener("click", (d) => {
          l.action(d, t.getComponent());
        }), l.menu && l.menu.length && h.classList.add("tabulator-menu-item-submenu")), o.appendChild(h);
      }), o.addEventListener("click", (l) => {
        this.rootPopup && this.rootPopup.hide();
      }), a.show(s || e), a === this.rootPopup && (this.rootPopup.hideOnBlur(() => {
        this.rootPopup = null, this.currentComponent && (this.dispatch("menu-closed", i, a), this.dispatchExternal("menuClosed", this.currentComponent.getComponent()), this.currentComponent = null);
      }), this.currentComponent = t, this.dispatch("menu-opened", i, a), this.dispatchExternal("menuOpened", t.getComponent()));
    }
  }
}
D(wu, "moduleName", "menu");
class vu extends ne {
  constructor(e) {
    super(e), this.placeholderElement = this.createPlaceholderElement(), this.hoverElement = !1, this.checkTimeout = !1, this.checkPeriod = 250, this.moving = !1, this.toCol = !1, this.toColAfter = !1, this.startX = 0, this.autoScrollMargin = 40, this.autoScrollStep = 5, this.autoScrollTimeout = !1, this.touchMove = !1, this.moveHover = this.moveHover.bind(this), this.endMove = this.endMove.bind(this), this.registerTableOption("movableColumns", !1);
  }
  createPlaceholderElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-col"), e.classList.add("tabulator-col-placeholder"), e;
  }
  initialize() {
    this.table.options.movableColumns && (this.subscribe("column-init", this.initializeColumn.bind(this)), this.subscribe("alert-show", this.abortMove.bind(this)));
  }
  abortMove() {
    clearTimeout(this.checkTimeout);
  }
  initializeColumn(e) {
    var t = this, i = {}, s;
    !e.modules.frozen && !e.isGroup && !e.isRowHeader && (s = e.getElement(), i.mousemove = (function(n) {
      e.parent === t.moving.parent && ((t.touchMove ? n.touches[0].pageX : n.pageX) - Ee.elOffset(s).left + t.table.columnManager.contentsElement.scrollLeft > e.getWidth() / 2 ? (t.toCol !== e || !t.toColAfter) && (s.parentNode.insertBefore(t.placeholderElement, s.nextSibling), t.moveColumn(e, !0)) : (t.toCol !== e || t.toColAfter) && (s.parentNode.insertBefore(t.placeholderElement, s), t.moveColumn(e, !1)));
    }).bind(t), s.addEventListener("mousedown", function(n) {
      t.touchMove = !1, n.which === 1 && (t.checkTimeout = setTimeout(function() {
        t.startMove(n, e);
      }, t.checkPeriod));
    }), s.addEventListener("mouseup", function(n) {
      n.which === 1 && t.checkTimeout && clearTimeout(t.checkTimeout);
    }), t.bindTouchEvents(e)), e.modules.moveColumn = i;
  }
  bindTouchEvents(e) {
    var t = e.getElement(), i = !1, s, n, r, o, a, l;
    t.addEventListener("touchstart", (h) => {
      this.checkTimeout = setTimeout(() => {
        this.touchMove = !0, s = e.nextColumn(), r = s ? s.getWidth() / 2 : 0, n = e.prevColumn(), o = n ? n.getWidth() / 2 : 0, a = 0, l = 0, i = !1, this.startMove(h, e);
      }, this.checkPeriod);
    }, { passive: !0 }), t.addEventListener("touchmove", (h) => {
      var c, u;
      this.moving && (this.moveHover(h), i || (i = h.touches[0].pageX), c = h.touches[0].pageX - i, c > 0 ? s && c - a > r && (u = s, u !== e && (i = h.touches[0].pageX, u.getElement().parentNode.insertBefore(this.placeholderElement, u.getElement().nextSibling), this.moveColumn(u, !0))) : n && -c - l > o && (u = n, u !== e && (i = h.touches[0].pageX, u.getElement().parentNode.insertBefore(this.placeholderElement, u.getElement()), this.moveColumn(u, !1))), u && (s = u.nextColumn(), a = r, r = s ? s.getWidth() / 2 : 0, n = u.prevColumn(), l = o, o = n ? n.getWidth() / 2 : 0));
    }, { passive: !0 }), t.addEventListener("touchend", (h) => {
      this.checkTimeout && clearTimeout(this.checkTimeout), this.moving && this.endMove(h);
    });
  }
  startMove(e, t) {
    var i = t.getElement(), s = this.table.columnManager.getContentsElement(), n = this.table.columnManager.getHeadersElement();
    this.table.modules.selectRange && this.table.modules.selectRange.columnSelection && this.table.modules.selectRange.mousedown && this.table.modules.selectRange.selecting === "column" || (this.moving = t, this.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Ee.elOffset(i).left, this.table.element.classList.add("tabulator-block-select"), this.placeholderElement.style.width = t.getWidth() + "px", this.placeholderElement.style.height = t.getHeight() + "px", i.parentNode.insertBefore(this.placeholderElement, i), i.parentNode.removeChild(i), this.hoverElement = i.cloneNode(!0), this.hoverElement.classList.add("tabulator-moving"), s.appendChild(this.hoverElement), this.hoverElement.style.left = "0", this.hoverElement.style.bottom = s.clientHeight - n.offsetHeight + "px", this.touchMove || (this._bindMouseMove(), document.body.addEventListener("mousemove", this.moveHover), document.body.addEventListener("mouseup", this.endMove)), this.moveHover(e), this.dispatch("column-moving", e, this.moving));
  }
  _bindMouseMove() {
    this.table.columnManager.columnsByIndex.forEach(function(e) {
      e.modules.moveColumn.mousemove && e.getElement().addEventListener("mousemove", e.modules.moveColumn.mousemove);
    });
  }
  _unbindMouseMove() {
    this.table.columnManager.columnsByIndex.forEach(function(e) {
      e.modules.moveColumn.mousemove && e.getElement().removeEventListener("mousemove", e.modules.moveColumn.mousemove);
    });
  }
  moveColumn(e, t) {
    var i = this.moving.getCells();
    this.toCol = e, this.toColAfter = t, t ? e.getCells().forEach(function(s, n) {
      var r = s.getElement(!0);
      r.parentNode && i[n] && r.parentNode.insertBefore(i[n].getElement(), r.nextSibling);
    }) : e.getCells().forEach(function(s, n) {
      var r = s.getElement(!0);
      r.parentNode && i[n] && r.parentNode.insertBefore(i[n].getElement(), r);
    });
  }
  endMove(e) {
    (e.which === 1 || this.touchMove) && (this._unbindMouseMove(), this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling), this.placeholderElement.parentNode.removeChild(this.placeholderElement), this.hoverElement.parentNode.removeChild(this.hoverElement), this.table.element.classList.remove("tabulator-block-select"), this.toCol && this.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter), this.moving = !1, this.toCol = !1, this.toColAfter = !1, this.touchMove || (document.body.removeEventListener("mousemove", this.moveHover), document.body.removeEventListener("mouseup", this.endMove)));
  }
  moveHover(e) {
    var t = this.table.columnManager.getContentsElement(), i = t.scrollLeft, s = (this.touchMove ? e.touches[0].pageX : e.pageX) - Ee.elOffset(t).left + i, n;
    this.hoverElement.style.left = s - this.startX + "px", s - i < this.autoScrollMargin && (this.autoScrollTimeout || (this.autoScrollTimeout = setTimeout(() => {
      n = Math.max(0, i - 5), this.table.rowManager.getElement().scrollLeft = n, this.autoScrollTimeout = !1;
    }, 1))), i + t.clientWidth - s < this.autoScrollMargin && (this.autoScrollTimeout || (this.autoScrollTimeout = setTimeout(() => {
      n = Math.min(t.clientWidth, i + 5), this.table.rowManager.getElement().scrollLeft = n, this.autoScrollTimeout = !1;
    }, 1)));
  }
}
D(vu, "moduleName", "moveColumn");
var bp = {
  delete: function(A, e, t) {
    A.delete();
  }
}, wp = {
  insert: function(A, e, t) {
    return this.table.addRow(A.getData(), void 0, e), !0;
  },
  add: function(A, e, t) {
    return this.table.addRow(A.getData()), !0;
  },
  update: function(A, e, t) {
    return e ? (e.update(A.getData()), !0) : !1;
  },
  replace: function(A, e, t) {
    return e ? (this.table.addRow(A.getData(), void 0, e), e.delete(), !0) : !1;
  }
};
const cs = class cs extends ne {
  constructor(e) {
    super(e), this.placeholderElement = this.createPlaceholderElement(), this.hoverElement = !1, this.checkTimeout = !1, this.checkPeriod = 150, this.moving = !1, this.toRow = !1, this.toRowAfter = !1, this.hasHandle = !1, this.startY = 0, this.startX = 0, this.moveHover = this.moveHover.bind(this), this.endMove = this.endMove.bind(this), this.tableRowDropEvent = !1, this.touchMove = !1, this.connection = !1, this.connectionSelectorsTables = !1, this.connectionSelectorsElements = !1, this.connectionElements = [], this.connections = [], this.connectedTable = !1, this.connectedRow = !1, this.registerTableOption("movableRows", !1), this.registerTableOption("movableRowsConnectedTables", !1), this.registerTableOption("movableRowsConnectedElements", !1), this.registerTableOption("movableRowsSender", !1), this.registerTableOption("movableRowsReceiver", "insert"), this.registerColumnOption("rowHandle");
  }
  createPlaceholderElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-row"), e.classList.add("tabulator-row-placeholder"), e;
  }
  initialize() {
    this.table.options.movableRows && (this.connectionSelectorsTables = this.table.options.movableRowsConnectedTables, this.connectionSelectorsElements = this.table.options.movableRowsConnectedElements, this.connection = this.connectionSelectorsTables || this.connectionSelectorsElements, this.subscribe("cell-init", this.initializeCell.bind(this)), this.subscribe("column-init", this.initializeColumn.bind(this)), this.subscribe("row-init", this.initializeRow.bind(this)));
  }
  initializeGroupHeader(e) {
    var t = this, i = {};
    i.mouseup = (function(s) {
      t.tableRowDrop(s, e);
    }).bind(t), i.mousemove = (function(s) {
      var n;
      s.pageY - Ee.elOffset(e.element).top + t.table.rowManager.element.scrollTop > e.getHeight() / 2 ? (t.toRow !== e || !t.toRowAfter) && (n = e.getElement(), n.parentNode.insertBefore(t.placeholderElement, n.nextSibling), t.moveRow(e, !0)) : (t.toRow !== e || t.toRowAfter) && (n = e.getElement(), n.previousSibling && (n.parentNode.insertBefore(t.placeholderElement, n), t.moveRow(e, !1)));
    }).bind(t), e.modules.moveRow = i;
  }
  initializeRow(e) {
    var t = this, i = {}, s;
    i.mouseup = (function(n) {
      t.tableRowDrop(n, e);
    }).bind(t), i.mousemove = (function(n) {
      var r = e.getElement();
      n.pageY - Ee.elOffset(r).top + t.table.rowManager.element.scrollTop > e.getHeight() / 2 ? (t.toRow !== e || !t.toRowAfter) && (r.parentNode.insertBefore(t.placeholderElement, r.nextSibling), t.moveRow(e, !0)) : (t.toRow !== e || t.toRowAfter) && (r.parentNode.insertBefore(t.placeholderElement, r), t.moveRow(e, !1));
    }).bind(t), this.hasHandle || (s = e.getElement(), s.addEventListener("mousedown", function(n) {
      n.which === 1 && (t.checkTimeout = setTimeout(function() {
        t.startMove(n, e);
      }, t.checkPeriod));
    }), s.addEventListener("mouseup", function(n) {
      n.which === 1 && t.checkTimeout && clearTimeout(t.checkTimeout);
    }), this.bindTouchEvents(e, e.getElement())), e.modules.moveRow = i;
  }
  initializeColumn(e) {
    e.definition.rowHandle && this.table.options.movableRows !== !1 && (this.hasHandle = !0);
  }
  initializeCell(e) {
    if (e.column.definition.rowHandle && this.table.options.movableRows !== !1) {
      var t = this, i = e.getElement(!0);
      i.addEventListener("mousedown", function(s) {
        s.which === 1 && (t.checkTimeout = setTimeout(function() {
          t.startMove(s, e.row);
        }, t.checkPeriod));
      }), i.addEventListener("mouseup", function(s) {
        s.which === 1 && t.checkTimeout && clearTimeout(t.checkTimeout);
      }), this.bindTouchEvents(e.row, i);
    }
  }
  bindTouchEvents(e, t) {
    var i = !1, s, n, r, o, a, l;
    t.addEventListener("touchstart", (h) => {
      this.checkTimeout = setTimeout(() => {
        this.touchMove = !0, s = e.nextRow(), r = s ? s.getHeight() / 2 : 0, n = e.prevRow(), o = n ? n.getHeight() / 2 : 0, a = 0, l = 0, i = !1, this.startMove(h, e);
      }, this.checkPeriod);
    }, { passive: !0 }), this.moving, this.toRow, this.toRowAfter, t.addEventListener("touchmove", (h) => {
      var c, u;
      this.moving && (h.preventDefault(), this.moveHover(h), i || (i = h.touches[0].pageY), c = h.touches[0].pageY - i, c > 0 ? s && c - a > r && (u = s, u !== e && (i = h.touches[0].pageY, u.getElement().parentNode.insertBefore(this.placeholderElement, u.getElement().nextSibling), this.moveRow(u, !0))) : n && -c - l > o && (u = n, u !== e && (i = h.touches[0].pageY, u.getElement().parentNode.insertBefore(this.placeholderElement, u.getElement()), this.moveRow(u, !1))), u && (s = u.nextRow(), a = r, r = s ? s.getHeight() / 2 : 0, n = u.prevRow(), l = o, o = n ? n.getHeight() / 2 : 0));
    }), t.addEventListener("touchend", (h) => {
      this.checkTimeout && clearTimeout(this.checkTimeout), this.moving && (this.endMove(h), this.touchMove = !1);
    });
  }
  _bindMouseMove() {
    this.table.rowManager.getDisplayRows().forEach((e) => {
      (e.type === "row" || e.type === "group") && e.modules.moveRow && e.modules.moveRow.mousemove && e.getElement().addEventListener("mousemove", e.modules.moveRow.mousemove);
    });
  }
  _unbindMouseMove() {
    this.table.rowManager.getDisplayRows().forEach((e) => {
      (e.type === "row" || e.type === "group") && e.modules.moveRow && e.modules.moveRow.mousemove && e.getElement().removeEventListener("mousemove", e.modules.moveRow.mousemove);
    });
  }
  startMove(e, t) {
    var i = t.getElement();
    this.setStartPosition(e, t), this.moving = t, this.table.element.classList.add("tabulator-block-select"), this.placeholderElement.style.width = t.getWidth() + "px", this.placeholderElement.style.height = t.getHeight() + "px", this.connection ? (this.table.element.classList.add("tabulator-movingrow-sending"), this.connectToTables(t)) : (i.parentNode.insertBefore(this.placeholderElement, i), i.parentNode.removeChild(i)), this.hoverElement = i.cloneNode(!0), this.hoverElement.classList.add("tabulator-moving"), this.connection ? (document.body.appendChild(this.hoverElement), this.hoverElement.style.left = "0", this.hoverElement.style.top = "0", this.hoverElement.style.width = this.table.element.clientWidth + "px", this.hoverElement.style.whiteSpace = "nowrap", this.hoverElement.style.overflow = "hidden", this.hoverElement.style.pointerEvents = "none") : (this.table.rowManager.getTableElement().appendChild(this.hoverElement), this.hoverElement.style.left = "0", this.hoverElement.style.top = "0", this._bindMouseMove()), document.body.addEventListener("mousemove", this.moveHover), document.body.addEventListener("mouseup", this.endMove), this.dispatchExternal("rowMoving", t.getComponent()), this.moveHover(e);
  }
  setStartPosition(e, t) {
    var i = this.touchMove ? e.touches[0].pageX : e.pageX, s = this.touchMove ? e.touches[0].pageY : e.pageY, n, r;
    n = t.getElement(), this.connection ? (r = n.getBoundingClientRect(), this.startX = r.left - i + window.pageXOffset, this.startY = r.top - s + window.pageYOffset) : this.startY = s - n.getBoundingClientRect().top;
  }
  endMove(e) {
    (!e || e.which === 1 || this.touchMove) && (this._unbindMouseMove(), this.connection || (this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling), this.placeholderElement.parentNode.removeChild(this.placeholderElement)), this.hoverElement.parentNode.removeChild(this.hoverElement), this.table.element.classList.remove("tabulator-block-select"), this.toRow ? this.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter) : this.dispatchExternal("rowMoveCancelled", this.moving.getComponent()), this.moving = !1, this.toRow = !1, this.toRowAfter = !1, document.body.removeEventListener("mousemove", this.moveHover), document.body.removeEventListener("mouseup", this.endMove), this.connection && (this.table.element.classList.remove("tabulator-movingrow-sending"), this.disconnectFromTables()));
  }
  moveRow(e, t) {
    this.toRow = e, this.toRowAfter = t;
  }
  moveHover(e) {
    this.connection ? this.moveHoverConnections.call(this, e) : this.moveHoverTable.call(this, e);
  }
  moveHoverTable(e) {
    var t = this.table.rowManager.getElement(), i = t.scrollTop, s = (this.touchMove ? e.touches[0].pageY : e.pageY) - t.getBoundingClientRect().top + i;
    this.hoverElement.style.top = Math.min(s - this.startY, this.table.rowManager.element.scrollHeight - this.hoverElement.offsetHeight) + "px";
  }
  moveHoverConnections(e) {
    this.hoverElement.style.left = this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX) + "px", this.hoverElement.style.top = this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY) + "px";
  }
  elementRowDrop(e, t, i) {
    this.dispatchExternal("movableRowsElementDrop", e, t, i ? i.getComponent() : !1);
  }
  //establish connection with other tables
  connectToTables(e) {
    var t;
    this.connectionSelectorsTables && (t = this.commsConnections(this.connectionSelectorsTables), this.dispatchExternal("movableRowsSendingStart", t), this.commsSend(this.connectionSelectorsTables, "moveRow", "connect", {
      row: e
    })), this.connectionSelectorsElements && (this.connectionElements = [], Array.isArray(this.connectionSelectorsElements) || (this.connectionSelectorsElements = [this.connectionSelectorsElements]), this.connectionSelectorsElements.forEach((i) => {
      typeof i == "string" ? this.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(i))) : this.connectionElements.push(i);
    }), this.connectionElements.forEach((i) => {
      var s = (n) => {
        this.elementRowDrop(n, i, this.moving);
      };
      i.addEventListener("mouseup", s), i.tabulatorElementDropEvent = s, i.classList.add("tabulator-movingrow-receiving");
    }));
  }
  //disconnect from other tables
  disconnectFromTables() {
    var e;
    this.connectionSelectorsTables && (e = this.commsConnections(this.connectionSelectorsTables), this.dispatchExternal("movableRowsSendingStop", e), this.commsSend(this.connectionSelectorsTables, "moveRow", "disconnect")), this.connectionElements.forEach((t) => {
      t.classList.remove("tabulator-movingrow-receiving"), t.removeEventListener("mouseup", t.tabulatorElementDropEvent), delete t.tabulatorElementDropEvent;
    });
  }
  //accept incomming connection
  connect(e, t) {
    return this.connectedTable ? (console.warn("Move Row Error - Table cannot accept connection, already connected to table:", this.connectedTable), !1) : (this.connectedTable = e, this.connectedRow = t, this.table.element.classList.add("tabulator-movingrow-receiving"), this.table.rowManager.getDisplayRows().forEach((i) => {
      i.type === "row" && i.modules.moveRow && i.modules.moveRow.mouseup && i.getElement().addEventListener("mouseup", i.modules.moveRow.mouseup);
    }), this.tableRowDropEvent = this.tableRowDrop.bind(this), this.table.element.addEventListener("mouseup", this.tableRowDropEvent), this.dispatchExternal("movableRowsReceivingStart", t, e), !0);
  }
  //close incoming connection
  disconnect(e) {
    e === this.connectedTable ? (this.connectedTable = !1, this.connectedRow = !1, this.table.element.classList.remove("tabulator-movingrow-receiving"), this.table.rowManager.getDisplayRows().forEach((t) => {
      t.type === "row" && t.modules.moveRow && t.modules.moveRow.mouseup && t.getElement().removeEventListener("mouseup", t.modules.moveRow.mouseup);
    }), this.table.element.removeEventListener("mouseup", this.tableRowDropEvent), this.dispatchExternal("movableRowsReceivingStop", e)) : console.warn("Move Row Error - trying to disconnect from non connected table");
  }
  dropComplete(e, t, i) {
    var s = !1;
    if (i) {
      switch (typeof this.table.options.movableRowsSender) {
        case "string":
          s = cs.senders[this.table.options.movableRowsSender];
          break;
        case "function":
          s = this.table.options.movableRowsSender;
          break;
      }
      s ? s.call(this, this.moving ? this.moving.getComponent() : void 0, t ? t.getComponent() : void 0, e) : this.table.options.movableRowsSender && console.warn("Mover Row Error - no matching sender found:", this.table.options.movableRowsSender), this.dispatchExternal("movableRowsSent", this.moving.getComponent(), t ? t.getComponent() : void 0, e);
    } else
      this.dispatchExternal("movableRowsSentFailed", this.moving.getComponent(), t ? t.getComponent() : void 0, e);
    this.endMove();
  }
  tableRowDrop(e, t) {
    var i = !1, s = !1;
    switch (e.stopImmediatePropagation(), typeof this.table.options.movableRowsReceiver) {
      case "string":
        i = cs.receivers[this.table.options.movableRowsReceiver];
        break;
      case "function":
        i = this.table.options.movableRowsReceiver;
        break;
    }
    i ? s = i.call(this, this.connectedRow.getComponent(), t ? t.getComponent() : void 0, this.connectedTable) : console.warn("Mover Row Error - no matching receiver found:", this.table.options.movableRowsReceiver), s ? this.dispatchExternal("movableRowsReceived", this.connectedRow.getComponent(), t ? t.getComponent() : void 0, this.connectedTable) : this.dispatchExternal("movableRowsReceivedFailed", this.connectedRow.getComponent(), t ? t.getComponent() : void 0, this.connectedTable), this.commsSend(this.connectedTable, "moveRow", "dropcomplete", {
      row: t,
      success: s
    });
  }
  commsReceived(e, t, i) {
    switch (t) {
      case "connect":
        return this.connect(e, i.row);
      case "disconnect":
        return this.disconnect(e);
      case "dropcomplete":
        return this.dropComplete(e, i.row, i.success);
    }
  }
};
D(cs, "moduleName", "moveRow"), //load defaults
D(cs, "senders", bp), D(cs, "receivers", wp);
let va = cs;
var vp = {};
const Ks = class Ks extends ne {
  constructor(e) {
    super(e), this.allowedTypes = ["", "data", "edit", "clipboard", "import"], this.enabled = !0, this.registerColumnOption("mutator"), this.registerColumnOption("mutatorParams"), this.registerColumnOption("mutatorData"), this.registerColumnOption("mutatorDataParams"), this.registerColumnOption("mutatorEdit"), this.registerColumnOption("mutatorEditParams"), this.registerColumnOption("mutatorClipboard"), this.registerColumnOption("mutatorClipboardParams"), this.registerColumnOption("mutatorImport"), this.registerColumnOption("mutatorImportParams"), this.registerColumnOption("mutateLink");
  }
  initialize() {
    this.subscribe("cell-value-changing", this.transformCell.bind(this)), this.subscribe("cell-value-changed", this.mutateLink.bind(this)), this.subscribe("column-layout", this.initializeColumn.bind(this)), this.subscribe("row-data-init-before", this.rowDataChanged.bind(this)), this.subscribe("row-data-changing", this.rowDataChanged.bind(this));
  }
  rowDataChanged(e, t, i) {
    return this.transformRow(t, "data", i);
  }
  //initialize column mutator
  initializeColumn(e) {
    var t = !1, i = {};
    this.allowedTypes.forEach((s) => {
      var n = "mutator" + (s.charAt(0).toUpperCase() + s.slice(1)), r;
      e.definition[n] && (r = this.lookupMutator(e.definition[n]), r && (t = !0, i[n] = {
        mutator: r,
        params: e.definition[n + "Params"] || {}
      }));
    }), t && (e.modules.mutate = i);
  }
  lookupMutator(e) {
    var t = !1;
    switch (typeof e) {
      case "string":
        Ks.mutators[e] ? t = Ks.mutators[e] : console.warn("Mutator Error - No such mutator found, ignoring: ", e);
        break;
      case "function":
        t = e;
        break;
    }
    return t;
  }
  //apply mutator to row
  transformRow(e, t, i) {
    var s = "mutator" + (t.charAt(0).toUpperCase() + t.slice(1)), n;
    return this.enabled && this.table.columnManager.traverse((r) => {
      var o, a, l;
      r.modules.mutate && (o = r.modules.mutate[s] || r.modules.mutate.mutator || !1, o && (n = r.getFieldValue(typeof i < "u" ? i : e), (t == "data" && !i || typeof n < "u") && (l = r.getComponent(), a = typeof o.params == "function" ? o.params(n, e, t, l) : o.params, r.setFieldValue(e, o.mutator(n, e, t, a, l)))));
    }), e;
  }
  //apply mutator to new cell value
  transformCell(e, t) {
    if (e.column.modules.mutate) {
      var i = e.column.modules.mutate.mutatorEdit || e.column.modules.mutate.mutator || !1, s = {};
      if (i)
        return s = Object.assign(s, e.row.getData()), e.column.setFieldValue(s, t), i.mutator(t, s, "edit", i.params, e.getComponent());
    }
    return t;
  }
  mutateLink(e) {
    var t = e.column.definition.mutateLink;
    t && (Array.isArray(t) || (t = [t]), t.forEach((i) => {
      var s = e.row.getCell(i);
      s && s.setValue(s.getValue(), !0, !0);
    }));
  }
  enable() {
    this.enabled = !0;
  }
  disable() {
    this.enabled = !1;
  }
};
D(Ks, "moduleName", "mutator"), //load defaults
D(Ks, "mutators", vp);
let Ba = Ks;
function Bp(A, e, t, i, s) {
  var n = document.createElement("span"), r = document.createElement("span"), o = document.createElement("span"), a = document.createElement("span"), l = document.createElement("span"), h = document.createElement("span");
  return this.table.modules.localize.langBind("pagination|counter|showing", (c) => {
    r.innerHTML = c;
  }), this.table.modules.localize.langBind("pagination|counter|of", (c) => {
    a.innerHTML = c;
  }), this.table.modules.localize.langBind("pagination|counter|rows", (c) => {
    h.innerHTML = c;
  }), i ? (o.innerHTML = " " + e + "-" + Math.min(e + A - 1, i) + " ", l.innerHTML = " " + i + " ", n.appendChild(r), n.appendChild(o), n.appendChild(a), n.appendChild(l), n.appendChild(h)) : (o.innerHTML = " 0 ", n.appendChild(r), n.appendChild(o), n.appendChild(h)), n;
}
function Cp(A, e, t, i, s) {
  var n = document.createElement("span"), r = document.createElement("span"), o = document.createElement("span"), a = document.createElement("span"), l = document.createElement("span"), h = document.createElement("span");
  return this.table.modules.localize.langBind("pagination|counter|showing", (c) => {
    r.innerHTML = c;
  }), o.innerHTML = " " + t + " ", this.table.modules.localize.langBind("pagination|counter|of", (c) => {
    a.innerHTML = c;
  }), l.innerHTML = " " + s + " ", this.table.modules.localize.langBind("pagination|counter|pages", (c) => {
    h.innerHTML = c;
  }), n.appendChild(r), n.appendChild(o), n.appendChild(a), n.appendChild(l), n.appendChild(h), n;
}
var yp = {
  rows: Bp,
  pages: Cp
};
const WA = class WA extends ne {
  constructor(e) {
    super(e), this.mode = "local", this.progressiveLoad = !1, this.element = null, this.pageCounterElement = null, this.pageCounter = null, this.size = 0, this.page = 1, this.count = 5, this.max = 1, this.remoteRowCountEstimate = null, this.initialLoad = !0, this.dataChanging = !1, this.pageSizes = [], this.registerTableOption("pagination", !1), this.registerTableOption("paginationMode", "local"), this.registerTableOption("paginationSize", !1), this.registerTableOption("paginationInitialPage", 1), this.registerTableOption("paginationCounter", !1), this.registerTableOption("paginationCounterElement", !1), this.registerTableOption("paginationButtonCount", 5), this.registerTableOption("paginationSizeSelector", !1), this.registerTableOption("paginationElement", !1), this.registerTableOption("paginationAddRow", "page"), this.registerTableOption("paginationOutOfRange", !1), this.registerTableOption("progressiveLoad", !1), this.registerTableOption("progressiveLoadDelay", 0), this.registerTableOption("progressiveLoadScrollMargin", 0), this.registerTableFunction("setMaxPage", this.setMaxPage.bind(this)), this.registerTableFunction("setPage", this.setPage.bind(this)), this.registerTableFunction("setPageToRow", this.userSetPageToRow.bind(this)), this.registerTableFunction("setPageSize", this.userSetPageSize.bind(this)), this.registerTableFunction("getPageSize", this.getPageSize.bind(this)), this.registerTableFunction("previousPage", this.previousPage.bind(this)), this.registerTableFunction("nextPage", this.nextPage.bind(this)), this.registerTableFunction("getPage", this.getPage.bind(this)), this.registerTableFunction("getPageMax", this.getPageMax.bind(this)), this.registerComponentFunction("row", "pageTo", this.setPageToRow.bind(this));
  }
  initialize() {
    this.table.options.pagination ? (this.subscribe("row-deleted", this.rowsUpdated.bind(this)), this.subscribe("row-added", this.rowsUpdated.bind(this)), this.subscribe("data-processed", this.initialLoadComplete.bind(this)), this.subscribe("table-built", this.calculatePageSizes.bind(this)), this.subscribe("footer-redraw", this.footerRedraw.bind(this)), this.table.options.paginationAddRow == "page" && this.subscribe("row-adding-position", this.rowAddingPosition.bind(this)), this.table.options.paginationMode === "remote" && (this.subscribe("data-params", this.remotePageParams.bind(this)), this.subscribe("data-loaded", this._parseRemoteData.bind(this))), this.table.options.progressiveLoad && console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"), this.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40), this.registerDisplayHandler(this.getRows.bind(this), 50), this.createElements(), this.initializePageCounter(), this.initializePaginator()) : this.table.options.progressiveLoad && (this.subscribe("data-params", this.remotePageParams.bind(this)), this.subscribe("data-loaded", this._parseRemoteData.bind(this)), this.subscribe("table-built", this.calculatePageSizes.bind(this)), this.subscribe("data-processed", this.initialLoadComplete.bind(this)), this.initializeProgressive(this.table.options.progressiveLoad), this.table.options.progressiveLoad === "scroll" && this.subscribe("scroll-vertical", this.scrollVertical.bind(this)));
  }
  rowAddingPosition(e, t) {
    var i = this.table.rowManager, s = i.getDisplayRows(), n;
    return t ? s.length ? n = s[0] : i.activeRows.length && (n = i.activeRows[i.activeRows.length - 1], t = !1) : s.length && (n = s[s.length - 1], t = !(s.length < this.size)), { index: n, top: t };
  }
  calculatePageSizes() {
    var e, t;
    this.table.options.paginationSize ? this.size = this.table.options.paginationSize : (e = document.createElement("div"), e.classList.add("tabulator-row"), e.style.visibility = "hidden", t = document.createElement("div"), t.classList.add("tabulator-cell"), t.innerHTML = "Page Row Test", e.appendChild(t), this.table.rowManager.getTableElement().appendChild(e), this.size = Math.floor(this.table.rowManager.getElement().clientHeight / e.offsetHeight), this.table.rowManager.getTableElement().removeChild(e)), this.dispatchExternal("pageSizeChanged", this.size), this.generatePageSizeSelectList();
  }
  initialLoadComplete() {
    this.initialLoad = !1;
  }
  remotePageParams(e, t, i, s) {
    return this.initialLoad || (this.progressiveLoad && !i || !this.progressiveLoad && !this.dataChanging) && this.reset(!0), s.page = this.page, this.size && (s.size = this.size), s;
  }
  ///////////////////////////////////
  ///////// Table Functions /////////
  ///////////////////////////////////
  userSetPageToRow(e) {
    return this.table.options.pagination && (e = this.table.rowManager.findRow(e), e) ? this.setPageToRow(e) : Promise.reject();
  }
  userSetPageSize(e) {
    return this.table.options.pagination ? (this.setPageSize(e), this.setPage(1)) : !1;
  }
  ///////////////////////////////////
  ///////// Internal Logic //////////
  ///////////////////////////////////
  scrollVertical(e, t) {
    var i, s, n;
    !t && !this.table.dataLoader.loading && (i = this.table.rowManager.getElement(), s = i.scrollHeight - i.clientHeight - e, n = this.table.options.progressiveLoadScrollMargin || i.clientHeight * 2, s < n && this.nextPage().catch(() => {
    }));
  }
  restOnRenderBefore(e, t) {
    return t || this.mode === "local" && this.reset(), e;
  }
  rowsUpdated() {
    this.refreshData(!0, "all");
  }
  createElements() {
    var e;
    this.element = document.createElement("span"), this.element.classList.add("tabulator-paginator"), this.pagesElement = document.createElement("span"), this.pagesElement.classList.add("tabulator-pages"), e = document.createElement("button"), e.classList.add("tabulator-page"), e.setAttribute("type", "button"), e.setAttribute("role", "button"), e.setAttribute("aria-label", ""), e.setAttribute("title", ""), this.firstBut = e.cloneNode(!0), this.firstBut.setAttribute("data-page", "first"), this.prevBut = e.cloneNode(!0), this.prevBut.setAttribute("data-page", "prev"), this.nextBut = e.cloneNode(!0), this.nextBut.setAttribute("data-page", "next"), this.lastBut = e.cloneNode(!0), this.lastBut.setAttribute("data-page", "last"), this.table.options.paginationSizeSelector && (this.pageSizeSelect = document.createElement("select"), this.pageSizeSelect.classList.add("tabulator-page-size"));
  }
  generatePageSizeSelectList() {
    var e = [];
    if (this.pageSizeSelect) {
      if (Array.isArray(this.table.options.paginationSizeSelector))
        e = this.table.options.paginationSizeSelector, this.pageSizes = e, this.pageSizes.indexOf(this.size) == -1 && e.unshift(this.size);
      else if (this.pageSizes.indexOf(this.size) == -1) {
        e = [];
        for (let t = 1; t < 5; t++)
          e.push(this.size * t);
        this.pageSizes = e;
      } else
        e = this.pageSizes;
      for (; this.pageSizeSelect.firstChild; ) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);
      e.forEach((t) => {
        var i = document.createElement("option");
        i.value = t, t === !0 ? this.langBind("pagination|all", function(s) {
          i.innerHTML = s;
        }) : i.innerHTML = t, this.pageSizeSelect.appendChild(i);
      }), this.pageSizeSelect.value = this.size;
    }
  }
  initializePageCounter() {
    var e = this.table.options.paginationCounter, t = null;
    e && (typeof e == "function" ? t = e : t = WA.pageCounters[e], t ? (this.pageCounter = t, this.pageCounterElement = document.createElement("span"), this.pageCounterElement.classList.add("tabulator-page-counter")) : console.warn("Pagination Error - No such page counter found: ", e));
  }
  //setup pagination
  initializePaginator(e) {
    var t, i;
    e || (this.langBind("pagination|first", (s) => {
      this.firstBut.innerHTML = s;
    }), this.langBind("pagination|first_title", (s) => {
      this.firstBut.setAttribute("aria-label", s), this.firstBut.setAttribute("title", s);
    }), this.langBind("pagination|prev", (s) => {
      this.prevBut.innerHTML = s;
    }), this.langBind("pagination|prev_title", (s) => {
      this.prevBut.setAttribute("aria-label", s), this.prevBut.setAttribute("title", s);
    }), this.langBind("pagination|next", (s) => {
      this.nextBut.innerHTML = s;
    }), this.langBind("pagination|next_title", (s) => {
      this.nextBut.setAttribute("aria-label", s), this.nextBut.setAttribute("title", s);
    }), this.langBind("pagination|last", (s) => {
      this.lastBut.innerHTML = s;
    }), this.langBind("pagination|last_title", (s) => {
      this.lastBut.setAttribute("aria-label", s), this.lastBut.setAttribute("title", s);
    }), this.firstBut.addEventListener("click", () => {
      this.setPage(1);
    }), this.prevBut.addEventListener("click", () => {
      this.previousPage();
    }), this.nextBut.addEventListener("click", () => {
      this.nextPage();
    }), this.lastBut.addEventListener("click", () => {
      this.setPage(this.max);
    }), this.table.options.paginationElement && (this.element = this.table.options.paginationElement), this.pageSizeSelect && (t = document.createElement("label"), this.langBind("pagination|page_size", (s) => {
      this.pageSizeSelect.setAttribute("aria-label", s), this.pageSizeSelect.setAttribute("title", s), t.innerHTML = s;
    }), this.element.appendChild(t), this.element.appendChild(this.pageSizeSelect), this.pageSizeSelect.addEventListener("change", (s) => {
      this.setPageSize(this.pageSizeSelect.value == "true" ? !0 : this.pageSizeSelect.value), this.setPage(1);
    })), this.element.appendChild(this.firstBut), this.element.appendChild(this.prevBut), this.element.appendChild(this.pagesElement), this.element.appendChild(this.nextBut), this.element.appendChild(this.lastBut), this.table.options.paginationElement || (this.table.options.paginationCounter && (this.table.options.paginationCounterElement ? this.table.options.paginationCounterElement instanceof HTMLElement ? this.table.options.paginationCounterElement.appendChild(this.pageCounterElement) : typeof this.table.options.paginationCounterElement == "string" && (i = document.querySelector(this.table.options.paginationCounterElement), i ? i.appendChild(this.pageCounterElement) : console.warn("Pagination Error - Unable to find element matching paginationCounterElement selector:", this.table.options.paginationCounterElement)) : this.footerAppend(this.pageCounterElement)), this.footerAppend(this.element)), this.page = this.table.options.paginationInitialPage, this.count = this.table.options.paginationButtonCount), this.mode = this.table.options.paginationMode;
  }
  initializeProgressive(e) {
    this.initializePaginator(!0), this.mode = "progressive_" + e, this.progressiveLoad = !0;
  }
  trackChanges() {
    this.dispatch("page-changed");
  }
  //calculate maximum page from number of rows
  setMaxRows(e) {
    e ? this.max = this.size === !0 ? 1 : Math.ceil(e / this.size) : this.max = 1, this.page > this.max && (this.page = this.max);
  }
  //reset to first page without triggering action
  reset(e) {
    this.initialLoad || (this.mode == "local" || e) && (this.page = 1, this.trackChanges());
  }
  //set the maximum page
  setMaxPage(e) {
    e = parseInt(e), this.max = e || 1, this.page > this.max && (this.page = this.max, this.trigger());
  }
  //set current page number
  setPage(e) {
    switch (e) {
      case "first":
        return this.setPage(1);
      case "prev":
        return this.previousPage();
      case "next":
        return this.nextPage();
      case "last":
        return this.setPage(this.max);
    }
    return e = parseInt(e), e > 0 && e <= this.max || this.mode !== "local" ? (this.page = e, this.trackChanges(), this.trigger()) : (console.warn("Pagination Error - Requested page is out of range of 1 - " + this.max + ":", e), Promise.reject());
  }
  setPageToRow(e) {
    var t = this.displayRows(-1), i = t.indexOf(e);
    if (i > -1) {
      var s = this.size === !0 ? 1 : Math.ceil((i + 1) / this.size);
      return this.setPage(s);
    } else
      return console.warn("Pagination Error - Requested row is not visible"), Promise.reject();
  }
  setPageSize(e) {
    e !== !0 && (e = parseInt(e)), e > 0 && (this.size = e, this.dispatchExternal("pageSizeChanged", e)), this.pageSizeSelect && this.generatePageSizeSelectList(), this.trackChanges();
  }
  _setPageCounter(e, t, i) {
    var s;
    if (this.pageCounter)
      switch (this.mode === "remote" && (t = this.size, i = (this.page - 1) * this.size + 1, e = this.remoteRowCountEstimate), s = this.pageCounter.call(this, t, i, this.page, e, this.max), typeof s) {
        case "object":
          if (s instanceof Node) {
            for (; this.pageCounterElement.firstChild; ) this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);
            this.pageCounterElement.appendChild(s);
          } else
            this.pageCounterElement.innerHTML = "", s != null && console.warn("Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:", s);
          break;
        case "undefined":
          this.pageCounterElement.innerHTML = "";
          break;
        default:
          this.pageCounterElement.innerHTML = s;
      }
  }
  //setup the pagination buttons
  _setPageButtons() {
    let e = Math.floor((this.count - 1) / 2), t = Math.ceil((this.count - 1) / 2), i = this.max - this.page + e + 1 < this.count ? this.max - this.count + 1 : Math.max(this.page - e, 1), s = this.page <= t ? Math.min(this.count, this.max) : Math.min(this.page + t, this.max);
    for (; this.pagesElement.firstChild; ) this.pagesElement.removeChild(this.pagesElement.firstChild);
    this.page == 1 ? (this.firstBut.disabled = !0, this.prevBut.disabled = !0) : (this.firstBut.disabled = !1, this.prevBut.disabled = !1), this.page == this.max ? (this.lastBut.disabled = !0, this.nextBut.disabled = !0) : (this.lastBut.disabled = !1, this.nextBut.disabled = !1);
    for (let n = i; n <= s; n++)
      n > 0 && n <= this.max && this.pagesElement.appendChild(this._generatePageButton(n));
    this.footerRedraw();
  }
  _generatePageButton(e) {
    var t = document.createElement("button");
    return t.classList.add("tabulator-page"), e == this.page && t.classList.add("active"), t.setAttribute("type", "button"), t.setAttribute("role", "button"), this.langBind("pagination|page_title", (i) => {
      t.setAttribute("aria-label", i + " " + e), t.setAttribute("title", i + " " + e);
    }), t.setAttribute("data-page", e), t.textContent = e, t.addEventListener("click", (i) => {
      this.setPage(e);
    }), t;
  }
  //previous page
  previousPage() {
    return this.page > 1 ? (this.page--, this.trackChanges(), this.trigger()) : (console.warn("Pagination Error - Previous page would be less than page 1:", 0), Promise.reject());
  }
  //next page
  nextPage() {
    return this.page < this.max ? (this.page++, this.trackChanges(), this.trigger()) : (this.progressiveLoad || console.warn("Pagination Error - Next page would be greater than maximum page of " + this.max + ":", this.max + 1), Promise.reject());
  }
  //return current page number
  getPage() {
    return this.page;
  }
  //return max page number
  getPageMax() {
    return this.max;
  }
  getPageSize(e) {
    return this.size;
  }
  getMode() {
    return this.mode;
  }
  //return appropriate rows for current page
  getRows(e) {
    var t = 0, i, s, n, r, o = e.filter((a) => a.type === "row");
    if (this.mode == "local") {
      i = [], this.setMaxRows(e.length), this.size === !0 ? (s = 0, n = e.length) : (s = this.size * (this.page - 1), n = s + parseInt(this.size)), this._setPageButtons();
      for (let a = s; a < n; a++) {
        let l = e[a];
        l && (i.push(l), l.type === "row" && (r || (r = l), t++));
      }
      return this._setPageCounter(o.length, t, r ? o.indexOf(r) + 1 : 0), i;
    } else
      return this._setPageButtons(), this._setPageCounter(o.length), e.slice(0);
  }
  trigger() {
    var e;
    switch (this.mode) {
      case "local":
        return e = this.table.rowManager.scrollLeft, this.refreshData(), this.table.rowManager.scrollHorizontal(e), this.dispatchExternal("pageLoaded", this.getPage()), Promise.resolve();
      case "remote":
        return this.dataChanging = !0, this.reloadData(null).finally(() => {
          this.dataChanging = !1;
        });
      case "progressive_load":
      case "progressive_scroll":
        return this.reloadData(null, !0);
      default:
        return console.warn("Pagination Error - no such pagination mode:", this.mode), Promise.reject();
    }
  }
  _parseRemoteData(e) {
    var t, i;
    if (typeof e.last_page > "u" && console.warn("Remote Pagination Error - Server response missing '" + (this.options("dataReceiveParams").last_page || "last_page") + "' property"), e.data)
      if (this.max = parseInt(e.last_page) || 1, this.remoteRowCountEstimate = typeof e.last_row < "u" ? e.last_row : e.last_page * this.size - (this.page == e.last_page ? this.size - e.data.length : 0), this.progressiveLoad) {
        switch (this.mode) {
          case "progressive_load":
            this.page == 1 ? this.table.rowManager.setData(e.data, !1, this.page == 1) : this.table.rowManager.addRows(e.data), this.page < this.max && setTimeout(() => {
              this.nextPage();
            }, this.table.options.progressiveLoadDelay);
            break;
          case "progressive_scroll":
            e = this.page === 1 ? e.data : this.table.rowManager.getData().concat(e.data), this.table.rowManager.setData(e, this.page !== 1, this.page == 1), t = this.table.options.progressiveLoadScrollMargin || this.table.rowManager.element.clientHeight * 2, this.table.rowManager.element.scrollHeight <= this.table.rowManager.element.clientHeight + t && this.page < this.max && setTimeout(() => {
              this.nextPage();
            });
            break;
        }
        return !1;
      } else {
        if (this.page > this.max && (console.warn("Remote Pagination Error - Server returned last page value lower than the current page"), i = this.options("paginationOutOfRange"), i))
          return this.setPage(typeof i == "function" ? i.call(this, this.page, this.max) : i);
        this.dispatchExternal("pageLoaded", this.getPage());
      }
    else
      console.warn("Remote Pagination Error - Server response missing '" + (this.options("dataReceiveParams").data || "data") + "' property");
    return e.data;
  }
  //handle the footer element being redrawn
  footerRedraw() {
    var e = this.table.footerManager.containerElement;
    Math.ceil(e.clientWidth) - e.scrollWidth < 0 ? this.pagesElement.style.display = "none" : (this.pagesElement.style.display = "", Math.ceil(e.clientWidth) - e.scrollWidth < 0 && (this.pagesElement.style.display = "none"));
  }
};
D(WA, "moduleName", "page"), //load defaults
D(WA, "pageCounters", yp);
let Ca = WA;
var Ep = {
  local: function(A, e) {
    var t = localStorage.getItem(A + "-" + e);
    return t ? JSON.parse(t) : !1;
  },
  cookie: function(A, e) {
    var t = document.cookie, i = A + "-" + e, s = t.indexOf(i + "="), n, r;
    return s > -1 && (t = t.slice(s), n = t.indexOf(";"), n > -1 && (t = t.slice(0, n)), r = t.replace(i + "=", "")), r ? JSON.parse(r) : !1;
  }
}, Fp = {
  local: function(A, e, t) {
    localStorage.setItem(A + "-" + e, JSON.stringify(t));
  },
  cookie: function(A, e, t) {
    var i = /* @__PURE__ */ new Date();
    i.setDate(i.getDate() + 1e4), document.cookie = A + "-" + e + "=" + JSON.stringify(t) + "; expires=" + i.toUTCString();
  }
};
const pt = class pt extends ne {
  constructor(e) {
    super(e), this.mode = "", this.id = "", this.defWatcherBlock = !1, this.config = {}, this.readFunc = !1, this.writeFunc = !1, this.registerTableOption("persistence", !1), this.registerTableOption("persistenceID", ""), this.registerTableOption("persistenceMode", !0), this.registerTableOption("persistenceReaderFunc", !1), this.registerTableOption("persistenceWriterFunc", !1);
  }
  // Test for whether localStorage is available for use.
  localStorageTest() {
    var e = "_tabulator_test";
    try {
      return window.localStorage.setItem(e, e), window.localStorage.removeItem(e), !0;
    } catch {
      return !1;
    }
  }
  //setup parameters
  initialize() {
    if (this.table.options.persistence) {
      var e = this.table.options.persistenceMode, t = this.table.options.persistenceID, i;
      this.mode = e !== !0 ? e : this.localStorageTest() ? "local" : "cookie", this.table.options.persistenceReaderFunc ? typeof this.table.options.persistenceReaderFunc == "function" ? this.readFunc = this.table.options.persistenceReaderFunc : pt.readers[this.table.options.persistenceReaderFunc] ? this.readFunc = pt.readers[this.table.options.persistenceReaderFunc] : console.warn("Persistence Read Error - invalid reader set", this.table.options.persistenceReaderFunc) : pt.readers[this.mode] ? this.readFunc = pt.readers[this.mode] : console.warn("Persistence Read Error - invalid reader set", this.mode), this.table.options.persistenceWriterFunc ? typeof this.table.options.persistenceWriterFunc == "function" ? this.writeFunc = this.table.options.persistenceWriterFunc : pt.writers[this.table.options.persistenceWriterFunc] ? this.writeFunc = pt.writers[this.table.options.persistenceWriterFunc] : console.warn("Persistence Write Error - invalid reader set", this.table.options.persistenceWriterFunc) : pt.writers[this.mode] ? this.writeFunc = pt.writers[this.mode] : console.warn("Persistence Write Error - invalid writer set", this.mode), this.id = "tabulator-" + (t || this.table.element.getAttribute("id") || ""), this.config = {
        sort: this.table.options.persistence === !0 || this.table.options.persistence.sort,
        filter: this.table.options.persistence === !0 || this.table.options.persistence.filter,
        headerFilter: this.table.options.persistence === !0 || this.table.options.persistence.headerFilter,
        group: this.table.options.persistence === !0 || this.table.options.persistence.group,
        page: this.table.options.persistence === !0 || this.table.options.persistence.page,
        columns: this.table.options.persistence === !0 ? ["title", "width", "visible"] : this.table.options.persistence.columns
      }, this.config.page && (i = this.retrieveData("page"), i && (typeof i.paginationSize < "u" && (this.config.page === !0 || this.config.page.size) && (this.table.options.paginationSize = i.paginationSize), typeof i.paginationInitialPage < "u" && (this.config.page === !0 || this.config.page.page) && (this.table.options.paginationInitialPage = i.paginationInitialPage))), this.config.group && (i = this.retrieveData("group"), i && (typeof i.groupBy < "u" && (this.config.group === !0 || this.config.group.groupBy) && (this.table.options.groupBy = i.groupBy), typeof i.groupStartOpen < "u" && (this.config.group === !0 || this.config.group.groupStartOpen) && (this.table.options.groupStartOpen = i.groupStartOpen), typeof i.groupHeader < "u" && (this.config.group === !0 || this.config.group.groupHeader) && (this.table.options.groupHeader = i.groupHeader))), this.config.columns && (this.table.options.columns = this.load("columns", this.table.options.columns), this.subscribe("column-init", this.initializeColumn.bind(this)), this.subscribe("column-show", this.save.bind(this, "columns")), this.subscribe("column-hide", this.save.bind(this, "columns")), this.subscribe("column-moved", this.save.bind(this, "columns"))), this.subscribe("table-built", this.tableBuilt.bind(this), 0), this.subscribe("table-redraw", this.tableRedraw.bind(this)), this.subscribe("filter-changed", this.eventSave.bind(this, "filter")), this.subscribe("filter-changed", this.eventSave.bind(this, "headerFilter")), this.subscribe("sort-changed", this.eventSave.bind(this, "sort")), this.subscribe("group-changed", this.eventSave.bind(this, "group")), this.subscribe("page-changed", this.eventSave.bind(this, "page")), this.subscribe("column-resized", this.eventSave.bind(this, "columns")), this.subscribe("column-width", this.eventSave.bind(this, "columns")), this.subscribe("layout-refreshed", this.eventSave.bind(this, "columns"));
    }
    this.registerTableFunction("getColumnLayout", this.getColumnLayout.bind(this)), this.registerTableFunction("setColumnLayout", this.setColumnLayout.bind(this));
  }
  eventSave(e) {
    this.config[e] && this.save(e);
  }
  tableBuilt() {
    var e, t, i;
    this.config.sort && (e = this.load("sort"), e && (this.table.options.initialSort = e)), this.config.filter && (t = this.load("filter"), t && (this.table.options.initialFilter = t)), this.config.headerFilter && (i = this.load("headerFilter"), i && (this.table.options.initialHeaderFilter = i));
  }
  tableRedraw(e) {
    e && this.config.columns && this.save("columns");
  }
  ///////////////////////////////////
  ///////// Table Functions /////////
  ///////////////////////////////////
  getColumnLayout() {
    return this.parseColumns(this.table.columnManager.getColumns());
  }
  setColumnLayout(e) {
    return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, e, !0)), !0;
  }
  ///////////////////////////////////
  ///////// Internal Logic //////////
  ///////////////////////////////////
  initializeColumn(e) {
    var t, i;
    this.config.columns && (this.defWatcherBlock = !0, t = e.getDefinition(), i = this.config.columns === !0 ? Object.keys(t) : this.config.columns, i.forEach((s) => {
      var n = Object.getOwnPropertyDescriptor(t, s), r = t[s];
      n && Object.defineProperty(t, s, {
        set: (o) => {
          r = o, this.defWatcherBlock || this.save("columns"), n.set && n.set(o);
        },
        get: () => (n.get && n.get(), r)
      });
    }), this.defWatcherBlock = !1);
  }
  //load saved definitions
  load(e, t) {
    var i = this.retrieveData(e);
    return t && (i = i ? this.mergeDefinition(t, i) : t), i;
  }
  //retrieve data from memory
  retrieveData(e) {
    return this.readFunc ? this.readFunc(this.id, e) : !1;
  }
  //merge old and new column definitions
  mergeDefinition(e, t, i) {
    var s = [];
    return t = t || [], t.forEach((n, r) => {
      var o = this._findColumn(e, n), a;
      o && (i ? a = Object.keys(n) : this.config.columns === !0 || this.config.columns == null ? (a = Object.keys(o), a.push("width")) : a = this.config.columns, a.forEach((l) => {
        l !== "columns" && typeof n[l] < "u" && (o[l] = n[l]);
      }), o.columns && (o.columns = this.mergeDefinition(o.columns, n.columns)), s.push(o));
    }), e.forEach((n, r) => {
      var o = this._findColumn(t, n);
      o || (s.length > r ? s.splice(r, 0, n) : s.push(n));
    }), s;
  }
  //find matching columns
  _findColumn(e, t) {
    var i = t.columns ? "group" : t.field ? "field" : "object";
    return e.find(function(s) {
      switch (i) {
        case "group":
          return s.title === t.title && s.columns.length === t.columns.length;
        case "field":
          return s.field === t.field;
        case "object":
          return s === t;
      }
    });
  }
  //save data
  save(e) {
    var t = {};
    switch (e) {
      case "columns":
        t = this.parseColumns(this.table.columnManager.getColumns());
        break;
      case "filter":
        t = this.table.modules.filter.getFilters();
        break;
      case "headerFilter":
        t = this.table.modules.filter.getHeaderFilters();
        break;
      case "sort":
        t = this.validateSorters(this.table.modules.sort.getSort());
        break;
      case "group":
        t = this.getGroupConfig();
        break;
      case "page":
        t = this.getPageConfig();
        break;
    }
    this.writeFunc && this.writeFunc(this.id, e, t);
  }
  //ensure sorters contain no function data
  validateSorters(e) {
    return e.forEach(function(t) {
      t.column = t.field, delete t.field;
    }), e;
  }
  getGroupConfig() {
    var e = {};
    return this.config.group && ((this.config.group === !0 || this.config.group.groupBy) && (e.groupBy = this.table.options.groupBy), (this.config.group === !0 || this.config.group.groupStartOpen) && (e.groupStartOpen = this.table.options.groupStartOpen), (this.config.group === !0 || this.config.group.groupHeader) && (e.groupHeader = this.table.options.groupHeader)), e;
  }
  getPageConfig() {
    var e = {};
    return this.config.page && ((this.config.page === !0 || this.config.page.size) && (e.paginationSize = this.table.modules.page.getPageSize()), (this.config.page === !0 || this.config.page.page) && (e.paginationInitialPage = this.table.modules.page.getPage())), e;
  }
  //parse columns for data to store
  parseColumns(e) {
    var t = [], i = ["headerContextMenu", "headerMenu", "contextMenu", "clickMenu"];
    return e.forEach((s) => {
      var n = {}, r = s.getDefinition(), o;
      s.isGroup ? (n.title = r.title, n.columns = this.parseColumns(s.getColumns())) : (n.field = s.getField(), this.config.columns === !0 || this.config.columns == null ? (o = Object.keys(r), o.push("width"), o.push("visible")) : o = this.config.columns, o.forEach((a) => {
        switch (a) {
          case "width":
            n.width = s.getWidth();
            break;
          case "visible":
            n.visible = s.visible;
            break;
          default:
            typeof r[a] != "function" && i.indexOf(a) === -1 && (n[a] = r[a]);
        }
      })), t.push(n);
    }), t;
  }
};
D(pt, "moduleName", "persistence"), D(pt, "moduleInitOrder", -10), //load defaults
D(pt, "readers", Ep), D(pt, "writers", Fp);
let ya = pt;
class Bu extends ne {
  constructor(e) {
    super(e), this.columnSubscribers = {}, this.registerTableOption("rowContextPopup", !1), this.registerTableOption("rowClickPopup", !1), this.registerTableOption("rowDblClickPopup", !1), this.registerTableOption("groupContextPopup", !1), this.registerTableOption("groupClickPopup", !1), this.registerTableOption("groupDblClickPopup", !1), this.registerColumnOption("headerContextPopup"), this.registerColumnOption("headerClickPopup"), this.registerColumnOption("headerDblClickPopup"), this.registerColumnOption("headerPopup"), this.registerColumnOption("headerPopupIcon"), this.registerColumnOption("contextPopup"), this.registerColumnOption("clickPopup"), this.registerColumnOption("dblClickPopup"), this.registerComponentFunction("cell", "popup", this._componentPopupCall.bind(this)), this.registerComponentFunction("column", "popup", this._componentPopupCall.bind(this)), this.registerComponentFunction("row", "popup", this._componentPopupCall.bind(this)), this.registerComponentFunction("group", "popup", this._componentPopupCall.bind(this));
  }
  initialize() {
    this.initializeRowWatchers(), this.initializeGroupWatchers(), this.subscribe("column-init", this.initializeColumn.bind(this));
  }
  _componentPopupCall(e, t, i) {
    this.loadPopupEvent(t, null, e, i);
  }
  initializeRowWatchers() {
    this.table.options.rowContextPopup && (this.subscribe("row-contextmenu", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup)), this.table.on("rowTapHold", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup))), this.table.options.rowClickPopup && this.subscribe("row-click", this.loadPopupEvent.bind(this, this.table.options.rowClickPopup)), this.table.options.rowDblClickPopup && this.subscribe("row-dblclick", this.loadPopupEvent.bind(this, this.table.options.rowDblClickPopup));
  }
  initializeGroupWatchers() {
    this.table.options.groupContextPopup && (this.subscribe("group-contextmenu", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup)), this.table.on("groupTapHold", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup))), this.table.options.groupClickPopup && this.subscribe("group-click", this.loadPopupEvent.bind(this, this.table.options.groupClickPopup)), this.table.options.groupDblClickPopup && this.subscribe("group-dblclick", this.loadPopupEvent.bind(this, this.table.options.groupDblClickPopup));
  }
  initializeColumn(e) {
    var t = e.definition;
    t.headerContextPopup && !this.columnSubscribers.headerContextPopup && (this.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, "headerContextPopup"), this.subscribe("column-contextmenu", this.columnSubscribers.headerContextPopup), this.table.on("headerTapHold", this.loadPopupTableColumnEvent.bind(this, "headerContextPopup"))), t.headerClickPopup && !this.columnSubscribers.headerClickPopup && (this.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, "headerClickPopup"), this.subscribe("column-click", this.columnSubscribers.headerClickPopup)), t.headerDblClickPopup && !this.columnSubscribers.headerDblClickPopup && (this.columnSubscribers.headerDblClickPopup = this.loadPopupTableColumnEvent.bind(this, "headerDblClickPopup"), this.subscribe("column-dblclick", this.columnSubscribers.headerDblClickPopup)), t.headerPopup && this.initializeColumnHeaderPopup(e), t.contextPopup && !this.columnSubscribers.contextPopup && (this.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, "contextPopup"), this.subscribe("cell-contextmenu", this.columnSubscribers.contextPopup), this.table.on("cellTapHold", this.loadPopupTableCellEvent.bind(this, "contextPopup"))), t.clickPopup && !this.columnSubscribers.clickPopup && (this.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, "clickPopup"), this.subscribe("cell-click", this.columnSubscribers.clickPopup)), t.dblClickPopup && !this.columnSubscribers.dblClickPopup && (this.columnSubscribers.dblClickPopup = this.loadPopupTableCellEvent.bind(this, "dblClickPopup"), this.subscribe("cell-click", this.columnSubscribers.dblClickPopup));
  }
  initializeColumnHeaderPopup(e) {
    var t = e.definition.headerPopupIcon, i;
    i = document.createElement("span"), i.classList.add("tabulator-header-popup-button"), t ? (typeof t == "function" && (t = t(e.getComponent())), t instanceof HTMLElement ? i.appendChild(t) : i.innerHTML = t) : i.innerHTML = "&vellip;", i.addEventListener("click", (s) => {
      s.stopPropagation(), s.preventDefault(), this.loadPopupEvent(e.definition.headerPopup, s, e);
    }), e.titleElement.insertBefore(i, e.titleElement.firstChild);
  }
  loadPopupTableCellEvent(e, t, i) {
    i._cell && (i = i._cell), i.column.definition[e] && this.loadPopupEvent(i.column.definition[e], t, i);
  }
  loadPopupTableColumnEvent(e, t, i) {
    i._column && (i = i._column), i.definition[e] && this.loadPopupEvent(i.definition[e], t, i);
  }
  loadPopupEvent(e, t, i, s) {
    var n;
    function r(o) {
      n = o;
    }
    i._group ? i = i._group : i._row && (i = i._row), e = typeof e == "function" ? e.call(this.table, t, i.getComponent(), r) : e, this.loadPopup(t, i, e, n, s);
  }
  loadPopup(e, t, i, s, n) {
    var r = !(e instanceof MouseEvent), o, a;
    i instanceof HTMLElement ? o = i : (o = document.createElement("div"), o.innerHTML = i), o.classList.add("tabulator-popup"), o.addEventListener("click", (l) => {
      l.stopPropagation();
    }), r || e.preventDefault(), a = this.popup(o), typeof s == "function" && a.renderCallback(s), e ? a.show(e) : a.show(t.getElement(), n || "center"), a.hideOnBlur(() => {
      this.dispatchExternal("popupClosed", t.getComponent());
    }), this.dispatchExternal("popupOpened", t.getComponent());
  }
}
D(Bu, "moduleName", "popup");
class Cu extends ne {
  constructor(e) {
    super(e), this.element = !1, this.manualBlock = !1, this.beforeprintEventHandler = null, this.afterprintEventHandler = null, this.registerTableOption("printAsHtml", !1), this.registerTableOption("printFormatter", !1), this.registerTableOption("printHeader", !1), this.registerTableOption("printFooter", !1), this.registerTableOption("printStyled", !0), this.registerTableOption("printRowRange", "visible"), this.registerTableOption("printConfig", {}), this.registerColumnOption("print"), this.registerColumnOption("titlePrint");
  }
  initialize() {
    this.table.options.printAsHtml && (this.beforeprintEventHandler = this.replaceTable.bind(this), this.afterprintEventHandler = this.cleanup.bind(this), window.addEventListener("beforeprint", this.beforeprintEventHandler), window.addEventListener("afterprint", this.afterprintEventHandler), this.subscribe("table-destroy", this.destroy.bind(this))), this.registerTableFunction("print", this.printFullscreen.bind(this));
  }
  destroy() {
    this.table.options.printAsHtml && (window.removeEventListener("beforeprint", this.beforeprintEventHandler), window.removeEventListener("afterprint", this.afterprintEventHandler));
  }
  ///////////////////////////////////
  ///////// Table Functions /////////
  ///////////////////////////////////
  ///////////////////////////////////
  ///////// Internal Logic //////////
  ///////////////////////////////////
  replaceTable() {
    this.manualBlock || (this.element = document.createElement("div"), this.element.classList.add("tabulator-print-table"), this.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, "print")), this.table.element.style.display = "none", this.table.element.parentNode.insertBefore(this.element, this.table.element));
  }
  cleanup() {
    document.body.classList.remove("tabulator-print-fullscreen-hide"), this.element && this.element.parentNode && (this.element.parentNode.removeChild(this.element), this.table.element.style.display = "");
  }
  printFullscreen(e, t, i) {
    var s = window.scrollX, n = window.scrollY, r = document.createElement("div"), o = document.createElement("div"), a = this.table.modules.export.generateTable(typeof i < "u" ? i : this.table.options.printConfig, typeof t < "u" ? t : this.table.options.printStyled, e || this.table.options.printRowRange, "print"), l, h;
    this.manualBlock = !0, this.element = document.createElement("div"), this.element.classList.add("tabulator-print-fullscreen"), this.table.options.printHeader && (r.classList.add("tabulator-print-header"), l = typeof this.table.options.printHeader == "function" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader, typeof l == "string" ? r.innerHTML = l : r.appendChild(l), this.element.appendChild(r)), this.element.appendChild(a), this.table.options.printFooter && (o.classList.add("tabulator-print-footer"), h = typeof this.table.options.printFooter == "function" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter, typeof h == "string" ? o.innerHTML = h : o.appendChild(h), this.element.appendChild(o)), document.body.classList.add("tabulator-print-fullscreen-hide"), document.body.appendChild(this.element), this.table.options.printFormatter && this.table.options.printFormatter(this.element, a), window.print(), this.cleanup(), window.scrollTo(s, n), this.manualBlock = !1;
  }
}
D(Cu, "moduleName", "print");
class yu extends ne {
  constructor(e) {
    super(e), this.data = !1, this.blocked = !1, this.origFuncs = {}, this.currentVersion = 0, this.registerTableOption("reactiveData", !1);
  }
  initialize() {
    this.table.options.reactiveData && (this.subscribe("cell-value-save-before", this.block.bind(this, "cellsave")), this.subscribe("cell-value-save-after", this.unblock.bind(this, "cellsave")), this.subscribe("row-data-save-before", this.block.bind(this, "rowsave")), this.subscribe("row-data-save-after", this.unblock.bind(this, "rowsave")), this.subscribe("row-data-init-after", this.watchRow.bind(this)), this.subscribe("data-processing", this.watchData.bind(this)), this.subscribe("table-destroy", this.unwatchData.bind(this)));
  }
  watchData(e) {
    var t = this, i;
    this.currentVersion++, i = this.currentVersion, this.unwatchData(), this.data = e, this.origFuncs.push = e.push, Object.defineProperty(this.data, "push", {
      enumerable: !1,
      configurable: !0,
      value: function() {
        var s = Array.from(arguments), n;
        return !t.blocked && i === t.currentVersion && (t.block("data-push"), s.forEach((r) => {
          t.table.rowManager.addRowActual(r, !1);
        }), n = t.origFuncs.push.apply(e, arguments), t.unblock("data-push")), n;
      }
    }), this.origFuncs.unshift = e.unshift, Object.defineProperty(this.data, "unshift", {
      enumerable: !1,
      configurable: !0,
      value: function() {
        var s = Array.from(arguments), n;
        return !t.blocked && i === t.currentVersion && (t.block("data-unshift"), s.forEach((r) => {
          t.table.rowManager.addRowActual(r, !0);
        }), n = t.origFuncs.unshift.apply(e, arguments), t.unblock("data-unshift")), n;
      }
    }), this.origFuncs.shift = e.shift, Object.defineProperty(this.data, "shift", {
      enumerable: !1,
      configurable: !0,
      value: function() {
        var s, n;
        return !t.blocked && i === t.currentVersion && (t.block("data-shift"), t.data.length && (s = t.table.rowManager.getRowFromDataObject(t.data[0]), s && s.deleteActual()), n = t.origFuncs.shift.call(e), t.unblock("data-shift")), n;
      }
    }), this.origFuncs.pop = e.pop, Object.defineProperty(this.data, "pop", {
      enumerable: !1,
      configurable: !0,
      value: function() {
        var s, n;
        return !t.blocked && i === t.currentVersion && (t.block("data-pop"), t.data.length && (s = t.table.rowManager.getRowFromDataObject(t.data[t.data.length - 1]), s && s.deleteActual()), n = t.origFuncs.pop.call(e), t.unblock("data-pop")), n;
      }
    }), this.origFuncs.splice = e.splice, Object.defineProperty(this.data, "splice", {
      enumerable: !1,
      configurable: !0,
      value: function() {
        var s = Array.from(arguments), n = s[0] < 0 ? e.length + s[0] : s[0], r = s[1], o = s[2] ? s.slice(2) : !1, a, l;
        if (!t.blocked && i === t.currentVersion) {
          if (t.block("data-splice"), o && (a = e[n] ? t.table.rowManager.getRowFromDataObject(e[n]) : !1, a ? o.forEach((c) => {
            t.table.rowManager.addRowActual(c, !0, a, !0);
          }) : (o = o.slice().reverse(), o.forEach((c) => {
            t.table.rowManager.addRowActual(c, !0, !1, !0);
          }))), r !== 0) {
            var h = e.slice(n, typeof s[1] > "u" ? s[1] : n + r);
            h.forEach((c, u) => {
              var d = t.table.rowManager.getRowFromDataObject(c);
              d && d.deleteActual(u !== h.length - 1);
            });
          }
          (o || r !== 0) && t.table.rowManager.reRenderInPosition(), l = t.origFuncs.splice.apply(e, arguments), t.unblock("data-splice");
        }
        return l;
      }
    });
  }
  unwatchData() {
    if (this.data !== !1)
      for (var e in this.origFuncs)
        Object.defineProperty(this.data, e, {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: this.origFuncs.key
        });
  }
  watchRow(e) {
    var t = e.getData();
    for (var i in t)
      this.watchKey(e, t, i);
    this.table.options.dataTree && this.watchTreeChildren(e);
  }
  watchTreeChildren(e) {
    var t = this, i = e.getData()[this.table.options.dataTreeChildField], s = {};
    i && (s.push = i.push, Object.defineProperty(i, "push", {
      enumerable: !1,
      configurable: !0,
      value: () => {
        if (!t.blocked) {
          t.block("tree-push");
          var n = s.push.apply(i, arguments);
          this.rebuildTree(e), t.unblock("tree-push");
        }
        return n;
      }
    }), s.unshift = i.unshift, Object.defineProperty(i, "unshift", {
      enumerable: !1,
      configurable: !0,
      value: () => {
        if (!t.blocked) {
          t.block("tree-unshift");
          var n = s.unshift.apply(i, arguments);
          this.rebuildTree(e), t.unblock("tree-unshift");
        }
        return n;
      }
    }), s.shift = i.shift, Object.defineProperty(i, "shift", {
      enumerable: !1,
      configurable: !0,
      value: () => {
        if (!t.blocked) {
          t.block("tree-shift");
          var n = s.shift.call(i);
          this.rebuildTree(e), t.unblock("tree-shift");
        }
        return n;
      }
    }), s.pop = i.pop, Object.defineProperty(i, "pop", {
      enumerable: !1,
      configurable: !0,
      value: () => {
        if (!t.blocked) {
          t.block("tree-pop");
          var n = s.pop.call(i);
          this.rebuildTree(e), t.unblock("tree-pop");
        }
        return n;
      }
    }), s.splice = i.splice, Object.defineProperty(i, "splice", {
      enumerable: !1,
      configurable: !0,
      value: () => {
        if (!t.blocked) {
          t.block("tree-splice");
          var n = s.splice.apply(i, arguments);
          this.rebuildTree(e), t.unblock("tree-splice");
        }
        return n;
      }
    }));
  }
  rebuildTree(e) {
    this.table.modules.dataTree.initializeRow(e), this.table.modules.dataTree.layoutRow(e), this.table.rowManager.refreshActiveData("tree", !1, !0);
  }
  watchKey(e, t, i) {
    var s = this, n = Object.getOwnPropertyDescriptor(t, i), r = t[i], o = this.currentVersion;
    Object.defineProperty(t, i, {
      set: (a) => {
        if (r = a, !s.blocked && o === s.currentVersion) {
          s.block("key");
          var l = {};
          l[i] = a, e.updateData(l), s.unblock("key");
        }
        n.set && n.set(a);
      },
      get: () => (n.get && n.get(), r)
    });
  }
  unwatchRow(e) {
    var t = e.getData();
    for (var i in t)
      Object.defineProperty(t, i, {
        value: t[i]
      });
  }
  block(e) {
    this.blocked || (this.blocked = e);
  }
  unblock(e) {
    this.blocked === e && (this.blocked = !1);
  }
}
D(yu, "moduleName", "reactiveData");
class Eu extends ne {
  constructor(e) {
    super(e), this.startColumn = !1, this.startX = !1, this.startWidth = !1, this.latestX = !1, this.handle = null, this.initialNextColumn = null, this.nextColumn = null, this.initialized = !1, this.registerColumnOption("resizable", !0), this.registerTableOption("resizableColumnFit", !1), this.registerTableOption("resizableColumnGuide", !1);
  }
  initialize() {
    this.subscribe("column-rendered", this.layoutColumnHeader.bind(this));
  }
  initializeEventWatchers() {
    this.initialized || (this.subscribe("cell-rendered", this.layoutCellHandles.bind(this)), this.subscribe("cell-delete", this.deInitializeComponent.bind(this)), this.subscribe("cell-height", this.resizeHandle.bind(this)), this.subscribe("column-moved", this.columnLayoutUpdated.bind(this)), this.subscribe("column-hide", this.deInitializeColumn.bind(this)), this.subscribe("column-show", this.columnLayoutUpdated.bind(this)), this.subscribe("column-width", this.columnWidthUpdated.bind(this)), this.subscribe("column-delete", this.deInitializeComponent.bind(this)), this.subscribe("column-height", this.resizeHandle.bind(this)), this.initialized = !0);
  }
  layoutCellHandles(e) {
    e.row.type === "row" && (this.deInitializeComponent(e), this.initializeColumn("cell", e, e.column, e.element));
  }
  layoutColumnHeader(e) {
    e.definition.resizable && (this.initializeEventWatchers(), this.deInitializeComponent(e), this.initializeColumn("header", e, e, e.element));
  }
  columnLayoutUpdated(e) {
    var t = e.prevColumn();
    this.reinitializeColumn(e), t && this.reinitializeColumn(t);
  }
  columnWidthUpdated(e) {
    e.modules.frozen && (this.table.modules.frozenColumns.leftColumns.includes(e) ? this.table.modules.frozenColumns.leftColumns.forEach((t) => {
      this.reinitializeColumn(t);
    }) : this.table.modules.frozenColumns.rightColumns.includes(e) && this.table.modules.frozenColumns.rightColumns.forEach((t) => {
      this.reinitializeColumn(t);
    }));
  }
  frozenColumnOffset(e) {
    var t = !1;
    return e.modules.frozen && (t = e.modules.frozen.marginValue, e.modules.frozen.position === "left" ? t += e.getWidth() - 3 : t && (t -= 3)), t !== !1 ? t + "px" : !1;
  }
  reinitializeColumn(e) {
    var t = this.frozenColumnOffset(e);
    e.cells.forEach((i) => {
      i.modules.resize && i.modules.resize.handleEl && (t && (i.modules.resize.handleEl.style[e.modules.frozen.position] = t, i.modules.resize.handleEl.style["z-index"] = 11), i.element.after(i.modules.resize.handleEl));
    }), e.modules.resize && e.modules.resize.handleEl && (t && (e.modules.resize.handleEl.style[e.modules.frozen.position] = t), e.element.after(e.modules.resize.handleEl));
  }
  initializeColumn(e, t, i, s) {
    var n = this, r = !1, o = i.definition.resizable, a = {}, l = i.getLastColumn();
    if (e === "header" && (r = i.definition.formatter == "textarea" || i.definition.variableHeight, a = { variableHeight: r }), (o === !0 || o == e) && this._checkResizability(l)) {
      var h = document.createElement("span");
      h.className = "tabulator-col-resize-handle", h.addEventListener("click", function(u) {
        u.stopPropagation();
      });
      var c = function(u) {
        n.startColumn = i, n.initialNextColumn = n.nextColumn = l.nextColumn(), n._mouseDown(u, l, h);
      };
      h.addEventListener("mousedown", c), h.addEventListener("touchstart", c, { passive: !0 }), h.addEventListener("dblclick", (u) => {
        var d = l.getWidth();
        u.stopPropagation(), l.reinitializeWidth(!0), d !== l.getWidth() && (n.dispatch("column-resized", l), n.dispatchExternal("columnResized", l.getComponent()));
      }), i.modules.frozen && (h.style.position = "sticky", h.style[i.modules.frozen.position] = this.frozenColumnOffset(i)), a.handleEl = h, s.parentNode && i.visible && s.after(h);
    }
    t.modules.resize = a;
  }
  deInitializeColumn(e) {
    this.deInitializeComponent(e), e.cells.forEach((t) => {
      this.deInitializeComponent(t);
    });
  }
  deInitializeComponent(e) {
    var t;
    e.modules.resize && (t = e.modules.resize.handleEl, t && t.parentElement && t.parentElement.removeChild(t));
  }
  resizeHandle(e, t) {
    e.modules.resize && e.modules.resize.handleEl && (e.modules.resize.handleEl.style.height = t);
  }
  resize(e, t) {
    var i = typeof e.clientX > "u" ? e.touches[0].clientX : e.clientX, s = i - this.startX, n = i - this.latestX, r, o;
    if (this.latestX = i, this.table.rtl && (s = -s, n = -n), r = t.width == t.minWidth || t.width == t.maxWidth, t.setWidth(this.startWidth + s), o = t.width == t.minWidth || t.width == t.maxWidth, n < 0 && (this.nextColumn = this.initialNextColumn), this.table.options.resizableColumnFit && this.nextColumn && !(r && o)) {
      let a = this.nextColumn.getWidth();
      n > 0 && a <= this.nextColumn.minWidth && (this.nextColumn = this.nextColumn.nextColumn()), this.nextColumn && this.nextColumn.setWidth(this.nextColumn.getWidth() - n);
    }
    this.table.columnManager.rerenderColumns(!0), !this.table.browserSlow && t.modules.resize && t.modules.resize.variableHeight && t.checkCellHeights();
  }
  calcGuidePosition(e, t, i) {
    var s = typeof e.clientX > "u" ? e.touches[0].clientX : e.clientX, n = i.getBoundingClientRect().x - this.table.element.getBoundingClientRect().x, r = this.table.element.getBoundingClientRect().x, o = t.element.getBoundingClientRect().left - r, a = s - this.startX, l = Math.max(n + a, o + t.minWidth);
    return t.maxWidth && (l = Math.min(l, o + t.maxWidth)), l;
  }
  _checkResizability(e) {
    return e.definition.resizable;
  }
  _mouseDown(e, t, i) {
    var s = this, n;
    this.dispatchExternal("columnResizing", t.getComponent()), s.table.options.resizableColumnGuide && (n = document.createElement("span"), n.classList.add("tabulator-col-resize-guide"), s.table.element.appendChild(n), setTimeout(() => {
      n.style.left = s.calcGuidePosition(e, t, i) + "px";
    })), s.table.element.classList.add("tabulator-block-select");
    function r(a) {
      s.table.options.resizableColumnGuide ? n.style.left = s.calcGuidePosition(a, t, i) + "px" : s.resize(a, t);
    }
    function o(a) {
      s.table.options.resizableColumnGuide && (s.resize(a, t), n.remove()), s.startColumn.modules.edit && (s.startColumn.modules.edit.blocked = !1), s.table.browserSlow && t.modules.resize && t.modules.resize.variableHeight && t.checkCellHeights(), document.body.removeEventListener("mouseup", o), document.body.removeEventListener("mousemove", r), i.removeEventListener("touchmove", r), i.removeEventListener("touchend", o), s.table.element.classList.remove("tabulator-block-select"), s.startWidth !== t.getWidth() && (s.table.columnManager.verticalAlignHeaders(), s.dispatch("column-resized", t), s.dispatchExternal("columnResized", t.getComponent()));
    }
    e.stopPropagation(), s.startColumn.modules.edit && (s.startColumn.modules.edit.blocked = !0), s.startX = typeof e.clientX > "u" ? e.touches[0].clientX : e.clientX, s.latestX = s.startX, s.startWidth = t.getWidth(), document.body.addEventListener("mousemove", r), document.body.addEventListener("mouseup", o), i.addEventListener("touchmove", r, { passive: !0 }), i.addEventListener("touchend", o);
  }
}
D(Eu, "moduleName", "resizeColumns");
class Fu extends ne {
  constructor(e) {
    super(e), this.startColumn = !1, this.startY = !1, this.startHeight = !1, this.handle = null, this.prevHandle = null, this.registerTableOption("resizableRows", !1), this.registerTableOption("resizableRowGuide", !1);
  }
  initialize() {
    this.table.options.resizableRows && this.subscribe("row-layout-after", this.initializeRow.bind(this));
  }
  initializeRow(e) {
    var t = this, i = e.getElement(), s = document.createElement("div");
    s.className = "tabulator-row-resize-handle";
    var n = document.createElement("div");
    n.className = "tabulator-row-resize-handle prev", s.addEventListener("click", function(a) {
      a.stopPropagation();
    });
    var r = function(a) {
      t.startRow = e, t._mouseDown(a, e, s);
    };
    s.addEventListener("mousedown", r), s.addEventListener("touchstart", r, { passive: !0 }), n.addEventListener("click", function(a) {
      a.stopPropagation();
    });
    var o = function(a) {
      var l = t.table.rowManager.prevDisplayRow(e);
      l && (t.startRow = l, t._mouseDown(a, l, n));
    };
    n.addEventListener("mousedown", o), n.addEventListener("touchstart", o, { passive: !0 }), i.appendChild(s), i.appendChild(n);
  }
  resize(e, t) {
    t.setHeight(this.startHeight + ((typeof e.screenY > "u" ? e.touches[0].screenY : e.screenY) - this.startY));
  }
  calcGuidePosition(e, t, i) {
    var s = typeof e.screenY > "u" ? e.touches[0].screenY : e.screenY, n = i.getBoundingClientRect().y - this.table.element.getBoundingClientRect().y, r = this.table.element.getBoundingClientRect().y, o = t.element.getBoundingClientRect().top - r, a = s - this.startY;
    return Math.max(n + a, o);
  }
  _mouseDown(e, t, i) {
    var s = this, n;
    s.dispatchExternal("rowResizing", t.getComponent()), s.table.options.resizableRowGuide && (n = document.createElement("span"), n.classList.add("tabulator-row-resize-guide"), s.table.element.appendChild(n), setTimeout(() => {
      n.style.top = s.calcGuidePosition(e, t, i) + "px";
    })), s.table.element.classList.add("tabulator-block-select");
    function r(a) {
      s.table.options.resizableRowGuide ? n.style.top = s.calcGuidePosition(a, t, i) + "px" : s.resize(a, t);
    }
    function o(a) {
      s.table.options.resizableRowGuide && (s.resize(a, t), n.remove()), document.body.removeEventListener("mouseup", r), document.body.removeEventListener("mousemove", r), i.removeEventListener("touchmove", r), i.removeEventListener("touchend", o), s.table.element.classList.remove("tabulator-block-select"), s.dispatchExternal("rowResized", t.getComponent());
    }
    e.stopPropagation(), s.startY = typeof e.screenY > "u" ? e.touches[0].screenY : e.screenY, s.startHeight = t.getHeight(), document.body.addEventListener("mousemove", r), document.body.addEventListener("mouseup", o), i.addEventListener("touchmove", r, { passive: !0 }), i.addEventListener("touchend", o);
  }
}
D(Fu, "moduleName", "resizeRows");
class xu extends ne {
  constructor(e) {
    super(e), this.binding = !1, this.visibilityObserver = !1, this.resizeObserver = !1, this.containerObserver = !1, this.tableHeight = 0, this.tableWidth = 0, this.containerHeight = 0, this.containerWidth = 0, this.autoResize = !1, this.visible = !1, this.initialized = !1, this.initialRedraw = !1, this.registerTableOption("autoResize", !0);
  }
  initialize() {
    if (this.table.options.autoResize) {
      var e = this.table, t;
      this.tableHeight = e.element.clientHeight, this.tableWidth = e.element.clientWidth, e.element.parentNode && (this.containerHeight = e.element.parentNode.clientHeight, this.containerWidth = e.element.parentNode.clientWidth), typeof IntersectionObserver < "u" && typeof ResizeObserver < "u" && e.rowManager.getRenderMode() === "virtual" ? (this.initializeVisibilityObserver(), this.autoResize = !0, this.resizeObserver = new ResizeObserver((i) => {
        if (!e.browserMobile || e.browserMobile && (!e.modules.edit || e.modules.edit && !e.modules.edit.currentCell)) {
          var s = Math.floor(i[0].contentRect.height), n = Math.floor(i[0].contentRect.width);
          (this.tableHeight != s || this.tableWidth != n) && (this.tableHeight = s, this.tableWidth = n, e.element.parentNode && (this.containerHeight = e.element.parentNode.clientHeight, this.containerWidth = e.element.parentNode.clientWidth), this.redrawTable());
        }
      }), this.resizeObserver.observe(e.element), t = window.getComputedStyle(e.element), this.table.element.parentNode && !this.table.rowManager.fixedHeight && (t.getPropertyValue("max-height") || t.getPropertyValue("min-height")) && (this.containerObserver = new ResizeObserver((i) => {
        if (!e.browserMobile || e.browserMobile && (!e.modules.edit || e.modules.edit && !e.modules.edit.currentCell)) {
          var s = Math.floor(i[0].contentRect.height), n = Math.floor(i[0].contentRect.width);
          (this.containerHeight != s || this.containerWidth != n) && (this.containerHeight = s, this.containerWidth = n, this.tableHeight = e.element.clientHeight, this.tableWidth = e.element.clientWidth), this.redrawTable();
        }
      }), this.containerObserver.observe(this.table.element.parentNode)), this.subscribe("table-resize", this.tableResized.bind(this))) : (this.binding = function() {
        (!e.browserMobile || e.browserMobile && (!e.modules.edit || e.modules.edit && !e.modules.edit.currentCell)) && (e.columnManager.rerenderColumns(!0), e.redraw());
      }, window.addEventListener("resize", this.binding)), this.subscribe("table-destroy", this.clearBindings.bind(this));
    }
  }
  initializeVisibilityObserver() {
    this.visibilityObserver = new IntersectionObserver((e) => {
      this.visible = e[0].isIntersecting, this.initialized ? this.visible && (this.redrawTable(this.initialRedraw), this.initialRedraw = !1) : (this.initialized = !0, this.initialRedraw = !this.visible);
    }), this.visibilityObserver.observe(this.table.element);
  }
  redrawTable(e) {
    this.initialized && this.visible && (this.table.columnManager.rerenderColumns(!0), this.table.redraw(e));
  }
  tableResized() {
    this.table.rowManager.redraw();
  }
  clearBindings() {
    this.binding && window.removeEventListener("resize", this.binding), this.resizeObserver && this.resizeObserver.unobserve(this.table.element), this.visibilityObserver && this.visibilityObserver.unobserve(this.table.element), this.containerObserver && this.containerObserver.unobserve(this.table.element.parentNode);
  }
}
D(xu, "moduleName", "resizeTable");
function xp(A, e, t) {
  var i = document.createElement("div"), s = A.getRow()._row.modules.responsiveLayout;
  i.classList.add("tabulator-responsive-collapse-toggle"), i.innerHTML = `<svg class='tabulator-responsive-collapse-toggle-open' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12" fill="none" stroke-width="3" stroke-linecap="round" />
  <line y1="7" x1="12" y2="17" x2="12" fill="none" stroke-width="3" stroke-linecap="round" />
</svg>

<svg class='tabulator-responsive-collapse-toggle-close' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12"  fill="none" stroke-width="3" stroke-linecap="round" />
</svg>`, A.getElement().classList.add("tabulator-row-handle");
  function n(r) {
    var o = s.element;
    s.open = r, o && (s.open ? (i.classList.add("open"), o.style.display = "") : (i.classList.remove("open"), o.style.display = "none"));
  }
  return i.addEventListener("click", function(r) {
    r.stopImmediatePropagation(), n(!s.open), A.getTable().rowManager.adjustTableSize();
  }), n(s.open), i;
}
var Qp = {
  format: {
    formatters: {
      responsiveCollapse: xp
    }
  }
};
class Ea extends ne {
  constructor(e) {
    super(e), this.columns = [], this.hiddenColumns = [], this.mode = "", this.index = 0, this.collapseFormatter = [], this.collapseStartOpen = !0, this.collapseHandleColumn = !1, this.registerTableOption("responsiveLayout", !1), this.registerTableOption("responsiveLayoutCollapseStartOpen", !0), this.registerTableOption("responsiveLayoutCollapseUseFormatters", !0), this.registerTableOption("responsiveLayoutCollapseFormatter", !1), this.registerColumnOption("responsive");
  }
  //generate responsive columns list
  initialize() {
    this.table.options.responsiveLayout && (this.subscribe("column-layout", this.initializeColumn.bind(this)), this.subscribe("column-show", this.updateColumnVisibility.bind(this)), this.subscribe("column-hide", this.updateColumnVisibility.bind(this)), this.subscribe("columns-loaded", this.initializeResponsivity.bind(this)), this.subscribe("column-moved", this.initializeResponsivity.bind(this)), this.subscribe("column-add", this.initializeResponsivity.bind(this)), this.subscribe("column-delete", this.initializeResponsivity.bind(this)), this.subscribe("table-redrawing", this.tableRedraw.bind(this)), this.table.options.responsiveLayout === "collapse" && (this.subscribe("row-data-changed", this.generateCollapsedRowContent.bind(this)), this.subscribe("row-init", this.initializeRow.bind(this)), this.subscribe("row-layout", this.layoutRow.bind(this))));
  }
  tableRedraw(e) {
    ["fitColumns", "fitDataStretch"].indexOf(this.layoutMode()) === -1 && (e || this.update());
  }
  initializeResponsivity() {
    var e = [];
    this.mode = this.table.options.responsiveLayout, this.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData, this.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen, this.hiddenColumns = [], this.collapseFormatter && (this.collapseFormatter = this.collapseFormatter.bind(this.table)), this.table.columnManager.columnsByIndex.forEach((t, i) => {
      t.modules.responsive && t.modules.responsive.order && t.modules.responsive.visible && (t.modules.responsive.index = i, e.push(t), !t.visible && this.mode === "collapse" && this.hiddenColumns.push(t));
    }), e = e.reverse(), e = e.sort((t, i) => {
      var s = i.modules.responsive.order - t.modules.responsive.order;
      return s || i.modules.responsive.index - t.modules.responsive.index;
    }), this.columns = e, this.mode === "collapse" && this.generateCollapsedContent();
    for (let t of this.table.columnManager.columnsByIndex)
      if (t.definition.formatter == "responsiveCollapse") {
        this.collapseHandleColumn = t;
        break;
      }
    this.collapseHandleColumn && (this.hiddenColumns.length ? this.collapseHandleColumn.show() : this.collapseHandleColumn.hide());
  }
  //define layout information
  initializeColumn(e) {
    var t = e.getDefinition();
    e.modules.responsive = { order: typeof t.responsive > "u" ? 1 : t.responsive, visible: t.visible !== !1 };
  }
  initializeRow(e) {
    var t;
    e.type !== "calc" && (t = document.createElement("div"), t.classList.add("tabulator-responsive-collapse"), e.modules.responsiveLayout = {
      element: t,
      open: this.collapseStartOpen
    }, this.collapseStartOpen || (t.style.display = "none"));
  }
  layoutRow(e) {
    var t = e.getElement();
    e.modules.responsiveLayout && (t.appendChild(e.modules.responsiveLayout.element), this.generateCollapsedRowContent(e));
  }
  //update column visibility
  updateColumnVisibility(e, t) {
    !t && e.modules.responsive && (e.modules.responsive.visible = e.visible, this.initializeResponsivity());
  }
  hideColumn(e) {
    var t = this.hiddenColumns.length;
    e.hide(!1, !0), this.mode === "collapse" && (this.hiddenColumns.unshift(e), this.generateCollapsedContent(), this.collapseHandleColumn && !t && this.collapseHandleColumn.show());
  }
  showColumn(e) {
    var t;
    e.show(!1, !0), e.setWidth(e.getWidth()), this.mode === "collapse" && (t = this.hiddenColumns.indexOf(e), t > -1 && this.hiddenColumns.splice(t, 1), this.generateCollapsedContent(), this.collapseHandleColumn && !this.hiddenColumns.length && this.collapseHandleColumn.hide());
  }
  //redraw columns to fit space
  update() {
    for (var e = !0; e; ) {
      let t = this.table.modules.layout.getMode() == "fitColumns" ? this.table.columnManager.getFlexBaseWidth() : this.table.columnManager.getWidth(), i = (this.table.options.headerVisible ? this.table.columnManager.element.clientWidth : this.table.element.clientWidth) - t;
      if (i < 0) {
        let s = this.columns[this.index];
        s ? (this.hideColumn(s), this.index++) : e = !1;
      } else {
        let s = this.columns[this.index - 1];
        s && i > 0 && i >= s.getWidth() ? (this.showColumn(s), this.index--) : e = !1;
      }
      this.table.rowManager.activeRowsCount || this.table.rowManager.renderEmptyScroll();
    }
  }
  generateCollapsedContent() {
    var e = this.table.rowManager.getDisplayRows();
    e.forEach((t) => {
      this.generateCollapsedRowContent(t);
    });
  }
  generateCollapsedRowContent(e) {
    var t, i;
    if (e.modules.responsiveLayout) {
      for (t = e.modules.responsiveLayout.element; t.firstChild; ) t.removeChild(t.firstChild);
      i = this.collapseFormatter(this.generateCollapsedRowData(e)), i && t.appendChild(i), e.calcHeight(!0);
    }
  }
  generateCollapsedRowData(e) {
    var t = e.getData(), i = [], s;
    return this.hiddenColumns.forEach((n) => {
      var r = n.getFieldValue(t);
      if (n.definition.title && n.field)
        if (n.modules.format && this.table.options.responsiveLayoutCollapseUseFormatters) {
          let o = function(a) {
            a();
          };
          s = {
            value: !1,
            data: {},
            getValue: function() {
              return r;
            },
            getData: function() {
              return t;
            },
            getType: function() {
              return "cell";
            },
            getElement: function() {
              return document.createElement("div");
            },
            getRow: function() {
              return e.getComponent();
            },
            getColumn: function() {
              return n.getComponent();
            },
            getTable: () => this.table
          }, i.push({
            field: n.field,
            title: n.definition.title,
            value: n.modules.format.formatter.call(this.table.modules.format, s, n.modules.format.params, o)
          });
        } else
          i.push({
            field: n.field,
            title: n.definition.title,
            value: r
          });
    }), i;
  }
  formatCollapsedData(e) {
    var t = document.createElement("table");
    return e.forEach((i) => {
      var s = document.createElement("tr"), n = document.createElement("td"), r = document.createElement("td"), o, a = document.createElement("strong");
      n.appendChild(a), this.modules.localize.bind("columns|" + i.field, function(l) {
        a.innerHTML = l || i.title;
      }), i.value instanceof Node ? (o = document.createElement("div"), o.appendChild(i.value), r.appendChild(o)) : r.innerHTML = i.value, s.appendChild(n), s.appendChild(r), t.appendChild(s);
    }), Object.keys(e).length ? t : "";
  }
}
D(Ea, "moduleName", "responsiveLayout"), D(Ea, "moduleExtensions", Qp);
function Up(A, e, t) {
  var i = document.createElement("input"), s = !1;
  if (i.type = "checkbox", i.setAttribute("aria-label", "Select Row"), this.table.modExists("selectRow", !0))
    if (i.addEventListener("click", (r) => {
      r.stopPropagation();
    }), typeof A.getRow == "function") {
      var n = A.getRow();
      n instanceof Or ? (i.addEventListener("change", (r) => {
        this.table.options.selectableRowsRangeMode === "click" && s ? s = !1 : n.toggleSelect();
      }), this.table.options.selectableRowsRangeMode === "click" && i.addEventListener("click", (r) => {
        s = !0, this.table.modules.selectRow.handleComplexRowClick(n._row, r);
      }), i.checked = n.isSelected && n.isSelected(), this.table.modules.selectRow.registerRowSelectCheckbox(n, i)) : i = "";
    } else
      i.addEventListener("change", (r) => {
        this.table.modules.selectRow.selectedRows.length ? this.table.deselectRow() : this.table.selectRow(e.rowRange);
      }), this.table.modules.selectRow.registerHeaderSelectCheckbox(i);
  return i;
}
var _p = {
  format: {
    formatters: {
      rowSelection: Up
    }
  }
};
class Fa extends ne {
  constructor(e) {
    super(e), this.selecting = !1, this.lastClickedRow = !1, this.selectPrev = [], this.selectedRows = [], this.headerCheckboxElement = null, this.registerTableOption("selectableRows", "highlight"), this.registerTableOption("selectableRowsRangeMode", "drag"), this.registerTableOption("selectableRowsRollingSelection", !0), this.registerTableOption("selectableRowsPersistence", !0), this.registerTableOption("selectableRowsCheck", function(t, i) {
      return !0;
    }), this.registerTableFunction("selectRow", this.selectRows.bind(this)), this.registerTableFunction("deselectRow", this.deselectRows.bind(this)), this.registerTableFunction("toggleSelectRow", this.toggleRow.bind(this)), this.registerTableFunction("getSelectedRows", this.getSelectedRows.bind(this)), this.registerTableFunction("getSelectedData", this.getSelectedData.bind(this)), this.registerComponentFunction("row", "select", this.selectRows.bind(this)), this.registerComponentFunction("row", "deselect", this.deselectRows.bind(this)), this.registerComponentFunction("row", "toggleSelect", this.toggleRow.bind(this)), this.registerComponentFunction("row", "isSelected", this.isRowSelected.bind(this));
  }
  initialize() {
    this.deprecatedOptionsCheck(), this.table.options.selectableRows === "highlight" && this.table.options.selectableRange && (this.table.options.selectableRows = !1), this.table.options.selectableRows !== !1 && (this.subscribe("row-init", this.initializeRow.bind(this)), this.subscribe("row-deleting", this.rowDeleted.bind(this)), this.subscribe("rows-wipe", this.clearSelectionData.bind(this)), this.subscribe("rows-retrieve", this.rowRetrieve.bind(this)), this.table.options.selectableRows && !this.table.options.selectableRowsPersistence && this.subscribe("data-refreshing", this.deselectRows.bind(this)));
  }
  deprecatedOptionsCheck() {
  }
  rowRetrieve(e, t) {
    return e === "selected" ? this.selectedRows : t;
  }
  rowDeleted(e) {
    this._deselectRow(e, !0);
  }
  clearSelectionData(e) {
    var t = this.selectedRows.length;
    this.selecting = !1, this.lastClickedRow = !1, this.selectPrev = [], this.selectedRows = [], t && e !== !0 && this._rowSelectionChanged();
  }
  initializeRow(e) {
    var t = this, i = t.checkRowSelectability(e), s = e.getElement(), n = function() {
      setTimeout(function() {
        t.selecting = !1;
      }, 50), document.body.removeEventListener("mouseup", n);
    };
    e.modules.select = { selected: !1 }, s.classList.toggle("tabulator-selectable", i), s.classList.toggle("tabulator-unselectable", !i), t.checkRowSelectability(e) && t.table.options.selectableRows && t.table.options.selectableRows != "highlight" && (t.table.options.selectableRowsRangeMode === "click" ? s.addEventListener("click", this.handleComplexRowClick.bind(this, e)) : (s.addEventListener("click", function(r) {
      (!t.table.modExists("edit") || !t.table.modules.edit.getCurrentCell()) && t.table._clearSelection(), t.selecting || t.toggleRow(e);
    }), s.addEventListener("mousedown", function(r) {
      if (r.shiftKey)
        return t.table._clearSelection(), t.selecting = !0, t.selectPrev = [], document.body.addEventListener("mouseup", n), document.body.addEventListener("keyup", n), t.toggleRow(e), !1;
    }), s.addEventListener("mouseenter", function(r) {
      t.selecting && (t.table._clearSelection(), t.toggleRow(e), t.selectPrev[1] == e && t.toggleRow(t.selectPrev[0]));
    }), s.addEventListener("mouseout", function(r) {
      t.selecting && (t.table._clearSelection(), t.selectPrev.unshift(e));
    })));
  }
  handleComplexRowClick(e, t) {
    if (t.shiftKey) {
      this.table._clearSelection(), this.lastClickedRow = this.lastClickedRow || e;
      var i = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow), s = this.table.rowManager.getDisplayRowIndex(e), n = i <= s ? i : s, r = i >= s ? i : s, o = this.table.rowManager.getDisplayRows().slice(0), a = o.splice(n, r - n + 1);
      t.ctrlKey || t.metaKey ? (a.forEach((l) => {
        l !== this.lastClickedRow && (this.table.options.selectableRows !== !0 && !this.isRowSelected(e) ? this.selectedRows.length < this.table.options.selectableRows && this.toggleRow(l) : this.toggleRow(l));
      }), this.lastClickedRow = e) : (this.deselectRows(void 0, !0), this.table.options.selectableRows !== !0 && a.length > this.table.options.selectableRows && (a = a.slice(0, this.table.options.selectableRows)), this.selectRows(a)), this.table._clearSelection();
    } else t.ctrlKey || t.metaKey ? (this.toggleRow(e), this.lastClickedRow = e) : (this.deselectRows(void 0, !0), this.selectRows(e), this.lastClickedRow = e);
  }
  checkRowSelectability(e) {
    return e && e.type === "row" ? this.table.options.selectableRowsCheck.call(this.table, e.getComponent()) : !1;
  }
  //toggle row selection
  toggleRow(e) {
    this.checkRowSelectability(e) && (e.modules.select && e.modules.select.selected ? this._deselectRow(e) : this._selectRow(e));
  }
  //select a number of rows
  selectRows(e) {
    var t = [], i, s;
    switch (typeof e) {
      case "undefined":
        i = this.table.rowManager.rows;
        break;
      case "number":
        i = this.table.rowManager.findRow(e);
        break;
      case "string":
        i = this.table.rowManager.findRow(e), i || (i = this.table.rowManager.getRows(e));
        break;
      default:
        i = e;
        break;
    }
    Array.isArray(i) ? i.length && (i.forEach((n) => {
      s = this._selectRow(n, !0, !0), s && t.push(s);
    }), this._rowSelectionChanged(!1, t)) : i && this._selectRow(i, !1, !0);
  }
  //select an individual row
  _selectRow(e, t, i) {
    if (!isNaN(this.table.options.selectableRows) && this.table.options.selectableRows !== !0 && !i && this.selectedRows.length >= this.table.options.selectableRows)
      if (this.table.options.selectableRowsRollingSelection)
        this._deselectRow(this.selectedRows[0]);
      else
        return !1;
    var s = this.table.rowManager.findRow(e);
    if (s) {
      if (this.selectedRows.indexOf(s) == -1)
        return s.getElement().classList.add("tabulator-selected"), s.modules.select || (s.modules.select = {}), s.modules.select.selected = !0, s.modules.select.checkboxEl && (s.modules.select.checkboxEl.checked = !0), this.selectedRows.push(s), this.table.options.dataTreeSelectPropagate && this.childRowSelection(s, !0), this.dispatchExternal("rowSelected", s.getComponent()), this._rowSelectionChanged(t, s), s;
    } else
      t || console.warn("Selection Error - No such row found, ignoring selection:" + e);
  }
  isRowSelected(e) {
    return this.selectedRows.indexOf(e) !== -1;
  }
  //deselect a number of rows
  deselectRows(e, t) {
    var i = [], s, n;
    switch (typeof e) {
      case "undefined":
        s = Object.assign([], this.selectedRows);
        break;
      case "number":
        s = this.table.rowManager.findRow(e);
        break;
      case "string":
        s = this.table.rowManager.findRow(e), s || (s = this.table.rowManager.getRows(e));
        break;
      default:
        s = e;
        break;
    }
    Array.isArray(s) ? s.length && (s.forEach((r) => {
      n = this._deselectRow(r, !0, !0), n && i.push(n);
    }), this._rowSelectionChanged(t, [], i)) : s && this._deselectRow(s, t, !0);
  }
  //deselect an individual row
  _deselectRow(e, t) {
    var i = this, s = i.table.rowManager.findRow(e), n, r;
    if (s) {
      if (n = i.selectedRows.findIndex(function(o) {
        return o == s;
      }), n > -1)
        return r = s.getElement(), r && r.classList.remove("tabulator-selected"), s.modules.select || (s.modules.select = {}), s.modules.select.selected = !1, s.modules.select.checkboxEl && (s.modules.select.checkboxEl.checked = !1), i.selectedRows.splice(n, 1), this.table.options.dataTreeSelectPropagate && this.childRowSelection(s, !1), this.dispatchExternal("rowDeselected", s.getComponent()), i._rowSelectionChanged(t, void 0, s), s;
    } else
      t || console.warn("Deselection Error - No such row found, ignoring selection:" + e);
  }
  getSelectedData() {
    var e = [];
    return this.selectedRows.forEach(function(t) {
      e.push(t.getData());
    }), e;
  }
  getSelectedRows() {
    var e = [];
    return this.selectedRows.forEach(function(t) {
      e.push(t.getComponent());
    }), e;
  }
  _rowSelectionChanged(e, t = [], i = []) {
    this.headerCheckboxElement && (this.selectedRows.length === 0 ? (this.headerCheckboxElement.checked = !1, this.headerCheckboxElement.indeterminate = !1) : this.table.rowManager.rows.length === this.selectedRows.length ? (this.headerCheckboxElement.checked = !0, this.headerCheckboxElement.indeterminate = !1) : (this.headerCheckboxElement.indeterminate = !0, this.headerCheckboxElement.checked = !1)), e || (Array.isArray(t) || (t = [t]), t = t.map((s) => s.getComponent()), Array.isArray(i) || (i = [i]), i = i.map((s) => s.getComponent()), this.dispatchExternal("rowSelectionChanged", this.getSelectedData(), this.getSelectedRows(), t, i));
  }
  registerRowSelectCheckbox(e, t) {
    e._row.modules.select || (e._row.modules.select = {}), e._row.modules.select.checkboxEl = t;
  }
  registerHeaderSelectCheckbox(e) {
    this.headerCheckboxElement = e;
  }
  childRowSelection(e, t) {
    var i = this.table.modules.dataTree.getChildren(e, !0, !0);
    if (t)
      for (let s of i)
        this._selectRow(s, !0);
    else
      for (let s of i)
        this._deselectRow(s, !0);
  }
}
D(Fa, "moduleName", "selectRow"), D(Fa, "moduleExtensions", _p);
class Hp {
  constructor(e) {
    return this._range = e, new Proxy(this, {
      get: function(t, i, s) {
        return typeof t[i] < "u" ? t[i] : t._range.table.componentFunctionBinder.handle("range", t._range, i);
      }
    });
  }
  getElement() {
    return this._range.element;
  }
  getData() {
    return this._range.getData();
  }
  getCells() {
    return this._range.getCells(!0, !0);
  }
  getStructuredCells() {
    return this._range.getStructuredCells();
  }
  getRows() {
    return this._range.getRows().map((e) => e.getComponent());
  }
  getColumns() {
    return this._range.getColumns().map((e) => e.getComponent());
  }
  getBounds() {
    return this._range.getBounds();
  }
  getTopEdge() {
    return this._range.top;
  }
  getBottomEdge() {
    return this._range.bottom;
  }
  getLeftEdge() {
    return this._range.left;
  }
  getRightEdge() {
    return this._range.right;
  }
  setBounds(e, t) {
    this._range.destroyedGuard("setBounds") && this._range.setBounds(e && e._cell, t && t._cell);
  }
  setStartBound(e) {
    this._range.destroyedGuard("setStartBound") && (this._range.setEndBound(e && e._cell), this._range.rangeManager.layoutElement());
  }
  setEndBound(e) {
    this._range.destroyedGuard("setEndBound") && (this._range.setEndBound(e && e._cell), this._range.rangeManager.layoutElement());
  }
  clearValues() {
    this._range.destroyedGuard("clearValues") && this._range.clearValues();
  }
  remove() {
    this._range.destroyedGuard("remove") && this._range.destroy(!0);
  }
}
class Mp extends st {
  constructor(e, t, i, s) {
    super(e), this.rangeManager = t, this.element = null, this.initialized = !1, this.initializing = {
      start: !1,
      end: !1
    }, this.destroyed = !1, this.top = 0, this.bottom = 0, this.left = 0, this.right = 0, this.table = e, this.start = { row: 0, col: 0 }, this.end = { row: 0, col: 0 }, this.rangeManager.rowHeader && (this.left = 1, this.right = 1, this.start.col = 1, this.end.col = 1), this.initElement(), setTimeout(() => {
      this.initBounds(i, s);
    });
  }
  initElement() {
    this.element = document.createElement("div"), this.element.classList.add("tabulator-range");
  }
  initBounds(e, t) {
    this._updateMinMax(), e && this.setBounds(e, t || e);
  }
  ///////////////////////////////////
  ///////   Boundary Setup    ///////
  ///////////////////////////////////
  setStart(e, t) {
    (this.start.row !== e || this.start.col !== t) && (this.start.row = e, this.start.col = t, this.initializing.start = !0, this._updateMinMax());
  }
  setEnd(e, t) {
    (this.end.row !== e || this.end.col !== t) && (this.end.row = e, this.end.col = t, this.initializing.end = !0, this._updateMinMax());
  }
  setBounds(e, t, i) {
    e && this.setStartBound(e), this.setEndBound(t || e), this.rangeManager.layoutElement(i);
  }
  setStartBound(e) {
    var t, i;
    e.type === "column" ? this.rangeManager.columnSelection && this.setStart(0, e.getPosition() - 1) : (t = e.row.position - 1, i = e.column.getPosition() - 1, e.column === this.rangeManager.rowHeader ? this.setStart(t, 1) : this.setStart(t, i));
  }
  setEndBound(e) {
    var t = this._getTableRows().length, i, s, n;
    e.type === "column" ? this.rangeManager.columnSelection && (this.rangeManager.selecting === "column" ? this.setEnd(t - 1, e.getPosition() - 1) : this.rangeManager.selecting === "cell" && this.setEnd(0, e.getPosition() - 1)) : (i = e.row.position - 1, s = e.column.getPosition() - 1, n = e.column === this.rangeManager.rowHeader, this.rangeManager.selecting === "row" ? this.setEnd(i, this._getTableColumns().length - 1) : this.rangeManager.selecting !== "row" && n ? this.setEnd(i, 0) : this.rangeManager.selecting === "column" ? this.setEnd(t - 1, s) : this.setEnd(i, s));
  }
  _updateMinMax() {
    this.top = Math.min(this.start.row, this.end.row), this.bottom = Math.max(this.start.row, this.end.row), this.left = Math.min(this.start.col, this.end.col), this.right = Math.max(this.start.col, this.end.col), this.initialized ? this.dispatchExternal("rangeChanged", this.getComponent()) : this.initializing.start && this.initializing.end && (this.initialized = !0, this.dispatchExternal("rangeAdded", this.getComponent()));
  }
  _getTableColumns() {
    return this.table.columnManager.getVisibleColumnsByIndex();
  }
  _getTableRows() {
    return this.table.rowManager.getDisplayRows().filter((e) => e.type === "row");
  }
  ///////////////////////////////////
  ///////      Rendering      ///////
  ///////////////////////////////////
  layout() {
    var e = this.table.rowManager.renderer.vDomTop, t = this.table.rowManager.renderer.vDomBottom, i = this.table.columnManager.renderer.leftCol, s = this.table.columnManager.renderer.rightCol, n, r, o, a, l, h, c, u, d, f;
    this.table.options.renderHorizontal === "virtual" && this.rangeManager.rowHeader && (s += 1), e == null && (e = 0), t == null && (t = 1 / 0), i == null && (i = 0), s == null && (s = 1 / 0), this.overlaps(i, e, s, t) && (n = Math.max(this.top, e), r = Math.min(this.bottom, t), o = Math.max(this.left, i), a = Math.min(this.right, s), l = this.rangeManager.getCell(n, o), h = this.rangeManager.getCell(r, a), c = l.getElement(), u = h.getElement(), d = l.row.getElement(), f = h.row.getElement(), this.element.classList.add("tabulator-range-active"), this.table.rtl ? (this.element.style.right = d.offsetWidth - c.offsetLeft - c.offsetWidth + "px", this.element.style.width = c.offsetLeft + c.offsetWidth - u.offsetLeft + "px") : (this.element.style.left = d.offsetLeft + c.offsetLeft + "px", this.element.style.width = u.offsetLeft + u.offsetWidth - c.offsetLeft + "px"), this.element.style.top = d.offsetTop + "px", this.element.style.height = f.offsetTop + f.offsetHeight - d.offsetTop + "px");
  }
  atTopLeft(e) {
    return e.row.position - 1 === this.top && e.column.getPosition() - 1 === this.left;
  }
  atBottomRight(e) {
    return e.row.position - 1 === this.bottom && e.column.getPosition() - 1 === this.right;
  }
  occupies(e) {
    return this.occupiesRow(e.row) && this.occupiesColumn(e.column);
  }
  occupiesRow(e) {
    return this.top <= e.position - 1 && e.position - 1 <= this.bottom;
  }
  occupiesColumn(e) {
    return this.left <= e.getPosition() - 1 && e.getPosition() - 1 <= this.right;
  }
  overlaps(e, t, i, s) {
    return !(this.left > i || e > this.right || this.top > s || t > this.bottom);
  }
  getData() {
    var e = [], t = this.getRows(), i = this.getColumns();
    return t.forEach((s) => {
      var n = s.getData(), r = {};
      i.forEach((o) => {
        r[o.field] = n[o.field];
      }), e.push(r);
    }), e;
  }
  getCells(e, t) {
    var i = [], s = this.getRows(), n = this.getColumns();
    return e ? i = s.map((r) => {
      var o = [];
      return r.getCells().forEach((a) => {
        n.includes(a.column) && o.push(t ? a.getComponent() : a);
      }), o;
    }) : s.forEach((r) => {
      r.getCells().forEach((o) => {
        n.includes(o.column) && i.push(t ? o.getComponent() : o);
      });
    }), i;
  }
  getStructuredCells() {
    return this.getCells(!0, !0);
  }
  getRows() {
    return this._getTableRows().slice(this.top, this.bottom + 1);
  }
  getColumns() {
    return this._getTableColumns().slice(this.left, this.right + 1);
  }
  clearValues() {
    var e = this.getCells(), t = this.table.options.selectableRangeClearCellsValue;
    this.table.blockRedraw(), e.forEach((i) => {
      i.setValue(t);
    }), this.table.restoreRedraw();
  }
  getBounds(e) {
    var t = this.getCells(!1, e), i = {
      start: null,
      end: null
    };
    return t.length ? (i.start = t[0], i.end = t[t.length - 1]) : console.warn("No bounds defined on range"), i;
  }
  getComponent() {
    return this.component || (this.component = new Hp(this)), this.component;
  }
  destroy(e) {
    this.destroyed = !0, this.element.remove(), e && this.rangeManager.rangeRemoved(this), this.initialized && this.dispatchExternal("rangeRemoved", this.getComponent());
  }
  destroyedGuard(e) {
    return this.destroyed && console.warn("You cannot call the " + e + " function on a destroyed range"), !this.destroyed;
  }
}
var Dp = {
  rangeJumpUp: ["ctrl + 38", "meta + 38"],
  rangeJumpDown: ["ctrl + 40", "meta + 40"],
  rangeJumpLeft: ["ctrl + 37", "meta + 37"],
  rangeJumpRight: ["ctrl + 39", "meta + 39"],
  rangeExpandUp: "shift + 38",
  rangeExpandDown: "shift + 40",
  rangeExpandLeft: "shift + 37",
  rangeExpandRight: "shift + 39",
  rangeExpandJumpUp: ["ctrl + shift + 38", "meta + shift + 38"],
  rangeExpandJumpDown: ["ctrl + shift + 40", "meta + shift + 40"],
  rangeExpandJumpLeft: ["ctrl + shift + 37", "meta + shift + 37"],
  rangeExpandJumpRight: ["ctrl + shift + 39", "meta + shift + 39"]
}, Sp = {
  rangeJumpLeft: function(A) {
    this.dispatch("keybinding-nav-range", A, "left", !0, !1);
  },
  rangeJumpRight: function(A) {
    this.dispatch("keybinding-nav-range", A, "right", !0, !1);
  },
  rangeJumpUp: function(A) {
    this.dispatch("keybinding-nav-range", A, "up", !0, !1);
  },
  rangeJumpDown: function(A) {
    this.dispatch("keybinding-nav-range", A, "down", !0, !1);
  },
  rangeExpandLeft: function(A) {
    this.dispatch("keybinding-nav-range", A, "left", !1, !0);
  },
  rangeExpandRight: function(A) {
    this.dispatch("keybinding-nav-range", A, "right", !1, !0);
  },
  rangeExpandUp: function(A) {
    this.dispatch("keybinding-nav-range", A, "up", !1, !0);
  },
  rangeExpandDown: function(A) {
    this.dispatch("keybinding-nav-range", A, "down", !1, !0);
  },
  rangeExpandJumpLeft: function(A) {
    this.dispatch("keybinding-nav-range", A, "left", !0, !0);
  },
  rangeExpandJumpRight: function(A) {
    this.dispatch("keybinding-nav-range", A, "right", !0, !0);
  },
  rangeExpandJumpUp: function(A) {
    this.dispatch("keybinding-nav-range", A, "up", !0, !0);
  },
  rangeExpandJumpDown: function(A) {
    this.dispatch("keybinding-nav-range", A, "down", !0, !0);
  }
}, Tp = {
  range: function(A) {
    var e = [], t = this.table.modules.selectRange.activeRange, i = !1, s, n, r, o, a;
    return a = A.length, t && (s = t.getBounds(), n = s.start, s.start === s.end && (i = !0), n && (e = this.table.rowManager.activeRows.slice(), r = e.indexOf(n.row), i ? o = A.length : o = e.indexOf(s.end.row) - r + 1, r > -1 && (this.table.blockRedraw(), e = e.slice(r, r + o), e.forEach((l, h) => {
      l.updateData(A[h % a]);
    }), this.table.restoreRedraw()))), e;
  }
}, Lp = {
  range: function(A) {
    var e = [], t = [], i = this.table.modules.selectRange.activeRange, s = !1, n, r, o, a, l;
    return i && (n = i.getBounds(), r = n.start, n.start === n.end && (s = !0), r && (A = A.split(`
`), A.forEach(function(h) {
      e.push(h.split("	"));
    }), e.length && (a = this.table.columnManager.getVisibleColumnsByIndex(), l = a.indexOf(r.column), l > -1))) ? (s ? o = e[0].length : o = a.indexOf(n.end.column) - l + 1, a = a.slice(l, l + o), e.forEach((h) => {
      var c = {}, u = h.length;
      a.forEach(function(d, f) {
        c[d.field] = h[f % u];
      }), t.push(c);
    }), t) : !1;
  }
}, Rp = {
  range: function() {
    var A = this.modules.selectRange.selectedColumns();
    return this.columnManager.rowHeader && A.unshift(this.columnManager.rowHeader), A;
  }
}, Ip = {
  range: function() {
    return this.modules.selectRange.selectedRows();
  }
}, kp = {
  keybindings: {
    bindings: Dp,
    actions: Sp
  },
  clipboard: {
    pasteActions: Tp,
    pasteParsers: Lp
  },
  export: {
    columnLookups: Rp,
    rowLookups: Ip
  }
};
class hr extends ne {
  constructor(e) {
    super(e), this.selecting = "cell", this.mousedown = !1, this.ranges = [], this.overlay = null, this.rowHeader = null, this.layoutChangeTimeout = null, this.columnSelection = !1, this.rowSelection = !1, this.maxRanges = 0, this.activeRange = !1, this.blockKeydown = !1, this.keyDownEvent = this._handleKeyDown.bind(this), this.mouseUpEvent = this._handleMouseUp.bind(this), this.registerTableOption("selectableRange", !1), this.registerTableOption("selectableRangeColumns", !1), this.registerTableOption("selectableRangeRows", !1), this.registerTableOption("selectableRangeClearCells", !1), this.registerTableOption("selectableRangeClearCellsValue", void 0), this.registerTableOption("selectableRangeAutoFocus", !0), this.registerTableFunction("getRangesData", this.getRangesData.bind(this)), this.registerTableFunction("getRanges", this.getRanges.bind(this)), this.registerTableFunction("addRange", this.addRangeFromComponent.bind(this)), this.registerComponentFunction("cell", "getRanges", this.cellGetRanges.bind(this)), this.registerComponentFunction("row", "getRanges", this.rowGetRanges.bind(this)), this.registerComponentFunction("column", "getRanges", this.colGetRanges.bind(this));
  }
  ///////////////////////////////////
  ///////    Initialization   ///////
  ///////////////////////////////////
  initialize() {
    this.options("selectableRange") && (this.options("selectableRows") ? console.warn("SelectRange functionality cannot be used in conjunction with row selection") : (this.maxRanges = this.options("selectableRange"), this.initializeTable(), this.initializeWatchers()), this.options("columns").findIndex((e) => e.frozen) > 0 && console.warn("Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior."), this.options("columns").filter((e) => e.frozen) > 1 && console.warn("Having multiple frozen columns with selectRange option may result in unpredictable behavior."));
  }
  initializeTable() {
    this.overlay = document.createElement("div"), this.overlay.classList.add("tabulator-range-overlay"), this.rangeContainer = document.createElement("div"), this.rangeContainer.classList.add("tabulator-range-container"), this.activeRangeCellElement = document.createElement("div"), this.activeRangeCellElement.classList.add("tabulator-range-cell-active"), this.overlay.appendChild(this.rangeContainer), this.overlay.appendChild(this.activeRangeCellElement), this.table.rowManager.element.addEventListener("keydown", this.keyDownEvent), this.resetRanges(), this.table.rowManager.element.appendChild(this.overlay), this.table.columnManager.element.setAttribute("tabindex", 0), this.table.element.classList.add("tabulator-ranges");
  }
  initializeWatchers() {
    this.columnSelection = this.options("selectableRangeColumns"), this.rowSelection = this.options("selectableRangeRows"), this.subscribe("column-init", this.initializeColumn.bind(this)), this.subscribe("column-mousedown", this.handleColumnMouseDown.bind(this)), this.subscribe("column-mousemove", this.handleColumnMouseMove.bind(this)), this.subscribe("column-resized", this.handleColumnResized.bind(this)), this.subscribe("column-moving", this.handleColumnMoving.bind(this)), this.subscribe("column-moved", this.handleColumnMoved.bind(this)), this.subscribe("column-width", this.layoutChange.bind(this)), this.subscribe("column-height", this.layoutChange.bind(this)), this.subscribe("column-resized", this.layoutChange.bind(this)), this.subscribe("columns-loaded", this.updateHeaderColumn.bind(this)), this.subscribe("cell-height", this.layoutChange.bind(this)), this.subscribe("cell-rendered", this.renderCell.bind(this)), this.subscribe("cell-mousedown", this.handleCellMouseDown.bind(this)), this.subscribe("cell-mousemove", this.handleCellMouseMove.bind(this)), this.subscribe("cell-click", this.handleCellClick.bind(this)), this.subscribe("cell-editing", this.handleEditingCell.bind(this)), this.subscribe("page-changed", this.redraw.bind(this)), this.subscribe("scroll-vertical", this.layoutChange.bind(this)), this.subscribe("scroll-horizontal", this.layoutChange.bind(this)), this.subscribe("data-destroy", this.tableDestroyed.bind(this)), this.subscribe("data-processed", this.resetRanges.bind(this)), this.subscribe("table-layout", this.layoutElement.bind(this)), this.subscribe("table-redraw", this.redraw.bind(this)), this.subscribe("table-destroy", this.tableDestroyed.bind(this)), this.subscribe("edit-editor-clear", this.finishEditingCell.bind(this)), this.subscribe("edit-blur", this.restoreFocus.bind(this)), this.subscribe("keybinding-nav-prev", this.keyNavigate.bind(this, "left")), this.subscribe("keybinding-nav-next", this.keyNavigate.bind(this, "right")), this.subscribe("keybinding-nav-left", this.keyNavigate.bind(this, "left")), this.subscribe("keybinding-nav-right", this.keyNavigate.bind(this, "right")), this.subscribe("keybinding-nav-up", this.keyNavigate.bind(this, "up")), this.subscribe("keybinding-nav-down", this.keyNavigate.bind(this, "down")), this.subscribe("keybinding-nav-range", this.keyNavigateRange.bind(this));
  }
  initializeColumn(e) {
    this.columnSelection && e.definition.headerSort && this.options("headerSortClickElement") !== "icon" && console.warn("Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'."), e.modules.edit;
  }
  updateHeaderColumn() {
    var e;
    this.rowSelection && (this.rowHeader = this.table.columnManager.getVisibleColumnsByIndex()[0], this.rowHeader && (this.rowHeader.definition.cssClass = this.rowHeader.definition.cssClass + " tabulator-range-row-header", this.rowHeader.definition.headerSort && console.warn("Using column headerSort with selectableRangeRows option may result in unpredictable behavior"), this.rowHeader.definition.editor && console.warn("Using column editor with selectableRangeRows option may result in unpredictable behavior"))), this.table.modules.frozenColumns && this.table.modules.frozenColumns.active && (e = this.table.modules.frozenColumns.getFrozenColumns(), (e.length > 1 || e.length === 1 && e[0] !== this.rowHeader) && console.warn("Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior"));
  }
  ///////////////////////////////////
  ///////   Table Functions   ///////
  ///////////////////////////////////
  getRanges() {
    return this.ranges.map((e) => e.getComponent());
  }
  getRangesData() {
    return this.ranges.map((e) => e.getData());
  }
  addRangeFromComponent(e, t) {
    return e = e ? e._cell : null, t = t ? t._cell : null, this.addRange(e, t);
  }
  ///////////////////////////////////
  /////// Component Functions ///////
  ///////////////////////////////////
  cellGetRanges(e) {
    var t = [];
    return e.column === this.rowHeader ? t = this.ranges.filter((i) => i.occupiesRow(e.row)) : t = this.ranges.filter((i) => i.occupies(e)), t.map((i) => i.getComponent());
  }
  rowGetRanges(e) {
    var t = this.ranges.filter((i) => i.occupiesRow(e));
    return t.map((i) => i.getComponent());
  }
  colGetRanges(e) {
    var t = this.ranges.filter((i) => i.occupiesColumn(e));
    return t.map((i) => i.getComponent());
  }
  ///////////////////////////////////
  ////////// Event Handlers /////////
  ///////////////////////////////////
  _handleMouseUp(e) {
    this.mousedown = !1, document.removeEventListener("mouseup", this.mouseUpEvent);
  }
  _handleKeyDown(e) {
    if (!this.blockKeydown && (!this.table.modules.edit || this.table.modules.edit && !this.table.modules.edit.currentCell)) {
      if (e.key === "Enter") {
        if (this.table.modules.edit && this.table.modules.edit.currentCell)
          return;
        this.table.modules.edit.editCell(this.getActiveCell()), e.preventDefault();
      }
      (e.key === "Backspace" || e.key === "Delete") && this.options("selectableRangeClearCells") && this.activeRange && this.activeRange.clearValues();
    }
  }
  initializeFocus(e) {
    var t;
    this.restoreFocus();
    try {
      document.selection ? (t = document.body.createTextRange(), t.moveToElementText(e.getElement()), t.select()) : window.getSelection && (t = document.createRange(), t.selectNode(e.getElement()), window.getSelection().removeAllRanges(), window.getSelection().addRange(t));
    } catch {
    }
  }
  restoreFocus(e) {
    return this.table.rowManager.element.focus(), !0;
  }
  ///////////////////////////////////
  ////// Column Functionality ///////
  ///////////////////////////////////
  handleColumnResized(e) {
    var t;
    this.selecting !== "column" && this.selecting !== "all" || (t = this.ranges.some((i) => i.occupiesColumn(e)), t && this.ranges.forEach((i) => {
      var s = i.getColumns(!0);
      s.forEach((n) => {
        n !== e && n.setWidth(e.width);
      });
    }));
  }
  handleColumnMoving(e, t) {
    this.resetRanges().setBounds(t), this.overlay.style.visibility = "hidden";
  }
  handleColumnMoved(e, t, i) {
    this.activeRange.setBounds(e), this.layoutElement();
  }
  handleColumnMouseDown(e, t) {
    e.button === 2 && (this.selecting === "column" || this.selecting === "all") && this.activeRange.occupiesColumn(t) || this.table.options.movableColumns && this.selecting === "column" && this.activeRange.occupiesColumn(t) || (this.mousedown = !0, document.addEventListener("mouseup", this.mouseUpEvent), this.newSelection(e, t));
  }
  handleColumnMouseMove(e, t) {
    t === this.rowHeader || !this.mousedown || this.selecting === "all" || this.activeRange.setBounds(!1, t, !0);
  }
  ///////////////////////////////////
  //////// Cell Functionality ///////
  ///////////////////////////////////
  renderCell(e) {
    var t = e.getElement(), i = this.ranges.findIndex((s) => s.occupies(e));
    t.classList.toggle("tabulator-range-selected", i !== -1), t.classList.toggle("tabulator-range-only-cell-selected", this.ranges.length === 1 && this.ranges[0].atTopLeft(e) && this.ranges[0].atBottomRight(e)), t.dataset.range = i;
  }
  handleCellMouseDown(e, t) {
    e.button === 2 && (this.activeRange.occupies(t) || (this.selecting === "row" || this.selecting === "all") && this.activeRange.occupiesRow(t.row)) || (this.mousedown = !0, document.addEventListener("mouseup", this.mouseUpEvent), this.newSelection(e, t));
  }
  handleCellMouseMove(e, t) {
    !this.mousedown || this.selecting === "all" || this.activeRange.setBounds(!1, t, !0);
  }
  handleCellClick(e, t) {
    this.initializeFocus(t);
  }
  handleEditingCell(e) {
    this.activeRange && this.activeRange.setBounds(e);
  }
  finishEditingCell() {
    this.blockKeydown = !0, this.table.rowManager.element.focus(), setTimeout(() => {
      this.blockKeydown = !1;
    }, 10);
  }
  ///////////////////////////////////
  ///////     Navigation      ///////
  ///////////////////////////////////
  keyNavigate(e, t) {
    this.navigate(!1, !1, e), t.preventDefault();
  }
  keyNavigateRange(e, t, i, s) {
    this.navigate(i, s, t), e.preventDefault();
  }
  navigate(e, t, i) {
    var s = !1, n, r, o, a, l, h, c, u, d, f, p;
    if (this.table.modules.edit && this.table.modules.edit.currentCell)
      return !1;
    if (this.ranges.length > 1 && (this.ranges = this.ranges.filter((b) => b === this.activeRange ? (b.setEnd(b.start.row, b.start.col), !0) : (b.destroy(), !1))), n = this.activeRange, o = {
      top: n.top,
      bottom: n.bottom,
      left: n.left,
      right: n.right
    }, r = t ? n.end : n.start, a = r.row, l = r.col, e)
      switch (i) {
        case "left":
          l = this.findJumpCellLeft(n.start.row, r.col);
          break;
        case "right":
          l = this.findJumpCellRight(n.start.row, r.col);
          break;
        case "up":
          a = this.findJumpCellUp(r.row, n.start.col);
          break;
        case "down":
          a = this.findJumpCellDown(r.row, n.start.col);
          break;
      }
    else {
      if (t && (this.selecting === "row" && (i === "left" || i === "right") || this.selecting === "column" && (i === "up" || i === "down")))
        return;
      switch (i) {
        case "left":
          l = Math.max(l - 1, 0);
          break;
        case "right":
          l = Math.min(l + 1, this.getTableColumns().length - 1);
          break;
        case "up":
          a = Math.max(a - 1, 0);
          break;
        case "down":
          a = Math.min(a + 1, this.getTableRows().length - 1);
          break;
      }
    }
    if (this.rowHeader && l === 0 && (l = 1), t || n.setStart(a, l), n.setEnd(a, l), t || (this.selecting = "cell"), s = o.top !== n.top || o.bottom !== n.bottom || o.left !== n.left || o.right !== n.right, s)
      return h = this.getRowByRangePos(n.end.row), c = this.getColumnByRangePos(n.end.col), u = h.getElement().getBoundingClientRect(), f = c.getElement().getBoundingClientRect(), d = this.table.rowManager.getElement().getBoundingClientRect(), p = this.table.columnManager.getElement().getBoundingClientRect(), u.top >= d.top && u.bottom <= d.bottom || (h.getElement().parentNode && c.getElement().parentNode ? this.autoScroll(n, h.getElement(), c.getElement()) : h.getComponent().scrollTo(void 0, !1)), f.left >= p.left + this.getRowHeaderWidth() && f.right <= p.right || (h.getElement().parentNode && c.getElement().parentNode ? this.autoScroll(n, h.getElement(), c.getElement()) : c.getComponent().scrollTo(void 0, !1)), this.layoutElement(), !0;
  }
  rangeRemoved(e) {
    this.ranges = this.ranges.filter((t) => t !== e), this.activeRange === e && (this.ranges.length ? this.activeRange = this.ranges[this.ranges.length - 1] : this.addRange()), this.layoutElement();
  }
  findJumpRow(e, t, i, s, n) {
    return i && (t = t.reverse()), this.findJumpItem(s, n, t, function(r) {
      return r.getData()[e.getField()];
    });
  }
  findJumpCol(e, t, i, s, n) {
    return i && (t = t.reverse()), this.findJumpItem(s, n, t, function(r) {
      return e.getData()[r.getField()];
    });
  }
  findJumpItem(e, t, i, s) {
    var n;
    for (let r of i) {
      let o = s(r);
      if (e) {
        if (n = r, o)
          break;
      } else if (t) {
        if (n = r, o)
          break;
      } else if (o)
        n = r;
      else
        break;
    }
    return n;
  }
  findJumpCellLeft(e, t) {
    var i = this.getRowByRangePos(e), s = this.getTableColumns(), n = this.isEmpty(i.getData()[s[t].getField()]), r = s[t - 1] ? this.isEmpty(i.getData()[s[t - 1].getField()]) : !1, o = this.rowHeader ? s.slice(1, t) : s.slice(0, t), a = this.findJumpCol(i, o, !0, n, r);
    return a ? a.getPosition() - 1 : t;
  }
  findJumpCellRight(e, t) {
    var i = this.getRowByRangePos(e), s = this.getTableColumns(), n = this.isEmpty(i.getData()[s[t].getField()]), r = s[t + 1] ? this.isEmpty(i.getData()[s[t + 1].getField()]) : !1, o = this.findJumpCol(i, s.slice(t + 1, s.length), !1, n, r);
    return o ? o.getPosition() - 1 : t;
  }
  findJumpCellUp(e, t) {
    var i = this.getColumnByRangePos(t), s = this.getTableRows(), n = this.isEmpty(s[e].getData()[i.getField()]), r = s[e - 1] ? this.isEmpty(s[e - 1].getData()[i.getField()]) : !1, o = this.findJumpRow(i, s.slice(0, e), !0, n, r);
    return o ? o.position - 1 : e;
  }
  findJumpCellDown(e, t) {
    var i = this.getColumnByRangePos(t), s = this.getTableRows(), n = this.isEmpty(s[e].getData()[i.getField()]), r = s[e + 1] ? this.isEmpty(s[e + 1].getData()[i.getField()]) : !1, o = this.findJumpRow(i, s.slice(e + 1, s.length), !1, n, r);
    return o ? o.position - 1 : e;
  }
  ///////////////////////////////////
  ///////      Selection      ///////
  ///////////////////////////////////
  newSelection(e, t) {
    var i;
    if (t.type === "column") {
      if (!this.columnSelection)
        return;
      if (t === this.rowHeader) {
        i = this.resetRanges(), this.selecting = "all";
        var s, n = this.getCell(-1, -1);
        this.rowHeader ? s = this.getCell(0, 1) : s = this.getCell(0, 0), i.setBounds(s, n);
        return;
      } else
        this.selecting = "column";
    } else t.column === this.rowHeader ? this.selecting = "row" : this.selecting = "cell";
    e.shiftKey ? this.activeRange.setBounds(!1, t) : e.ctrlKey ? this.addRange().setBounds(t) : this.resetRanges().setBounds(t);
  }
  autoScroll(e, t, i) {
    var s = this.table.rowManager.element, n, r, o, a;
    typeof t > "u" && (t = this.getRowByRangePos(e.end.row).getElement()), typeof i > "u" && (i = this.getColumnByRangePos(e.end.col).getElement()), n = {
      left: i.offsetLeft,
      right: i.offsetLeft + i.offsetWidth,
      top: t.offsetTop,
      bottom: t.offsetTop + t.offsetHeight
    }, r = {
      left: s.scrollLeft + this.getRowHeaderWidth(),
      right: Math.ceil(s.scrollLeft + s.clientWidth),
      top: s.scrollTop,
      bottom: s.scrollTop + s.offsetHeight - this.table.rowManager.scrollbarWidth
    }, o = r.left < n.left && n.left < r.right && r.left < n.right && n.right < r.right, a = r.top < n.top && n.top < r.bottom && r.top < n.bottom && n.bottom < r.bottom, o || (n.left < r.left ? s.scrollLeft = n.left - this.getRowHeaderWidth() : n.right > r.right && (s.scrollLeft = Math.min(n.right - s.clientWidth, n.left - this.getRowHeaderWidth()))), a || (n.top < r.top ? s.scrollTop = n.top : n.bottom > r.bottom && (s.scrollTop = n.bottom - s.clientHeight));
  }
  ///////////////////////////////////
  ///////       Layout        ///////
  ///////////////////////////////////
  layoutChange() {
    this.overlay.style.visibility = "hidden", clearTimeout(this.layoutChangeTimeout), this.layoutChangeTimeout = setTimeout(this.layoutRanges.bind(this), 200);
  }
  redraw(e) {
    e && (this.selecting = "cell", this.resetRanges(), this.layoutElement());
  }
  layoutElement(e) {
    var t;
    e ? t = this.table.rowManager.getVisibleRows(!0) : t = this.table.rowManager.getRows(), t.forEach((i) => {
      i.type === "row" && (this.layoutRow(i), i.cells.forEach((s) => this.renderCell(s)));
    }), this.getTableColumns().forEach((i) => {
      this.layoutColumn(i);
    }), this.layoutRanges();
  }
  layoutRow(e) {
    var t = e.getElement(), i = !1, s = this.ranges.some((n) => n.occupiesRow(e));
    this.selecting === "row" ? i = s : this.selecting === "all" && (i = !0), t.classList.toggle("tabulator-range-selected", i), t.classList.toggle("tabulator-range-highlight", s);
  }
  layoutColumn(e) {
    var t = e.getElement(), i = !1, s = this.ranges.some((n) => n.occupiesColumn(e));
    this.selecting === "column" ? i = s : this.selecting === "all" && (i = !0), t.classList.toggle("tabulator-range-selected", i), t.classList.toggle("tabulator-range-highlight", s);
  }
  layoutRanges() {
    var e, t, i;
    this.table.initialized && (e = this.getActiveCell(), e && (t = e.getElement(), i = e.row.getElement(), this.table.rtl ? this.activeRangeCellElement.style.right = i.offsetWidth - t.offsetLeft - t.offsetWidth + "px" : this.activeRangeCellElement.style.left = i.offsetLeft + t.offsetLeft + "px", this.activeRangeCellElement.style.top = i.offsetTop + "px", this.activeRangeCellElement.style.width = t.offsetWidth + "px", this.activeRangeCellElement.style.height = i.offsetHeight + "px", this.ranges.forEach((s) => s.layout()), this.overlay.style.visibility = "visible"));
  }
  ///////////////////////////////////
  ///////  Helper Functions   ///////
  ///////////////////////////////////	
  getCell(e, t) {
    var i;
    return t < 0 && (t = this.getTableColumns().length + t, t < 0) ? null : (e < 0 && (e = this.getTableRows().length + e), i = this.table.rowManager.getRowFromPosition(e + 1), i ? i.getCells(!1, !0).filter((s) => s.column.visible)[t] : null);
  }
  getActiveCell() {
    return this.getCell(this.activeRange.start.row, this.activeRange.start.col);
  }
  getRowByRangePos(e) {
    return this.getTableRows()[e];
  }
  getColumnByRangePos(e) {
    return this.getTableColumns()[e];
  }
  getTableRows() {
    return this.table.rowManager.getDisplayRows().filter((e) => e.type === "row");
  }
  getTableColumns() {
    return this.table.columnManager.getVisibleColumnsByIndex();
  }
  addRange(e, t) {
    var i;
    return this.maxRanges !== !0 && this.ranges.length >= this.maxRanges && this.ranges.shift().destroy(), i = new Mp(this.table, this, e, t), this.activeRange = i, this.ranges.push(i), this.rangeContainer.appendChild(i.element), i;
  }
  resetRanges() {
    var e, t, i;
    return this.ranges.forEach((s) => s.destroy()), this.ranges = [], e = this.addRange(), this.table.rowManager.activeRows.length && (i = this.table.rowManager.activeRows[0].cells.filter((s) => s.column.visible), t = i[this.rowHeader ? 1 : 0], t && (e.setBounds(t), this.options("selectableRangeAutoFocus") && this.initializeFocus(t))), e;
  }
  tableDestroyed() {
    document.removeEventListener("mouseup", this.mouseUpEvent), this.table.rowManager.element.removeEventListener("keydown", this.keyDownEvent);
  }
  selectedRows(e) {
    return e ? this.activeRange.getRows().map((t) => t.getComponent()) : this.activeRange.getRows();
  }
  selectedColumns(e) {
    return e ? this.activeRange.getColumns().map((t) => t.getComponent()) : this.activeRange.getColumns();
  }
  getRowHeaderWidth() {
    return this.rowHeader ? this.rowHeader.getElement().offsetWidth : 0;
  }
  isEmpty(e) {
    return e == null || e === "";
  }
}
D(hr, "moduleName", "selectRange"), D(hr, "moduleInitOrder", 1), D(hr, "moduleExtensions", kp);
function Op(A, e, t, i, s, n, r) {
  var o = r.alignEmptyValues, a = r.decimalSeparator, l = r.thousandSeparator, h = 0;
  if (A = String(A), e = String(e), l && (A = A.split(l).join(""), e = e.split(l).join("")), a && (A = A.split(a).join("."), e = e.split(a).join(".")), A = parseFloat(A), e = parseFloat(e), isNaN(A))
    h = isNaN(e) ? 0 : -1;
  else if (isNaN(e))
    h = 1;
  else
    return A - e;
  return (o === "top" && n === "desc" || o === "bottom" && n === "asc") && (h *= -1), h;
}
function Pp(A, e, t, i, s, n, r) {
  var o = r.alignEmptyValues, a = 0, l;
  if (!A)
    a = e ? -1 : 0;
  else if (!e)
    a = 1;
  else {
    switch (typeof r.locale) {
      case "boolean":
        r.locale && (l = this.langLocale());
        break;
      case "string":
        l = r.locale;
        break;
    }
    return String(A).toLowerCase().localeCompare(String(e).toLowerCase(), l);
  }
  return (o === "top" && n === "desc" || o === "bottom" && n === "asc") && (a *= -1), a;
}
function gl(A, e, t, i, s, n, r) {
  var o = this.table.dependencyRegistry.lookup(["luxon", "DateTime"], "DateTime"), a = r.format || "dd/MM/yyyy HH:mm:ss", l = r.alignEmptyValues, h = 0;
  if (typeof o < "u") {
    if (o.isDateTime(A) || (a === "iso" ? A = o.fromISO(String(A)) : A = o.fromFormat(String(A), a)), o.isDateTime(e) || (a === "iso" ? e = o.fromISO(String(e)) : e = o.fromFormat(String(e), a)), !A.isValid)
      h = e.isValid ? -1 : 0;
    else if (!e.isValid)
      h = 1;
    else
      return A - e;
    return (l === "top" && n === "desc" || l === "bottom" && n === "asc") && (h *= -1), h;
  } else
    console.error("Sort Error - 'datetime' sorter is dependant on luxon.js");
}
function Np(A, e, t, i, s, n, r) {
  return r.format || (r.format = "dd/MM/yyyy"), gl.call(this, A, e, t, i, s, n, r);
}
function Kp(A, e, t, i, s, n, r) {
  return r.format || (r.format = "HH:mm"), gl.call(this, A, e, t, i, s, n, r);
}
function Vp(A, e, t, i, s, n, r) {
  var o = A === !0 || A === "true" || A === "True" || A === 1 ? 1 : 0, a = e === !0 || e === "true" || e === "True" || e === 1 ? 1 : 0;
  return o - a;
}
function zp(A, e, t, i, s, n, r) {
  var o = r.type || "length", a = r.alignEmptyValues, l = 0, h = this.table, c;
  r.valueMap && (typeof r.valueMap == "string" ? c = function(d) {
    return d.map((f) => Ee.retrieveNestedData(h.options.nestedFieldSeparator, r.valueMap, f));
  } : c = r.valueMap);
  function u(d) {
    var f;
    switch (c && (d = c(d)), o) {
      case "length":
        f = d.length;
        break;
      case "sum":
        f = d.reduce(function(p, b) {
          return p + b;
        });
        break;
      case "max":
        f = Math.max.apply(null, d);
        break;
      case "min":
        f = Math.min.apply(null, d);
        break;
      case "avg":
        f = d.reduce(function(p, b) {
          return p + b;
        }) / d.length;
        break;
      case "string":
        f = d.join("");
        break;
    }
    return f;
  }
  if (!Array.isArray(A))
    l = Array.isArray(e) ? -1 : 0;
  else if (!Array.isArray(e))
    l = 1;
  else
    return o === "string" ? String(u(A)).toLowerCase().localeCompare(String(u(e)).toLowerCase()) : u(e) - u(A);
  return (a === "top" && n === "desc" || a === "bottom" && n === "asc") && (l *= -1), l;
}
function Gp(A, e, t, i, s, n, r) {
  var o = typeof A > "u" ? 0 : 1, a = typeof e > "u" ? 0 : 1;
  return o - a;
}
function Wp(A, e, t, i, s, n, r) {
  var o, a, l, h, c = 0, u, d = /(\d+)|(\D+)/g, f = /\d/, p = r.alignEmptyValues, b = 0;
  if (!A && A !== 0)
    b = !e && e !== 0 ? 0 : -1;
  else if (!e && e !== 0)
    b = 1;
  else {
    if (isFinite(A) && isFinite(e)) return A - e;
    if (o = String(A).toLowerCase(), a = String(e).toLowerCase(), o === a) return 0;
    if (!(f.test(o) && f.test(a))) return o > a ? 1 : -1;
    for (o = o.match(d), a = a.match(d), u = o.length > a.length ? a.length : o.length; c < u; )
      if (l = o[c], h = a[c++], l !== h)
        return isFinite(l) && isFinite(h) ? (l.charAt(0) === "0" && (l = "." + l), h.charAt(0) === "0" && (h = "." + h), l - h) : l > h ? 1 : -1;
    return o.length > a.length;
  }
  return (p === "top" && n === "desc" || p === "bottom" && n === "asc") && (b *= -1), b;
}
var jp = {
  number: Op,
  string: Pp,
  date: Np,
  time: Kp,
  datetime: gl,
  boolean: Vp,
  array: zp,
  exists: Gp,
  alphanum: Wp
};
const us = class us extends ne {
  constructor(e) {
    super(e), this.sortList = [], this.changed = !1, this.registerTableOption("sortMode", "local"), this.registerTableOption("initialSort", !1), this.registerTableOption("columnHeaderSortMulti", !0), this.registerTableOption("sortOrderReverse", !1), this.registerTableOption("headerSortElement", "<div class='tabulator-arrow'></div>"), this.registerTableOption("headerSortClickElement", "header"), this.registerColumnOption("sorter"), this.registerColumnOption("sorterParams"), this.registerColumnOption("headerSort", !0), this.registerColumnOption("headerSortStartingDir"), this.registerColumnOption("headerSortTristate");
  }
  initialize() {
    this.subscribe("column-layout", this.initializeColumn.bind(this)), this.subscribe("table-built", this.tableBuilt.bind(this)), this.registerDataHandler(this.sort.bind(this), 20), this.registerTableFunction("setSort", this.userSetSort.bind(this)), this.registerTableFunction("getSorters", this.getSort.bind(this)), this.registerTableFunction("clearSort", this.clearSort.bind(this)), this.table.options.sortMode === "remote" && this.subscribe("data-params", this.remoteSortParams.bind(this));
  }
  tableBuilt() {
    this.table.options.initialSort && this.setSort(this.table.options.initialSort);
  }
  remoteSortParams(e, t, i, s) {
    var n = this.getSort();
    return n.forEach((r) => {
      delete r.column;
    }), s.sort = n, s;
  }
  ///////////////////////////////////
  ///////// Table Functions /////////
  ///////////////////////////////////
  userSetSort(e, t) {
    this.setSort(e, t), this.refreshSort();
  }
  clearSort() {
    this.clear(), this.refreshSort();
  }
  ///////////////////////////////////
  ///////// Internal Logic //////////
  ///////////////////////////////////
  //initialize column header for sorting
  initializeColumn(e) {
    var t = !1, i, s;
    switch (typeof e.definition.sorter) {
      case "string":
        us.sorters[e.definition.sorter] ? t = us.sorters[e.definition.sorter] : console.warn("Sort Error - No such sorter found: ", e.definition.sorter);
        break;
      case "function":
        t = e.definition.sorter;
        break;
    }
    if (e.modules.sort = {
      sorter: t,
      dir: "none",
      params: e.definition.sorterParams || {},
      startingDir: e.definition.headerSortStartingDir || "asc",
      tristate: e.definition.headerSortTristate
    }, e.definition.headerSort !== !1) {
      switch (i = e.getElement(), i.classList.add("tabulator-sortable"), s = document.createElement("div"), s.classList.add("tabulator-col-sorter"), this.table.options.headerSortClickElement) {
        case "icon":
          s.classList.add("tabulator-col-sorter-element");
          break;
        case "header":
          i.classList.add("tabulator-col-sorter-element");
          break;
        default:
          i.classList.add("tabulator-col-sorter-element");
          break;
      }
      switch (this.table.options.headerSortElement) {
        case "function":
          break;
        case "object":
          s.appendChild(this.table.options.headerSortElement);
          break;
        default:
          s.innerHTML = this.table.options.headerSortElement;
      }
      e.titleHolderElement.appendChild(s), e.modules.sort.element = s, this.setColumnHeaderSortIcon(e, "none"), this.table.options.headerSortClickElement === "icon" && s.addEventListener("mousedown", (n) => {
        n.stopPropagation();
      }), (this.table.options.headerSortClickElement === "icon" ? s : i).addEventListener("click", (n) => {
        var r = "", o = [], a = !1;
        if (e.modules.sort) {
          if (e.modules.sort.tristate)
            e.modules.sort.dir == "none" ? r = e.modules.sort.startingDir : e.modules.sort.dir == e.modules.sort.startingDir ? r = e.modules.sort.dir == "asc" ? "desc" : "asc" : r = "none";
          else
            switch (e.modules.sort.dir) {
              case "asc":
                r = "desc";
                break;
              case "desc":
                r = "asc";
                break;
              default:
                r = e.modules.sort.startingDir;
            }
          this.table.options.columnHeaderSortMulti && (n.shiftKey || n.ctrlKey) ? (o = this.getSort(), a = o.findIndex((l) => l.field === e.getField()), a > -1 ? (o[a].dir = r, a = o.splice(a, 1)[0], r != "none" && o.push(a)) : r != "none" && o.push({ column: e, dir: r }), this.setSort(o)) : r == "none" ? this.clear() : this.setSort(e, r), this.refreshSort();
        }
      });
    }
  }
  refreshSort() {
    this.table.options.sortMode === "remote" ? this.reloadData(null, !1, !1) : this.refreshData(!0);
  }
  //check if the sorters have changed since last use
  hasChanged() {
    var e = this.changed;
    return this.changed = !1, e;
  }
  //return current sorters
  getSort() {
    var e = this, t = [];
    return e.sortList.forEach(function(i) {
      i.column && t.push({ column: i.column.getComponent(), field: i.column.getField(), dir: i.dir });
    }), t;
  }
  //change sort list and trigger sort
  setSort(e, t) {
    var i = this, s = [];
    Array.isArray(e) || (e = [{ column: e, dir: t }]), e.forEach(function(n) {
      var r;
      r = i.table.columnManager.findColumn(n.column), r ? (n.column = r, s.push(n), i.changed = !0) : console.warn("Sort Warning - Sort field does not exist and is being ignored: ", n.column);
    }), i.sortList = s, this.dispatch("sort-changed");
  }
  //clear sorters
  clear() {
    this.setSort([]);
  }
  //find appropriate sorter for column
  findSorter(e) {
    var t = this.table.rowManager.activeRows[0], i = "string", s, n;
    if (t && (t = t.getData(), s = e.getField(), s))
      switch (n = e.getFieldValue(t), typeof n) {
        case "undefined":
          i = "string";
          break;
        case "boolean":
          i = "boolean";
          break;
        default:
          !isNaN(n) && n !== "" ? i = "number" : n.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i) && (i = "alphanum");
          break;
      }
    return us.sorters[i];
  }
  //work through sort list sorting data
  sort(e, t) {
    var i = this, s = this.table.options.sortOrderReverse ? i.sortList.slice().reverse() : i.sortList, n = [], r = [];
    return this.subscribedExternal("dataSorting") && this.dispatchExternal("dataSorting", i.getSort()), t || i.clearColumnHeaders(), this.table.options.sortMode !== "remote" ? (s.forEach(function(o, a) {
      var l;
      o.column && (l = o.column.modules.sort, l && (l.sorter || (l.sorter = i.findSorter(o.column)), o.params = typeof l.params == "function" ? l.params(o.column.getComponent(), o.dir) : l.params, n.push(o)), t || i.setColumnHeader(o.column, o.dir));
    }), n.length && i._sortItems(e, n)) : t || s.forEach(function(o, a) {
      i.setColumnHeader(o.column, o.dir);
    }), this.subscribedExternal("dataSorted") && (e.forEach((o) => {
      r.push(o.getComponent());
    }), this.dispatchExternal("dataSorted", i.getSort(), r)), e;
  }
  //clear sort arrows on columns
  clearColumnHeaders() {
    this.table.columnManager.getRealColumns().forEach((e) => {
      e.modules.sort && (e.modules.sort.dir = "none", e.getElement().setAttribute("aria-sort", "none"), this.setColumnHeaderSortIcon(e, "none"));
    });
  }
  //set the column header sort direction
  setColumnHeader(e, t) {
    e.modules.sort.dir = t, e.getElement().setAttribute("aria-sort", t === "asc" ? "ascending" : "descending"), this.setColumnHeaderSortIcon(e, t);
  }
  setColumnHeaderSortIcon(e, t) {
    var i = e.modules.sort.element, s;
    if (e.definition.headerSort && typeof this.table.options.headerSortElement == "function") {
      for (; i.firstChild; ) i.removeChild(i.firstChild);
      s = this.table.options.headerSortElement.call(this.table, e.getComponent(), t), typeof s == "object" ? i.appendChild(s) : i.innerHTML = s;
    }
  }
  //sort each item in sort list
  _sortItems(e, t) {
    var i = t.length - 1;
    e.sort((s, n) => {
      for (var r, o = i; o >= 0; o--) {
        let a = t[o];
        if (r = this._sortRow(s, n, a.column, a.dir, a.params), r !== 0)
          break;
      }
      return r;
    });
  }
  //process individual rows for a sort function on active data
  _sortRow(e, t, i, s, n) {
    var r, o, a = s == "asc" ? e : t, l = s == "asc" ? t : e;
    return e = i.getFieldValue(a.getData()), t = i.getFieldValue(l.getData()), e = typeof e < "u" ? e : "", t = typeof t < "u" ? t : "", r = a.getComponent(), o = l.getComponent(), i.modules.sort.sorter.call(this, e, t, r, o, i.getComponent(), s, n);
  }
};
D(us, "moduleName", "sort"), //load defaults
D(us, "sorters", jp);
let xa = us;
class Xp {
  constructor(e, t) {
    this.columnCount = e, this.rowCount = t, this.columnString = [], this.columns = [], this.rows = [];
  }
  genColumns(e) {
    var t = Math.max(this.columnCount, Math.max(...e.map((i) => i.length)));
    this.columnString = [], this.columns = [];
    for (let i = 1; i <= t; i++)
      this.incrementChar(this.columnString.length - 1), this.columns.push(this.columnString.join(""));
    return this.columns;
  }
  genRows(e) {
    var t = Math.max(this.rowCount, e.length);
    this.rows = [];
    for (let i = 1; i <= t; i++)
      this.rows.push(i);
    return this.rows;
  }
  incrementChar(e) {
    let t = this.columnString[e];
    t ? t !== "Z" ? this.columnString[e] = String.fromCharCode(this.columnString[e].charCodeAt(0) + 1) : (this.columnString[e] = "A", e ? this.incrementChar(e - 1) : this.columnString.push("A")) : this.columnString.push("A");
  }
  setRowCount(e) {
    this.rowCount = e;
  }
  setColumnCount(e) {
    this.columnCount = e;
  }
}
class Qu {
  constructor(e) {
    return this._sheet = e, new Proxy(this, {
      get: function(t, i, s) {
        return typeof t[i] < "u" ? t[i] : t._sheet.table.componentFunctionBinder.handle("sheet", t._sheet, i);
      }
    });
  }
  getTitle() {
    return this._sheet.title;
  }
  getKey() {
    return this._sheet.key;
  }
  getDefinition() {
    return this._sheet.getDefinition();
  }
  getData() {
    return this._sheet.getData();
  }
  setData(e) {
    return this._sheet.setData(e);
  }
  clear() {
    return this._sheet.clear();
  }
  remove() {
    return this._sheet.remove();
  }
  active() {
    return this._sheet.active();
  }
  setTitle(e) {
    return this._sheet.setTitle(e);
  }
  setRows(e) {
    return this._sheet.setRows(e);
  }
  setColumns(e) {
    return this._sheet.setColumns(e);
  }
}
class Vl extends st {
  constructor(e, t) {
    super(e.table), this.spreadsheetManager = e, this.definition = t, this.title = this.definition.title || "", this.key = this.definition.key || this.definition.title, this.rowCount = this.definition.rows, this.columnCount = this.definition.columns, this.data = this.definition.data || [], this.element = null, this.isActive = !1, this.grid = new Xp(this.columnCount, this.rowCount), this.defaultColumnDefinition = { width: 100, headerHozAlign: "center", headerSort: !1 }, this.columnDefinition = Object.assign(this.defaultColumnDefinition, this.options("spreadsheetColumnDefinition")), this.columnDefs = [], this.rowDefs = [], this.columnFields = [], this.columns = [], this.rows = [], this.scrollTop = null, this.scrollLeft = null, this.initialize(), this.dispatchExternal("sheetAdded", this.getComponent());
  }
  ///////////////////////////////////
  ///////// Initialization //////////
  ///////////////////////////////////
  initialize() {
    this.initializeElement(), this.initializeColumns(), this.initializeRows();
  }
  reinitialize() {
    this.initializeColumns(), this.initializeRows();
  }
  initializeElement() {
    this.element = document.createElement("div"), this.element.classList.add("tabulator-spreadsheet-tab"), this.element.innerText = this.title, this.element.addEventListener("click", () => {
      this.spreadsheetManager.loadSheet(this);
    });
  }
  initializeColumns() {
    this.grid.setColumnCount(this.columnCount), this.columnFields = this.grid.genColumns(this.data), this.columnDefs = [], this.columnFields.forEach((e) => {
      var t = Object.assign({}, this.columnDefinition);
      t.field = e, t.title = e, this.columnDefs.push(t);
    });
  }
  initializeRows() {
    var e;
    this.grid.setRowCount(this.rowCount), e = this.grid.genRows(this.data), this.rowDefs = [], e.forEach((t, i) => {
      var s = { _id: t }, n = this.data[i];
      n && n.forEach((r, o) => {
        var a = this.columnFields[o];
        a && (s[a] = r);
      }), this.rowDefs.push(s);
    });
  }
  unload() {
    this.isActive = !1, this.scrollTop = this.table.rowManager.scrollTop, this.scrollLeft = this.table.rowManager.scrollLeft, this.data = this.getData(!0), this.element.classList.remove("tabulator-spreadsheet-tab-active");
  }
  load() {
    var e = !this.isActive;
    this.isActive = !0, this.table.blockRedraw(), this.table.setData([]), this.table.setColumns(this.columnDefs), this.table.setData(this.rowDefs), this.table.restoreRedraw(), e && this.scrollTop !== null && (this.table.rowManager.element.scrollLeft = this.scrollLeft, this.table.rowManager.element.scrollTop = this.scrollTop), this.element.classList.add("tabulator-spreadsheet-tab-active"), this.dispatchExternal("sheetLoaded", this.getComponent());
  }
  ///////////////////////////////////
  //////// Helper Functions /////////
  ///////////////////////////////////
  getComponent() {
    return new Qu(this);
  }
  getDefinition() {
    return {
      title: this.title,
      key: this.key,
      rows: this.rowCount,
      columns: this.columnCount,
      data: this.getData()
    };
  }
  getData(e) {
    var t = [], i, s, n;
    return this.rowDefs.forEach((r) => {
      var o = [];
      this.columnFields.forEach((a) => {
        o.push(r[a]);
      }), t.push(o);
    }), !e && !this.options("spreadsheetOutputFull") && (i = t.map((r) => r.findLastIndex((o) => typeof o < "u") + 1), s = Math.max(...i), n = i.findLastIndex((r) => r > 0) + 1, t = t.slice(0, n), t = t.map((r) => r.slice(0, s))), t;
  }
  setData(e) {
    this.data = e, this.reinitialize(), this.dispatchExternal("sheetUpdated", this.getComponent()), this.isActive && this.load();
  }
  clear() {
    this.setData([]);
  }
  setTitle(e) {
    this.title = e, this.element.innerText = e, this.dispatchExternal("sheetUpdated", this.getComponent());
  }
  setRows(e) {
    this.rowCount = e, this.initializeRows(), this.dispatchExternal("sheetUpdated", this.getComponent()), this.isActive && this.load();
  }
  setColumns(e) {
    this.columnCount = e, this.reinitialize(), this.dispatchExternal("sheetUpdated", this.getComponent()), this.isActive && this.load();
  }
  remove() {
    this.spreadsheetManager.removeSheet(this);
  }
  destroy() {
    this.element.parentNode && this.element.parentNode.removeChild(this.element), this.dispatchExternal("sheetRemoved", this.getComponent());
  }
  active() {
    this.spreadsheetManager.loadSheet(this);
  }
}
class Uu extends ne {
  constructor(e) {
    super(e), this.sheets = [], this.element = null, this.registerTableOption("spreadsheet", !1), this.registerTableOption("spreadsheetRows", 50), this.registerTableOption("spreadsheetColumns", 50), this.registerTableOption("spreadsheetColumnDefinition", {}), this.registerTableOption("spreadsheetOutputFull", !1), this.registerTableOption("spreadsheetData", !1), this.registerTableOption("spreadsheetSheets", !1), this.registerTableOption("spreadsheetSheetTabs", !1), this.registerTableOption("spreadsheetSheetTabsElement", !1), this.registerTableFunction("setSheets", this.setSheets.bind(this)), this.registerTableFunction("addSheet", this.addSheet.bind(this)), this.registerTableFunction("getSheets", this.getSheets.bind(this)), this.registerTableFunction("getSheetDefinitions", this.getSheetDefinitions.bind(this)), this.registerTableFunction("setSheetData", this.setSheetData.bind(this)), this.registerTableFunction("getSheet", this.getSheet.bind(this)), this.registerTableFunction("getSheetData", this.getSheetData.bind(this)), this.registerTableFunction("clearSheet", this.clearSheet.bind(this)), this.registerTableFunction("removeSheet", this.removeSheetFunc.bind(this)), this.registerTableFunction("activeSheet", this.activeSheetFunc.bind(this));
  }
  ///////////////////////////////////
  ////// Module Initialization //////
  ///////////////////////////////////
  initialize() {
    this.options("spreadsheet") && (this.subscribe("table-initialized", this.tableInitialized.bind(this)), this.subscribe("data-loaded", this.loadRemoteData.bind(this)), this.table.options.index = "_id", this.options("spreadsheetData") && this.options("spreadsheetSheets") && (console.warn("You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData"), this.table.options.spreadsheetData = !1), this.compatibilityCheck(), this.options("spreadsheetSheetTabs") && this.initializeTabset());
  }
  compatibilityCheck() {
    this.options("data") && console.warn("Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table"), this.options("pagination") && console.warn("The spreadsheet module is not compatible with the pagination module"), this.options("groupBy") && console.warn("The spreadsheet module is not compatible with the row grouping module"), this.options("responsiveCollapse") && console.warn("The spreadsheet module is not compatible with the responsive collapse module");
  }
  initializeTabset() {
    this.element = document.createElement("div"), this.element.classList.add("tabulator-spreadsheet-tabs");
    var e = this.options("spreadsheetSheetTabsElement");
    e && !(e instanceof HTMLElement) && (e = document.querySelector(e), e || console.warn("Unable to find element matching spreadsheetSheetTabsElement selector:", this.options("spreadsheetSheetTabsElement"))), e ? e.appendChild(this.element) : this.footerAppend(this.element);
  }
  tableInitialized() {
    this.sheets.length ? this.loadSheet(this.sheets[0]) : this.options("spreadsheetSheets") ? this.loadSheets(this.options("spreadsheetSheets")) : this.options("spreadsheetData") && this.loadData(this.options("spreadsheetData"));
  }
  ///////////////////////////////////
  /////////// Ajax Parsing //////////
  ///////////////////////////////////
  loadRemoteData(e, t, i) {
    return console.log("data", e, t, i), Array.isArray(e) ? (this.table.dataLoader.clearAlert(), this.dispatchExternal("dataLoaded", e), !e.length || Array.isArray(e[0]) ? this.loadData(e) : this.loadSheets(e)) : console.error(`Spreadsheet Loading Error - Unable to process remote data due to invalid data type 
Expecting: array 
Received: `, typeof e, `
Data:     `, e), !1;
  }
  ///////////////////////////////////
  ///////// Sheet Management ////////
  ///////////////////////////////////
  loadData(e) {
    var t = {
      data: e
    };
    this.loadSheet(this.newSheet(t));
  }
  destroySheets() {
    this.sheets.forEach((e) => {
      e.destroy();
    }), this.sheets = [], this.activeSheet = null;
  }
  loadSheets(e) {
    Array.isArray(e) || (e = []), this.destroySheets(), e.forEach((t) => {
      this.newSheet(t);
    }), this.loadSheet(this.sheets[0]);
  }
  loadSheet(e) {
    this.activeSheet !== e && (this.activeSheet && this.activeSheet.unload(), this.activeSheet = e, e.load());
  }
  newSheet(e = {}) {
    var t;
    return e.rows || (e.rows = this.options("spreadsheetRows")), e.columns || (e.columns = this.options("spreadsheetColumns")), t = new Vl(this, e), this.sheets.push(t), this.element && this.element.appendChild(t.element), t;
  }
  removeSheet(e) {
    var t = this.sheets.indexOf(e), i;
    this.sheets.length > 1 ? t > -1 && (this.sheets.splice(t, 1), e.destroy(), this.activeSheet === e && (i = this.sheets[t - 1] || this.sheets[0], i ? this.loadSheet(i) : this.activeSheet = null)) : console.warn("Unable to remove sheet, at least one sheet must be active");
  }
  lookupSheet(e) {
    return e ? e instanceof Vl ? e : e instanceof Qu ? e._sheet : this.sheets.find((t) => t.key === e) || !1 : this.activeSheet;
  }
  ///////////////////////////////////
  //////// Public Functions /////////
  ///////////////////////////////////
  setSheets(e) {
    return this.loadSheets(e), this.getSheets();
  }
  addSheet(e) {
    return this.newSheet(e).getComponent();
  }
  getSheetDefinitions() {
    return this.sheets.map((e) => e.getDefinition());
  }
  getSheets() {
    return this.sheets.map((e) => e.getComponent());
  }
  getSheet(e) {
    var t = this.lookupSheet(e);
    return t ? t.getComponent() : !1;
  }
  setSheetData(e, t) {
    e && !t && (t = e, e = !1);
    var i = this.lookupSheet(e);
    return i ? i.setData(t) : !1;
  }
  getSheetData(e) {
    var t = this.lookupSheet(e);
    return t ? t.getData() : !1;
  }
  clearSheet(e) {
    var t = this.lookupSheet(e);
    return t ? t.clear() : !1;
  }
  removeSheetFunc(e) {
    var t = this.lookupSheet(e);
    t && this.removeSheet(t);
  }
  activeSheetFunc(e) {
    var t = this.lookupSheet(e);
    return t ? this.loadSheet(t) : !1;
  }
}
D(Uu, "moduleName", "spreadsheet");
var ia;
let Yp = (ia = class extends ne {
  constructor(e) {
    super(e), this.tooltipSubscriber = null, this.headerSubscriber = null, this.timeout = null, this.popupInstance = null, this.registerTableOption("tooltipDelay", 300), this.registerColumnOption("tooltip"), this.registerColumnOption("headerTooltip");
  }
  initialize() {
    this.deprecatedOptionsCheck(), this.subscribe("column-init", this.initializeColumn.bind(this));
  }
  deprecatedOptionsCheck() {
  }
  initializeColumn(e) {
    e.definition.headerTooltip && !this.headerSubscriber && (this.headerSubscriber = !0, this.subscribe("column-mousemove", this.mousemoveCheck.bind(this, "headerTooltip")), this.subscribe("column-mouseout", this.mouseoutCheck.bind(this, "headerTooltip"))), e.definition.tooltip && !this.tooltipSubscriber && (this.tooltipSubscriber = !0, this.subscribe("cell-mousemove", this.mousemoveCheck.bind(this, "tooltip")), this.subscribe("cell-mouseout", this.mouseoutCheck.bind(this, "tooltip")));
  }
  mousemoveCheck(e, t, i) {
    var s = e === "tooltip" ? i.column.definition.tooltip : i.definition.headerTooltip;
    s && (this.clearPopup(), this.timeout = setTimeout(this.loadTooltip.bind(this, t, i, s), this.table.options.tooltipDelay));
  }
  mouseoutCheck(e, t, i) {
    this.popupInstance || this.clearPopup();
  }
  clearPopup(e, t, i) {
    clearTimeout(this.timeout), this.timeout = null, this.popupInstance && this.popupInstance.hide();
  }
  loadTooltip(e, t, i) {
    var s, n, r;
    function o(a) {
      n = a;
    }
    typeof i == "function" && (i = i(e, t.getComponent(), o)), i instanceof HTMLElement ? s = i : (s = document.createElement("div"), i === !0 && (t instanceof rn ? i = t.value : t.definition.field ? this.langBind("columns|" + t.definition.field, (a) => {
      s.innerHTML = i = a || t.definition.title;
    }) : i = t.definition.title), s.innerHTML = i), (i || i === 0 || i === !1) && (s.classList.add("tabulator-tooltip"), s.addEventListener("mousemove", (a) => a.preventDefault()), this.popupInstance = this.popup(s), typeof n == "function" && this.popupInstance.renderCallback(n), r = this.popupInstance.containerEventCoords(e), this.popupInstance.show(r.x + 15, r.y + 15).hideOnBlur(() => {
      this.dispatchExternal("TooltipClosed", t.getComponent()), this.popupInstance = null;
    }), this.dispatchExternal("TooltipOpened", t.getComponent()));
  }
}, D(ia, "moduleName", "tooltip"), ia);
var Jp = {
  //is integer
  integer: function(A, e, t) {
    return e === "" || e === null || typeof e > "u" ? !0 : (e = Number(e), !isNaN(e) && isFinite(e) && Math.floor(e) === e);
  },
  //is float
  float: function(A, e, t) {
    return e === "" || e === null || typeof e > "u" ? !0 : (e = Number(e), !isNaN(e) && isFinite(e) && e % 1 !== 0);
  },
  //must be a number
  numeric: function(A, e, t) {
    return e === "" || e === null || typeof e > "u" ? !0 : !isNaN(e);
  },
  //must be a string
  string: function(A, e, t) {
    return e === "" || e === null || typeof e > "u" ? !0 : isNaN(e);
  },
  //must be alphanumeric
  alphanumeric: function(A, e, t) {
    if (e === "" || e === null || typeof e > "u")
      return !0;
    var i = new RegExp(/^[a-z0-9]+$/i);
    return i.test(e);
  },
  //maximum value
  max: function(A, e, t) {
    return e === "" || e === null || typeof e > "u" ? !0 : parseFloat(e) <= t;
  },
  //minimum value
  min: function(A, e, t) {
    return e === "" || e === null || typeof e > "u" ? !0 : parseFloat(e) >= t;
  },
  //starts with  value
  starts: function(A, e, t) {
    return e === "" || e === null || typeof e > "u" ? !0 : String(e).toLowerCase().startsWith(String(t).toLowerCase());
  },
  //ends with  value
  ends: function(A, e, t) {
    return e === "" || e === null || typeof e > "u" ? !0 : String(e).toLowerCase().endsWith(String(t).toLowerCase());
  },
  //minimum string length
  minLength: function(A, e, t) {
    return e === "" || e === null || typeof e > "u" ? !0 : String(e).length >= t;
  },
  //maximum string length
  maxLength: function(A, e, t) {
    return e === "" || e === null || typeof e > "u" ? !0 : String(e).length <= t;
  },
  //in provided value list
  in: function(A, e, t) {
    return e === "" || e === null || typeof e > "u" ? !0 : (typeof t == "string" && (t = t.split("|")), t.indexOf(e) > -1);
  },
  //must match provided regex
  regex: function(A, e, t) {
    if (e === "" || e === null || typeof e > "u")
      return !0;
    var i = new RegExp(t);
    return i.test(e);
  },
  //value must be unique in this column
  unique: function(A, e, t) {
    if (e === "" || e === null || typeof e > "u")
      return !0;
    var i = !0, s = A.getData(), n = A.getColumn()._getSelf();
    return this.table.rowManager.rows.forEach(function(r) {
      var o = r.getData();
      o !== s && e == n.getFieldValue(o) && (i = !1);
    }), i;
  },
  //must have a value
  required: function(A, e, t) {
    return e !== "" && e !== null && typeof e < "u";
  }
};
const jA = class jA extends ne {
  constructor(e) {
    super(e), this.invalidCells = [], this.registerTableOption("validationMode", "blocking"), this.registerColumnOption("validator"), this.registerTableFunction("getInvalidCells", this.getInvalidCells.bind(this)), this.registerTableFunction("clearCellValidation", this.userClearCellValidation.bind(this)), this.registerTableFunction("validate", this.userValidate.bind(this)), this.registerComponentFunction("cell", "isValid", this.cellIsValid.bind(this)), this.registerComponentFunction("cell", "clearValidation", this.clearValidation.bind(this)), this.registerComponentFunction("cell", "validate", this.cellValidate.bind(this)), this.registerComponentFunction("column", "validate", this.columnValidate.bind(this)), this.registerComponentFunction("row", "validate", this.rowValidate.bind(this));
  }
  initialize() {
    this.subscribe("cell-delete", this.clearValidation.bind(this)), this.subscribe("column-layout", this.initializeColumnCheck.bind(this)), this.subscribe("edit-success", this.editValidate.bind(this)), this.subscribe("edit-editor-clear", this.editorClear.bind(this)), this.subscribe("edit-edited-clear", this.editedClear.bind(this));
  }
  ///////////////////////////////////
  ///////// Event Handling //////////
  ///////////////////////////////////
  editValidate(e, t, i) {
    var s = this.table.options.validationMode !== "manual" ? this.validate(e.column.modules.validate, e, t) : !0;
    return s !== !0 && setTimeout(() => {
      e.getElement().classList.add("tabulator-validation-fail"), this.dispatchExternal("validationFailed", e.getComponent(), t, s);
    }), s;
  }
  editorClear(e, t) {
    t && e.column.modules.validate && this.cellValidate(e), e.getElement().classList.remove("tabulator-validation-fail");
  }
  editedClear(e) {
    e.modules.validate && (e.modules.validate.invalid = !1);
  }
  ///////////////////////////////////
  ////////// Cell Functions /////////
  ///////////////////////////////////
  cellIsValid(e) {
    return e.modules.validate && e.modules.validate.invalid || !0;
  }
  cellValidate(e) {
    return this.validate(e.column.modules.validate, e, e.getValue());
  }
  ///////////////////////////////////
  ///////// Column Functions ////////
  ///////////////////////////////////
  columnValidate(e) {
    var t = [];
    return e.cells.forEach((i) => {
      this.cellValidate(i) !== !0 && t.push(i.getComponent());
    }), t.length ? t : !0;
  }
  ///////////////////////////////////
  ////////// Row Functions //////////
  ///////////////////////////////////
  rowValidate(e) {
    var t = [];
    return e.cells.forEach((i) => {
      this.cellValidate(i) !== !0 && t.push(i.getComponent());
    }), t.length ? t : !0;
  }
  ///////////////////////////////////
  ///////// Table Functions /////////
  ///////////////////////////////////
  userClearCellValidation(e) {
    e || (e = this.getInvalidCells()), Array.isArray(e) || (e = [e]), e.forEach((t) => {
      this.clearValidation(t._getSelf());
    });
  }
  userValidate(e) {
    var t = [];
    return this.table.rowManager.rows.forEach((i) => {
      i = i.getComponent();
      var s = i.validate();
      s !== !0 && (t = t.concat(s));
    }), t.length ? t : !0;
  }
  ///////////////////////////////////
  ///////// Internal Logic //////////
  ///////////////////////////////////
  initializeColumnCheck(e) {
    typeof e.definition.validator < "u" && this.initializeColumn(e);
  }
  //validate
  initializeColumn(e) {
    var t = this, i = [], s;
    e.definition.validator && (Array.isArray(e.definition.validator) ? e.definition.validator.forEach((n) => {
      s = t._extractValidator(n), s && i.push(s);
    }) : (s = this._extractValidator(e.definition.validator), s && i.push(s)), e.modules.validate = i.length ? i : !1);
  }
  _extractValidator(e) {
    var t, i, s;
    switch (typeof e) {
      case "string":
        return s = e.indexOf(":"), s > -1 ? (t = e.substring(0, s), i = e.substring(s + 1)) : t = e, this._buildValidator(t, i);
      case "function":
        return this._buildValidator(e);
      case "object":
        return this._buildValidator(e.type, e.parameters);
    }
  }
  _buildValidator(e, t) {
    var i = typeof e == "function" ? e : jA.validators[e];
    return i ? {
      type: typeof e == "function" ? "function" : e,
      func: i,
      params: t
    } : (console.warn("Validator Setup Error - No matching validator found:", e), !1);
  }
  validate(e, t, i) {
    var s = this, n = [], r = this.invalidCells.indexOf(t);
    return e && e.forEach((o) => {
      o.func.call(s, t.getComponent(), i, o.params) || n.push({
        type: o.type,
        parameters: o.params
      });
    }), t.modules.validate || (t.modules.validate = {}), n.length ? (t.modules.validate.invalid = n, this.table.options.validationMode !== "manual" && t.getElement().classList.add("tabulator-validation-fail"), r == -1 && this.invalidCells.push(t)) : (t.modules.validate.invalid = !1, t.getElement().classList.remove("tabulator-validation-fail"), r > -1 && this.invalidCells.splice(r, 1)), n.length ? n : !0;
  }
  getInvalidCells() {
    var e = [];
    return this.invalidCells.forEach((t) => {
      e.push(t.getComponent());
    }), e;
  }
  clearValidation(e) {
    var t;
    e.modules.validate && e.modules.validate.invalid && (e.getElement().classList.remove("tabulator-validation-fail"), e.modules.validate.invalid = !1, t = this.invalidCells.indexOf(e), t > -1 && this.invalidCells.splice(t, 1));
  }
};
D(jA, "moduleName", "validate"), //load defaults
D(jA, "validators", Jp);
let Qa = jA;
var wo = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  AccessorModule: ra,
  AjaxModule: la,
  ClipboardModule: ha,
  ColumnCalcsModule: ca,
  DataTreeModule: fu,
  DownloadModule: ua,
  EditModule: da,
  ExportModule: fa,
  FilterModule: ga,
  FormatModule: pa,
  FrozenColumnsModule: gu,
  FrozenRowsModule: pu,
  GroupRowsModule: mu,
  HistoryModule: ma,
  HtmlTableImportModule: bu,
  ImportModule: ba,
  InteractionModule: gp,
  KeybindingsModule: wa,
  MenuModule: wu,
  MoveColumnsModule: vu,
  MoveRowsModule: va,
  MutatorModule: Ba,
  PageModule: Ca,
  PersistenceModule: ya,
  PopupModule: Bu,
  PrintModule: Cu,
  ReactiveDataModule: yu,
  ResizeColumnsModule: Eu,
  ResizeRowsModule: Fu,
  ResizeTableModule: xu,
  ResponsiveLayoutModule: Ea,
  SelectRangeModule: hr,
  SelectRowModule: Fa,
  SortModule: xa,
  SpreadsheetModule: Uu,
  TooltipModule: Yp,
  ValidateModule: Qa
}), $p = {
  debugEventsExternal: !1,
  //flag to console log events
  debugEventsInternal: !1,
  //flag to console log events
  debugInvalidOptions: !0,
  //allow toggling of invalid option warnings
  debugInvalidComponentFuncs: !0,
  //allow toggling of invalid component warnings
  debugInitialization: !0,
  //allow toggling of pre initialization function call warnings
  debugDeprecation: !0,
  //allow toggling of deprecation warnings
  height: !1,
  //height of tabulator
  minHeight: !1,
  //minimum height of tabulator
  maxHeight: !1,
  //maximum height of tabulator
  columnHeaderVertAlign: "top",
  //vertical alignment of column headers
  popupContainer: !1,
  columns: [],
  //store for colum header info
  columnDefaults: {},
  //store column default props
  rowHeader: !1,
  data: !1,
  //default starting data
  autoColumns: !1,
  //build columns from data row structure
  autoColumnsDefinitions: !1,
  nestedFieldSeparator: ".",
  //separator for nested data
  footerElement: !1,
  //hold footer element
  index: "id",
  //filed for row index
  textDirection: "auto",
  addRowPos: "bottom",
  //position to insert blank rows, top|bottom
  headerVisible: !0,
  //hide header
  renderVertical: "virtual",
  renderHorizontal: "basic",
  renderVerticalBuffer: 0,
  // set virtual DOM buffer size
  scrollToRowPosition: "top",
  scrollToRowIfVisible: !0,
  scrollToColumnPosition: "left",
  scrollToColumnIfVisible: !0,
  rowFormatter: !1,
  rowFormatterPrint: null,
  rowFormatterClipboard: null,
  rowFormatterHtmlOutput: null,
  rowHeight: null,
  placeholder: !1,
  dataLoader: !0,
  dataLoaderLoading: !1,
  dataLoaderError: !1,
  dataLoaderErrorTimeout: 3e3,
  dataSendParams: {},
  dataReceiveParams: {},
  dependencies: {}
};
class _u {
  constructor(e, t, i = {}) {
    this.table = e, this.msgType = t, this.registeredDefaults = Object.assign({}, i);
  }
  register(e, t) {
    this.registeredDefaults[e] = t;
  }
  generate(e, t = {}) {
    var i = Object.assign({}, this.registeredDefaults), s = this.table.options.debugInvalidOptions || t.debugInvalidOptions === !0;
    Object.assign(i, e);
    for (let n in t)
      i.hasOwnProperty(n) || (s && console.warn("Invalid " + this.msgType + " option:", n), i[n] = t.key);
    for (let n in i)
      n in t ? i[n] = t[n] : Array.isArray(i[n]) ? i[n] = Object.assign([], i[n]) : typeof i[n] == "object" && i[n] !== null ? i[n] = Object.assign({}, i[n]) : typeof i[n] > "u" && delete i[n];
    return i;
  }
}
let Nr = class extends st {
  constructor(e) {
    super(e), this.elementVertical = e.rowManager.element, this.elementHorizontal = e.columnManager.element, this.tableElement = e.rowManager.tableElement, this.verticalFillMode = "fit";
  }
  ///////////////////////////////////
  /////// Internal Bindings /////////
  ///////////////////////////////////
  initialize() {
  }
  clearRows() {
  }
  clearColumns() {
  }
  reinitializeColumnWidths(e) {
  }
  renderRows() {
  }
  renderColumns() {
  }
  rerenderRows(e) {
    e && e();
  }
  rerenderColumns(e, t) {
  }
  renderRowCells(e) {
  }
  rerenderRowCells(e, t) {
  }
  scrollColumns(e, t) {
  }
  scrollRows(e, t) {
  }
  resize() {
  }
  scrollToRow(e) {
  }
  scrollToRowNearestTop(e) {
  }
  visibleRows(e) {
    return [];
  }
  ///////////////////////////////////
  //////// Helper Functions /////////
  ///////////////////////////////////
  rows() {
    return this.table.rowManager.getDisplayRows();
  }
  styleRow(e, t) {
    var i = e.getElement();
    t % 2 ? (i.classList.add("tabulator-row-even"), i.classList.remove("tabulator-row-odd")) : (i.classList.add("tabulator-row-odd"), i.classList.remove("tabulator-row-even"));
  }
  ///////////////////////////////////
  /////// External Triggers /////////
  /////// (DO NOT OVERRIDE) /////////
  ///////////////////////////////////
  clear() {
    this.clearRows(), this.clearColumns();
  }
  render() {
    this.renderRows(), this.renderColumns();
  }
  rerender(e) {
    this.rerenderRows(), this.rerenderColumns();
  }
  scrollToRowPosition(e, t, i) {
    var s = this.rows().indexOf(e), n = e.getElement(), r = 0;
    return new Promise((o, a) => {
      if (s > -1) {
        if (typeof i > "u" && (i = this.table.options.scrollToRowIfVisible), !i && Ee.elVisible(n) && (r = Ee.elOffset(n).top - Ee.elOffset(this.elementVertical).top, r > 0 && r < this.elementVertical.clientHeight - n.offsetHeight))
          return o(), !1;
        switch (typeof t > "u" && (t = this.table.options.scrollToRowPosition), t === "nearest" && (t = this.scrollToRowNearestTop(e) ? "top" : "bottom"), this.scrollToRow(e), t) {
          case "middle":
          case "center":
            this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight ? this.elementVertical.scrollTop = this.elementVertical.scrollTop + (n.offsetTop - this.elementVertical.scrollTop) - (this.elementVertical.scrollHeight - n.offsetTop) / 2 : this.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight / 2;
            break;
          case "bottom":
            this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight ? this.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - n.offsetTop) + n.offsetHeight : this.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + n.offsetHeight;
            break;
          case "top":
            this.elementVertical.scrollTop = n.offsetTop;
            break;
        }
        o();
      } else
        console.warn("Scroll Error - Row not visible"), a("Scroll Error - Row not visible");
    });
  }
};
class Zp extends Nr {
  constructor(e) {
    super(e);
  }
  renderRowCells(e, t) {
    const i = document.createDocumentFragment();
    e.cells.forEach((s) => {
      i.appendChild(s.getElement());
    }), e.element.appendChild(i), t || e.cells.forEach((s) => {
      s.cellRendered();
    });
  }
  reinitializeColumnWidths(e) {
    e.forEach(function(t) {
      t.reinitializeWidth();
    });
  }
}
class qp extends Nr {
  constructor(e) {
    super(e), this.leftCol = 0, this.rightCol = 0, this.scrollLeft = 0, this.vDomScrollPosLeft = 0, this.vDomScrollPosRight = 0, this.vDomPadLeft = 0, this.vDomPadRight = 0, this.fitDataColAvg = 0, this.windowBuffer = 200, this.visibleRows = null, this.initialized = !1, this.isFitData = !1, this.columns = [];
  }
  initialize() {
    this.compatibilityCheck(), this.layoutCheck(), this.vertScrollListen();
  }
  compatibilityCheck() {
    this.options("layout") == "fitDataTable" && console.warn("Horizontal Virtual DOM is not compatible with fitDataTable layout mode"), this.options("responsiveLayout") && console.warn("Horizontal Virtual DOM is not compatible with responsive columns"), this.options("rtl") && console.warn("Horizontal Virtual DOM is not currently compatible with RTL text direction");
  }
  layoutCheck() {
    this.isFitData = this.options("layout").startsWith("fitData");
  }
  vertScrollListen() {
    this.subscribe("scroll-vertical", this.clearVisRowCache.bind(this)), this.subscribe("data-refreshed", this.clearVisRowCache.bind(this));
  }
  clearVisRowCache() {
    this.visibleRows = null;
  }
  //////////////////////////////////////
  ///////// Public Functions ///////////
  //////////////////////////////////////
  renderColumns(e, t) {
    this.dataChange();
  }
  scrollColumns(e, t) {
    this.scrollLeft != e && (this.scrollLeft = e, this.scroll(e - (this.vDomScrollPosLeft + this.windowBuffer)));
  }
  calcWindowBuffer() {
    var e = this.elementVertical.clientWidth;
    this.table.columnManager.columnsByIndex.forEach((t) => {
      if (t.visible) {
        var i = t.getWidth();
        i > e && (e = i);
      }
    }), this.windowBuffer = e * 2;
  }
  rerenderColumns(e, t) {
    var i = {
      cols: this.columns,
      leftCol: this.leftCol,
      rightCol: this.rightCol
    }, s = 0;
    e && !this.initialized || (this.clear(), this.calcWindowBuffer(), this.scrollLeft = this.elementVertical.scrollLeft, this.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer, this.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer, this.table.columnManager.columnsByIndex.forEach((n) => {
      var r = {}, o;
      n.visible && (n.modules.frozen || (o = n.getWidth(), r.leftPos = s, r.rightPos = s + o, r.width = o, this.isFitData && (r.fitDataCheck = n.modules.vdomHoz ? n.modules.vdomHoz.fitDataCheck : !0), s + o > this.vDomScrollPosLeft && s < this.vDomScrollPosRight ? (this.leftCol == -1 && (this.leftCol = this.columns.length, this.vDomPadLeft = s), this.rightCol = this.columns.length) : this.leftCol !== -1 && (this.vDomPadRight += o), this.columns.push(n), n.modules.vdomHoz = r, s += o));
    }), this.tableElement.style.paddingLeft = this.vDomPadLeft + "px", this.tableElement.style.paddingRight = this.vDomPadRight + "px", this.initialized = !0, t || (!e || this.reinitChanged(i)) && this.reinitializeRows(), this.elementVertical.scrollLeft = this.scrollLeft);
  }
  renderRowCells(e) {
    if (this.initialized)
      this.initializeRow(e);
    else {
      const t = document.createDocumentFragment();
      e.cells.forEach((i) => {
        t.appendChild(i.getElement());
      }), e.element.appendChild(t), e.cells.forEach((i) => {
        i.cellRendered();
      });
    }
  }
  rerenderRowCells(e, t) {
    this.reinitializeRow(e, t);
  }
  reinitializeColumnWidths(e) {
    for (let t = this.leftCol; t <= this.rightCol; t++) {
      let i = this.columns[t];
      i && i.reinitializeWidth();
    }
  }
  //////////////////////////////////////
  //////// Internal Rendering //////////
  //////////////////////////////////////
  deinitialize() {
    this.initialized = !1;
  }
  clear() {
    this.columns = [], this.leftCol = -1, this.rightCol = 0, this.vDomScrollPosLeft = 0, this.vDomScrollPosRight = 0, this.vDomPadLeft = 0, this.vDomPadRight = 0;
  }
  dataChange() {
    var e = !1, t, i;
    if (this.isFitData) {
      if (this.table.columnManager.columnsByIndex.forEach((s) => {
        !s.definition.width && s.visible && (e = !0);
      }), e && this.table.rowManager.getDisplayRows().length && (this.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer, t = this.chain("rows-sample", [1], [], () => this.table.rowManager.getDisplayRows())[0], t)) {
        i = t.getElement(), t.generateCells(), this.tableElement.appendChild(i);
        for (let s = 0; s < t.cells.length; s++) {
          let n = t.cells[s];
          i.appendChild(n.getElement()), n.column.reinitializeWidth();
        }
        i.parentNode.removeChild(i), this.rerenderColumns(!1, !0);
      }
    } else
      this.options("layout") === "fitColumns" && (this.layoutRefresh(), this.rerenderColumns(!1, !0));
  }
  reinitChanged(e) {
    var t = !0;
    return e.cols.length !== this.columns.length || e.leftCol !== this.leftCol || e.rightCol !== this.rightCol ? !0 : (e.cols.forEach((i, s) => {
      i !== this.columns[s] && (t = !1);
    }), !t);
  }
  reinitializeRows() {
    var e = this.getVisibleRows(), t = this.table.rowManager.getRows().filter((i) => !e.includes(i));
    e.forEach((i) => {
      this.reinitializeRow(i, !0);
    }), t.forEach((i) => {
      i.deinitialize();
    });
  }
  getVisibleRows() {
    return this.visibleRows || (this.visibleRows = this.table.rowManager.getVisibleRows()), this.visibleRows;
  }
  scroll(e) {
    this.vDomScrollPosLeft += e, this.vDomScrollPosRight += e, Math.abs(e) > this.windowBuffer / 2 ? this.rerenderColumns() : e > 0 ? (this.addColRight(), this.removeColLeft()) : (this.addColLeft(), this.removeColRight());
  }
  colPositionAdjust(e, t, i) {
    for (let s = e; s < t; s++) {
      let n = this.columns[s];
      n.modules.vdomHoz.leftPos += i, n.modules.vdomHoz.rightPos += i;
    }
  }
  addColRight() {
    for (var e = !1, t = !0; t; ) {
      let i = this.columns[this.rightCol + 1];
      i && i.modules.vdomHoz.leftPos <= this.vDomScrollPosRight ? (e = !0, this.getVisibleRows().forEach((s) => {
        if (s.type !== "group") {
          var n = s.getCell(i);
          s.getElement().insertBefore(n.getElement(), s.getCell(this.columns[this.rightCol]).getElement().nextSibling), n.cellRendered();
        }
      }), this.fitDataColActualWidthCheck(i), this.rightCol++, this.getVisibleRows().forEach((s) => {
        s.type !== "group" && (s.modules.vdomHoz.rightCol = this.rightCol);
      }), this.rightCol >= this.columns.length - 1 ? this.vDomPadRight = 0 : this.vDomPadRight -= i.getWidth()) : t = !1;
    }
    e && (this.tableElement.style.paddingRight = this.vDomPadRight + "px");
  }
  addColLeft() {
    for (var e = !1, t = !0; t; ) {
      let i = this.columns[this.leftCol - 1];
      if (i)
        if (i.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft) {
          e = !0, this.getVisibleRows().forEach((n) => {
            if (n.type !== "group") {
              var r = n.getCell(i);
              n.getElement().insertBefore(r.getElement(), n.getCell(this.columns[this.leftCol]).getElement()), r.cellRendered();
            }
          }), this.leftCol--, this.getVisibleRows().forEach((n) => {
            n.type !== "group" && (n.modules.vdomHoz.leftCol = this.leftCol);
          }), this.leftCol <= 0 ? this.vDomPadLeft = 0 : this.vDomPadLeft -= i.getWidth();
          let s = this.fitDataColActualWidthCheck(i);
          s && (this.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + s, this.vDomPadRight -= s);
        } else
          t = !1;
      else
        t = !1;
    }
    e && (this.tableElement.style.paddingLeft = this.vDomPadLeft + "px");
  }
  removeColRight() {
    for (var e = !1, t = !0; t; ) {
      let i = this.columns[this.rightCol];
      i && i.modules.vdomHoz.leftPos > this.vDomScrollPosRight ? (e = !0, this.getVisibleRows().forEach((s) => {
        if (s.type !== "group") {
          var n = s.getCell(i);
          try {
            s.getElement().removeChild(n.getElement());
          } catch (r) {
            console.warn("Could not removeColRight", r.message);
          }
        }
      }), this.vDomPadRight += i.getWidth(), this.rightCol--, this.getVisibleRows().forEach((s) => {
        s.type !== "group" && (s.modules.vdomHoz.rightCol = this.rightCol);
      })) : t = !1;
    }
    e && (this.tableElement.style.paddingRight = this.vDomPadRight + "px");
  }
  removeColLeft() {
    for (var e = !1, t = !0; t; ) {
      let i = this.columns[this.leftCol];
      i && i.modules.vdomHoz.rightPos < this.vDomScrollPosLeft ? (e = !0, this.getVisibleRows().forEach((s) => {
        if (s.type !== "group") {
          var n = s.getCell(i);
          try {
            s.getElement().removeChild(n.getElement());
          } catch (r) {
            console.warn("Could not removeColLeft", r.message);
          }
        }
      }), this.vDomPadLeft += i.getWidth(), this.leftCol++, this.getVisibleRows().forEach((s) => {
        s.type !== "group" && (s.modules.vdomHoz.leftCol = this.leftCol);
      })) : t = !1;
    }
    e && (this.tableElement.style.paddingLeft = this.vDomPadLeft + "px");
  }
  fitDataColActualWidthCheck(e) {
    var t, i;
    return e.modules.vdomHoz.fitDataCheck && (e.reinitializeWidth(), t = e.getWidth(), i = t - e.modules.vdomHoz.width, i && (e.modules.vdomHoz.rightPos += i, e.modules.vdomHoz.width = t, this.colPositionAdjust(this.columns.indexOf(e) + 1, this.columns.length, i)), e.modules.vdomHoz.fitDataCheck = !1), i;
  }
  initializeRow(e) {
    if (e.type !== "group") {
      e.modules.vdomHoz = {
        leftCol: this.leftCol,
        rightCol: this.rightCol
      }, this.table.modules.frozenColumns && this.table.modules.frozenColumns.leftColumns.forEach((t) => {
        this.appendCell(e, t);
      });
      for (let t = this.leftCol; t <= this.rightCol; t++)
        this.appendCell(e, this.columns[t]);
      this.table.modules.frozenColumns && this.table.modules.frozenColumns.rightColumns.forEach((t) => {
        this.appendCell(e, t);
      });
    }
  }
  appendCell(e, t) {
    if (t && t.visible) {
      let i = e.getCell(t);
      e.getElement().appendChild(i.getElement()), i.cellRendered();
    }
  }
  reinitializeRow(e, t) {
    if (e.type !== "group" && (t || !e.modules.vdomHoz || e.modules.vdomHoz.leftCol !== this.leftCol || e.modules.vdomHoz.rightCol !== this.rightCol)) {
      for (var i = e.getElement(); i.firstChild; ) i.removeChild(i.firstChild);
      this.initializeRow(e);
    }
  }
}
class em extends st {
  constructor(e) {
    super(e), this.blockHozScrollEvent = !1, this.headersElement = null, this.contentsElement = null, this.rowHeader = null, this.element = null, this.columns = [], this.columnsByIndex = [], this.columnsByField = {}, this.scrollLeft = 0, this.optionsList = new _u(this.table, "column definition", du), this.redrawBlock = !1, this.redrawBlockUpdate = null, this.renderer = null;
  }
  ////////////// Setup Functions /////////////////
  initialize() {
    this.initializeRenderer(), this.headersElement = this.createHeadersElement(), this.contentsElement = this.createHeaderContentsElement(), this.element = this.createHeaderElement(), this.contentsElement.insertBefore(this.headersElement, this.contentsElement.firstChild), this.element.insertBefore(this.contentsElement, this.element.firstChild), this.initializeScrollWheelWatcher(), this.subscribe("scroll-horizontal", this.scrollHorizontal.bind(this)), this.subscribe("scrollbar-vertical", this.padVerticalScrollbar.bind(this));
  }
  padVerticalScrollbar(e) {
    this.table.rtl ? this.headersElement.style.marginLeft = e + "px" : this.headersElement.style.marginRight = e + "px";
  }
  initializeRenderer() {
    var e, t = {
      virtual: qp,
      basic: Zp
    };
    typeof this.table.options.renderHorizontal == "string" ? e = t[this.table.options.renderHorizontal] : e = this.table.options.renderHorizontal, e ? (this.renderer = new e(this.table, this.element, this.tableElement), this.renderer.initialize()) : console.error("Unable to find matching renderer:", this.table.options.renderHorizontal);
  }
  createHeadersElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-headers"), e.setAttribute("role", "row"), e;
  }
  createHeaderContentsElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-header-contents"), e.setAttribute("role", "rowgroup"), e;
  }
  createHeaderElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-header"), e.setAttribute("role", "rowgroup"), this.table.options.headerVisible || e.classList.add("tabulator-header-hidden"), e;
  }
  //return containing element
  getElement() {
    return this.element;
  }
  //return containing contents element
  getContentsElement() {
    return this.contentsElement;
  }
  //return header containing element
  getHeadersElement() {
    return this.headersElement;
  }
  //scroll horizontally to match table body
  scrollHorizontal(e) {
    this.contentsElement.scrollLeft = e, this.scrollLeft = e, this.renderer.scrollColumns(e);
  }
  initializeScrollWheelWatcher() {
    this.contentsElement.addEventListener("wheel", (e) => {
      var t;
      e.deltaX && (t = this.contentsElement.scrollLeft + e.deltaX, this.table.rowManager.scrollHorizontal(t), this.table.columnManager.scrollHorizontal(t));
    });
  }
  ///////////// Column Setup Functions /////////////
  generateColumnsFromRowData(e) {
    var t = [], i = {}, s = this.table.options.autoColumns === "full" ? e : [e[0]], n = this.table.options.autoColumnsDefinitions;
    if (e && e.length) {
      if (s.forEach((r) => {
        Object.keys(r).forEach((o, a) => {
          let l = r[o], h;
          i[o] ? i[o] !== !0 && typeof l < "u" && (i[o].sorter = this.calculateSorterFromValue(l), i[o] = !0) : (h = {
            field: o,
            title: o,
            sorter: this.calculateSorterFromValue(l)
          }, t.splice(a, 0, h), i[o] = typeof l > "u" ? h : !0);
        });
      }), n)
        switch (typeof n) {
          case "function":
            this.table.options.columns = n.call(this.table, t);
            break;
          case "object":
            Array.isArray(n) ? t.forEach((r) => {
              var o = n.find((a) => a.field === r.field);
              o && Object.assign(r, o);
            }) : t.forEach((r) => {
              n[r.field] && Object.assign(r, n[r.field]);
            }), this.table.options.columns = t;
            break;
        }
      else
        this.table.options.columns = t;
      this.setColumns(this.table.options.columns);
    }
  }
  calculateSorterFromValue(e) {
    var t;
    switch (typeof e) {
      case "undefined":
        t = "string";
        break;
      case "boolean":
        t = "boolean";
        break;
      case "number":
        t = "number";
        break;
      case "object":
        Array.isArray(e) ? t = "array" : t = "string";
        break;
      default:
        !isNaN(e) && e !== "" ? t = "number" : e.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i) ? t = "alphanum" : t = "string";
        break;
    }
    return t;
  }
  setColumns(e, t) {
    for (; this.headersElement.firstChild; ) this.headersElement.removeChild(this.headersElement.firstChild);
    this.columns = [], this.columnsByIndex = [], this.columnsByField = {}, this.dispatch("columns-loading"), this.dispatchExternal("columnsLoading"), this.table.options.rowHeader && (this.rowHeader = new ps(this.table.options.rowHeader === !0 ? {} : this.table.options.rowHeader, this, !0), this.columns.push(this.rowHeader), this.headersElement.appendChild(this.rowHeader.getElement()), this.rowHeader.columnRendered()), e.forEach((i, s) => {
      this._addColumn(i);
    }), this._reIndexColumns(), this.dispatch("columns-loaded"), this.subscribedExternal("columnsLoaded") && this.dispatchExternal("columnsLoaded", this.getComponents()), this.rerenderColumns(!1, !0), this.redraw(!0);
  }
  _addColumn(e, t, i) {
    var s = new ps(e, this), n = s.getElement(), r = i && this.findColumnIndex(i);
    if (t && this.rowHeader && (!i || i === this.rowHeader) && (t = !1, i = this.rowHeader, r = 0), i && r > -1) {
      var o = i.getTopColumn(), a = this.columns.indexOf(o), l = o.getElement();
      t ? (this.columns.splice(a, 0, s), l.parentNode.insertBefore(n, l)) : (this.columns.splice(a + 1, 0, s), l.parentNode.insertBefore(n, l.nextSibling));
    } else
      t ? (this.columns.unshift(s), this.headersElement.insertBefore(s.getElement(), this.headersElement.firstChild)) : (this.columns.push(s), this.headersElement.appendChild(s.getElement()));
    return s.columnRendered(), s;
  }
  registerColumnField(e) {
    e.definition.field && (this.columnsByField[e.definition.field] = e);
  }
  registerColumnPosition(e) {
    this.columnsByIndex.push(e);
  }
  _reIndexColumns() {
    this.columnsByIndex = [], this.columns.forEach(function(e) {
      e.reRegisterPosition();
    });
  }
  //ensure column headers take up the correct amount of space in column groups
  verticalAlignHeaders() {
    var e = 0;
    this.redrawBlock || (this.headersElement.style.height = "", this.columns.forEach((t) => {
      t.clearVerticalAlign();
    }), this.columns.forEach((t) => {
      var i = t.getHeight();
      i > e && (e = i);
    }), this.headersElement.style.height = e + "px", this.columns.forEach((t) => {
      t.verticalAlign(this.table.options.columnHeaderVertAlign, e);
    }), this.table.rowManager.adjustTableSize());
  }
  //////////////// Column Details /////////////////
  findColumn(e) {
    var t;
    if (typeof e == "object") {
      if (e instanceof ps)
        return e;
      if (e instanceof uu)
        return e._getSelf() || !1;
      if (typeof HTMLElement < "u" && e instanceof HTMLElement)
        return t = [], this.columns.forEach((s) => {
          t.push(s), t = t.concat(s.getColumns(!0));
        }), t.find((s) => s.element === e) || !1;
    } else
      return this.columnsByField[e] || !1;
    return !1;
  }
  getColumnByField(e) {
    return this.columnsByField[e];
  }
  getColumnsByFieldRoot(e) {
    var t = [];
    return Object.keys(this.columnsByField).forEach((i) => {
      var s = this.table.options.nestedFieldSeparator ? i.split(this.table.options.nestedFieldSeparator)[0] : i;
      s === e && t.push(this.columnsByField[i]);
    }), t;
  }
  getColumnByIndex(e) {
    return this.columnsByIndex[e];
  }
  getFirstVisibleColumn() {
    var e = this.columnsByIndex.findIndex((t) => t.visible);
    return e > -1 ? this.columnsByIndex[e] : !1;
  }
  getVisibleColumnsByIndex() {
    return this.columnsByIndex.filter((e) => e.visible);
  }
  getColumns() {
    return this.columns;
  }
  findColumnIndex(e) {
    return this.columnsByIndex.findIndex((t) => e === t);
  }
  //return all columns that are not groups
  getRealColumns() {
    return this.columnsByIndex;
  }
  //traverse across columns and call action
  traverse(e) {
    this.columnsByIndex.forEach((t, i) => {
      e(t, i);
    });
  }
  //get definitions of actual columns
  getDefinitions(e) {
    var t = [];
    return this.columnsByIndex.forEach((i) => {
      (!e || e && i.visible) && t.push(i.getDefinition());
    }), t;
  }
  //get full nested definition tree
  getDefinitionTree() {
    var e = [];
    return this.columns.forEach((t) => {
      e.push(t.getDefinition(!0));
    }), e;
  }
  getComponents(e) {
    var t = [], i = e ? this.columns : this.columnsByIndex;
    return i.forEach((s) => {
      t.push(s.getComponent());
    }), t;
  }
  getWidth() {
    var e = 0;
    return this.columnsByIndex.forEach((t) => {
      t.visible && (e += t.getWidth());
    }), e;
  }
  moveColumn(e, t, i) {
    t.element.parentNode.insertBefore(e.element, t.element), i && t.element.parentNode.insertBefore(t.element, e.element), this.moveColumnActual(e, t, i), this.verticalAlignHeaders(), this.table.rowManager.reinitialize();
  }
  moveColumnActual(e, t, i) {
    e.parent.isGroup ? this._moveColumnInArray(e.parent.columns, e, t, i) : this._moveColumnInArray(this.columns, e, t, i), this._moveColumnInArray(this.columnsByIndex, e, t, i, !0), this.rerenderColumns(!0), this.dispatch("column-moved", e, t, i), this.subscribedExternal("columnMoved") && this.dispatchExternal("columnMoved", e.getComponent(), this.table.columnManager.getComponents());
  }
  _moveColumnInArray(e, t, i, s, n) {
    var r = e.indexOf(t), o, a = [];
    r > -1 && (e.splice(r, 1), o = e.indexOf(i), o > -1 ? s && (o = o + 1) : o = r, e.splice(o, 0, t), n && (a = this.chain("column-moving-rows", [t, i, s], null, []) || [], a = a.concat(this.table.rowManager.rows), a.forEach(function(l) {
      if (l.cells.length) {
        var h = l.cells.splice(r, 1)[0];
        l.cells.splice(o, 0, h);
      }
    })));
  }
  scrollToColumn(e, t, i) {
    var s = 0, n = e.getLeftOffset(), r = 0, o = e.getElement();
    return new Promise((a, l) => {
      if (typeof t > "u" && (t = this.table.options.scrollToColumnPosition), typeof i > "u" && (i = this.table.options.scrollToColumnIfVisible), e.visible) {
        switch (t) {
          case "middle":
          case "center":
            r = -this.element.clientWidth / 2;
            break;
          case "right":
            r = o.clientWidth - this.headersElement.clientWidth;
            break;
        }
        if (!i && n > 0 && n + o.offsetWidth < this.element.clientWidth)
          return !1;
        s = n + r, s = Math.max(Math.min(s, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth), 0), this.table.rowManager.scrollHorizontal(s), this.scrollHorizontal(s), a();
      } else
        console.warn("Scroll Error - Column not visible"), l("Scroll Error - Column not visible");
    });
  }
  //////////////// Cell Management /////////////////
  generateCells(e) {
    var t = [];
    return this.columnsByIndex.forEach((i) => {
      t.push(i.generateCell(e));
    }), t;
  }
  //////////////// Column Management /////////////////
  getFlexBaseWidth() {
    var e = this.table.element.clientWidth, t = 0;
    return this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight && (e -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth), this.columnsByIndex.forEach(function(i) {
      var s, n, r;
      i.visible && (s = i.definition.width || 0, n = parseInt(i.minWidth), typeof s == "string" ? s.indexOf("%") > -1 ? r = e / 100 * parseInt(s) : r = parseInt(s) : r = s, t += r > n ? r : n);
    }), t;
  }
  addColumn(e, t, i) {
    return new Promise((s, n) => {
      var r = this._addColumn(e, t, i);
      this._reIndexColumns(), this.dispatch("column-add", e, t, i), this.layoutMode() != "fitColumns" && r.reinitializeWidth(), this.redraw(!0), this.table.rowManager.reinitialize(), this.rerenderColumns(), s(r);
    });
  }
  //remove column from system
  deregisterColumn(e) {
    var t = e.getField(), i;
    t && delete this.columnsByField[t], i = this.columnsByIndex.indexOf(e), i > -1 && this.columnsByIndex.splice(i, 1), i = this.columns.indexOf(e), i > -1 && this.columns.splice(i, 1), this.verticalAlignHeaders(), this.redraw();
  }
  rerenderColumns(e, t) {
    this.redrawBlock ? (e === !1 || e === !0 && this.redrawBlockUpdate === null) && (this.redrawBlockUpdate = e) : this.renderer.rerenderColumns(e, t);
  }
  blockRedraw() {
    this.redrawBlock = !0, this.redrawBlockUpdate = null;
  }
  restoreRedraw() {
    this.redrawBlock = !1, this.verticalAlignHeaders(), this.renderer.rerenderColumns(this.redrawBlockUpdate);
  }
  //redraw columns
  redraw(e) {
    Ee.elVisible(this.element) && this.verticalAlignHeaders(), e && (this.table.rowManager.resetScroll(), this.table.rowManager.reinitialize()), this.confirm("table-redrawing", e) || this.layoutRefresh(e), this.dispatch("table-redraw", e), this.table.footerManager.redraw();
  }
}
class tm extends Nr {
  constructor(e) {
    super(e), this.verticalFillMode = "fill", this.scrollTop = 0, this.scrollLeft = 0, this.scrollTop = 0, this.scrollLeft = 0;
  }
  clearRows() {
    for (var e = this.tableElement; e.firstChild; ) e.removeChild(e.firstChild);
    e.scrollTop = 0, e.scrollLeft = 0, e.style.minWidth = "", e.style.minHeight = "", e.style.display = "", e.style.visibility = "";
  }
  renderRows() {
    var e = this.tableElement, t = !0, i = document.createDocumentFragment(), s = this.rows();
    s.forEach((n, r) => {
      this.styleRow(n, r), n.initialize(!1, !0), n.type !== "group" && (t = !1), i.appendChild(n.getElement());
    }), e.appendChild(i), s.forEach((n) => {
      n.rendered(), n.heightInitialized || n.calcHeight(!0);
    }), s.forEach((n) => {
      n.heightInitialized || n.setCellHeight();
    }), t ? e.style.minWidth = this.table.columnManager.getWidth() + "px" : e.style.minWidth = "";
  }
  rerenderRows(e) {
    this.clearRows(), e && e(), this.renderRows(), this.rows().length || this.table.rowManager.tableEmpty();
  }
  scrollToRowNearestTop(e) {
    var t = Ee.elOffset(e.getElement()).top;
    return !(Math.abs(this.elementVertical.scrollTop - t) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - t));
  }
  scrollToRow(e) {
    var t = e.getElement();
    this.elementVertical.scrollTop = Ee.elOffset(t).top - Ee.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;
  }
  visibleRows(e) {
    return this.rows();
  }
}
class im extends Nr {
  constructor(e) {
    super(e), this.verticalFillMode = "fill", this.scrollTop = 0, this.scrollLeft = 0, this.vDomRowHeight = 20, this.vDomTop = 0, this.vDomBottom = 0, this.vDomScrollPosTop = 0, this.vDomScrollPosBottom = 0, this.vDomTopPad = 0, this.vDomBottomPad = 0, this.vDomMaxRenderChain = 90, this.vDomWindowBuffer = 0, this.vDomWindowMinTotalRows = 20, this.vDomWindowMinMarginRows = 5, this.vDomTopNewRows = [], this.vDomBottomNewRows = [];
  }
  //////////////////////////////////////
  ///////// Public Functions ///////////
  //////////////////////////////////////
  clearRows() {
    for (var e = this.tableElement; e.firstChild; ) e.removeChild(e.firstChild);
    e.style.paddingTop = "", e.style.paddingBottom = "", e.style.minHeight = "", e.style.display = "", e.style.visibility = "", this.elementVertical.scrollTop = 0, this.elementVertical.scrollLeft = 0, this.scrollTop = 0, this.scrollLeft = 0, this.vDomTop = 0, this.vDomBottom = 0, this.vDomTopPad = 0, this.vDomBottomPad = 0, this.vDomScrollPosTop = 0, this.vDomScrollPosBottom = 0;
  }
  renderRows() {
    this._virtualRenderFill();
  }
  rerenderRows(e) {
    for (var t = this.elementVertical.scrollTop, i = !1, s = !1, n = this.table.rowManager.scrollLeft, r = this.rows(), o = this.vDomTop; o <= this.vDomBottom; o++)
      if (r[o]) {
        var a = t - r[o].getElement().offsetTop;
        if (s === !1 || Math.abs(a) < s)
          s = a, i = o;
        else
          break;
      }
    r.forEach((l) => {
      l.deinitializeHeight();
    }), e && e(), this.rows().length ? this._virtualRenderFill(i === !1 ? this.rows.length - 1 : i, !0, s || 0) : (this.clear(), this.table.rowManager.tableEmpty()), this.scrollColumns(n);
  }
  scrollColumns(e) {
    this.table.rowManager.scrollHorizontal(e);
  }
  scrollRows(e, t) {
    var i = e - this.vDomScrollPosTop, s = e - this.vDomScrollPosBottom, n = this.vDomWindowBuffer * 2, r = this.rows();
    if (this.scrollTop = e, -i > n || s > n) {
      var o = this.table.rowManager.scrollLeft;
      this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop / this.elementVertical.scrollHeight * r.length)), this.scrollColumns(o);
    } else
      t ? (i < 0 && this._addTopRow(r, -i), s < 0 && (this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer ? this._removeBottomRow(r, -s) : this.vDomScrollPosBottom = this.scrollTop)) : (s >= 0 && this._addBottomRow(r, s), i >= 0 && (this.scrollTop > this.vDomWindowBuffer ? this._removeTopRow(r, i) : this.vDomScrollPosTop = this.scrollTop));
  }
  resize() {
    this.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;
  }
  scrollToRowNearestTop(e) {
    var t = this.rows().indexOf(e);
    return !(Math.abs(this.vDomTop - t) > Math.abs(this.vDomBottom - t));
  }
  scrollToRow(e) {
    var t = this.rows().indexOf(e);
    t > -1 && this._virtualRenderFill(t, !0);
  }
  visibleRows(e) {
    var t = this.elementVertical.scrollTop, i = this.elementVertical.clientHeight + t, s = !1, n = 0, r = 0, o = this.rows();
    if (e)
      n = this.vDomTop, r = this.vDomBottom;
    else
      for (var a = this.vDomTop; a <= this.vDomBottom; a++)
        if (o[a])
          if (s)
            if (i - o[a].getElement().offsetTop >= 0)
              r = a;
            else
              break;
          else if (t - o[a].getElement().offsetTop >= 0)
            n = a;
          else if (s = !0, i - o[a].getElement().offsetTop >= 0)
            r = a;
          else
            break;
    return o.slice(n, r + 1);
  }
  //////////////////////////////////////
  //////// Internal Rendering //////////
  //////////////////////////////////////
  //full virtual render
  _virtualRenderFill(e, t, i) {
    var s = this.tableElement, n = this.elementVertical, r = 0, o = 0, a = 0, l = 0, h = 0, c = 0, u = this.rows(), d = u.length, f = 0, p, b, w = [], C = 0, x = 0, U = this.table.rowManager.fixedHeight, E = this.elementVertical.clientHeight, H = this.table.options.rowHeight, T = !0;
    if (e = e || 0, i = i || 0, !e)
      this.clear();
    else {
      for (; s.firstChild; ) s.removeChild(s.firstChild);
      l = (d - e + 1) * this.vDomRowHeight, l < E && (e -= Math.ceil((E - l) / this.vDomRowHeight), e < 0 && (e = 0)), r = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight), this.vDomWindowMinMarginRows), e), e -= r;
    }
    if (d && Ee.elVisible(this.elementVertical)) {
      for (this.vDomTop = e, this.vDomBottom = e - 1, U || this.table.options.maxHeight ? (H && (x = E / H + this.vDomWindowBuffer / H), x = Math.max(this.vDomWindowMinTotalRows, Math.ceil(x))) : x = d; (x == d || o <= E + this.vDomWindowBuffer || C < this.vDomWindowMinTotalRows) && this.vDomBottom < d - 1; ) {
        for (w = [], b = document.createDocumentFragment(), c = 0; c < x && this.vDomBottom < d - 1; )
          f = this.vDomBottom + 1, p = u[f], this.styleRow(p, f), p.initialize(!1, !0), !p.heightInitialized && !this.table.options.rowHeight && p.clearCellHeight(), b.appendChild(p.getElement()), w.push(p), this.vDomBottom++, c++;
        if (!w.length)
          break;
        s.appendChild(b), w.forEach((S) => {
          S.rendered(), S.heightInitialized || S.calcHeight(!0);
        }), w.forEach((S) => {
          S.heightInitialized || S.setCellHeight();
        }), w.forEach((S) => {
          a = S.getHeight(), C < r ? h += a : o += a, a > this.vDomWindowBuffer && (this.vDomWindowBuffer = a * 2), C++;
        }), T = this.table.rowManager.adjustTableSize(), E = this.elementVertical.clientHeight, T && (U || this.table.options.maxHeight) && (H = o / C, x = Math.max(this.vDomWindowMinTotalRows, Math.ceil(E / H + this.vDomWindowBuffer / H)));
      }
      e ? (this.vDomTopPad = t ? this.vDomRowHeight * this.vDomTop + i : this.scrollTop - h, this.vDomBottomPad = this.vDomBottom == d - 1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - o - h, 0)) : (this.vDomTopPad = 0, this.vDomRowHeight = Math.floor((o + h) / C), this.vDomBottomPad = this.vDomRowHeight * (d - this.vDomBottom - 1), this.vDomScrollHeight = h + o + this.vDomBottomPad - E), s.style.paddingTop = this.vDomTopPad + "px", s.style.paddingBottom = this.vDomBottomPad + "px", t && (this.scrollTop = this.vDomTopPad + h + i - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - E : 0)), this.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - E), this.elementVertical.scrollWidth > this.elementVertical.clientWidth && t && (this.scrollTop += this.elementVertical.offsetHeight - E), this.vDomScrollPosTop = this.scrollTop, this.vDomScrollPosBottom = this.scrollTop, n.scrollTop = this.scrollTop, this.dispatch("render-virtual-fill");
    }
  }
  _addTopRow(e, t) {
    for (var i = this.tableElement, s = [], n = 0, r = this.vDomTop - 1, o = 0, a = !0; a; )
      if (this.vDomTop) {
        let l = e[r], h, c;
        l && o < this.vDomMaxRenderChain ? (h = l.getHeight() || this.vDomRowHeight, c = l.initialized, t >= h ? (this.styleRow(l, r), i.insertBefore(l.getElement(), i.firstChild), (!l.initialized || !l.heightInitialized) && s.push(l), l.initialize(), c || (h = l.getElement().offsetHeight, h > this.vDomWindowBuffer && (this.vDomWindowBuffer = h * 2)), t -= h, n += h, this.vDomTop--, r--, o++) : a = !1) : a = !1;
      } else
        a = !1;
    for (let l of s)
      l.clearCellHeight();
    this._quickNormalizeRowHeight(s), n && (this.vDomTopPad -= n, this.vDomTopPad < 0 && (this.vDomTopPad = r * this.vDomRowHeight), r < 1 && (this.vDomTopPad = 0), i.style.paddingTop = this.vDomTopPad + "px", this.vDomScrollPosTop -= n);
  }
  _removeTopRow(e, t) {
    for (var i = [], s = 0, n = 0, r = !0; r; ) {
      let o = e[this.vDomTop], a;
      o && n < this.vDomMaxRenderChain ? (a = o.getHeight() || this.vDomRowHeight, t >= a ? (this.vDomTop++, t -= a, s += a, i.push(o), n++) : r = !1) : r = !1;
    }
    for (let o of i) {
      let a = o.getElement();
      a.parentNode && a.parentNode.removeChild(a);
    }
    s && (this.vDomTopPad += s, this.tableElement.style.paddingTop = this.vDomTopPad + "px", this.vDomScrollPosTop += this.vDomTop ? s : s + this.vDomWindowBuffer);
  }
  _addBottomRow(e, t) {
    for (var i = this.tableElement, s = [], n = 0, r = this.vDomBottom + 1, o = 0, a = !0; a; ) {
      let l = e[r], h, c;
      l && o < this.vDomMaxRenderChain ? (h = l.getHeight() || this.vDomRowHeight, c = l.initialized, t >= h ? (this.styleRow(l, r), i.appendChild(l.getElement()), (!l.initialized || !l.heightInitialized) && s.push(l), l.initialize(), c || (h = l.getElement().offsetHeight, h > this.vDomWindowBuffer && (this.vDomWindowBuffer = h * 2)), t -= h, n += h, this.vDomBottom++, r++, o++) : a = !1) : a = !1;
    }
    for (let l of s)
      l.clearCellHeight();
    this._quickNormalizeRowHeight(s), n && (this.vDomBottomPad -= n, (this.vDomBottomPad < 0 || r == e.length - 1) && (this.vDomBottomPad = 0), i.style.paddingBottom = this.vDomBottomPad + "px", this.vDomScrollPosBottom += n);
  }
  _removeBottomRow(e, t) {
    for (var i = [], s = 0, n = 0, r = !0; r; ) {
      let o = e[this.vDomBottom], a;
      o && n < this.vDomMaxRenderChain ? (a = o.getHeight() || this.vDomRowHeight, t >= a ? (this.vDomBottom--, t -= a, s += a, i.push(o), n++) : r = !1) : r = !1;
    }
    for (let o of i) {
      let a = o.getElement();
      a.parentNode && a.parentNode.removeChild(a);
    }
    s && (this.vDomBottomPad += s, this.vDomBottomPad < 0 && (this.vDomBottomPad = 0), this.tableElement.style.paddingBottom = this.vDomBottomPad + "px", this.vDomScrollPosBottom -= s);
  }
  _quickNormalizeRowHeight(e) {
    for (let t of e)
      t.calcHeight();
    for (let t of e)
      t.setCellHeight();
  }
}
class sm extends st {
  constructor(e) {
    super(e), this.element = this.createHolderElement(), this.tableElement = this.createTableElement(), this.heightFixer = this.createTableElement(), this.placeholder = null, this.placeholderContents = null, this.firstRender = !1, this.renderMode = "virtual", this.fixedHeight = !1, this.rows = [], this.activeRowsPipeline = [], this.activeRows = [], this.activeRowsCount = 0, this.displayRows = [], this.displayRowsCount = 0, this.scrollTop = 0, this.scrollLeft = 0, this.redrawBlock = !1, this.redrawBlockRestoreConfig = !1, this.redrawBlockRenderInPosition = !1, this.dataPipeline = [], this.displayPipeline = [], this.scrollbarWidth = 0, this.renderer = null;
  }
  //////////////// Setup Functions /////////////////
  createHolderElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-tableholder"), e.setAttribute("tabindex", 0), e;
  }
  createTableElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-table"), e.setAttribute("role", "rowgroup"), e;
  }
  initializePlaceholder() {
    var e = this.table.options.placeholder;
    if (typeof e == "function" && (e = e.call(this.table)), e = this.chain("placeholder", [e], e, e) || e, e) {
      let t = document.createElement("div");
      if (t.classList.add("tabulator-placeholder"), typeof e == "string") {
        let i = document.createElement("div");
        i.classList.add("tabulator-placeholder-contents"), i.innerHTML = e, t.appendChild(i), this.placeholderContents = i;
      } else typeof HTMLElement < "u" && e instanceof HTMLElement ? (t.appendChild(e), this.placeholderContents = e) : (console.warn("Invalid placeholder provided, must be string or HTML Element", e), this.el = null);
      this.placeholder = t;
    }
  }
  //return containing element
  getElement() {
    return this.element;
  }
  //return table element
  getTableElement() {
    return this.tableElement;
  }
  initialize() {
    this.initializePlaceholder(), this.initializeRenderer(), this.element.appendChild(this.tableElement), this.firstRender = !0, this.element.addEventListener("scroll", () => {
      var e = this.element.scrollLeft, t = this.scrollLeft > e, i = this.element.scrollTop, s = this.scrollTop > i;
      this.scrollLeft != e && (this.scrollLeft = e, this.dispatch("scroll-horizontal", e, t), this.dispatchExternal("scrollHorizontal", e, t), this._positionPlaceholder()), this.scrollTop != i && (this.scrollTop = i, this.renderer.scrollRows(i, s), this.dispatch("scroll-vertical", i, s), this.dispatchExternal("scrollVertical", i, s));
    });
  }
  ////////////////// Row Manipulation //////////////////
  findRow(e) {
    if (typeof e == "object") {
      if (e instanceof ot)
        return e;
      if (e instanceof Or)
        return e._getSelf() || !1;
      if (typeof HTMLElement < "u" && e instanceof HTMLElement)
        return this.rows.find((i) => i.getElement() === e) || !1;
      if (e === null)
        return !1;
    } else return typeof e > "u" ? !1 : this.rows.find((i) => i.data[this.table.options.index] == e) || !1;
    return !1;
  }
  getRowFromDataObject(e) {
    var t = this.rows.find((i) => i.data === e);
    return t || !1;
  }
  getRowFromPosition(e) {
    return this.getDisplayRows().find((t) => t.type === "row" && t.getPosition() === e && t.isDisplayed());
  }
  scrollToRow(e, t, i) {
    return this.renderer.scrollToRowPosition(e, t, i);
  }
  ////////////////// Data Handling //////////////////
  setData(e, t, i) {
    return new Promise((s, n) => {
      t && this.getDisplayRows().length ? this.table.options.pagination ? this._setDataActual(e, !0) : this.reRenderInPosition(() => {
        this._setDataActual(e);
      }) : (this.table.options.autoColumns && i && this.table.initialized && this.table.columnManager.generateColumnsFromRowData(e), this.resetScroll(), this._setDataActual(e)), s();
    });
  }
  _setDataActual(e, t) {
    this.dispatchExternal("dataProcessing", e), this._wipeElements(), Array.isArray(e) ? (this.dispatch("data-processing", e), e.forEach((i, s) => {
      if (i && typeof i == "object") {
        var n = new ot(i, this);
        this.rows.push(n);
      } else
        console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:", i);
    }), this.refreshActiveData(!1, !1, t), this.dispatch("data-processed", e), this.dispatchExternal("dataProcessed", e)) : console.error(`Data Loading Error - Unable to process data due to invalid data type 
Expecting: array 
Received: `, typeof e, `
Data:     `, e);
  }
  _wipeElements() {
    this.dispatch("rows-wipe"), this.destroy(), this.adjustTableSize(), this.dispatch("rows-wiped");
  }
  destroy() {
    this.rows.forEach((e) => {
      e.wipe();
    }), this.rows = [], this.activeRows = [], this.activeRowsPipeline = [], this.activeRowsCount = 0, this.displayRows = [], this.displayRowsCount = 0;
  }
  deleteRow(e, t) {
    var i = this.rows.indexOf(e), s = this.activeRows.indexOf(e);
    s > -1 && this.activeRows.splice(s, 1), i > -1 && this.rows.splice(i, 1), this.setActiveRows(this.activeRows), this.displayRowIterator((n) => {
      var r = n.indexOf(e);
      r > -1 && n.splice(r, 1);
    }), t || this.reRenderInPosition(), this.regenerateRowPositions(), this.dispatchExternal("rowDeleted", e.getComponent()), this.displayRowsCount || this.tableEmpty(), this.subscribedExternal("dataChanged") && this.dispatchExternal("dataChanged", this.getData());
  }
  addRow(e, t, i, s) {
    var n = this.addRowActual(e, t, i, s);
    return n;
  }
  //add multiple rows
  addRows(e, t, i, s) {
    var n = [];
    return new Promise((r, o) => {
      t = this.findAddRowPos(t), Array.isArray(e) || (e = [e]), (typeof i > "u" && t || typeof i < "u" && !t) && e.reverse(), e.forEach((a, l) => {
        var h = this.addRow(a, t, i, !0);
        n.push(h), this.dispatch("row-added", h, a, t, i);
      }), this.refreshActiveData(s ? "displayPipeline" : !1, !1, !0), this.regenerateRowPositions(), this.displayRowsCount && this._clearPlaceholder(), r(n);
    });
  }
  findAddRowPos(e) {
    return typeof e > "u" && (e = this.table.options.addRowPos), e === "pos" && (e = !0), e === "bottom" && (e = !1), e;
  }
  addRowActual(e, t, i, s) {
    var n = e instanceof ot ? e : new ot(e || {}, this), r = this.findAddRowPos(t), o = -1, a, l;
    return i || (l = this.chain("row-adding-position", [n, r], null, { index: i, top: r }), i = l.index, r = l.top), typeof i < "u" && (i = this.findRow(i)), i = this.chain("row-adding-index", [n, i, r], null, i), i && (o = this.rows.indexOf(i)), i && o > -1 ? (a = this.activeRows.indexOf(i), this.displayRowIterator(function(h) {
      var c = h.indexOf(i);
      c > -1 && h.splice(r ? c : c + 1, 0, n);
    }), a > -1 && this.activeRows.splice(r ? a : a + 1, 0, n), this.rows.splice(r ? o : o + 1, 0, n)) : r ? (this.displayRowIterator(function(h) {
      h.unshift(n);
    }), this.activeRows.unshift(n), this.rows.unshift(n)) : (this.displayRowIterator(function(h) {
      h.push(n);
    }), this.activeRows.push(n), this.rows.push(n)), this.setActiveRows(this.activeRows), this.dispatchExternal("rowAdded", n.getComponent()), this.subscribedExternal("dataChanged") && this.dispatchExternal("dataChanged", this.table.rowManager.getData()), s || this.reRenderInPosition(), n;
  }
  moveRow(e, t, i) {
    this.dispatch("row-move", e, t, i), this.moveRowActual(e, t, i), this.regenerateRowPositions(), this.dispatch("row-moved", e, t, i), this.dispatchExternal("rowMoved", e.getComponent());
  }
  moveRowActual(e, t, i) {
    this.moveRowInArray(this.rows, e, t, i), this.moveRowInArray(this.activeRows, e, t, i), this.displayRowIterator((s) => {
      this.moveRowInArray(s, e, t, i);
    }), this.dispatch("row-moving", e, t, i);
  }
  moveRowInArray(e, t, i, s) {
    var n, r, o, a;
    if (t !== i && (n = e.indexOf(t), n > -1 && (e.splice(n, 1), r = e.indexOf(i), r > -1 ? s ? e.splice(r + 1, 0, t) : e.splice(r, 0, t) : e.splice(n, 0, t)), e === this.getDisplayRows())) {
      o = n < r ? n : r, a = r > n ? r : n + 1;
      for (let l = o; l <= a; l++)
        e[l] && this.styleRow(e[l], l);
    }
  }
  clearData() {
    this.setData([]);
  }
  getRowIndex(e) {
    return this.findRowIndex(e, this.rows);
  }
  getDisplayRowIndex(e) {
    var t = this.getDisplayRows().indexOf(e);
    return t > -1 ? t : !1;
  }
  nextDisplayRow(e, t) {
    var i = this.getDisplayRowIndex(e), s = !1;
    return i !== !1 && i < this.displayRowsCount - 1 && (s = this.getDisplayRows()[i + 1]), s && (!(s instanceof ot) || s.type != "row") ? this.nextDisplayRow(s, t) : s;
  }
  prevDisplayRow(e, t) {
    var i = this.getDisplayRowIndex(e), s = !1;
    return i && (s = this.getDisplayRows()[i - 1]), t && s && (!(s instanceof ot) || s.type != "row") ? this.prevDisplayRow(s, t) : s;
  }
  findRowIndex(e, t) {
    var i;
    return e = this.findRow(e), e && (i = t.indexOf(e), i > -1) ? i : !1;
  }
  getData(e, t) {
    var i = [], s = this.getRows(e);
    return s.forEach(function(n) {
      n.type == "row" && i.push(n.getData(t || "data"));
    }), i;
  }
  getComponents(e) {
    var t = [], i = this.getRows(e);
    return i.forEach(function(s) {
      t.push(s.getComponent());
    }), t;
  }
  getDataCount(e) {
    var t = this.getRows(e);
    return t.length;
  }
  scrollHorizontal(e) {
    this.scrollLeft = e, this.element.scrollLeft = e, this.dispatch("scroll-horizontal", e);
  }
  registerDataPipelineHandler(e, t) {
    typeof t < "u" ? (this.dataPipeline.push({ handler: e, priority: t }), this.dataPipeline.sort((i, s) => i.priority - s.priority)) : console.error("Data pipeline handlers must have a priority in order to be registered");
  }
  registerDisplayPipelineHandler(e, t) {
    typeof t < "u" ? (this.displayPipeline.push({ handler: e, priority: t }), this.displayPipeline.sort((i, s) => i.priority - s.priority)) : console.error("Display pipeline handlers must have a priority in order to be registered");
  }
  //set active data set
  refreshActiveData(e, t, i) {
    var s = this.table, n = "", r = 0, o = ["all", "dataPipeline", "display", "displayPipeline", "end"];
    if (!this.table.destroyed) {
      if (typeof e == "function")
        if (r = this.dataPipeline.findIndex((a) => a.handler === e), r > -1)
          n = "dataPipeline", t && (r == this.dataPipeline.length - 1 ? n = "display" : r++);
        else if (r = this.displayPipeline.findIndex((a) => a.handler === e), r > -1)
          n = "displayPipeline", t && (r == this.displayPipeline.length - 1 ? n = "end" : r++);
        else {
          console.error("Unable to refresh data, invalid handler provided", e);
          return;
        }
      else
        n = e || "all", r = 0;
      if (this.redrawBlock) {
        (!this.redrawBlockRestoreConfig || this.redrawBlockRestoreConfig && (this.redrawBlockRestoreConfig.stage === n && r < this.redrawBlockRestoreConfig.index || o.indexOf(n) < o.indexOf(this.redrawBlockRestoreConfig.stage))) && (this.redrawBlockRestoreConfig = {
          handler: e,
          skipStage: t,
          renderInPosition: i,
          stage: n,
          index: r
        });
        return;
      } else
        Ee.elVisible(this.element) ? i ? this.reRenderInPosition(this.refreshPipelines.bind(this, e, n, r, i)) : (this.refreshPipelines(e, n, r, i), e || this.table.columnManager.renderer.renderColumns(), this.renderTable(), s.options.layoutColumnsOnNewData && this.table.columnManager.redraw(!0)) : this.refreshPipelines(e, n, r, i), this.dispatch("data-refreshed");
    }
  }
  refreshPipelines(e, t, i, s) {
    switch (this.dispatch("data-refreshing"), (!e || !this.activeRowsPipeline[0]) && (this.activeRowsPipeline[0] = this.rows.slice(0)), t) {
      case "all":
      case "dataPipeline":
        for (let n = i; n < this.dataPipeline.length; n++) {
          let r = this.dataPipeline[n].handler(this.activeRowsPipeline[n].slice(0));
          this.activeRowsPipeline[n + 1] = r || this.activeRowsPipeline[n].slice(0);
        }
        this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);
      case "display":
        i = 0, this.resetDisplayRows();
      case "displayPipeline":
        for (let n = i; n < this.displayPipeline.length; n++) {
          let r = this.displayPipeline[n].handler((n ? this.getDisplayRows(n - 1) : this.activeRows).slice(0), s);
          this.setDisplayRows(r || this.getDisplayRows(n - 1).slice(0), n);
        }
      case "end":
        this.regenerateRowPositions();
    }
    this.getDisplayRows().length && this._clearPlaceholder();
  }
  //regenerate row positions
  regenerateRowPositions() {
    var e = this.getDisplayRows(), t = 1;
    e.forEach((i) => {
      i.type === "row" && (i.setPosition(t), t++);
    });
  }
  setActiveRows(e) {
    this.activeRows = this.activeRows = Object.assign([], e), this.activeRowsCount = this.activeRows.length;
  }
  //reset display rows array
  resetDisplayRows() {
    this.displayRows = [], this.displayRows.push(this.activeRows.slice(0)), this.displayRowsCount = this.displayRows[0].length;
  }
  //set display row pipeline data
  setDisplayRows(e, t) {
    this.displayRows[t] = e, t == this.displayRows.length - 1 && (this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length);
  }
  getDisplayRows(e) {
    return typeof e > "u" ? this.displayRows.length ? this.displayRows[this.displayRows.length - 1] : [] : this.displayRows[e] || [];
  }
  getVisibleRows(e, t) {
    var i = Object.assign([], this.renderer.visibleRows(!t));
    return e && (i = this.chain("rows-visible", [t], i, i)), i;
  }
  //repeat action across display rows
  displayRowIterator(e) {
    this.activeRowsPipeline.forEach(e), this.displayRows.forEach(e), this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;
  }
  //return only actual rows (not group headers etc)
  getRows(e) {
    var t = [];
    switch (e) {
      case "active":
        t = this.activeRows;
        break;
      case "display":
        t = this.table.rowManager.getDisplayRows();
        break;
      case "visible":
        t = this.getVisibleRows(!1, !0);
        break;
      default:
        t = this.chain("rows-retrieve", e, null, this.rows) || this.rows;
    }
    return t;
  }
  ///////////////// Table Rendering /////////////////
  //trigger rerender of table in current position
  reRenderInPosition(e) {
    this.redrawBlock ? e ? e() : this.redrawBlockRenderInPosition = !0 : (this.dispatchExternal("renderStarted"), this.renderer.rerenderRows(e), this.fixedHeight || this.adjustTableSize(), this.scrollBarCheck(), this.dispatchExternal("renderComplete"));
  }
  scrollBarCheck() {
    var e = 0;
    this.element.scrollHeight > this.element.clientHeight && (e = this.element.offsetWidth - this.element.clientWidth), e !== this.scrollbarWidth && (this.scrollbarWidth = e, this.dispatch("scrollbar-vertical", e));
  }
  initializeRenderer() {
    var e, t = {
      virtual: im,
      basic: tm
    };
    typeof this.table.options.renderVertical == "string" ? e = t[this.table.options.renderVertical] : e = this.table.options.renderVertical, e ? (this.renderMode = this.table.options.renderVertical, this.renderer = new e(this.table, this.element, this.tableElement), this.renderer.initialize(), (this.table.element.clientHeight || this.table.options.height) && !(this.table.options.minHeight && this.table.options.maxHeight) ? this.fixedHeight = !0 : this.fixedHeight = !1) : console.error("Unable to find matching renderer:", this.table.options.renderVertical);
  }
  getRenderMode() {
    return this.renderMode;
  }
  renderTable() {
    this.dispatchExternal("renderStarted"), this.element.scrollTop = 0, this._clearTable(), this.displayRowsCount ? (this.renderer.renderRows(), this.firstRender && (this.firstRender = !1, this.fixedHeight || this.adjustTableSize(), this.layoutRefresh(!0))) : this.renderEmptyScroll(), this.fixedHeight || this.adjustTableSize(), this.dispatch("table-layout"), this.displayRowsCount || this._showPlaceholder(), this.scrollBarCheck(), this.dispatchExternal("renderComplete");
  }
  //show scrollbars on empty table div
  renderEmptyScroll() {
    this.placeholder ? this.tableElement.style.display = "none" : this.tableElement.style.minWidth = this.table.columnManager.getWidth() + "px";
  }
  _clearTable() {
    this._clearPlaceholder(), this.scrollTop = 0, this.scrollLeft = 0, this.renderer.clearRows();
  }
  tableEmpty() {
    this.renderEmptyScroll(), this._showPlaceholder();
  }
  checkPlaceholder() {
    this.displayRowsCount ? this._clearPlaceholder() : this.tableEmpty();
  }
  _showPlaceholder() {
    this.placeholder && (this.placeholder && this.placeholder.parentNode && this.placeholder.parentNode.removeChild(this.placeholder), this.initializePlaceholder(), this.placeholder.setAttribute("tabulator-render-mode", this.renderMode), this.getElement().appendChild(this.placeholder), this._positionPlaceholder(), this.adjustTableSize());
  }
  _clearPlaceholder() {
    this.placeholder && this.placeholder.parentNode && this.placeholder.parentNode.removeChild(this.placeholder), this.tableElement.style.minWidth = "", this.tableElement.style.display = "";
  }
  _positionPlaceholder() {
    this.placeholder && this.placeholder.parentNode && (this.placeholder.style.width = this.table.columnManager.getWidth() + "px", this.placeholderContents.style.width = this.table.rowManager.element.clientWidth + "px", this.placeholderContents.style.marginLeft = this.scrollLeft + "px");
  }
  styleRow(e, t) {
    var i = e.getElement();
    t % 2 ? (i.classList.add("tabulator-row-even"), i.classList.remove("tabulator-row-odd")) : (i.classList.add("tabulator-row-odd"), i.classList.remove("tabulator-row-even"));
  }
  //normalize height of active rows
  normalizeHeight(e) {
    this.activeRows.forEach(function(t) {
      t.normalizeHeight(e);
    });
  }
  //adjust the height of the table holder to fit in the Tabulator element
  adjustTableSize() {
    let e = this.element.clientHeight, t, i = !1;
    if (this.renderer.verticalFillMode === "fill") {
      let s = Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));
      if (this.fixedHeight) {
        t = isNaN(this.table.options.minHeight) ? this.table.options.minHeight : this.table.options.minHeight + "px";
        const n = "calc(100% - " + s + "px)";
        this.element.style.minHeight = t || "calc(100% - " + s + "px)", this.element.style.height = n, this.element.style.maxHeight = n;
      } else
        this.element.style.height = "", this.element.style.height = this.table.element.clientHeight - s + "px", this.element.scrollTop = this.scrollTop;
      this.renderer.resize(), !this.fixedHeight && e != this.element.clientHeight && (i = !0, this.subscribed("table-resize") ? this.dispatch("table-resize") : this.redraw()), this.scrollBarCheck();
    }
    return this._positionPlaceholder(), i;
  }
  //reinitialize all rows
  reinitialize() {
    this.rows.forEach(function(e) {
      e.reinitialize(!0);
    });
  }
  //prevent table from being redrawn
  blockRedraw() {
    this.redrawBlock = !0, this.redrawBlockRestoreConfig = !1;
  }
  //restore table redrawing
  restoreRedraw() {
    this.redrawBlock = !1, this.redrawBlockRestoreConfig ? (this.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition), this.redrawBlockRestoreConfig = !1) : this.redrawBlockRenderInPosition && this.reRenderInPosition(), this.redrawBlockRenderInPosition = !1;
  }
  //redraw table
  redraw(e) {
    this.adjustTableSize(), this.table.tableWidth = this.table.element.clientWidth, e ? this.renderTable() : (this.reRenderInPosition(), this.scrollHorizontal(this.scrollLeft));
  }
  resetScroll() {
    if (this.element.scrollLeft = 0, this.element.scrollTop = 0, this.table.browser === "ie") {
      var e = document.createEvent("Event");
      e.initEvent("scroll", !1, !0), this.element.dispatchEvent(e);
    } else
      this.element.dispatchEvent(new Event("scroll"));
  }
}
class Am extends st {
  constructor(e) {
    super(e), this.active = !1, this.element = this.createElement(), this.containerElement = this.createContainerElement(), this.external = !1;
  }
  initialize() {
    this.initializeElement();
  }
  createElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-footer"), e;
  }
  createContainerElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-footer-contents"), this.element.appendChild(e), e;
  }
  initializeElement() {
    if (this.table.options.footerElement)
      switch (typeof this.table.options.footerElement) {
        case "string":
          this.table.options.footerElement[0] === "<" ? this.containerElement.innerHTML = this.table.options.footerElement : (this.external = !0, this.containerElement = document.querySelector(this.table.options.footerElement));
          break;
        default:
          this.element = this.table.options.footerElement;
          break;
      }
  }
  getElement() {
    return this.element;
  }
  append(e) {
    this.activate(), this.containerElement.appendChild(e), this.table.rowManager.adjustTableSize();
  }
  prepend(e) {
    this.activate(), this.element.insertBefore(e, this.element.firstChild), this.table.rowManager.adjustTableSize();
  }
  remove(e) {
    e.parentNode.removeChild(e), this.deactivate();
  }
  deactivate(e) {
    (!this.element.firstChild || e) && (this.external || this.element.parentNode.removeChild(this.element), this.active = !1);
  }
  activate() {
    this.active || (this.active = !0, this.external || (this.table.element.appendChild(this.getElement()), this.table.element.style.display = ""));
  }
  redraw() {
    this.dispatch("footer-redraw");
  }
}
class nm extends st {
  constructor(e) {
    super(e), this.el = null, this.abortClasses = ["tabulator-headers", "tabulator-table"], this.previousTargets = {}, this.listeners = [
      "click",
      "dblclick",
      "contextmenu",
      "mouseenter",
      "mouseleave",
      "mouseover",
      "mouseout",
      "mousemove",
      "mouseup",
      "mousedown",
      "touchstart",
      "touchend"
    ], this.componentMap = {
      "tabulator-cell": "cell",
      "tabulator-row": "row",
      "tabulator-group": "group",
      "tabulator-col": "column"
    }, this.pseudoTrackers = {
      row: {
        subscriber: null,
        target: null
      },
      cell: {
        subscriber: null,
        target: null
      },
      group: {
        subscriber: null,
        target: null
      },
      column: {
        subscriber: null,
        target: null
      }
    }, this.pseudoTracking = !1;
  }
  initialize() {
    this.el = this.table.element, this.buildListenerMap(), this.bindSubscriptionWatchers();
  }
  buildListenerMap() {
    var e = {};
    this.listeners.forEach((t) => {
      e[t] = {
        handler: null,
        components: []
      };
    }), this.listeners = e;
  }
  bindPseudoEvents() {
    Object.keys(this.pseudoTrackers).forEach((e) => {
      this.pseudoTrackers[e].subscriber = this.pseudoMouseEnter.bind(this, e), this.subscribe(e + "-mouseover", this.pseudoTrackers[e].subscriber);
    }), this.pseudoTracking = !0;
  }
  pseudoMouseEnter(e, t, i) {
    this.pseudoTrackers[e].target !== i && (this.pseudoTrackers[e].target && this.dispatch(e + "-mouseleave", t, this.pseudoTrackers[e].target), this.pseudoMouseLeave(e, t), this.pseudoTrackers[e].target = i, this.dispatch(e + "-mouseenter", t, i));
  }
  pseudoMouseLeave(e, t) {
    var i = Object.keys(this.pseudoTrackers), s = {
      row: ["cell"],
      cell: ["row"]
    };
    i = i.filter((n) => {
      var r = s[e];
      return n !== e && (!r || r && !r.includes(n));
    }), i.forEach((n) => {
      var r = this.pseudoTrackers[n].target;
      this.pseudoTrackers[n].target && (this.dispatch(n + "-mouseleave", t, r), this.pseudoTrackers[n].target = null);
    });
  }
  bindSubscriptionWatchers() {
    var e = Object.keys(this.listeners), t = Object.values(this.componentMap);
    for (let i of t)
      for (let s of e) {
        let n = i + "-" + s;
        this.subscriptionChange(n, this.subscriptionChanged.bind(this, i, s));
      }
    this.subscribe("table-destroy", this.clearWatchers.bind(this));
  }
  subscriptionChanged(e, t, i) {
    var s = this.listeners[t].components, n = s.indexOf(e), r = !1;
    i ? n === -1 && (s.push(e), r = !0) : this.subscribed(e + "-" + t) || n > -1 && (s.splice(n, 1), r = !0), (t === "mouseenter" || t === "mouseleave") && !this.pseudoTracking && this.bindPseudoEvents(), r && this.updateEventListeners();
  }
  updateEventListeners() {
    for (let e in this.listeners) {
      let t = this.listeners[e];
      t.components.length ? t.handler || (t.handler = this.track.bind(this, e), this.el.addEventListener(e, t.handler)) : t.handler && (this.el.removeEventListener(e, t.handler), t.handler = null);
    }
  }
  track(e, t) {
    var i = t.composedPath && t.composedPath() || t.path, s = this.findTargets(i);
    s = this.bindComponents(e, s), this.triggerEvents(e, t, s), this.pseudoTracking && (e == "mouseover" || e == "mouseleave") && !Object.keys(s).length && this.pseudoMouseLeave("none", t);
  }
  findTargets(e) {
    var t = {};
    let i = Object.keys(this.componentMap);
    for (let s of e) {
      let n = s.classList ? [...s.classList] : [];
      if (n.filter((a) => this.abortClasses.includes(a)).length)
        break;
      let o = n.filter((a) => i.includes(a));
      for (let a of o)
        t[this.componentMap[a]] || (t[this.componentMap[a]] = s);
    }
    return t.group && t.group === t.row && delete t.row, t;
  }
  bindComponents(e, t) {
    var i = Object.keys(t).reverse(), s = this.listeners[e], n = {}, r = {}, o = {};
    for (let a of i) {
      let l, h = t[a], c = this.previousTargets[a];
      if (c && c.target === h)
        l = c.component;
      else
        switch (a) {
          case "row":
          case "group":
            (s.components.includes("row") || s.components.includes("cell") || s.components.includes("group")) && (l = this.table.rowManager.getVisibleRows(!0).find((d) => d.getElement() === h), t.row && t.row.parentNode && t.row.parentNode.closest(".tabulator-row") && (t[a] = !1));
            break;
          case "column":
            s.components.includes("column") && (l = this.table.columnManager.findColumn(h));
            break;
          case "cell":
            s.components.includes("cell") && (n.row instanceof ot ? l = n.row.findCell(h) : t.row && console.warn("Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?"));
            break;
        }
      l && (n[a] = l, o[a] = {
        target: h,
        component: l
      });
    }
    return this.previousTargets = o, Object.keys(t).forEach((a) => {
      let l = n[a];
      r[a] = l;
    }), r;
  }
  triggerEvents(e, t, i) {
    var s = this.listeners[e];
    for (let n in i)
      i[n] && s.components.includes(n) && this.dispatch(n + "-" + e, t, i[n]);
  }
  clearWatchers() {
    for (let e in this.listeners) {
      let t = this.listeners[e];
      t.handler && (this.el.removeEventListener(e, t.handler), t.handler = null);
    }
  }
}
class rm {
  constructor(e) {
    this.table = e, this.bindings = {};
  }
  bind(e, t, i) {
    this.bindings[e] || (this.bindings[e] = {}), this.bindings[e][t] ? console.warn("Unable to bind component handler, a matching function name is already bound", e, t, i) : this.bindings[e][t] = i;
  }
  handle(e, t, i) {
    if (this.bindings[e] && this.bindings[e][i] && typeof this.bindings[e][i].bind == "function")
      return this.bindings[e][i].bind(null, t);
    i !== "then" && typeof i == "string" && !i.startsWith("_") && this.table.options.debugInvalidComponentFuncs && console.error("The " + e + " component does not have a " + i + " function, have you checked that you have the correct Tabulator module installed?");
  }
}
class om extends st {
  constructor(e) {
    super(e), this.requestOrder = 0, this.loading = !1;
  }
  initialize() {
  }
  load(e, t, i, s, n, r) {
    var o = ++this.requestOrder;
    if (this.table.destroyed)
      return Promise.resolve();
    if (this.dispatchExternal("dataLoading", e), e && (e.indexOf("{") == 0 || e.indexOf("[") == 0) && (e = JSON.parse(e)), this.confirm("data-loading", [e, t, i, n])) {
      this.loading = !0, n || this.alertLoader(), t = this.chain("data-params", [e, i, n], t || {}, t || {}), t = this.mapParams(t, this.table.options.dataSendParams);
      var a = this.chain("data-load", [e, t, i, n], !1, Promise.resolve([]));
      return a.then((l) => {
        if (this.table.destroyed)
          console.warn("Data Load Response Blocked - Table has been destroyed");
        else {
          !Array.isArray(l) && typeof l == "object" && (l = this.mapParams(l, this.objectInvert(this.table.options.dataReceiveParams)));
          var h = this.chain("data-loaded", [l], null, l);
          o == this.requestOrder ? (this.clearAlert(), h !== !1 && (this.dispatchExternal("dataLoaded", h), this.table.rowManager.setData(h, s, typeof r > "u" ? !s : r))) : console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made");
        }
      }).catch((l) => {
        console.error("Data Load Error: ", l), this.dispatchExternal("dataLoadError", l), n || this.alertError(), setTimeout(() => {
          this.clearAlert();
        }, this.table.options.dataLoaderErrorTimeout);
      }).finally(() => {
        this.loading = !1;
      });
    } else
      return this.dispatchExternal("dataLoaded", e), e || (e = []), this.table.rowManager.setData(e, s, typeof r > "u" ? !s : r), Promise.resolve();
  }
  mapParams(e, t) {
    var i = {};
    for (let s in e)
      i[t.hasOwnProperty(s) ? t[s] : s] = e[s];
    return i;
  }
  objectInvert(e) {
    var t = {};
    for (let i in e)
      t[e[i]] = i;
    return t;
  }
  blockActiveLoad() {
    this.requestOrder++;
  }
  alertLoader() {
    var e = typeof this.table.options.dataLoader == "function" ? this.table.options.dataLoader() : this.table.options.dataLoader;
    e && this.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText("data|loading"));
  }
  alertError() {
    this.table.alertManager.alert(this.table.options.dataLoaderError || this.langText("data|error"), "error");
  }
  clearAlert() {
    this.table.alertManager.clear();
  }
}
class am {
  constructor(e, t, i) {
    this.table = e, this.events = {}, this.optionsList = t || {}, this.subscriptionNotifiers = {}, this.dispatch = i ? this._debugDispatch.bind(this) : this._dispatch.bind(this), this.debug = i;
  }
  subscriptionChange(e, t) {
    this.subscriptionNotifiers[e] || (this.subscriptionNotifiers[e] = []), this.subscriptionNotifiers[e].push(t), this.subscribed(e) && this._notifySubscriptionChange(e, !0);
  }
  subscribe(e, t) {
    this.events[e] || (this.events[e] = []), this.events[e].push(t), this._notifySubscriptionChange(e, !0);
  }
  unsubscribe(e, t) {
    var i;
    if (this.events[e])
      if (t)
        if (i = this.events[e].findIndex((s) => s === t), i > -1)
          this.events[e].splice(i, 1);
        else {
          console.warn("Cannot remove event, no matching event found:", e, t);
          return;
        }
      else
        delete this.events[e];
    else {
      console.warn("Cannot remove event, no events set on:", e);
      return;
    }
    this._notifySubscriptionChange(e, !1);
  }
  subscribed(e) {
    return this.events[e] && this.events[e].length;
  }
  _notifySubscriptionChange(e, t) {
    var i = this.subscriptionNotifiers[e];
    i && i.forEach((s) => {
      s(t);
    });
  }
  _dispatch() {
    var e = Array.from(arguments), t = e.shift(), i;
    return this.events[t] && this.events[t].forEach((s, n) => {
      let r = s.apply(this.table, e);
      n || (i = r);
    }), i;
  }
  _debugDispatch() {
    var e = Array.from(arguments), t = e[0];
    return e[0] = "ExternalEvent:" + e[0], (this.debug === !0 || this.debug.includes(t)) && console.log(...e), this._dispatch(...arguments);
  }
}
class lm {
  constructor(e) {
    this.events = {}, this.subscriptionNotifiers = {}, this.dispatch = e ? this._debugDispatch.bind(this) : this._dispatch.bind(this), this.chain = e ? this._debugChain.bind(this) : this._chain.bind(this), this.confirm = e ? this._debugConfirm.bind(this) : this._confirm.bind(this), this.debug = e;
  }
  subscriptionChange(e, t) {
    this.subscriptionNotifiers[e] || (this.subscriptionNotifiers[e] = []), this.subscriptionNotifiers[e].push(t), this.subscribed(e) && this._notifySubscriptionChange(e, !0);
  }
  subscribe(e, t, i = 1e4) {
    this.events[e] || (this.events[e] = []), this.events[e].push({ callback: t, priority: i }), this.events[e].sort((s, n) => s.priority - n.priority), this._notifySubscriptionChange(e, !0);
  }
  unsubscribe(e, t) {
    var i;
    if (this.events[e]) {
      if (t)
        if (i = this.events[e].findIndex((s) => s.callback === t), i > -1)
          this.events[e].splice(i, 1);
        else {
          console.warn("Cannot remove event, no matching event found:", e, t);
          return;
        }
    } else {
      console.warn("Cannot remove event, no events set on:", e);
      return;
    }
    this._notifySubscriptionChange(e, !1);
  }
  subscribed(e) {
    return this.events[e] && this.events[e].length;
  }
  _chain(e, t, i, s) {
    var n = i;
    return Array.isArray(t) || (t = [t]), this.subscribed(e) ? (this.events[e].forEach((r, o) => {
      n = r.callback.apply(this, t.concat([n]));
    }), n) : typeof s == "function" ? s() : s;
  }
  _confirm(e, t) {
    var i = !1;
    return Array.isArray(t) || (t = [t]), this.subscribed(e) && this.events[e].forEach((s, n) => {
      s.callback.apply(this, t) && (i = !0);
    }), i;
  }
  _notifySubscriptionChange(e, t) {
    var i = this.subscriptionNotifiers[e];
    i && i.forEach((s) => {
      s(t);
    });
  }
  _dispatch() {
    var e = Array.from(arguments), t = e.shift();
    this.events[t] && this.events[t].forEach((i) => {
      i.callback.apply(this, e);
    });
  }
  _debugDispatch() {
    var e = Array.from(arguments), t = e[0];
    return e[0] = "InternalEvent:" + t, (this.debug === !0 || this.debug.includes(t)) && console.log(...e), this._dispatch(...arguments);
  }
  _debugChain() {
    var e = Array.from(arguments), t = e[0];
    return e[0] = "InternalEvent:" + t, (this.debug === !0 || this.debug.includes(t)) && console.log(...e), this._chain(...arguments);
  }
  _debugConfirm() {
    var e = Array.from(arguments), t = e[0];
    return e[0] = "InternalEvent:" + t, (this.debug === !0 || this.debug.includes(t)) && console.log(...e), this._confirm(...arguments);
  }
}
class hm extends st {
  constructor(e) {
    super(e);
  }
  _warnUser() {
    this.options("debugDeprecation") && console.warn(...arguments);
  }
  check(e, t, i) {
    var s = "";
    return typeof this.options(e) < "u" ? (s = "Deprecated Setup Option - Use of the %c" + e + "%c option is now deprecated", t ? (s = s + ", Please use the %c" + t + "%c option instead", this._warnUser(s, "font-weight: bold;", "font-weight: normal;", "font-weight: bold;", "font-weight: normal;"), i && (this.table.options[t] = this.table.options[e])) : this._warnUser(s, "font-weight: bold;", "font-weight: normal;"), !1) : !0;
  }
  checkMsg(e, t) {
    return typeof this.options(e) < "u" ? (this._warnUser("%cDeprecated Setup Option - Use of the %c" + e + " %c option is now deprecated, " + t, "font-weight: normal;", "font-weight: bold;", "font-weight: normal;"), !1) : !0;
  }
  msg(e) {
    this._warnUser(e);
  }
}
class cm extends st {
  constructor(e) {
    super(e), this.deps = {}, this.props = {};
  }
  initialize() {
    this.deps = Object.assign({}, this.options("dependencies"));
  }
  lookup(e, t, i) {
    if (Array.isArray(e)) {
      for (const n of e) {
        var s = this.lookup(n, t, !0);
        if (s)
          break;
      }
      if (s)
        return s;
      this.error(e);
    } else
      return t ? this.lookupProp(e, t, i) : this.lookupKey(e, i);
  }
  lookupProp(e, t, i) {
    var s;
    if (this.props[e] && this.props[e][t])
      return this.props[e][t];
    if (s = this.lookupKey(e, i), s)
      return this.props[e] || (this.props[e] = {}), this.props[e][t] = s[t] || s, this.props[e][t];
  }
  lookupKey(e, t) {
    var i;
    return this.deps[e] ? i = this.deps[e] : window[e] ? (this.deps[e] = window[e], i = this.deps[e]) : t || this.error(e), i;
  }
  error(e) {
    console.error("Unable to find dependency", e, "Please check documentation and ensure you have imported the required library into your project");
  }
}
function um(A, e) {
  e && this.table.columnManager.renderer.reinitializeColumnWidths(A), this.table.options.responsiveLayout && this.table.modExists("responsiveLayout", !0) && this.table.modules.responsiveLayout.update();
}
function zl(A, e) {
  A.forEach(function(t) {
    t.reinitializeWidth();
  }), this.table.options.responsiveLayout && this.table.modExists("responsiveLayout", !0) && this.table.modules.responsiveLayout.update();
}
function dm(A, e) {
  var t = 0, i = this.table.rowManager.element.clientWidth, s = 0, n = !1;
  A.forEach((r, o) => {
    r.widthFixed || r.reinitializeWidth(), (this.table.options.responsiveLayout ? r.modules.responsive.visible : r.visible) && (n = r), r.visible && (t += r.getWidth());
  }), n ? (s = i - t + n.getWidth(), this.table.options.responsiveLayout && this.table.modExists("responsiveLayout", !0) && (n.setWidth(0), this.table.modules.responsiveLayout.update()), s > 0 ? n.setWidth(s) : n.reinitializeWidth()) : this.table.options.responsiveLayout && this.table.modExists("responsiveLayout", !0) && this.table.modules.responsiveLayout.update();
}
function fm(A, e) {
  var t = this.table.rowManager.element.getBoundingClientRect().width, i = 0, s = 0, n = 0, r = 0, o = [], a = [], l = 0, h = 0, c = 0;
  function u(f) {
    var p;
    return typeof f == "string" ? f.indexOf("%") > -1 ? p = t / 100 * parseInt(f) : p = parseInt(f) : p = f, p;
  }
  function d(f, p, b, w) {
    var C = [], x = 0, U = 0, E = 0, H = n, T = 0, S = 0, R = [];
    function J(P) {
      return b * (P.column.definition.widthGrow || 1);
    }
    function X(P) {
      return u(P.width) - b * (P.column.definition.widthShrink || 0);
    }
    return f.forEach(function(P, Z) {
      var ae = w ? X(P) : J(P);
      P.column.minWidth >= ae ? C.push(P) : P.column.maxWidth && P.column.maxWidth < ae ? (P.width = P.column.maxWidth, p -= P.column.maxWidth, H -= w ? P.column.definition.widthShrink || 1 : P.column.definition.widthGrow || 1, H && (b = Math.floor(p / H))) : (R.push(P), S += w ? P.column.definition.widthShrink || 1 : P.column.definition.widthGrow || 1);
    }), C.length ? (C.forEach(function(P) {
      x += w ? P.width - P.column.minWidth : P.column.minWidth, P.width = P.column.minWidth;
    }), U = p - x, E = S ? Math.floor(U / S) : U, T = d(R, U, E, w)) : (T = S ? p - Math.floor(p / S) * S : p, R.forEach(function(P) {
      P.width = w ? X(P) : J(P);
    })), T;
  }
  this.table.options.responsiveLayout && this.table.modExists("responsiveLayout", !0) && this.table.modules.responsiveLayout.update(), this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight && (t -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth), A.forEach(function(f) {
    var p, b, w;
    f.visible && (p = f.definition.width, b = parseInt(f.minWidth), p ? (w = u(p), i += w > b ? w : b, f.definition.widthShrink && (a.push({
      column: f,
      width: w > b ? w : b
    }), l += f.definition.widthShrink)) : (o.push({
      column: f,
      width: 0
    }), n += f.definition.widthGrow || 1));
  }), s = t - i, r = Math.floor(s / n), c = d(o, s, r, !1), o.length && c > 0 && (o[o.length - 1].width += c), o.forEach(function(f) {
    s -= f.width;
  }), h = Math.abs(c) + s, h > 0 && l && (c = d(a, h, Math.floor(h / l), !0)), c && a.length && (a[a.length - 1].width -= c), o.forEach(function(f) {
    f.column.setWidth(f.width);
  }), a.forEach(function(f) {
    f.column.setWidth(f.width);
  });
}
var gm = {
  fitData: um,
  fitDataFill: zl,
  fitDataTable: zl,
  fitDataStretch: dm,
  fitColumns: fm
};
const Vs = class Vs extends ne {
  constructor(e) {
    super(e, "layout"), this.mode = null, this.registerTableOption("layout", "fitData"), this.registerTableOption("layoutColumnsOnNewData", !1), this.registerColumnOption("widthGrow"), this.registerColumnOption("widthShrink");
  }
  //initialize layout system
  initialize() {
    var e = this.table.options.layout;
    Vs.modes[e] ? this.mode = e : (console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : " + e), this.mode = "fitData"), this.table.element.setAttribute("tabulator-layout", this.mode), this.subscribe("column-init", this.initializeColumn.bind(this));
  }
  initializeColumn(e) {
    e.definition.widthGrow && (e.definition.widthGrow = Number(e.definition.widthGrow)), e.definition.widthShrink && (e.definition.widthShrink = Number(e.definition.widthShrink));
  }
  getMode() {
    return this.mode;
  }
  //trigger table layout
  layout(e) {
    var t = this.table.columnManager.columnsByIndex.find((i) => i.definition.variableHeight || i.definition.formatter === "textarea");
    this.dispatch("layout-refreshing"), Vs.modes[this.mode].call(this, this.table.columnManager.columnsByIndex, e), t && this.table.rowManager.normalizeHeight(!0), this.dispatch("layout-refreshed");
  }
};
D(Vs, "moduleName", "layout"), //load defaults
D(Vs, "modes", gm);
let Ua = Vs;
var pm = {
  default: {
    //hold default locale text
    groups: {
      item: "item",
      items: "items"
    },
    columns: {},
    data: {
      loading: "Loading",
      error: "Error"
    },
    pagination: {
      page_size: "Page Size",
      page_title: "Show Page",
      first: "First",
      first_title: "First Page",
      last: "Last",
      last_title: "Last Page",
      prev: "Prev",
      prev_title: "Prev Page",
      next: "Next",
      next_title: "Next Page",
      all: "All",
      counter: {
        showing: "Showing",
        of: "of",
        rows: "rows",
        pages: "pages"
      }
    },
    headerFilters: {
      default: "filter column...",
      columns: {}
    }
  }
};
const XA = class XA extends ne {
  constructor(e) {
    super(e), this.locale = "default", this.lang = !1, this.bindings = {}, this.langList = {}, this.registerTableOption("locale", !1), this.registerTableOption("langs", {});
  }
  initialize() {
    this.langList = Ee.deepClone(XA.langs), this.table.options.columnDefaults.headerFilterPlaceholder !== !1 && this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);
    for (let e in this.table.options.langs)
      this.installLang(e, this.table.options.langs[e]);
    this.setLocale(this.table.options.locale), this.registerTableFunction("setLocale", this.setLocale.bind(this)), this.registerTableFunction("getLocale", this.getLocale.bind(this)), this.registerTableFunction("getLang", this.getLang.bind(this));
  }
  //set header placeholder
  setHeaderFilterPlaceholder(e) {
    this.langList.default.headerFilters.default = e;
  }
  //setup a lang description object
  installLang(e, t) {
    this.langList[e] ? this._setLangProp(this.langList[e], t) : this.langList[e] = t;
  }
  _setLangProp(e, t) {
    for (let i in t)
      e[i] && typeof e[i] == "object" ? this._setLangProp(e[i], t[i]) : e[i] = t[i];
  }
  //set current locale
  setLocale(e) {
    e = e || "default";
    function t(i, s) {
      for (var n in i)
        typeof i[n] == "object" ? (s[n] || (s[n] = {}), t(i[n], s[n])) : s[n] = i[n];
    }
    if (e === !0 && navigator.language && (e = navigator.language.toLowerCase()), e && !this.langList[e]) {
      let i = e.split("-")[0];
      this.langList[i] ? (console.warn("Localization Error - Exact matching locale not found, using closest match: ", e, i), e = i) : (console.warn("Localization Error - Matching locale not found, using default: ", e), e = "default");
    }
    this.locale = e, this.lang = Ee.deepClone(this.langList.default || {}), e != "default" && t(this.langList[e], this.lang), this.dispatchExternal("localized", this.locale, this.lang), this._executeBindings();
  }
  //get current locale
  getLocale(e) {
    return this.locale;
  }
  //get lang object for given local or current if none provided
  getLang(e) {
    return e ? this.langList[e] : this.lang;
  }
  //get text for current locale
  getText(e, t) {
    var i = t ? e + "|" + t : e, s = i.split("|"), n = this._getLangElement(s, this.locale);
    return n || "";
  }
  //traverse langs object and find localized copy
  _getLangElement(e, t) {
    var i = this.lang;
    return e.forEach(function(s) {
      var n;
      i && (n = i[s], typeof n < "u" ? i = n : i = !1);
    }), i;
  }
  //set update binding
  bind(e, t) {
    this.bindings[e] || (this.bindings[e] = []), this.bindings[e].push(t), t(this.getText(e), this.lang);
  }
  //iterate through bindings and trigger updates
  _executeBindings() {
    for (let e in this.bindings)
      this.bindings[e].forEach((t) => {
        t(this.getText(e), this.lang);
      });
  }
};
D(XA, "moduleName", "localize"), //load defaults
D(XA, "langs", pm);
let _a = XA;
class Hu extends ne {
  constructor(e) {
    super(e);
  }
  initialize() {
    this.registerTableFunction("tableComms", this.receive.bind(this));
  }
  getConnections(e) {
    var t = [], i;
    return i = this.table.constructor.registry.lookupTable(e), i.forEach((s) => {
      this.table !== s && t.push(s);
    }), t;
  }
  send(e, t, i, s) {
    var n = this.getConnections(e);
    n.forEach((r) => {
      r.tableComms(this.table.element, t, i, s);
    }), !n.length && e && console.warn("Table Connection Error - No tables matching selector found", e);
  }
  receive(e, t, i, s) {
    if (this.table.modExists(t))
      return this.table.modules[t].commsReceived(e, i, s);
    console.warn("Inter-table Comms Error - no such module:", t);
  }
}
D(Hu, "moduleName", "comms");
var mm = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  CommsModule: Hu,
  LayoutModule: Ua,
  LocalizeModule: _a
});
const _t = class _t {
  static findTable(e) {
    var t = _t.registry.lookupTable(e, !0);
    return Array.isArray(t) && !t.length ? !1 : t;
  }
};
D(_t, "registry", {
  tables: [],
  register(e) {
    _t.registry.tables.push(e);
  },
  deregister(e) {
    var t = _t.registry.tables.indexOf(e);
    t > -1 && _t.registry.tables.splice(t, 1);
  },
  lookupTable(e, t) {
    var i = [], s, n;
    if (typeof e == "string") {
      if (s = document.querySelectorAll(e), s.length)
        for (var r = 0; r < s.length; r++)
          n = _t.registry.matchElement(s[r]), n && i.push(n);
    } else typeof HTMLElement < "u" && e instanceof HTMLElement || e instanceof _t ? (n = _t.registry.matchElement(e), n && i.push(n)) : Array.isArray(e) ? e.forEach(function(o) {
      i = i.concat(_t.registry.lookupTable(o));
    }) : t || console.warn("Table Connection Error - Invalid Selector", e);
    return i;
  },
  matchElement(e) {
    return _t.registry.tables.find(function(t) {
      return e instanceof _t ? t === e : t.element === e;
    });
  }
});
let Ha = _t;
const Ce = class Ce extends Ha {
  constructor() {
    super();
  }
  static initializeModuleBinder(e) {
    Ce.modulesRegistered || (Ce.modulesRegistered = !0, Ce._registerModules(mm, !0), e && Ce._registerModules(e));
  }
  static _extendModule(e, t, i) {
    if (Ce.moduleBindings[e]) {
      var s = Ce.moduleBindings[e][t];
      if (s)
        if (typeof i == "object")
          for (let n in i)
            s[n] = i[n];
        else
          console.warn("Module Error - Invalid value type, it must be an object");
      else
        console.warn("Module Error - property does not exist:", t);
    } else
      console.warn("Module Error - module does not exist:", e);
  }
  static _registerModules(e, t) {
    var i = Object.values(e);
    t && i.forEach((s) => {
      s.prototype.moduleCore = !0;
    }), Ce._registerModule(i);
  }
  static _registerModule(e) {
    Array.isArray(e) || (e = [e]), e.forEach((t) => {
      Ce._registerModuleBinding(t), Ce._registerModuleExtensions(t);
    });
  }
  static _registerModuleBinding(e) {
    e.moduleName ? Ce.moduleBindings[e.moduleName] = e : console.error("Unable to bind module, no moduleName defined", e.moduleName);
  }
  static _registerModuleExtensions(e) {
    var t = e.moduleExtensions;
    if (e.moduleExtensions)
      for (let i in t) {
        let s = t[i];
        if (Ce.moduleBindings[i])
          for (let n in s)
            Ce._extendModule(i, n, s[n]);
        else {
          Ce.moduleExtensions[i] || (Ce.moduleExtensions[i] = {});
          for (let n in s)
            Ce.moduleExtensions[i][n] || (Ce.moduleExtensions[i][n] = {}), Object.assign(Ce.moduleExtensions[i][n], s[n]);
        }
      }
    Ce._extendModuleFromQueue(e);
  }
  static _extendModuleFromQueue(e) {
    var t = Ce.moduleExtensions[e.moduleName];
    if (t)
      for (let i in t)
        Ce._extendModule(e.moduleName, i, t[i]);
  }
  //ensure that module are bound to instantiated function
  _bindModules() {
    var e = [], t = [], i = [];
    this.modules = {};
    for (var s in Ce.moduleBindings) {
      let n = Ce.moduleBindings[s], r = new n(this);
      this.modules[s] = r, n.prototype.moduleCore ? this.modulesCore.push(r) : n.moduleInitOrder ? n.moduleInitOrder < 0 ? e.push(r) : t.push(r) : i.push(r);
    }
    e.sort((n, r) => n.moduleInitOrder > r.moduleInitOrder ? 1 : -1), t.sort((n, r) => n.moduleInitOrder > r.moduleInitOrder ? 1 : -1), this.modulesRegular = e.concat(i.concat(t));
  }
};
D(Ce, "moduleBindings", {}), D(Ce, "moduleExtensions", {}), D(Ce, "modulesRegistered", !1), D(Ce, "defaultModules", !1);
let Ma = Ce;
class bm extends st {
  constructor(e) {
    super(e), this.element = this._createAlertElement(), this.msgElement = this._createMsgElement(), this.type = null, this.element.appendChild(this.msgElement);
  }
  _createAlertElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-alert"), e;
  }
  _createMsgElement() {
    var e = document.createElement("div");
    return e.classList.add("tabulator-alert-msg"), e.setAttribute("role", "alert"), e;
  }
  _typeClass() {
    return "tabulator-alert-state-" + this.type;
  }
  alert(e, t = "msg") {
    if (e) {
      for (this.clear(), this.dispatch("alert-show", t), this.type = t; this.msgElement.firstChild; ) this.msgElement.removeChild(this.msgElement.firstChild);
      this.msgElement.classList.add(this._typeClass()), typeof e == "function" && (e = e()), e instanceof HTMLElement ? this.msgElement.appendChild(e) : this.msgElement.innerHTML = e, this.table.element.appendChild(this.element);
    }
  }
  clear() {
    this.dispatch("alert-hide", this.type), this.element.parentNode && this.element.parentNode.removeChild(this.element), this.msgElement.classList.remove(this._typeClass());
  }
}
const mi = class mi extends Ma {
  static extendModule() {
    mi.initializeModuleBinder(), mi._extendModule(...arguments);
  }
  static registerModule() {
    mi.initializeModuleBinder(), mi._registerModule(...arguments);
  }
  constructor(e, t, i) {
    super(), mi.initializeModuleBinder(i), this.options = {}, this.columnManager = null, this.rowManager = null, this.footerManager = null, this.alertManager = null, this.vdomHoz = null, this.externalEvents = null, this.eventBus = null, this.interactionMonitor = !1, this.browser = "", this.browserSlow = !1, this.browserMobile = !1, this.rtl = !1, this.originalElement = null, this.componentFunctionBinder = new rm(this), this.dataLoader = !1, this.modules = {}, this.modulesCore = [], this.modulesRegular = [], this.deprecationAdvisor = new hm(this), this.optionsList = new _u(this, "table constructor"), this.dependencyRegistry = new cm(this), this.initialized = !1, this.destroyed = !1, this.initializeElement(e) && (this.initializeCoreSystems(t), setTimeout(() => {
      this._create();
    })), this.constructor.registry.register(this);
  }
  initializeElement(e) {
    return typeof HTMLElement < "u" && e instanceof HTMLElement ? (this.element = e, !0) : typeof e == "string" ? (this.element = document.querySelector(e), this.element ? !0 : (console.error("Tabulator Creation Error - no element found matching selector: ", e), !1)) : (console.error("Tabulator Creation Error - Invalid element provided:", e), !1);
  }
  initializeCoreSystems(e) {
    this.columnManager = new em(this), this.rowManager = new sm(this), this.footerManager = new Am(this), this.dataLoader = new om(this), this.alertManager = new bm(this), this._bindModules(), this.options = this.optionsList.generate(mi.defaultOptions, e), this._clearObjectPointers(), this._mapDeprecatedFunctionality(), this.externalEvents = new am(this, this.options, this.options.debugEventsExternal), this.eventBus = new lm(this.options.debugEventsInternal), this.interactionMonitor = new nm(this), this.dataLoader.initialize(), this.footerManager.initialize(), this.dependencyRegistry.initialize();
  }
  //convert deprecated functionality to new functions
  _mapDeprecatedFunctionality() {
  }
  _clearSelection() {
    this.element.classList.add("tabulator-block-select"), window.getSelection ? window.getSelection().empty ? window.getSelection().empty() : window.getSelection().removeAllRanges && window.getSelection().removeAllRanges() : document.selection && document.selection.empty(), this.element.classList.remove("tabulator-block-select");
  }
  //create table
  _create() {
    this.externalEvents.dispatch("tableBuilding"), this.eventBus.dispatch("table-building"), this._rtlCheck(), this._buildElement(), this._initializeTable(), this.initialized = !0, this._loadInitialData().finally(() => {
      this.eventBus.dispatch("table-initialized"), this.externalEvents.dispatch("tableBuilt");
    });
  }
  _rtlCheck() {
    var e = window.getComputedStyle(this.element);
    switch (this.options.textDirection) {
      case "auto":
        if (e.direction !== "rtl")
          break;
      case "rtl":
        this.element.classList.add("tabulator-rtl"), this.rtl = !0;
        break;
      case "ltr":
        this.element.classList.add("tabulator-ltr");
      default:
        this.rtl = !1;
    }
  }
  //clear pointers to objects in default config object
  _clearObjectPointers() {
    this.options.columns = this.options.columns.slice(0), Array.isArray(this.options.data) && !this.options.reactiveData && (this.options.data = this.options.data.slice(0));
  }
  //build tabulator element
  _buildElement() {
    var e = this.element, t = this.options, i;
    if (e.tagName === "TABLE") {
      this.originalElement = this.element, i = document.createElement("div");
      var s = e.attributes;
      for (var n in s)
        typeof s[n] == "object" && i.setAttribute(s[n].name, s[n].value);
      e.parentNode.replaceChild(i, e), this.element = e = i;
    }
    for (e.classList.add("tabulator"), e.setAttribute("role", "grid"); e.firstChild; ) e.removeChild(e.firstChild);
    t.height && (t.height = isNaN(t.height) ? t.height : t.height + "px", e.style.height = t.height), t.minHeight !== !1 && (t.minHeight = isNaN(t.minHeight) ? t.minHeight : t.minHeight + "px", e.style.minHeight = t.minHeight), t.maxHeight !== !1 && (t.maxHeight = isNaN(t.maxHeight) ? t.maxHeight : t.maxHeight + "px", e.style.maxHeight = t.maxHeight);
  }
  //initialize core systems and modules
  _initializeTable() {
    var e = this.element, t = this.options;
    this.interactionMonitor.initialize(), this.columnManager.initialize(), this.rowManager.initialize(), this._detectBrowser(), this.modulesCore.forEach((i) => {
      i.initialize();
    }), e.appendChild(this.columnManager.getElement()), e.appendChild(this.rowManager.getElement()), t.footerElement && this.footerManager.activate(), t.autoColumns && t.data && this.columnManager.generateColumnsFromRowData(this.options.data), this.modulesRegular.forEach((i) => {
      i.initialize();
    }), this.columnManager.setColumns(t.columns), this.eventBus.dispatch("table-built");
  }
  _loadInitialData() {
    return this.dataLoader.load(this.options.data).finally(() => {
      this.columnManager.verticalAlignHeaders();
    });
  }
  //deconstructor
  destroy() {
    var e = this.element;
    for (this.destroyed = !0, this.constructor.registry.deregister(this), this.eventBus.dispatch("table-destroy"), this.rowManager.destroy(); e.firstChild; ) e.removeChild(e.firstChild);
    e.classList.remove("tabulator"), this.externalEvents.dispatch("tableDestroyed");
  }
  _detectBrowser() {
    var e = navigator.userAgent || navigator.vendor || window.opera;
    e.indexOf("Trident") > -1 ? (this.browser = "ie", this.browserSlow = !0) : e.indexOf("Edge") > -1 ? (this.browser = "edge", this.browserSlow = !0) : e.indexOf("Firefox") > -1 ? (this.browser = "firefox", this.browserSlow = !1) : e.indexOf("Mac OS") > -1 ? (this.browser = "safari", this.browserSlow = !1) : (this.browser = "other", this.browserSlow = !1), this.browserMobile = /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.slice(0, 4));
  }
  initGuard(e, t) {
    var i, s;
    return this.options.debugInitialization && !this.initialized && (e || (i = new Error().stack.split(`
`), s = i[0] == "Error" ? i[2] : i[1], s[0] == " " ? e = s.trim().split(" ")[1].split(".")[1] : e = s.trim().split("@")[0]), console.warn("Table Not Initialized - Calling the " + e + " function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function." + (t ? " " + t : ""))), this.initialized;
  }
  ////////////////// Data Handling //////////////////
  //block table redrawing
  blockRedraw() {
    this.initGuard(), this.eventBus.dispatch("redraw-blocking"), this.rowManager.blockRedraw(), this.columnManager.blockRedraw(), this.eventBus.dispatch("redraw-blocked");
  }
  //restore table redrawing
  restoreRedraw() {
    this.initGuard(), this.eventBus.dispatch("redraw-restoring"), this.rowManager.restoreRedraw(), this.columnManager.restoreRedraw(), this.eventBus.dispatch("redraw-restored");
  }
  //load data
  setData(e, t, i) {
    return this.initGuard(!1, "To set initial data please use the 'data' property in the table constructor."), this.dataLoader.load(e, t, i, !1);
  }
  //clear data
  clearData() {
    this.initGuard(), this.dataLoader.blockActiveLoad(), this.rowManager.clearData();
  }
  //get table data array
  getData(e) {
    return this.rowManager.getData(e);
  }
  //get table data array count
  getDataCount(e) {
    return this.rowManager.getDataCount(e);
  }
  //replace data, keeping table in position with same sort
  replaceData(e, t, i) {
    return this.initGuard(), this.dataLoader.load(e, t, i, !0, !0);
  }
  //update table data
  updateData(e) {
    var t = 0;
    return this.initGuard(), new Promise((i, s) => {
      this.dataLoader.blockActiveLoad(), typeof e == "string" && (e = JSON.parse(e)), e && e.length > 0 ? e.forEach((n) => {
        var r = this.rowManager.findRow(n[this.options.index]);
        r ? (t++, r.updateData(n).then(() => {
          t--, t || i();
        }).catch((o) => {
          s("Update Error - Unable to update row", n, o);
        })) : s("Update Error - Unable to find row", n);
      }) : (console.warn("Update Error - No data provided"), s("Update Error - No data provided"));
    });
  }
  addData(e, t, i) {
    return this.initGuard(), new Promise((s, n) => {
      this.dataLoader.blockActiveLoad(), typeof e == "string" && (e = JSON.parse(e)), e ? this.rowManager.addRows(e, t, i).then((r) => {
        var o = [];
        r.forEach(function(a) {
          o.push(a.getComponent());
        }), s(o);
      }) : (console.warn("Update Error - No data provided"), n("Update Error - No data provided"));
    });
  }
  //update table data
  updateOrAddData(e) {
    var t = [], i = 0;
    return this.initGuard(), new Promise((s, n) => {
      this.dataLoader.blockActiveLoad(), typeof e == "string" && (e = JSON.parse(e)), e && e.length > 0 ? e.forEach((r) => {
        var o = this.rowManager.findRow(r[this.options.index]);
        i++, o ? o.updateData(r).then(() => {
          i--, t.push(o.getComponent()), i || s(t);
        }) : this.rowManager.addRows(r).then((a) => {
          i--, t.push(a[0].getComponent()), i || s(t);
        });
      }) : (console.warn("Update Error - No data provided"), n("Update Error - No data provided"));
    });
  }
  //get row object
  getRow(e) {
    var t = this.rowManager.findRow(e);
    return t ? t.getComponent() : (console.warn("Find Error - No matching row found:", e), !1);
  }
  //get row object
  getRowFromPosition(e) {
    var t = this.rowManager.getRowFromPosition(e);
    return t ? t.getComponent() : (console.warn("Find Error - No matching row found:", e), !1);
  }
  //delete row from table
  deleteRow(e) {
    var t = [];
    this.initGuard(), Array.isArray(e) || (e = [e]);
    for (let i of e) {
      let s = this.rowManager.findRow(i, !0);
      if (s)
        t.push(s);
      else
        return console.error("Delete Error - No matching row found:", i), Promise.reject("Delete Error - No matching row found");
    }
    return t.sort((i, s) => this.rowManager.rows.indexOf(i) > this.rowManager.rows.indexOf(s) ? 1 : -1), t.forEach((i) => {
      i.delete();
    }), this.rowManager.reRenderInPosition(), Promise.resolve();
  }
  //add row to table
  addRow(e, t, i) {
    return this.initGuard(), typeof e == "string" && (e = JSON.parse(e)), this.rowManager.addRows(e, t, i, !0).then((s) => s[0].getComponent());
  }
  //update a row if it exists otherwise create it
  updateOrAddRow(e, t) {
    var i = this.rowManager.findRow(e);
    return this.initGuard(), typeof t == "string" && (t = JSON.parse(t)), i ? i.updateData(t).then(() => i.getComponent()) : this.rowManager.addRows(t).then((s) => s[0].getComponent());
  }
  //update row data
  updateRow(e, t) {
    var i = this.rowManager.findRow(e);
    return this.initGuard(), typeof t == "string" && (t = JSON.parse(t)), i ? i.updateData(t).then(() => Promise.resolve(i.getComponent())) : (console.warn("Update Error - No matching row found:", e), Promise.reject("Update Error - No matching row found"));
  }
  //scroll to row in DOM
  scrollToRow(e, t, i) {
    var s = this.rowManager.findRow(e);
    return s ? this.rowManager.scrollToRow(s, t, i) : (console.warn("Scroll Error - No matching row found:", e), Promise.reject("Scroll Error - No matching row found"));
  }
  moveRow(e, t, i) {
    var s = this.rowManager.findRow(e);
    this.initGuard(), s ? s.moveToRow(t, i) : console.warn("Move Error - No matching row found:", e);
  }
  getRows(e) {
    return this.rowManager.getComponents(e);
  }
  //get position of row in table
  getRowPosition(e) {
    var t = this.rowManager.findRow(e);
    return t ? t.getPosition() : (console.warn("Position Error - No matching row found:", e), !1);
  }
  /////////////// Column Functions  ///////////////
  setColumns(e) {
    this.initGuard(!1, "To set initial columns please use the 'columns' property in the table constructor"), this.columnManager.setColumns(e);
  }
  getColumns(e) {
    return this.columnManager.getComponents(e);
  }
  getColumn(e) {
    var t = this.columnManager.findColumn(e);
    return t ? t.getComponent() : (console.warn("Find Error - No matching column found:", e), !1);
  }
  getColumnDefinitions() {
    return this.columnManager.getDefinitionTree();
  }
  showColumn(e) {
    var t = this.columnManager.findColumn(e);
    if (this.initGuard(), t)
      t.show();
    else
      return console.warn("Column Show Error - No matching column found:", e), !1;
  }
  hideColumn(e) {
    var t = this.columnManager.findColumn(e);
    if (this.initGuard(), t)
      t.hide();
    else
      return console.warn("Column Hide Error - No matching column found:", e), !1;
  }
  toggleColumn(e) {
    var t = this.columnManager.findColumn(e);
    if (this.initGuard(), t)
      t.visible ? t.hide() : t.show();
    else
      return console.warn("Column Visibility Toggle Error - No matching column found:", e), !1;
  }
  addColumn(e, t, i) {
    var s = this.columnManager.findColumn(i);
    return this.initGuard(), this.columnManager.addColumn(e, t, s).then((n) => n.getComponent());
  }
  deleteColumn(e) {
    var t = this.columnManager.findColumn(e);
    return this.initGuard(), t ? t.delete() : (console.warn("Column Delete Error - No matching column found:", e), Promise.reject());
  }
  updateColumnDefinition(e, t) {
    var i = this.columnManager.findColumn(e);
    return this.initGuard(), i ? i.updateDefinition(t) : (console.warn("Column Update Error - No matching column found:", e), Promise.reject());
  }
  moveColumn(e, t, i) {
    var s = this.columnManager.findColumn(e), n = this.columnManager.findColumn(t);
    this.initGuard(), s ? n ? this.columnManager.moveColumn(s, n, i) : console.warn("Move Error - No matching column found:", n) : console.warn("Move Error - No matching column found:", e);
  }
  //scroll to column in DOM
  scrollToColumn(e, t, i) {
    return new Promise((s, n) => {
      var r = this.columnManager.findColumn(e);
      return r ? this.columnManager.scrollToColumn(r, t, i) : (console.warn("Scroll Error - No matching column found:", e), Promise.reject("Scroll Error - No matching column found"));
    });
  }
  //////////// General Public Functions ////////////
  //redraw list without updating data
  redraw(e) {
    this.initGuard(), this.columnManager.redraw(e), this.rowManager.redraw(e);
  }
  setHeight(e) {
    this.options.height = isNaN(e) ? e : e + "px", this.element.style.height = this.options.height, this.rowManager.initializeRenderer(), this.rowManager.redraw(!0);
  }
  //////////////////// Event Bus ///////////////////
  on(e, t) {
    this.externalEvents.subscribe(e, t);
  }
  off(e, t) {
    this.externalEvents.unsubscribe(e, t);
  }
  dispatchEvent() {
    var e = Array.from(arguments);
    e.shift(), this.externalEvents.dispatch(...arguments);
  }
  //////////////////// Alerts ///////////////////
  alert(e, t) {
    this.initGuard(), this.alertManager.alert(e, t);
  }
  clearAlert() {
    this.initGuard(), this.alertManager.clear();
  }
  ////////////// Extension Management //////////////
  modExists(e, t) {
    return this.modules[e] ? !0 : (t && console.error("Tabulator Module Not Installed: " + e), !1);
  }
  module(e) {
    var t = this.modules[e];
    return t || console.error("Tabulator module not installed: " + e), t;
  }
};
//default setup options
D(mi, "defaultOptions", $p);
let Da = mi;
var hA = Da;
class wm extends hA {
  static extendModule() {
    hA.initializeModuleBinder(wo), hA._extendModule(...arguments);
  }
  static registerModule() {
    hA.initializeModuleBinder(wo), hA._registerModule(...arguments);
  }
  constructor(e, t, i) {
    super(e, t, wo);
  }
}
var Gl = wm;
const vm = Symbol.for("y2kfund.supabase"), Mu = {
  positions: (A, e) => ["positions", A, e],
  trades: (A) => ["trades", A],
  orders: (A) => ["orders", A],
  cashTransactions: (A) => ["cashTransactions", A],
  transfers: (A) => ["transfers", A],
  nlvMargin: (A, e) => ["nlvMargin", A, e],
  settledCash: (A, e) => ["settledCash", A, e],
  thesis: () => ["thesis"],
  thesisConnections: () => ["thesisConnections"],
  userAccountAccess: (A) => ["userAccountAccess", A]
};
function Du() {
  const A = nu(vm, null);
  if (!A) throw new Error("[@y2kfund/core] Supabase client not found. Did you install createCore()?");
  return A;
}
async function Su(A, e) {
  if (!e)
    return console.log(" No userId provided, showing all positions"), [];
  try {
    console.log(" Fetching accessible accounts for user:", e);
    const { data: t, error: i } = await A.schema("hf").from("user_account_access").select("internal_account_id").eq("user_id", e).eq("is_active", !0);
    if (i)
      return console.error(" Error fetching user account access:", i), [];
    if (!t || t.length === 0)
      return console.log(" No account access found for user, showing all positions"), [];
    const s = t.map((n) => n.internal_account_id);
    return console.log(" User has access to accounts:", s), s;
  } catch (t) {
    return console.error(" Exception fetching account access:", t), [];
  }
}
function Bm(A, e, t) {
  const i = Du(), s = () => t && typeof t == "object" && "value" in t ? t.value : t, n = [...Mu.nlvMargin(A, e), s()], r = fl(), o = Is({
    queryKey: n,
    queryFn: async () => {
      const h = s(), c = await Su(i, e);
      console.log(" Querying NLV/Margin with config:", {
        limit: A,
        userId: e || "none",
        asOfDate: h || "latest",
        accessibleAccountIds: c.length > 0 ? c : "all"
      });
      let u = [];
      if (h) {
        const f = (/* @__PURE__ */ new Date(h + "T23:59:59.999Z")).toISOString();
        console.log(" Fetching historical NLV/Margin data for date:", h, "up to:", f);
        let p = c;
        if (p.length === 0) {
          const { data: x, error: U } = await i.schema("hf").from("netliquidation").select("internal_account_id").neq("internal_account_id", null);
          if (U)
            throw console.error(" Error fetching all account IDs:", U), U;
          p = Array.from(new Set((x || []).map((E) => E.internal_account_id)));
        }
        const b = p.map(async (x) => {
          const { data: U, error: E } = await i.schema("hf").from("netliquidation").select("*").eq("internal_account_id", x).lte("fetched_at", f).order("fetched_at", { ascending: !1 }).limit(1).single();
          if (E && E.code !== "PGRST116")
            return console.error(` Error fetching NLV for ${x}:`, E), null;
          const { data: H, error: T } = await i.schema("hf").from("maintenance_margin").select("*").eq("internal_account_id", x).lte("fetched_at", f).order("fetched_at", { ascending: !1 }).limit(1).single();
          return T && T.code !== "PGRST116" ? (console.error(` Error fetching MM for ${x}:`, T), null) : !U || !H ? null : {
            nlv_id: U.id,
            nlv_val: U.nlv,
            fetched_at_val: U.fetched_at,
            maintenance_val: parseFloat(H.maintenance),
            nlv_internal_account_id: x,
            excess_maintenance_margin: U.nlv - parseFloat(H.maintenance)
          };
        });
        u = (await Promise.all(b)).filter((x) => x !== null);
        const { data: w } = await i.schema("hf").from("user_accounts_master").select("internal_account_id, legal_entity, archived, sync_mode"), C = new Map(
          (w || []).map((x) => [x.internal_account_id, x])
        );
        u = u.map((x) => {
          var U, E, H;
          return {
            ...x,
            legal_entity: (U = C.get(x.nlv_internal_account_id || "")) == null ? void 0 : U.legal_entity,
            archived: ((E = C.get(x.nlv_internal_account_id || "")) == null ? void 0 : E.archived) || !1,
            sync_mode: (H = C.get(x.nlv_internal_account_id || "")) == null ? void 0 : H.sync_mode
          };
        });
      } else {
        const { data: f, error: p } = await i.schema("hf").rpc("get_nlv_margin_with_excess_and_sync_type", {
          p_limit: A
        });
        if (p) throw p;
        u = f || [];
      }
      let d = /* @__PURE__ */ new Map();
      if (e) {
        const { data: f } = await i.schema("hf").from("user_account_alias").select("internal_account_id, alias").eq("user_id", e);
        d = new Map((f || []).map((p) => [p.internal_account_id, p.alias]));
      }
      return u = u.map((f) => ({
        ...f,
        legal_entity: d.get(f.nlv_internal_account_id || "") || f.legal_entity
      })), c.length > 0 && u.length > 0 && u[0] && "nlv_internal_account_id" in u[0] && (console.log(" Applying access filter for NLV/Margin data"), u = u.filter(
        (f) => f.nlv_internal_account_id && c.includes(f.nlv_internal_account_id)
      )), console.log(" NLV/Margin query success:", {
        totalRows: u.length,
        asOfDate: h || "latest",
        filtered: c.length > 0
      }), u;
    },
    staleTime: 6e4
  }), a = i.channel("netliquidation_all").on(
    "postgres_changes",
    {
      schema: "hf",
      table: "netliquidation",
      event: "*"
    },
    () => r.invalidateQueries({ queryKey: n })
  ).subscribe(), l = i.channel("maintenance_margin_all").on(
    "postgres_changes",
    {
      schema: "hf",
      table: "maintenance_margin",
      event: "*"
    },
    () => r.invalidateQueries({ queryKey: n })
  ).subscribe();
  return {
    ...o,
    _cleanup: () => {
      var h, c;
      (h = a == null ? void 0 : a.unsubscribe) == null || h.call(a), (c = l == null ? void 0 : l.unsubscribe) == null || c.call(l);
    }
  };
}
function Cm(A, e, t) {
  const i = Du(), s = () => t && typeof t == "object" && "value" in t ? t.value : t, n = [...Mu.settledCash(A, e), s()], r = fl(), o = Is({
    queryKey: n,
    queryFn: async () => {
      const l = s(), h = await Su(i, e);
      console.log(" Querying Settled Cash with config:", {
        limit: A,
        userId: e || "none",
        asOfDate: l || "latest",
        accessibleAccountIds: h.length > 0 ? h : "all"
      });
      let c = [];
      if (l) {
        const d = (/* @__PURE__ */ new Date(l + "T23:59:59.999Z")).toISOString();
        console.log(" Fetching historical Settled Cash data for date:", l, "up to:", d);
        let f = h;
        if (f.length === 0) {
          const { data: C, error: x } = await i.schema("hf").from("settledcash").select("internal_account_id").neq("internal_account_id", null);
          if (x)
            throw console.error(" Error fetching all account IDs:", x), x;
          f = Array.from(new Set((C || []).map((U) => U.internal_account_id)));
        }
        const p = f.map(async (C) => {
          const { data: x, error: U } = await i.schema("hf").from("settledcash").select("*").eq("internal_account_id", C).lte("fetched_at", d).order("fetched_at", { ascending: !1 }).limit(1).single();
          return U && U.code !== "PGRST116" ? (console.error(` Error fetching Settled Cash for ${C}:`, U), null) : x;
        });
        c = (await Promise.all(p)).filter((C) => C !== null);
        const { data: b } = await i.schema("hf").from("user_accounts_master").select("internal_account_id, legal_entity, archived, sync_mode"), w = new Map(
          (b || []).map((C) => [C.internal_account_id, C])
        );
        c = c.map((C) => {
          var x, U, E;
          return {
            ...C,
            legal_entity: (x = w.get(C.internal_account_id || "")) == null ? void 0 : x.legal_entity,
            archived: ((U = w.get(C.internal_account_id || "")) == null ? void 0 : U.archived) || !1,
            sync_mode: (E = w.get(C.internal_account_id || "")) == null ? void 0 : E.sync_mode
          };
        });
      } else {
        const { data: d, error: f } = await i.schema("hf").from("settledcash").select("internal_account_id").neq("internal_account_id", null);
        if (f)
          throw console.error(" Error fetching all account IDs:", f), f;
        const p = Array.from(new Set((d || []).map((C) => C.internal_account_id))).map(async (C) => {
          const { data: x, error: U } = await i.schema("hf").from("settledcash").select("*").eq("internal_account_id", C).order("fetched_at", { ascending: !1 }).limit(1).single();
          return U && U.code !== "PGRST116" ? (console.error(` Error fetching latest Settled Cash for ${C}:`, U), null) : x;
        });
        c = (await Promise.all(p)).filter((C) => C !== null);
        const { data: b } = await i.schema("hf").from("user_accounts_master").select("internal_account_id, legal_entity, archived, sync_mode"), w = new Map(
          (b || []).map((C) => [C.internal_account_id, C])
        );
        c = c.map((C) => {
          var x, U, E;
          return {
            ...C,
            legal_entity: (x = w.get(C.internal_account_id || "")) == null ? void 0 : x.legal_entity,
            archived: ((U = w.get(C.internal_account_id || "")) == null ? void 0 : U.archived) || !1,
            sync_mode: (E = w.get(C.internal_account_id || "")) == null ? void 0 : E.sync_mode
          };
        });
      }
      let u = /* @__PURE__ */ new Map();
      if (e) {
        const { data: d } = await i.schema("hf").from("user_account_alias").select("internal_account_id, alias").eq("user_id", e);
        u = new Map((d || []).map((f) => [f.internal_account_id, f.alias]));
      }
      return c = c.map((d) => ({
        ...d,
        legal_entity: u.get(d.internal_account_id || "") || d.legal_entity
      })), h.length > 0 && c.length > 0 && c[0] && "internal_account_id" in c[0] && (console.log(" Applying access filter for Settled Cash data"), c = c.filter(
        (d) => d.internal_account_id && h.includes(d.internal_account_id)
      )), console.log(" Settled Cash query success:", {
        totalRows: c.length,
        asOfDate: l || "latest",
        filtered: h.length > 0
      }), c;
    },
    staleTime: 6e4
  }), a = i.channel("settledcash_all").on(
    "postgres_changes",
    {
      schema: "hf",
      table: "settledcash",
      event: "*"
    },
    () => r.invalidateQueries({ queryKey: n })
  ).subscribe();
  return {
    ...o,
    _cleanup: () => {
      var l;
      (l = a == null ? void 0 : a.unsubscribe) == null || l.call(a);
    }
  };
}
/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */
function on(A) {
  return A + 0.5 | 0;
}
const Oi = (A, e, t) => Math.max(Math.min(A, t), e);
function vA(A) {
  return Oi(on(A * 2.55), 0, 255);
}
function zi(A) {
  return Oi(on(A * 255), 0, 255);
}
function bi(A) {
  return Oi(on(A / 2.55) / 100, 0, 1);
}
function Wl(A) {
  return Oi(on(A * 100), 0, 100);
}
const Dt = { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, A: 10, B: 11, C: 12, D: 13, E: 14, F: 15, a: 10, b: 11, c: 12, d: 13, e: 14, f: 15 }, Sa = [..."0123456789ABCDEF"], ym = (A) => Sa[A & 15], Em = (A) => Sa[(A & 240) >> 4] + Sa[A & 15], Fn = (A) => (A & 240) >> 4 === (A & 15), Fm = (A) => Fn(A.r) && Fn(A.g) && Fn(A.b) && Fn(A.a);
function xm(A) {
  var e = A.length, t;
  return A[0] === "#" && (e === 4 || e === 5 ? t = {
    r: 255 & Dt[A[1]] * 17,
    g: 255 & Dt[A[2]] * 17,
    b: 255 & Dt[A[3]] * 17,
    a: e === 5 ? Dt[A[4]] * 17 : 255
  } : (e === 7 || e === 9) && (t = {
    r: Dt[A[1]] << 4 | Dt[A[2]],
    g: Dt[A[3]] << 4 | Dt[A[4]],
    b: Dt[A[5]] << 4 | Dt[A[6]],
    a: e === 9 ? Dt[A[7]] << 4 | Dt[A[8]] : 255
  })), t;
}
const Qm = (A, e) => A < 255 ? e(A) : "";
function Um(A) {
  var e = Fm(A) ? ym : Em;
  return A ? "#" + e(A.r) + e(A.g) + e(A.b) + Qm(A.a, e) : void 0;
}
const _m = /^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;
function Tu(A, e, t) {
  const i = e * Math.min(t, 1 - t), s = (n, r = (n + A / 30) % 12) => t - i * Math.max(Math.min(r - 3, 9 - r, 1), -1);
  return [s(0), s(8), s(4)];
}
function Hm(A, e, t) {
  const i = (s, n = (s + A / 60) % 6) => t - t * e * Math.max(Math.min(n, 4 - n, 1), 0);
  return [i(5), i(3), i(1)];
}
function Mm(A, e, t) {
  const i = Tu(A, 1, 0.5);
  let s;
  for (e + t > 1 && (s = 1 / (e + t), e *= s, t *= s), s = 0; s < 3; s++)
    i[s] *= 1 - e - t, i[s] += e;
  return i;
}
function Dm(A, e, t, i, s) {
  return A === s ? (e - t) / i + (e < t ? 6 : 0) : e === s ? (t - A) / i + 2 : (A - e) / i + 4;
}
function pl(A) {
  const t = A.r / 255, i = A.g / 255, s = A.b / 255, n = Math.max(t, i, s), r = Math.min(t, i, s), o = (n + r) / 2;
  let a, l, h;
  return n !== r && (h = n - r, l = o > 0.5 ? h / (2 - n - r) : h / (n + r), a = Dm(t, i, s, h, n), a = a * 60 + 0.5), [a | 0, l || 0, o];
}
function ml(A, e, t, i) {
  return (Array.isArray(e) ? A(e[0], e[1], e[2]) : A(e, t, i)).map(zi);
}
function bl(A, e, t) {
  return ml(Tu, A, e, t);
}
function Sm(A, e, t) {
  return ml(Mm, A, e, t);
}
function Tm(A, e, t) {
  return ml(Hm, A, e, t);
}
function Lu(A) {
  return (A % 360 + 360) % 360;
}
function Lm(A) {
  const e = _m.exec(A);
  let t = 255, i;
  if (!e)
    return;
  e[5] !== i && (t = e[6] ? vA(+e[5]) : zi(+e[5]));
  const s = Lu(+e[2]), n = +e[3] / 100, r = +e[4] / 100;
  return e[1] === "hwb" ? i = Sm(s, n, r) : e[1] === "hsv" ? i = Tm(s, n, r) : i = bl(s, n, r), {
    r: i[0],
    g: i[1],
    b: i[2],
    a: t
  };
}
function Rm(A, e) {
  var t = pl(A);
  t[0] = Lu(t[0] + e), t = bl(t), A.r = t[0], A.g = t[1], A.b = t[2];
}
function Im(A) {
  if (!A)
    return;
  const e = pl(A), t = e[0], i = Wl(e[1]), s = Wl(e[2]);
  return A.a < 255 ? `hsla(${t}, ${i}%, ${s}%, ${bi(A.a)})` : `hsl(${t}, ${i}%, ${s}%)`;
}
const jl = {
  x: "dark",
  Z: "light",
  Y: "re",
  X: "blu",
  W: "gr",
  V: "medium",
  U: "slate",
  A: "ee",
  T: "ol",
  S: "or",
  B: "ra",
  C: "lateg",
  D: "ights",
  R: "in",
  Q: "turquois",
  E: "hi",
  P: "ro",
  O: "al",
  N: "le",
  M: "de",
  L: "yello",
  F: "en",
  K: "ch",
  G: "arks",
  H: "ea",
  I: "ightg",
  J: "wh"
}, Xl = {
  OiceXe: "f0f8ff",
  antiquewEte: "faebd7",
  aqua: "ffff",
  aquamarRe: "7fffd4",
  azuY: "f0ffff",
  beige: "f5f5dc",
  bisque: "ffe4c4",
  black: "0",
  blanKedOmond: "ffebcd",
  Xe: "ff",
  XeviTet: "8a2be2",
  bPwn: "a52a2a",
  burlywood: "deb887",
  caMtXe: "5f9ea0",
  KartYuse: "7fff00",
  KocTate: "d2691e",
  cSO: "ff7f50",
  cSnflowerXe: "6495ed",
  cSnsilk: "fff8dc",
  crimson: "dc143c",
  cyan: "ffff",
  xXe: "8b",
  xcyan: "8b8b",
  xgTMnPd: "b8860b",
  xWay: "a9a9a9",
  xgYF: "6400",
  xgYy: "a9a9a9",
  xkhaki: "bdb76b",
  xmagFta: "8b008b",
  xTivegYF: "556b2f",
  xSange: "ff8c00",
  xScEd: "9932cc",
  xYd: "8b0000",
  xsOmon: "e9967a",
  xsHgYF: "8fbc8f",
  xUXe: "483d8b",
  xUWay: "2f4f4f",
  xUgYy: "2f4f4f",
  xQe: "ced1",
  xviTet: "9400d3",
  dAppRk: "ff1493",
  dApskyXe: "bfff",
  dimWay: "696969",
  dimgYy: "696969",
  dodgerXe: "1e90ff",
  fiYbrick: "b22222",
  flSOwEte: "fffaf0",
  foYstWAn: "228b22",
  fuKsia: "ff00ff",
  gaRsbSo: "dcdcdc",
  ghostwEte: "f8f8ff",
  gTd: "ffd700",
  gTMnPd: "daa520",
  Way: "808080",
  gYF: "8000",
  gYFLw: "adff2f",
  gYy: "808080",
  honeyMw: "f0fff0",
  hotpRk: "ff69b4",
  RdianYd: "cd5c5c",
  Rdigo: "4b0082",
  ivSy: "fffff0",
  khaki: "f0e68c",
  lavFMr: "e6e6fa",
  lavFMrXsh: "fff0f5",
  lawngYF: "7cfc00",
  NmoncEffon: "fffacd",
  ZXe: "add8e6",
  ZcSO: "f08080",
  Zcyan: "e0ffff",
  ZgTMnPdLw: "fafad2",
  ZWay: "d3d3d3",
  ZgYF: "90ee90",
  ZgYy: "d3d3d3",
  ZpRk: "ffb6c1",
  ZsOmon: "ffa07a",
  ZsHgYF: "20b2aa",
  ZskyXe: "87cefa",
  ZUWay: "778899",
  ZUgYy: "778899",
  ZstAlXe: "b0c4de",
  ZLw: "ffffe0",
  lime: "ff00",
  limegYF: "32cd32",
  lRF: "faf0e6",
  magFta: "ff00ff",
  maPon: "800000",
  VaquamarRe: "66cdaa",
  VXe: "cd",
  VScEd: "ba55d3",
  VpurpN: "9370db",
  VsHgYF: "3cb371",
  VUXe: "7b68ee",
  VsprRggYF: "fa9a",
  VQe: "48d1cc",
  VviTetYd: "c71585",
  midnightXe: "191970",
  mRtcYam: "f5fffa",
  mistyPse: "ffe4e1",
  moccasR: "ffe4b5",
  navajowEte: "ffdead",
  navy: "80",
  Tdlace: "fdf5e6",
  Tive: "808000",
  TivedBb: "6b8e23",
  Sange: "ffa500",
  SangeYd: "ff4500",
  ScEd: "da70d6",
  pOegTMnPd: "eee8aa",
  pOegYF: "98fb98",
  pOeQe: "afeeee",
  pOeviTetYd: "db7093",
  papayawEp: "ffefd5",
  pHKpuff: "ffdab9",
  peru: "cd853f",
  pRk: "ffc0cb",
  plum: "dda0dd",
  powMrXe: "b0e0e6",
  purpN: "800080",
  YbeccapurpN: "663399",
  Yd: "ff0000",
  Psybrown: "bc8f8f",
  PyOXe: "4169e1",
  saddNbPwn: "8b4513",
  sOmon: "fa8072",
  sandybPwn: "f4a460",
  sHgYF: "2e8b57",
  sHshell: "fff5ee",
  siFna: "a0522d",
  silver: "c0c0c0",
  skyXe: "87ceeb",
  UXe: "6a5acd",
  UWay: "708090",
  UgYy: "708090",
  snow: "fffafa",
  sprRggYF: "ff7f",
  stAlXe: "4682b4",
  tan: "d2b48c",
  teO: "8080",
  tEstN: "d8bfd8",
  tomato: "ff6347",
  Qe: "40e0d0",
  viTet: "ee82ee",
  JHt: "f5deb3",
  wEte: "ffffff",
  wEtesmoke: "f5f5f5",
  Lw: "ffff00",
  LwgYF: "9acd32"
};
function km() {
  const A = {}, e = Object.keys(Xl), t = Object.keys(jl);
  let i, s, n, r, o;
  for (i = 0; i < e.length; i++) {
    for (r = o = e[i], s = 0; s < t.length; s++)
      n = t[s], o = o.replace(n, jl[n]);
    n = parseInt(Xl[r], 16), A[o] = [n >> 16 & 255, n >> 8 & 255, n & 255];
  }
  return A;
}
let xn;
function Om(A) {
  xn || (xn = km(), xn.transparent = [0, 0, 0, 0]);
  const e = xn[A.toLowerCase()];
  return e && {
    r: e[0],
    g: e[1],
    b: e[2],
    a: e.length === 4 ? e[3] : 255
  };
}
const Pm = /^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;
function Nm(A) {
  const e = Pm.exec(A);
  let t = 255, i, s, n;
  if (e) {
    if (e[7] !== i) {
      const r = +e[7];
      t = e[8] ? vA(r) : Oi(r * 255, 0, 255);
    }
    return i = +e[1], s = +e[3], n = +e[5], i = 255 & (e[2] ? vA(i) : Oi(i, 0, 255)), s = 255 & (e[4] ? vA(s) : Oi(s, 0, 255)), n = 255 & (e[6] ? vA(n) : Oi(n, 0, 255)), {
      r: i,
      g: s,
      b: n,
      a: t
    };
  }
}
function Km(A) {
  return A && (A.a < 255 ? `rgba(${A.r}, ${A.g}, ${A.b}, ${bi(A.a)})` : `rgb(${A.r}, ${A.g}, ${A.b})`);
}
const vo = (A) => A <= 31308e-7 ? A * 12.92 : Math.pow(A, 1 / 2.4) * 1.055 - 0.055, Qs = (A) => A <= 0.04045 ? A / 12.92 : Math.pow((A + 0.055) / 1.055, 2.4);
function Vm(A, e, t) {
  const i = Qs(bi(A.r)), s = Qs(bi(A.g)), n = Qs(bi(A.b));
  return {
    r: zi(vo(i + t * (Qs(bi(e.r)) - i))),
    g: zi(vo(s + t * (Qs(bi(e.g)) - s))),
    b: zi(vo(n + t * (Qs(bi(e.b)) - n))),
    a: A.a + t * (e.a - A.a)
  };
}
function Qn(A, e, t) {
  if (A) {
    let i = pl(A);
    i[e] = Math.max(0, Math.min(i[e] + i[e] * t, e === 0 ? 360 : 1)), i = bl(i), A.r = i[0], A.g = i[1], A.b = i[2];
  }
}
function Ru(A, e) {
  return A && Object.assign(e || {}, A);
}
function Yl(A) {
  var e = { r: 0, g: 0, b: 0, a: 255 };
  return Array.isArray(A) ? A.length >= 3 && (e = { r: A[0], g: A[1], b: A[2], a: 255 }, A.length > 3 && (e.a = zi(A[3]))) : (e = Ru(A, { r: 0, g: 0, b: 0, a: 1 }), e.a = zi(e.a)), e;
}
function zm(A) {
  return A.charAt(0) === "r" ? Nm(A) : Lm(A);
}
class YA {
  constructor(e) {
    if (e instanceof YA)
      return e;
    const t = typeof e;
    let i;
    t === "object" ? i = Yl(e) : t === "string" && (i = xm(e) || Om(e) || zm(e)), this._rgb = i, this._valid = !!i;
  }
  get valid() {
    return this._valid;
  }
  get rgb() {
    var e = Ru(this._rgb);
    return e && (e.a = bi(e.a)), e;
  }
  set rgb(e) {
    this._rgb = Yl(e);
  }
  rgbString() {
    return this._valid ? Km(this._rgb) : void 0;
  }
  hexString() {
    return this._valid ? Um(this._rgb) : void 0;
  }
  hslString() {
    return this._valid ? Im(this._rgb) : void 0;
  }
  mix(e, t) {
    if (e) {
      const i = this.rgb, s = e.rgb;
      let n;
      const r = t === n ? 0.5 : t, o = 2 * r - 1, a = i.a - s.a, l = ((o * a === -1 ? o : (o + a) / (1 + o * a)) + 1) / 2;
      n = 1 - l, i.r = 255 & l * i.r + n * s.r + 0.5, i.g = 255 & l * i.g + n * s.g + 0.5, i.b = 255 & l * i.b + n * s.b + 0.5, i.a = r * i.a + (1 - r) * s.a, this.rgb = i;
    }
    return this;
  }
  interpolate(e, t) {
    return e && (this._rgb = Vm(this._rgb, e._rgb, t)), this;
  }
  clone() {
    return new YA(this.rgb);
  }
  alpha(e) {
    return this._rgb.a = zi(e), this;
  }
  clearer(e) {
    const t = this._rgb;
    return t.a *= 1 - e, this;
  }
  greyscale() {
    const e = this._rgb, t = on(e.r * 0.3 + e.g * 0.59 + e.b * 0.11);
    return e.r = e.g = e.b = t, this;
  }
  opaquer(e) {
    const t = this._rgb;
    return t.a *= 1 + e, this;
  }
  negate() {
    const e = this._rgb;
    return e.r = 255 - e.r, e.g = 255 - e.g, e.b = 255 - e.b, this;
  }
  lighten(e) {
    return Qn(this._rgb, 2, e), this;
  }
  darken(e) {
    return Qn(this._rgb, 2, -e), this;
  }
  saturate(e) {
    return Qn(this._rgb, 1, e), this;
  }
  desaturate(e) {
    return Qn(this._rgb, 1, -e), this;
  }
  rotate(e) {
    return Rm(this._rgb, e), this;
  }
}
/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */
function ci() {
}
const Gm = /* @__PURE__ */ (() => {
  let A = 0;
  return () => A++;
})();
function Qe(A) {
  return A == null;
}
function $e(A) {
  if (Array.isArray && Array.isArray(A))
    return !0;
  const e = Object.prototype.toString.call(A);
  return e.slice(0, 7) === "[object" && e.slice(-6) === "Array]";
}
function pe(A) {
  return A !== null && Object.prototype.toString.call(A) === "[object Object]";
}
function Nt(A) {
  return (typeof A == "number" || A instanceof Number) && isFinite(+A);
}
function ti(A, e) {
  return Nt(A) ? A : e;
}
function de(A, e) {
  return typeof A > "u" ? e : A;
}
const Wm = (A, e) => typeof A == "string" && A.endsWith("%") ? parseFloat(A) / 100 * e : +A;
function Ue(A, e, t) {
  if (A && typeof A.call == "function")
    return A.apply(t, e);
}
function ve(A, e, t, i) {
  let s, n, r;
  if ($e(A))
    for (n = A.length, s = 0; s < n; s++)
      e.call(t, A[s], s);
  else if (pe(A))
    for (r = Object.keys(A), n = r.length, s = 0; s < n; s++)
      e.call(t, A[r[s]], r[s]);
}
function wr(A, e) {
  let t, i, s, n;
  if (!A || !e || A.length !== e.length)
    return !1;
  for (t = 0, i = A.length; t < i; ++t)
    if (s = A[t], n = e[t], s.datasetIndex !== n.datasetIndex || s.index !== n.index)
      return !1;
  return !0;
}
function vr(A) {
  if ($e(A))
    return A.map(vr);
  if (pe(A)) {
    const e = /* @__PURE__ */ Object.create(null), t = Object.keys(A), i = t.length;
    let s = 0;
    for (; s < i; ++s)
      e[t[s]] = vr(A[t[s]]);
    return e;
  }
  return A;
}
function Iu(A) {
  return [
    "__proto__",
    "prototype",
    "constructor"
  ].indexOf(A) === -1;
}
function jm(A, e, t, i) {
  if (!Iu(A))
    return;
  const s = e[A], n = t[A];
  pe(s) && pe(n) ? JA(s, n, i) : e[A] = vr(n);
}
function JA(A, e, t) {
  const i = $e(e) ? e : [
    e
  ], s = i.length;
  if (!pe(A))
    return A;
  t = t || {};
  const n = t.merger || jm;
  let r;
  for (let o = 0; o < s; ++o) {
    if (r = i[o], !pe(r))
      continue;
    const a = Object.keys(r);
    for (let l = 0, h = a.length; l < h; ++l)
      n(a[l], A, r, t);
  }
  return A;
}
function DA(A, e) {
  return JA(A, e, {
    merger: Xm
  });
}
function Xm(A, e, t) {
  if (!Iu(A))
    return;
  const i = e[A], s = t[A];
  pe(i) && pe(s) ? DA(i, s) : Object.prototype.hasOwnProperty.call(e, A) || (e[A] = vr(s));
}
const Jl = {
  // Chart.helpers.core resolveObjectKey should resolve empty key to root object
  "": (A) => A,
  // default resolvers
  x: (A) => A.x,
  y: (A) => A.y
};
function Ym(A) {
  const e = A.split("."), t = [];
  let i = "";
  for (const s of e)
    i += s, i.endsWith("\\") ? i = i.slice(0, -1) + "." : (t.push(i), i = "");
  return t;
}
function Jm(A) {
  const e = Ym(A);
  return (t) => {
    for (const i of e) {
      if (i === "")
        break;
      t = t && t[i];
    }
    return t;
  };
}
function Br(A, e) {
  return (Jl[e] || (Jl[e] = Jm(e)))(A);
}
function wl(A) {
  return A.charAt(0).toUpperCase() + A.slice(1);
}
const Cr = (A) => typeof A < "u", ji = (A) => typeof A == "function", $l = (A, e) => {
  if (A.size !== e.size)
    return !1;
  for (const t of A)
    if (!e.has(t))
      return !1;
  return !0;
};
function $m(A) {
  return A.type === "mouseup" || A.type === "click" || A.type === "contextmenu";
}
const Ze = Math.PI, ni = 2 * Ze, Zm = ni + Ze, yr = Number.POSITIVE_INFINITY, qm = Ze / 180, Yt = Ze / 2, is = Ze / 4, Zl = Ze * 2 / 3, ku = Math.log10, Xs = Math.sign;
function SA(A, e, t) {
  return Math.abs(A - e) < t;
}
function ql(A) {
  const e = Math.round(A);
  A = SA(A, e, A / 1e3) ? e : A;
  const t = Math.pow(10, Math.floor(ku(A))), i = A / t;
  return (i <= 1 ? 1 : i <= 2 ? 2 : i <= 5 ? 5 : 10) * t;
}
function eb(A) {
  const e = [], t = Math.sqrt(A);
  let i;
  for (i = 1; i < t; i++)
    A % i === 0 && (e.push(i), e.push(A / i));
  return t === (t | 0) && e.push(t), e.sort((s, n) => s - n).pop(), e;
}
function tb(A) {
  return typeof A == "symbol" || typeof A == "object" && A !== null && !(Symbol.toPrimitive in A || "toString" in A || "valueOf" in A);
}
function $A(A) {
  return !tb(A) && !isNaN(parseFloat(A)) && isFinite(A);
}
function ib(A, e) {
  const t = Math.round(A);
  return t - e <= A && t + e >= A;
}
function sb(A, e, t) {
  let i, s, n;
  for (i = 0, s = A.length; i < s; i++)
    n = A[i][t], isNaN(n) || (e.min = Math.min(e.min, n), e.max = Math.max(e.max, n));
}
function ds(A) {
  return A * (Ze / 180);
}
function Ab(A) {
  return A * (180 / Ze);
}
function eh(A) {
  if (!Nt(A))
    return;
  let e = 1, t = 0;
  for (; Math.round(A * e) / e !== A; )
    e *= 10, t++;
  return t;
}
function nb(A, e) {
  const t = e.x - A.x, i = e.y - A.y, s = Math.sqrt(t * t + i * i);
  let n = Math.atan2(i, t);
  return n < -0.5 * Ze && (n += ni), {
    angle: n,
    distance: s
  };
}
function Ta(A, e) {
  return Math.sqrt(Math.pow(e.x - A.x, 2) + Math.pow(e.y - A.y, 2));
}
function rb(A, e) {
  return (A - e + Zm) % ni - Ze;
}
function Ui(A) {
  return (A % ni + ni) % ni;
}
function Ou(A, e, t, i) {
  const s = Ui(A), n = Ui(e), r = Ui(t), o = Ui(n - s), a = Ui(r - s), l = Ui(s - n), h = Ui(s - r);
  return s === n || s === r || i && n === r || o > a && l < h;
}
function It(A, e, t) {
  return Math.max(e, Math.min(t, A));
}
function ob(A) {
  return It(A, -32768, 32767);
}
function BA(A, e, t, i = 1e-6) {
  return A >= Math.min(e, t) - i && A <= Math.max(e, t) + i;
}
function vl(A, e, t) {
  t = t || ((r) => A[r] < e);
  let i = A.length - 1, s = 0, n;
  for (; i - s > 1; )
    n = s + i >> 1, t(n) ? s = n : i = n;
  return {
    lo: s,
    hi: i
  };
}
const fs = (A, e, t, i) => vl(A, t, i ? (s) => {
  const n = A[s][e];
  return n < t || n === t && A[s + 1][e] === t;
} : (s) => A[s][e] < t), ab = (A, e, t) => vl(A, t, (i) => A[i][e] >= t);
function lb(A, e, t) {
  let i = 0, s = A.length;
  for (; i < s && A[i] < e; )
    i++;
  for (; s > i && A[s - 1] > t; )
    s--;
  return i > 0 || s < A.length ? A.slice(i, s) : A;
}
const Pu = [
  "push",
  "pop",
  "shift",
  "splice",
  "unshift"
];
function hb(A, e) {
  if (A._chartjs) {
    A._chartjs.listeners.push(e);
    return;
  }
  Object.defineProperty(A, "_chartjs", {
    configurable: !0,
    enumerable: !1,
    value: {
      listeners: [
        e
      ]
    }
  }), Pu.forEach((t) => {
    const i = "_onData" + wl(t), s = A[t];
    Object.defineProperty(A, t, {
      configurable: !0,
      enumerable: !1,
      value(...n) {
        const r = s.apply(this, n);
        return A._chartjs.listeners.forEach((o) => {
          typeof o[i] == "function" && o[i](...n);
        }), r;
      }
    });
  });
}
function th(A, e) {
  const t = A._chartjs;
  if (!t)
    return;
  const i = t.listeners, s = i.indexOf(e);
  s !== -1 && i.splice(s, 1), !(i.length > 0) && (Pu.forEach((n) => {
    delete A[n];
  }), delete A._chartjs);
}
function cb(A) {
  const e = new Set(A);
  return e.size === A.length ? A : Array.from(e);
}
const Nu = function() {
  return typeof window > "u" ? function(A) {
    return A();
  } : window.requestAnimationFrame;
}();
function Ku(A, e) {
  let t = [], i = !1;
  return function(...s) {
    t = s, i || (i = !0, Nu.call(window, () => {
      i = !1, A.apply(e, t);
    }));
  };
}
function ub(A, e) {
  let t;
  return function(...i) {
    return e ? (clearTimeout(t), t = setTimeout(A, e, i)) : A.apply(this, i), e;
  };
}
const Bl = (A) => A === "start" ? "left" : A === "end" ? "right" : "center", nt = (A, e, t) => A === "start" ? e : A === "end" ? t : (e + t) / 2, db = (A, e, t, i) => A === (i ? "left" : "right") ? t : A === "center" ? (e + t) / 2 : e;
function fb(A, e, t) {
  const i = e.length;
  let s = 0, n = i;
  if (A._sorted) {
    const { iScale: r, vScale: o, _parsed: a } = A, l = A.dataset && A.dataset.options ? A.dataset.options.spanGaps : null, h = r.axis, { min: c, max: u, minDefined: d, maxDefined: f } = r.getUserBounds();
    if (d) {
      if (s = Math.min(
        // @ts-expect-error Need to type _parsed
        fs(a, h, c).lo,
        // @ts-expect-error Need to fix types on _lookupByKey
        t ? i : fs(e, h, r.getPixelForValue(c)).lo
      ), l) {
        const p = a.slice(0, s + 1).reverse().findIndex((b) => !Qe(b[o.axis]));
        s -= Math.max(0, p);
      }
      s = It(s, 0, i - 1);
    }
    if (f) {
      let p = Math.max(
        // @ts-expect-error Need to type _parsed
        fs(a, r.axis, u, !0).hi + 1,
        // @ts-expect-error Need to fix types on _lookupByKey
        t ? 0 : fs(e, h, r.getPixelForValue(u), !0).hi + 1
      );
      if (l) {
        const b = a.slice(p - 1).findIndex((w) => !Qe(w[o.axis]));
        p += Math.max(0, b);
      }
      n = It(p, s, i) - s;
    } else
      n = i - s;
  }
  return {
    start: s,
    count: n
  };
}
function gb(A) {
  const { xScale: e, yScale: t, _scaleRanges: i } = A, s = {
    xmin: e.min,
    xmax: e.max,
    ymin: t.min,
    ymax: t.max
  };
  if (!i)
    return A._scaleRanges = s, !0;
  const n = i.xmin !== e.min || i.xmax !== e.max || i.ymin !== t.min || i.ymax !== t.max;
  return Object.assign(i, s), n;
}
const Un = (A) => A === 0 || A === 1, ih = (A, e, t) => -(Math.pow(2, 10 * (A -= 1)) * Math.sin((A - e) * ni / t)), sh = (A, e, t) => Math.pow(2, -10 * A) * Math.sin((A - e) * ni / t) + 1, TA = {
  linear: (A) => A,
  easeInQuad: (A) => A * A,
  easeOutQuad: (A) => -A * (A - 2),
  easeInOutQuad: (A) => (A /= 0.5) < 1 ? 0.5 * A * A : -0.5 * (--A * (A - 2) - 1),
  easeInCubic: (A) => A * A * A,
  easeOutCubic: (A) => (A -= 1) * A * A + 1,
  easeInOutCubic: (A) => (A /= 0.5) < 1 ? 0.5 * A * A * A : 0.5 * ((A -= 2) * A * A + 2),
  easeInQuart: (A) => A * A * A * A,
  easeOutQuart: (A) => -((A -= 1) * A * A * A - 1),
  easeInOutQuart: (A) => (A /= 0.5) < 1 ? 0.5 * A * A * A * A : -0.5 * ((A -= 2) * A * A * A - 2),
  easeInQuint: (A) => A * A * A * A * A,
  easeOutQuint: (A) => (A -= 1) * A * A * A * A + 1,
  easeInOutQuint: (A) => (A /= 0.5) < 1 ? 0.5 * A * A * A * A * A : 0.5 * ((A -= 2) * A * A * A * A + 2),
  easeInSine: (A) => -Math.cos(A * Yt) + 1,
  easeOutSine: (A) => Math.sin(A * Yt),
  easeInOutSine: (A) => -0.5 * (Math.cos(Ze * A) - 1),
  easeInExpo: (A) => A === 0 ? 0 : Math.pow(2, 10 * (A - 1)),
  easeOutExpo: (A) => A === 1 ? 1 : -Math.pow(2, -10 * A) + 1,
  easeInOutExpo: (A) => Un(A) ? A : A < 0.5 ? 0.5 * Math.pow(2, 10 * (A * 2 - 1)) : 0.5 * (-Math.pow(2, -10 * (A * 2 - 1)) + 2),
  easeInCirc: (A) => A >= 1 ? A : -(Math.sqrt(1 - A * A) - 1),
  easeOutCirc: (A) => Math.sqrt(1 - (A -= 1) * A),
  easeInOutCirc: (A) => (A /= 0.5) < 1 ? -0.5 * (Math.sqrt(1 - A * A) - 1) : 0.5 * (Math.sqrt(1 - (A -= 2) * A) + 1),
  easeInElastic: (A) => Un(A) ? A : ih(A, 0.075, 0.3),
  easeOutElastic: (A) => Un(A) ? A : sh(A, 0.075, 0.3),
  easeInOutElastic(A) {
    return Un(A) ? A : A < 0.5 ? 0.5 * ih(A * 2, 0.1125, 0.45) : 0.5 + 0.5 * sh(A * 2 - 1, 0.1125, 0.45);
  },
  easeInBack(A) {
    return A * A * ((1.70158 + 1) * A - 1.70158);
  },
  easeOutBack(A) {
    return (A -= 1) * A * ((1.70158 + 1) * A + 1.70158) + 1;
  },
  easeInOutBack(A) {
    let e = 1.70158;
    return (A /= 0.5) < 1 ? 0.5 * (A * A * (((e *= 1.525) + 1) * A - e)) : 0.5 * ((A -= 2) * A * (((e *= 1.525) + 1) * A + e) + 2);
  },
  easeInBounce: (A) => 1 - TA.easeOutBounce(1 - A),
  easeOutBounce(A) {
    return A < 1 / 2.75 ? 7.5625 * A * A : A < 2 / 2.75 ? 7.5625 * (A -= 1.5 / 2.75) * A + 0.75 : A < 2.5 / 2.75 ? 7.5625 * (A -= 2.25 / 2.75) * A + 0.9375 : 7.5625 * (A -= 2.625 / 2.75) * A + 0.984375;
  },
  easeInOutBounce: (A) => A < 0.5 ? TA.easeInBounce(A * 2) * 0.5 : TA.easeOutBounce(A * 2 - 1) * 0.5 + 0.5
};
function Cl(A) {
  if (A && typeof A == "object") {
    const e = A.toString();
    return e === "[object CanvasPattern]" || e === "[object CanvasGradient]";
  }
  return !1;
}
function Ah(A) {
  return Cl(A) ? A : new YA(A);
}
function Bo(A) {
  return Cl(A) ? A : new YA(A).saturate(0.5).darken(0.1).hexString();
}
const pb = [
  "x",
  "y",
  "borderWidth",
  "radius",
  "tension"
], mb = [
  "color",
  "borderColor",
  "backgroundColor"
];
function bb(A) {
  A.set("animation", {
    delay: void 0,
    duration: 1e3,
    easing: "easeOutQuart",
    fn: void 0,
    from: void 0,
    loop: void 0,
    to: void 0,
    type: void 0
  }), A.describe("animation", {
    _fallback: !1,
    _indexable: !1,
    _scriptable: (e) => e !== "onProgress" && e !== "onComplete" && e !== "fn"
  }), A.set("animations", {
    colors: {
      type: "color",
      properties: mb
    },
    numbers: {
      type: "number",
      properties: pb
    }
  }), A.describe("animations", {
    _fallback: "animation"
  }), A.set("transitions", {
    active: {
      animation: {
        duration: 400
      }
    },
    resize: {
      animation: {
        duration: 0
      }
    },
    show: {
      animations: {
        colors: {
          from: "transparent"
        },
        visible: {
          type: "boolean",
          duration: 0
        }
      }
    },
    hide: {
      animations: {
        colors: {
          to: "transparent"
        },
        visible: {
          type: "boolean",
          easing: "linear",
          fn: (e) => e | 0
        }
      }
    }
  });
}
function wb(A) {
  A.set("layout", {
    autoPadding: !0,
    padding: {
      top: 0,
      right: 0,
      bottom: 0,
      left: 0
    }
  });
}
const nh = /* @__PURE__ */ new Map();
function vb(A, e) {
  e = e || {};
  const t = A + JSON.stringify(e);
  let i = nh.get(t);
  return i || (i = new Intl.NumberFormat(A, e), nh.set(t, i)), i;
}
function Vu(A, e, t) {
  return vb(e, t).format(A);
}
const Bb = {
  values(A) {
    return $e(A) ? A : "" + A;
  },
  numeric(A, e, t) {
    if (A === 0)
      return "0";
    const i = this.chart.options.locale;
    let s, n = A;
    if (t.length > 1) {
      const l = Math.max(Math.abs(t[0].value), Math.abs(t[t.length - 1].value));
      (l < 1e-4 || l > 1e15) && (s = "scientific"), n = Cb(A, t);
    }
    const r = ku(Math.abs(n)), o = isNaN(r) ? 1 : Math.max(Math.min(-1 * Math.floor(r), 20), 0), a = {
      notation: s,
      minimumFractionDigits: o,
      maximumFractionDigits: o
    };
    return Object.assign(a, this.options.ticks.format), Vu(A, i, a);
  }
};
function Cb(A, e) {
  let t = e.length > 3 ? e[2].value - e[1].value : e[1].value - e[0].value;
  return Math.abs(t) >= 1 && A !== Math.floor(A) && (t = A - Math.floor(A)), t;
}
var zu = {
  formatters: Bb
};
function yb(A) {
  A.set("scale", {
    display: !0,
    offset: !1,
    reverse: !1,
    beginAtZero: !1,
    bounds: "ticks",
    clip: !0,
    grace: 0,
    grid: {
      display: !0,
      lineWidth: 1,
      drawOnChartArea: !0,
      drawTicks: !0,
      tickLength: 8,
      tickWidth: (e, t) => t.lineWidth,
      tickColor: (e, t) => t.color,
      offset: !1
    },
    border: {
      display: !0,
      dash: [],
      dashOffset: 0,
      width: 1
    },
    title: {
      display: !1,
      text: "",
      padding: {
        top: 4,
        bottom: 4
      }
    },
    ticks: {
      minRotation: 0,
      maxRotation: 50,
      mirror: !1,
      textStrokeWidth: 0,
      textStrokeColor: "",
      padding: 3,
      display: !0,
      autoSkip: !0,
      autoSkipPadding: 3,
      labelOffset: 0,
      callback: zu.formatters.values,
      minor: {},
      major: {},
      align: "center",
      crossAlign: "near",
      showLabelBackdrop: !1,
      backdropColor: "rgba(255, 255, 255, 0.75)",
      backdropPadding: 2
    }
  }), A.route("scale.ticks", "color", "", "color"), A.route("scale.grid", "color", "", "borderColor"), A.route("scale.border", "color", "", "borderColor"), A.route("scale.title", "color", "", "color"), A.describe("scale", {
    _fallback: !1,
    _scriptable: (e) => !e.startsWith("before") && !e.startsWith("after") && e !== "callback" && e !== "parser",
    _indexable: (e) => e !== "borderDash" && e !== "tickBorderDash" && e !== "dash"
  }), A.describe("scales", {
    _fallback: "scale"
  }), A.describe("scale.ticks", {
    _scriptable: (e) => e !== "backdropPadding" && e !== "callback",
    _indexable: (e) => e !== "backdropPadding"
  });
}
const vs = /* @__PURE__ */ Object.create(null), La = /* @__PURE__ */ Object.create(null);
function LA(A, e) {
  if (!e)
    return A;
  const t = e.split(".");
  for (let i = 0, s = t.length; i < s; ++i) {
    const n = t[i];
    A = A[n] || (A[n] = /* @__PURE__ */ Object.create(null));
  }
  return A;
}
function Co(A, e, t) {
  return typeof e == "string" ? JA(LA(A, e), t) : JA(LA(A, ""), e);
}
class Eb {
  constructor(e, t) {
    this.animation = void 0, this.backgroundColor = "rgba(0,0,0,0.1)", this.borderColor = "rgba(0,0,0,0.1)", this.color = "#666", this.datasets = {}, this.devicePixelRatio = (i) => i.chart.platform.getDevicePixelRatio(), this.elements = {}, this.events = [
      "mousemove",
      "mouseout",
      "click",
      "touchstart",
      "touchmove"
    ], this.font = {
      family: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",
      size: 12,
      style: "normal",
      lineHeight: 1.2,
      weight: null
    }, this.hover = {}, this.hoverBackgroundColor = (i, s) => Bo(s.backgroundColor), this.hoverBorderColor = (i, s) => Bo(s.borderColor), this.hoverColor = (i, s) => Bo(s.color), this.indexAxis = "x", this.interaction = {
      mode: "nearest",
      intersect: !0,
      includeInvisible: !1
    }, this.maintainAspectRatio = !0, this.onHover = null, this.onClick = null, this.parsing = !0, this.plugins = {}, this.responsive = !0, this.scale = void 0, this.scales = {}, this.showLine = !0, this.drawActiveElementsOnTop = !0, this.describe(e), this.apply(t);
  }
  set(e, t) {
    return Co(this, e, t);
  }
  get(e) {
    return LA(this, e);
  }
  describe(e, t) {
    return Co(La, e, t);
  }
  override(e, t) {
    return Co(vs, e, t);
  }
  route(e, t, i, s) {
    const n = LA(this, e), r = LA(this, i), o = "_" + t;
    Object.defineProperties(n, {
      [o]: {
        value: n[t],
        writable: !0
      },
      [t]: {
        enumerable: !0,
        get() {
          const a = this[o], l = r[s];
          return pe(a) ? Object.assign({}, l, a) : de(a, l);
        },
        set(a) {
          this[o] = a;
        }
      }
    });
  }
  apply(e) {
    e.forEach((t) => t(this));
  }
}
var ke = /* @__PURE__ */ new Eb({
  _scriptable: (A) => !A.startsWith("on"),
  _indexable: (A) => A !== "events",
  hover: {
    _fallback: "interaction"
  },
  interaction: {
    _scriptable: !1,
    _indexable: !1
  }
}, [
  bb,
  wb,
  yb
]);
function Fb(A) {
  return !A || Qe(A.size) || Qe(A.family) ? null : (A.style ? A.style + " " : "") + (A.weight ? A.weight + " " : "") + A.size + "px " + A.family;
}
function rh(A, e, t, i, s) {
  let n = e[s];
  return n || (n = e[s] = A.measureText(s).width, t.push(s)), n > i && (i = n), i;
}
function ss(A, e, t) {
  const i = A.currentDevicePixelRatio, s = t !== 0 ? Math.max(t / 2, 0.5) : 0;
  return Math.round((e - s) * i) / i + s;
}
function oh(A, e) {
  !e && !A || (e = e || A.getContext("2d"), e.save(), e.resetTransform(), e.clearRect(0, 0, A.width, A.height), e.restore());
}
function Ra(A, e, t, i) {
  Gu(A, e, t, i, null);
}
function Gu(A, e, t, i, s) {
  let n, r, o, a, l, h, c, u;
  const d = e.pointStyle, f = e.rotation, p = e.radius;
  let b = (f || 0) * qm;
  if (d && typeof d == "object" && (n = d.toString(), n === "[object HTMLImageElement]" || n === "[object HTMLCanvasElement]")) {
    A.save(), A.translate(t, i), A.rotate(b), A.drawImage(d, -d.width / 2, -d.height / 2, d.width, d.height), A.restore();
    return;
  }
  if (!(isNaN(p) || p <= 0)) {
    switch (A.beginPath(), d) {
      default:
        s ? A.ellipse(t, i, s / 2, p, 0, 0, ni) : A.arc(t, i, p, 0, ni), A.closePath();
        break;
      case "triangle":
        h = s ? s / 2 : p, A.moveTo(t + Math.sin(b) * h, i - Math.cos(b) * p), b += Zl, A.lineTo(t + Math.sin(b) * h, i - Math.cos(b) * p), b += Zl, A.lineTo(t + Math.sin(b) * h, i - Math.cos(b) * p), A.closePath();
        break;
      case "rectRounded":
        l = p * 0.516, a = p - l, r = Math.cos(b + is) * a, c = Math.cos(b + is) * (s ? s / 2 - l : a), o = Math.sin(b + is) * a, u = Math.sin(b + is) * (s ? s / 2 - l : a), A.arc(t - c, i - o, l, b - Ze, b - Yt), A.arc(t + u, i - r, l, b - Yt, b), A.arc(t + c, i + o, l, b, b + Yt), A.arc(t - u, i + r, l, b + Yt, b + Ze), A.closePath();
        break;
      case "rect":
        if (!f) {
          a = Math.SQRT1_2 * p, h = s ? s / 2 : a, A.rect(t - h, i - a, 2 * h, 2 * a);
          break;
        }
        b += is;
      case "rectRot":
        c = Math.cos(b) * (s ? s / 2 : p), r = Math.cos(b) * p, o = Math.sin(b) * p, u = Math.sin(b) * (s ? s / 2 : p), A.moveTo(t - c, i - o), A.lineTo(t + u, i - r), A.lineTo(t + c, i + o), A.lineTo(t - u, i + r), A.closePath();
        break;
      case "crossRot":
        b += is;
      case "cross":
        c = Math.cos(b) * (s ? s / 2 : p), r = Math.cos(b) * p, o = Math.sin(b) * p, u = Math.sin(b) * (s ? s / 2 : p), A.moveTo(t - c, i - o), A.lineTo(t + c, i + o), A.moveTo(t + u, i - r), A.lineTo(t - u, i + r);
        break;
      case "star":
        c = Math.cos(b) * (s ? s / 2 : p), r = Math.cos(b) * p, o = Math.sin(b) * p, u = Math.sin(b) * (s ? s / 2 : p), A.moveTo(t - c, i - o), A.lineTo(t + c, i + o), A.moveTo(t + u, i - r), A.lineTo(t - u, i + r), b += is, c = Math.cos(b) * (s ? s / 2 : p), r = Math.cos(b) * p, o = Math.sin(b) * p, u = Math.sin(b) * (s ? s / 2 : p), A.moveTo(t - c, i - o), A.lineTo(t + c, i + o), A.moveTo(t + u, i - r), A.lineTo(t - u, i + r);
        break;
      case "line":
        r = s ? s / 2 : Math.cos(b) * p, o = Math.sin(b) * p, A.moveTo(t - r, i - o), A.lineTo(t + r, i + o);
        break;
      case "dash":
        A.moveTo(t, i), A.lineTo(t + Math.cos(b) * (s ? s / 2 : p), i + Math.sin(b) * p);
        break;
      case !1:
        A.closePath();
        break;
    }
    A.fill(), e.borderWidth > 0 && A.stroke();
  }
}
function ZA(A, e, t) {
  return t = t || 0.5, !e || A && A.x > e.left - t && A.x < e.right + t && A.y > e.top - t && A.y < e.bottom + t;
}
function yl(A, e) {
  A.save(), A.beginPath(), A.rect(e.left, e.top, e.right - e.left, e.bottom - e.top), A.clip();
}
function El(A) {
  A.restore();
}
function xb(A, e, t, i, s) {
  if (!e)
    return A.lineTo(t.x, t.y);
  if (s === "middle") {
    const n = (e.x + t.x) / 2;
    A.lineTo(n, e.y), A.lineTo(n, t.y);
  } else s === "after" != !!i ? A.lineTo(e.x, t.y) : A.lineTo(t.x, e.y);
  A.lineTo(t.x, t.y);
}
function Qb(A, e, t, i) {
  if (!e)
    return A.lineTo(t.x, t.y);
  A.bezierCurveTo(i ? e.cp1x : e.cp2x, i ? e.cp1y : e.cp2y, i ? t.cp2x : t.cp1x, i ? t.cp2y : t.cp1y, t.x, t.y);
}
function Ub(A, e) {
  e.translation && A.translate(e.translation[0], e.translation[1]), Qe(e.rotation) || A.rotate(e.rotation), e.color && (A.fillStyle = e.color), e.textAlign && (A.textAlign = e.textAlign), e.textBaseline && (A.textBaseline = e.textBaseline);
}
function _b(A, e, t, i, s) {
  if (s.strikethrough || s.underline) {
    const n = A.measureText(i), r = e - n.actualBoundingBoxLeft, o = e + n.actualBoundingBoxRight, a = t - n.actualBoundingBoxAscent, l = t + n.actualBoundingBoxDescent, h = s.strikethrough ? (a + l) / 2 : l;
    A.strokeStyle = A.fillStyle, A.beginPath(), A.lineWidth = s.decorationWidth || 2, A.moveTo(r, h), A.lineTo(o, h), A.stroke();
  }
}
function Hb(A, e) {
  const t = A.fillStyle;
  A.fillStyle = e.color, A.fillRect(e.left, e.top, e.width, e.height), A.fillStyle = t;
}
function qA(A, e, t, i, s, n = {}) {
  const r = $e(e) ? e : [
    e
  ], o = n.strokeWidth > 0 && n.strokeColor !== "";
  let a, l;
  for (A.save(), A.font = s.string, Ub(A, n), a = 0; a < r.length; ++a)
    l = r[a], n.backdrop && Hb(A, n.backdrop), o && (n.strokeColor && (A.strokeStyle = n.strokeColor), Qe(n.strokeWidth) || (A.lineWidth = n.strokeWidth), A.strokeText(l, t, i, n.maxWidth)), A.fillText(l, t, i, n.maxWidth), _b(A, t, i, l, n), i += Number(s.lineHeight);
  A.restore();
}
function Ia(A, e) {
  const { x: t, y: i, w: s, h: n, radius: r } = e;
  A.arc(t + r.topLeft, i + r.topLeft, r.topLeft, 1.5 * Ze, Ze, !0), A.lineTo(t, i + n - r.bottomLeft), A.arc(t + r.bottomLeft, i + n - r.bottomLeft, r.bottomLeft, Ze, Yt, !0), A.lineTo(t + s - r.bottomRight, i + n), A.arc(t + s - r.bottomRight, i + n - r.bottomRight, r.bottomRight, Yt, 0, !0), A.lineTo(t + s, i + r.topRight), A.arc(t + s - r.topRight, i + r.topRight, r.topRight, 0, -Yt, !0), A.lineTo(t + r.topLeft, i);
}
const Mb = /^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/, Db = /^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;
function Sb(A, e) {
  const t = ("" + A).match(Mb);
  if (!t || t[1] === "normal")
    return e * 1.2;
  switch (A = +t[2], t[3]) {
    case "px":
      return A;
    case "%":
      A /= 100;
      break;
  }
  return e * A;
}
const Tb = (A) => +A || 0;
function Wu(A, e) {
  const t = {}, i = pe(e), s = i ? Object.keys(e) : e, n = pe(A) ? i ? (r) => de(A[r], A[e[r]]) : (r) => A[r] : () => A;
  for (const r of s)
    t[r] = Tb(n(r));
  return t;
}
function Lb(A) {
  return Wu(A, {
    top: "y",
    right: "x",
    bottom: "y",
    left: "x"
  });
}
function RA(A) {
  return Wu(A, [
    "topLeft",
    "topRight",
    "bottomLeft",
    "bottomRight"
  ]);
}
function Kt(A) {
  const e = Lb(A);
  return e.width = e.left + e.right, e.height = e.top + e.bottom, e;
}
function lt(A, e) {
  A = A || {}, e = e || ke.font;
  let t = de(A.size, e.size);
  typeof t == "string" && (t = parseInt(t, 10));
  let i = de(A.style, e.style);
  i && !("" + i).match(Db) && (console.warn('Invalid font style specified: "' + i + '"'), i = void 0);
  const s = {
    family: de(A.family, e.family),
    lineHeight: Sb(de(A.lineHeight, e.lineHeight), t),
    size: t,
    style: i,
    weight: de(A.weight, e.weight),
    string: ""
  };
  return s.string = Fb(s), s;
}
function _n(A, e, t, i) {
  let s, n, r;
  for (s = 0, n = A.length; s < n; ++s)
    if (r = A[s], r !== void 0 && r !== void 0)
      return r;
}
function Rb(A, e, t) {
  const { min: i, max: s } = A, n = Wm(e, (s - i) / 2), r = (o, a) => t && o === 0 ? 0 : o + a;
  return {
    min: r(i, -Math.abs(n)),
    max: r(s, n)
  };
}
function Bs(A, e) {
  return Object.assign(Object.create(A), e);
}
function Fl(A, e = [
  ""
], t, i, s = () => A[0]) {
  const n = t || A;
  typeof i > "u" && (i = Ju("_fallback", A));
  const r = {
    [Symbol.toStringTag]: "Object",
    _cacheable: !0,
    _scopes: A,
    _rootScopes: n,
    _fallback: i,
    _getTarget: s,
    override: (o) => Fl([
      o,
      ...A
    ], e, n, i)
  };
  return new Proxy(r, {
    /**
    * A trap for the delete operator.
    */
    deleteProperty(o, a) {
      return delete o[a], delete o._keys, delete A[0][a], !0;
    },
    /**
    * A trap for getting property values.
    */
    get(o, a) {
      return Xu(o, a, () => zb(a, e, A, o));
    },
    /**
    * A trap for Object.getOwnPropertyDescriptor.
    * Also used by Object.hasOwnProperty.
    */
    getOwnPropertyDescriptor(o, a) {
      return Reflect.getOwnPropertyDescriptor(o._scopes[0], a);
    },
    /**
    * A trap for Object.getPrototypeOf.
    */
    getPrototypeOf() {
      return Reflect.getPrototypeOf(A[0]);
    },
    /**
    * A trap for the in operator.
    */
    has(o, a) {
      return lh(o).includes(a);
    },
    /**
    * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.
    */
    ownKeys(o) {
      return lh(o);
    },
    /**
    * A trap for setting property values.
    */
    set(o, a, l) {
      const h = o._storage || (o._storage = s());
      return o[a] = h[a] = l, delete o._keys, !0;
    }
  });
}
function Ys(A, e, t, i) {
  const s = {
    _cacheable: !1,
    _proxy: A,
    _context: e,
    _subProxy: t,
    _stack: /* @__PURE__ */ new Set(),
    _descriptors: ju(A, i),
    setContext: (n) => Ys(A, n, t, i),
    override: (n) => Ys(A.override(n), e, t, i)
  };
  return new Proxy(s, {
    /**
    * A trap for the delete operator.
    */
    deleteProperty(n, r) {
      return delete n[r], delete A[r], !0;
    },
    /**
    * A trap for getting property values.
    */
    get(n, r, o) {
      return Xu(n, r, () => kb(n, r, o));
    },
    /**
    * A trap for Object.getOwnPropertyDescriptor.
    * Also used by Object.hasOwnProperty.
    */
    getOwnPropertyDescriptor(n, r) {
      return n._descriptors.allKeys ? Reflect.has(A, r) ? {
        enumerable: !0,
        configurable: !0
      } : void 0 : Reflect.getOwnPropertyDescriptor(A, r);
    },
    /**
    * A trap for Object.getPrototypeOf.
    */
    getPrototypeOf() {
      return Reflect.getPrototypeOf(A);
    },
    /**
    * A trap for the in operator.
    */
    has(n, r) {
      return Reflect.has(A, r);
    },
    /**
    * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.
    */
    ownKeys() {
      return Reflect.ownKeys(A);
    },
    /**
    * A trap for setting property values.
    */
    set(n, r, o) {
      return A[r] = o, delete n[r], !0;
    }
  });
}
function ju(A, e = {
  scriptable: !0,
  indexable: !0
}) {
  const { _scriptable: t = e.scriptable, _indexable: i = e.indexable, _allKeys: s = e.allKeys } = A;
  return {
    allKeys: s,
    scriptable: t,
    indexable: i,
    isScriptable: ji(t) ? t : () => t,
    isIndexable: ji(i) ? i : () => i
  };
}
const Ib = (A, e) => A ? A + wl(e) : e, xl = (A, e) => pe(e) && A !== "adapters" && (Object.getPrototypeOf(e) === null || e.constructor === Object);
function Xu(A, e, t) {
  if (Object.prototype.hasOwnProperty.call(A, e) || e === "constructor")
    return A[e];
  const i = t();
  return A[e] = i, i;
}
function kb(A, e, t) {
  const { _proxy: i, _context: s, _subProxy: n, _descriptors: r } = A;
  let o = i[e];
  return ji(o) && r.isScriptable(e) && (o = Ob(e, o, A, t)), $e(o) && o.length && (o = Pb(e, o, A, r.isIndexable)), xl(e, o) && (o = Ys(o, s, n && n[e], r)), o;
}
function Ob(A, e, t, i) {
  const { _proxy: s, _context: n, _subProxy: r, _stack: o } = t;
  if (o.has(A))
    throw new Error("Recursion detected: " + Array.from(o).join("->") + "->" + A);
  o.add(A);
  let a = e(n, r || i);
  return o.delete(A), xl(A, a) && (a = Ql(s._scopes, s, A, a)), a;
}
function Pb(A, e, t, i) {
  const { _proxy: s, _context: n, _subProxy: r, _descriptors: o } = t;
  if (typeof n.index < "u" && i(A))
    return e[n.index % e.length];
  if (pe(e[0])) {
    const a = e, l = s._scopes.filter((h) => h !== a);
    e = [];
    for (const h of a) {
      const c = Ql(l, s, A, h);
      e.push(Ys(c, n, r && r[A], o));
    }
  }
  return e;
}
function Yu(A, e, t) {
  return ji(A) ? A(e, t) : A;
}
const Nb = (A, e) => A === !0 ? e : typeof A == "string" ? Br(e, A) : void 0;
function Kb(A, e, t, i, s) {
  for (const n of e) {
    const r = Nb(t, n);
    if (r) {
      A.add(r);
      const o = Yu(r._fallback, t, s);
      if (typeof o < "u" && o !== t && o !== i)
        return o;
    } else if (r === !1 && typeof i < "u" && t !== i)
      return null;
  }
  return !1;
}
function Ql(A, e, t, i) {
  const s = e._rootScopes, n = Yu(e._fallback, t, i), r = [
    ...A,
    ...s
  ], o = /* @__PURE__ */ new Set();
  o.add(i);
  let a = ah(o, r, t, n || t, i);
  return a === null || typeof n < "u" && n !== t && (a = ah(o, r, n, a, i), a === null) ? !1 : Fl(Array.from(o), [
    ""
  ], s, n, () => Vb(e, t, i));
}
function ah(A, e, t, i, s) {
  for (; t; )
    t = Kb(A, e, t, i, s);
  return t;
}
function Vb(A, e, t) {
  const i = A._getTarget();
  e in i || (i[e] = {});
  const s = i[e];
  return $e(s) && pe(t) ? t : s || {};
}
function zb(A, e, t, i) {
  let s;
  for (const n of e)
    if (s = Ju(Ib(n, A), t), typeof s < "u")
      return xl(A, s) ? Ql(t, i, A, s) : s;
}
function Ju(A, e) {
  for (const t of e) {
    if (!t)
      continue;
    const i = t[A];
    if (typeof i < "u")
      return i;
  }
}
function lh(A) {
  let e = A._keys;
  return e || (e = A._keys = Gb(A._scopes)), e;
}
function Gb(A) {
  const e = /* @__PURE__ */ new Set();
  for (const t of A)
    for (const i of Object.keys(t).filter((s) => !s.startsWith("_")))
      e.add(i);
  return Array.from(e);
}
const Wb = Number.EPSILON || 1e-14, Js = (A, e) => e < A.length && !A[e].skip && A[e], $u = (A) => A === "x" ? "y" : "x";
function jb(A, e, t, i) {
  const s = A.skip ? e : A, n = e, r = t.skip ? e : t, o = Ta(n, s), a = Ta(r, n);
  let l = o / (o + a), h = a / (o + a);
  l = isNaN(l) ? 0 : l, h = isNaN(h) ? 0 : h;
  const c = i * l, u = i * h;
  return {
    previous: {
      x: n.x - c * (r.x - s.x),
      y: n.y - c * (r.y - s.y)
    },
    next: {
      x: n.x + u * (r.x - s.x),
      y: n.y + u * (r.y - s.y)
    }
  };
}
function Xb(A, e, t) {
  const i = A.length;
  let s, n, r, o, a, l = Js(A, 0);
  for (let h = 0; h < i - 1; ++h)
    if (a = l, l = Js(A, h + 1), !(!a || !l)) {
      if (SA(e[h], 0, Wb)) {
        t[h] = t[h + 1] = 0;
        continue;
      }
      s = t[h] / e[h], n = t[h + 1] / e[h], o = Math.pow(s, 2) + Math.pow(n, 2), !(o <= 9) && (r = 3 / Math.sqrt(o), t[h] = s * r * e[h], t[h + 1] = n * r * e[h]);
    }
}
function Yb(A, e, t = "x") {
  const i = $u(t), s = A.length;
  let n, r, o, a = Js(A, 0);
  for (let l = 0; l < s; ++l) {
    if (r = o, o = a, a = Js(A, l + 1), !o)
      continue;
    const h = o[t], c = o[i];
    r && (n = (h - r[t]) / 3, o[`cp1${t}`] = h - n, o[`cp1${i}`] = c - n * e[l]), a && (n = (a[t] - h) / 3, o[`cp2${t}`] = h + n, o[`cp2${i}`] = c + n * e[l]);
  }
}
function Jb(A, e = "x") {
  const t = $u(e), i = A.length, s = Array(i).fill(0), n = Array(i);
  let r, o, a, l = Js(A, 0);
  for (r = 0; r < i; ++r)
    if (o = a, a = l, l = Js(A, r + 1), !!a) {
      if (l) {
        const h = l[e] - a[e];
        s[r] = h !== 0 ? (l[t] - a[t]) / h : 0;
      }
      n[r] = o ? l ? Xs(s[r - 1]) !== Xs(s[r]) ? 0 : (s[r - 1] + s[r]) / 2 : s[r - 1] : s[r];
    }
  Xb(A, s, n), Yb(A, n, e);
}
function Hn(A, e, t) {
  return Math.max(Math.min(A, t), e);
}
function $b(A, e) {
  let t, i, s, n, r, o = ZA(A[0], e);
  for (t = 0, i = A.length; t < i; ++t)
    r = n, n = o, o = t < i - 1 && ZA(A[t + 1], e), n && (s = A[t], r && (s.cp1x = Hn(s.cp1x, e.left, e.right), s.cp1y = Hn(s.cp1y, e.top, e.bottom)), o && (s.cp2x = Hn(s.cp2x, e.left, e.right), s.cp2y = Hn(s.cp2y, e.top, e.bottom)));
}
function Zb(A, e, t, i, s) {
  let n, r, o, a;
  if (e.spanGaps && (A = A.filter((l) => !l.skip)), e.cubicInterpolationMode === "monotone")
    Jb(A, s);
  else {
    let l = i ? A[A.length - 1] : A[0];
    for (n = 0, r = A.length; n < r; ++n)
      o = A[n], a = jb(l, o, A[Math.min(n + 1, r - (i ? 0 : 1)) % r], e.tension), o.cp1x = a.previous.x, o.cp1y = a.previous.y, o.cp2x = a.next.x, o.cp2y = a.next.y, l = o;
  }
  e.capBezierPoints && $b(A, t);
}
function Ul() {
  return typeof window < "u" && typeof document < "u";
}
function _l(A) {
  let e = A.parentNode;
  return e && e.toString() === "[object ShadowRoot]" && (e = e.host), e;
}
function Er(A, e, t) {
  let i;
  return typeof A == "string" ? (i = parseInt(A, 10), A.indexOf("%") !== -1 && (i = i / 100 * e.parentNode[t])) : i = A, i;
}
const Kr = (A) => A.ownerDocument.defaultView.getComputedStyle(A, null);
function qb(A, e) {
  return Kr(A).getPropertyValue(e);
}
const ew = [
  "top",
  "right",
  "bottom",
  "left"
];
function ms(A, e, t) {
  const i = {};
  t = t ? "-" + t : "";
  for (let s = 0; s < 4; s++) {
    const n = ew[s];
    i[n] = parseFloat(A[e + "-" + n + t]) || 0;
  }
  return i.width = i.left + i.right, i.height = i.top + i.bottom, i;
}
const tw = (A, e, t) => (A > 0 || e > 0) && (!t || !t.shadowRoot);
function iw(A, e) {
  const t = A.touches, i = t && t.length ? t[0] : A, { offsetX: s, offsetY: n } = i;
  let r = !1, o, a;
  if (tw(s, n, A.target))
    o = s, a = n;
  else {
    const l = e.getBoundingClientRect();
    o = i.clientX - l.left, a = i.clientY - l.top, r = !0;
  }
  return {
    x: o,
    y: a,
    box: r
  };
}
function rs(A, e) {
  if ("native" in A)
    return A;
  const { canvas: t, currentDevicePixelRatio: i } = e, s = Kr(t), n = s.boxSizing === "border-box", r = ms(s, "padding"), o = ms(s, "border", "width"), { x: a, y: l, box: h } = iw(A, t), c = r.left + (h && o.left), u = r.top + (h && o.top);
  let { width: d, height: f } = e;
  return n && (d -= r.width + o.width, f -= r.height + o.height), {
    x: Math.round((a - c) / d * t.width / i),
    y: Math.round((l - u) / f * t.height / i)
  };
}
function sw(A, e, t) {
  let i, s;
  if (e === void 0 || t === void 0) {
    const n = A && _l(A);
    if (!n)
      e = A.clientWidth, t = A.clientHeight;
    else {
      const r = n.getBoundingClientRect(), o = Kr(n), a = ms(o, "border", "width"), l = ms(o, "padding");
      e = r.width - l.width - a.width, t = r.height - l.height - a.height, i = Er(o.maxWidth, n, "clientWidth"), s = Er(o.maxHeight, n, "clientHeight");
    }
  }
  return {
    width: e,
    height: t,
    maxWidth: i || yr,
    maxHeight: s || yr
  };
}
const Pi = (A) => Math.round(A * 10) / 10;
function Aw(A, e, t, i) {
  const s = Kr(A), n = ms(s, "margin"), r = Er(s.maxWidth, A, "clientWidth") || yr, o = Er(s.maxHeight, A, "clientHeight") || yr, a = sw(A, e, t);
  let { width: l, height: h } = a;
  if (s.boxSizing === "content-box") {
    const u = ms(s, "border", "width"), d = ms(s, "padding");
    l -= d.width + u.width, h -= d.height + u.height;
  }
  return l = Math.max(0, l - n.width), h = Math.max(0, i ? l / i : h - n.height), l = Pi(Math.min(l, r, a.maxWidth)), h = Pi(Math.min(h, o, a.maxHeight)), l && !h && (h = Pi(l / 2)), (e !== void 0 || t !== void 0) && i && a.height && h > a.height && (h = a.height, l = Pi(Math.floor(h * i))), {
    width: l,
    height: h
  };
}
function hh(A, e, t) {
  const i = e || 1, s = Pi(A.height * i), n = Pi(A.width * i);
  A.height = Pi(A.height), A.width = Pi(A.width);
  const r = A.canvas;
  return r.style && (t || !r.style.height && !r.style.width) && (r.style.height = `${A.height}px`, r.style.width = `${A.width}px`), A.currentDevicePixelRatio !== i || r.height !== s || r.width !== n ? (A.currentDevicePixelRatio = i, r.height = s, r.width = n, A.ctx.setTransform(i, 0, 0, i, 0, 0), !0) : !1;
}
const nw = function() {
  let A = !1;
  try {
    const e = {
      get passive() {
        return A = !0, !1;
      }
    };
    Ul() && (window.addEventListener("test", null, e), window.removeEventListener("test", null, e));
  } catch {
  }
  return A;
}();
function ch(A, e) {
  const t = qb(A, e), i = t && t.match(/^(\d+)(\.\d+)?px$/);
  return i ? +i[1] : void 0;
}
function os(A, e, t, i) {
  return {
    x: A.x + t * (e.x - A.x),
    y: A.y + t * (e.y - A.y)
  };
}
function rw(A, e, t, i) {
  return {
    x: A.x + t * (e.x - A.x),
    y: i === "middle" ? t < 0.5 ? A.y : e.y : i === "after" ? t < 1 ? A.y : e.y : t > 0 ? e.y : A.y
  };
}
function ow(A, e, t, i) {
  const s = {
    x: A.cp2x,
    y: A.cp2y
  }, n = {
    x: e.cp1x,
    y: e.cp1y
  }, r = os(A, s, t), o = os(s, n, t), a = os(n, e, t), l = os(r, o, t), h = os(o, a, t);
  return os(l, h, t);
}
const aw = function(A, e) {
  return {
    x(t) {
      return A + A + e - t;
    },
    setWidth(t) {
      e = t;
    },
    textAlign(t) {
      return t === "center" ? t : t === "right" ? "left" : "right";
    },
    xPlus(t, i) {
      return t - i;
    },
    leftForLtr(t, i) {
      return t - i;
    }
  };
}, lw = function() {
  return {
    x(A) {
      return A;
    },
    setWidth(A) {
    },
    textAlign(A) {
      return A;
    },
    xPlus(A, e) {
      return A + e;
    },
    leftForLtr(A, e) {
      return A;
    }
  };
};
function zs(A, e, t) {
  return A ? aw(e, t) : lw();
}
function Zu(A, e) {
  let t, i;
  (e === "ltr" || e === "rtl") && (t = A.canvas.style, i = [
    t.getPropertyValue("direction"),
    t.getPropertyPriority("direction")
  ], t.setProperty("direction", e, "important"), A.prevTextDirection = i);
}
function qu(A, e) {
  e !== void 0 && (delete A.prevTextDirection, A.canvas.style.setProperty("direction", e[0], e[1]));
}
function ed(A) {
  return A === "angle" ? {
    between: Ou,
    compare: rb,
    normalize: Ui
  } : {
    between: BA,
    compare: (e, t) => e - t,
    normalize: (e) => e
  };
}
function uh({ start: A, end: e, count: t, loop: i, style: s }) {
  return {
    start: A % t,
    end: e % t,
    loop: i && (e - A + 1) % t === 0,
    style: s
  };
}
function hw(A, e, t) {
  const { property: i, start: s, end: n } = t, { between: r, normalize: o } = ed(i), a = e.length;
  let { start: l, end: h, loop: c } = A, u, d;
  if (c) {
    for (l += a, h += a, u = 0, d = a; u < d && r(o(e[l % a][i]), s, n); ++u)
      l--, h--;
    l %= a, h %= a;
  }
  return h < l && (h += a), {
    start: l,
    end: h,
    loop: c,
    style: A.style
  };
}
function cw(A, e, t) {
  if (!t)
    return [
      A
    ];
  const { property: i, start: s, end: n } = t, r = e.length, { compare: o, between: a, normalize: l } = ed(i), { start: h, end: c, loop: u, style: d } = hw(A, e, t), f = [];
  let p = !1, b = null, w, C, x;
  const U = () => a(s, x, w) && o(s, x) !== 0, E = () => o(n, w) === 0 || a(n, x, w), H = () => p || U(), T = () => !p || E();
  for (let S = h, R = h; S <= c; ++S)
    C = e[S % r], !C.skip && (w = l(C[i]), w !== x && (p = a(w, s, n), b === null && H() && (b = o(w, s) === 0 ? S : R), b !== null && T() && (f.push(uh({
      start: b,
      end: S,
      loop: u,
      count: r,
      style: d
    })), b = null), R = S, x = w));
  return b !== null && f.push(uh({
    start: b,
    end: c,
    loop: u,
    count: r,
    style: d
  })), f;
}
function uw(A, e) {
  const t = [], i = A.segments;
  for (let s = 0; s < i.length; s++) {
    const n = cw(i[s], A.points, e);
    n.length && t.push(...n);
  }
  return t;
}
function dw(A, e, t, i) {
  let s = 0, n = e - 1;
  if (t && !i)
    for (; s < e && !A[s].skip; )
      s++;
  for (; s < e && A[s].skip; )
    s++;
  for (s %= e, t && (n += s); n > s && A[n % e].skip; )
    n--;
  return n %= e, {
    start: s,
    end: n
  };
}
function fw(A, e, t, i) {
  const s = A.length, n = [];
  let r = e, o = A[e], a;
  for (a = e + 1; a <= t; ++a) {
    const l = A[a % s];
    l.skip || l.stop ? o.skip || (i = !1, n.push({
      start: e % s,
      end: (a - 1) % s,
      loop: i
    }), e = r = l.stop ? a : null) : (r = a, o.skip && (e = a)), o = l;
  }
  return r !== null && n.push({
    start: e % s,
    end: r % s,
    loop: i
  }), n;
}
function gw(A, e) {
  const t = A.points, i = A.options.spanGaps, s = t.length;
  if (!s)
    return [];
  const n = !!A._loop, { start: r, end: o } = dw(t, s, n, i);
  if (i === !0)
    return dh(A, [
      {
        start: r,
        end: o,
        loop: n
      }
    ], t, e);
  const a = o < r ? o + s : o, l = !!A._fullLoop && r === 0 && o === s - 1;
  return dh(A, fw(t, r, a, l), t, e);
}
function dh(A, e, t, i) {
  return !i || !i.setContext || !t ? e : pw(A, e, t, i);
}
function pw(A, e, t, i) {
  const s = A._chart.getContext(), n = fh(A.options), { _datasetIndex: r, options: { spanGaps: o } } = A, a = t.length, l = [];
  let h = n, c = e[0].start, u = c;
  function d(f, p, b, w) {
    const C = o ? -1 : 1;
    if (f !== p) {
      for (f += a; t[f % a].skip; )
        f -= C;
      for (; t[p % a].skip; )
        p += C;
      f % a !== p % a && (l.push({
        start: f % a,
        end: p % a,
        loop: b,
        style: w
      }), h = w, c = p % a);
    }
  }
  for (const f of e) {
    c = o ? c : f.start;
    let p = t[c % a], b;
    for (u = c + 1; u <= f.end; u++) {
      const w = t[u % a];
      b = fh(i.setContext(Bs(s, {
        type: "segment",
        p0: p,
        p1: w,
        p0DataIndex: (u - 1) % a,
        p1DataIndex: u % a,
        datasetIndex: r
      }))), mw(b, h) && d(c, u - 1, f.loop, h), p = w, h = b;
    }
    c < u - 1 && d(c, u - 1, f.loop, h);
  }
  return l;
}
function fh(A) {
  return {
    backgroundColor: A.backgroundColor,
    borderCapStyle: A.borderCapStyle,
    borderDash: A.borderDash,
    borderDashOffset: A.borderDashOffset,
    borderJoinStyle: A.borderJoinStyle,
    borderWidth: A.borderWidth,
    borderColor: A.borderColor
  };
}
function mw(A, e) {
  if (!e)
    return !1;
  const t = [], i = function(s, n) {
    return Cl(n) ? (t.includes(n) || t.push(n), t.indexOf(n)) : n;
  };
  return JSON.stringify(A, i) !== JSON.stringify(e, i);
}
function Mn(A, e, t) {
  return A.options.clip ? A[t] : e[t];
}
function bw(A, e) {
  const { xScale: t, yScale: i } = A;
  return t && i ? {
    left: Mn(t, e, "left"),
    right: Mn(t, e, "right"),
    top: Mn(i, e, "top"),
    bottom: Mn(i, e, "bottom")
  } : e;
}
function ww(A, e) {
  const t = e._clip;
  if (t.disabled)
    return !1;
  const i = bw(e, A.chartArea);
  return {
    left: t.left === !1 ? 0 : i.left - (t.left === !0 ? 0 : t.left),
    right: t.right === !1 ? A.width : i.right + (t.right === !0 ? 0 : t.right),
    top: t.top === !1 ? 0 : i.top - (t.top === !0 ? 0 : t.top),
    bottom: t.bottom === !1 ? A.height : i.bottom + (t.bottom === !0 ? 0 : t.bottom)
  };
}
/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */
class vw {
  constructor() {
    this._request = null, this._charts = /* @__PURE__ */ new Map(), this._running = !1, this._lastDate = void 0;
  }
  _notify(e, t, i, s) {
    const n = t.listeners[s], r = t.duration;
    n.forEach((o) => o({
      chart: e,
      initial: t.initial,
      numSteps: r,
      currentStep: Math.min(i - t.start, r)
    }));
  }
  _refresh() {
    this._request || (this._running = !0, this._request = Nu.call(window, () => {
      this._update(), this._request = null, this._running && this._refresh();
    }));
  }
  _update(e = Date.now()) {
    let t = 0;
    this._charts.forEach((i, s) => {
      if (!i.running || !i.items.length)
        return;
      const n = i.items;
      let r = n.length - 1, o = !1, a;
      for (; r >= 0; --r)
        a = n[r], a._active ? (a._total > i.duration && (i.duration = a._total), a.tick(e), o = !0) : (n[r] = n[n.length - 1], n.pop());
      o && (s.draw(), this._notify(s, i, e, "progress")), n.length || (i.running = !1, this._notify(s, i, e, "complete"), i.initial = !1), t += n.length;
    }), this._lastDate = e, t === 0 && (this._running = !1);
  }
  _getAnims(e) {
    const t = this._charts;
    let i = t.get(e);
    return i || (i = {
      running: !1,
      initial: !0,
      items: [],
      listeners: {
        complete: [],
        progress: []
      }
    }, t.set(e, i)), i;
  }
  listen(e, t, i) {
    this._getAnims(e).listeners[t].push(i);
  }
  add(e, t) {
    !t || !t.length || this._getAnims(e).items.push(...t);
  }
  has(e) {
    return this._getAnims(e).items.length > 0;
  }
  start(e) {
    const t = this._charts.get(e);
    t && (t.running = !0, t.start = Date.now(), t.duration = t.items.reduce((i, s) => Math.max(i, s._duration), 0), this._refresh());
  }
  running(e) {
    if (!this._running)
      return !1;
    const t = this._charts.get(e);
    return !(!t || !t.running || !t.items.length);
  }
  stop(e) {
    const t = this._charts.get(e);
    if (!t || !t.items.length)
      return;
    const i = t.items;
    let s = i.length - 1;
    for (; s >= 0; --s)
      i[s].cancel();
    t.items = [], this._notify(e, t, Date.now(), "complete");
  }
  remove(e) {
    return this._charts.delete(e);
  }
}
var fi = /* @__PURE__ */ new vw();
const gh = "transparent", Bw = {
  boolean(A, e, t) {
    return t > 0.5 ? e : A;
  },
  color(A, e, t) {
    const i = Ah(A || gh), s = i.valid && Ah(e || gh);
    return s && s.valid ? s.mix(i, t).hexString() : e;
  },
  number(A, e, t) {
    return A + (e - A) * t;
  }
};
class Cw {
  constructor(e, t, i, s) {
    const n = t[i];
    s = _n([
      e.to,
      s,
      n,
      e.from
    ]);
    const r = _n([
      e.from,
      n,
      s
    ]);
    this._active = !0, this._fn = e.fn || Bw[e.type || typeof r], this._easing = TA[e.easing] || TA.linear, this._start = Math.floor(Date.now() + (e.delay || 0)), this._duration = this._total = Math.floor(e.duration), this._loop = !!e.loop, this._target = t, this._prop = i, this._from = r, this._to = s, this._promises = void 0;
  }
  active() {
    return this._active;
  }
  update(e, t, i) {
    if (this._active) {
      this._notify(!1);
      const s = this._target[this._prop], n = i - this._start, r = this._duration - n;
      this._start = i, this._duration = Math.floor(Math.max(r, e.duration)), this._total += n, this._loop = !!e.loop, this._to = _n([
        e.to,
        t,
        s,
        e.from
      ]), this._from = _n([
        e.from,
        s,
        t
      ]);
    }
  }
  cancel() {
    this._active && (this.tick(Date.now()), this._active = !1, this._notify(!1));
  }
  tick(e) {
    const t = e - this._start, i = this._duration, s = this._prop, n = this._from, r = this._loop, o = this._to;
    let a;
    if (this._active = n !== o && (r || t < i), !this._active) {
      this._target[s] = o, this._notify(!0);
      return;
    }
    if (t < 0) {
      this._target[s] = n;
      return;
    }
    a = t / i % 2, a = r && a > 1 ? 2 - a : a, a = this._easing(Math.min(1, Math.max(0, a))), this._target[s] = this._fn(n, o, a);
  }
  wait() {
    const e = this._promises || (this._promises = []);
    return new Promise((t, i) => {
      e.push({
        res: t,
        rej: i
      });
    });
  }
  _notify(e) {
    const t = e ? "res" : "rej", i = this._promises || [];
    for (let s = 0; s < i.length; s++)
      i[s][t]();
  }
}
class td {
  constructor(e, t) {
    this._chart = e, this._properties = /* @__PURE__ */ new Map(), this.configure(t);
  }
  configure(e) {
    if (!pe(e))
      return;
    const t = Object.keys(ke.animation), i = this._properties;
    Object.getOwnPropertyNames(e).forEach((s) => {
      const n = e[s];
      if (!pe(n))
        return;
      const r = {};
      for (const o of t)
        r[o] = n[o];
      ($e(n.properties) && n.properties || [
        s
      ]).forEach((o) => {
        (o === s || !i.has(o)) && i.set(o, r);
      });
    });
  }
  _animateOptions(e, t) {
    const i = t.options, s = Ew(e, i);
    if (!s)
      return [];
    const n = this._createAnimations(s, i);
    return i.$shared && yw(e.options.$animations, i).then(() => {
      e.options = i;
    }, () => {
    }), n;
  }
  _createAnimations(e, t) {
    const i = this._properties, s = [], n = e.$animations || (e.$animations = {}), r = Object.keys(t), o = Date.now();
    let a;
    for (a = r.length - 1; a >= 0; --a) {
      const l = r[a];
      if (l.charAt(0) === "$")
        continue;
      if (l === "options") {
        s.push(...this._animateOptions(e, t));
        continue;
      }
      const h = t[l];
      let c = n[l];
      const u = i.get(l);
      if (c)
        if (u && c.active()) {
          c.update(u, h, o);
          continue;
        } else
          c.cancel();
      if (!u || !u.duration) {
        e[l] = h;
        continue;
      }
      n[l] = c = new Cw(u, e, l, h), s.push(c);
    }
    return s;
  }
  update(e, t) {
    if (this._properties.size === 0) {
      Object.assign(e, t);
      return;
    }
    const i = this._createAnimations(e, t);
    if (i.length)
      return fi.add(this._chart, i), !0;
  }
}
function yw(A, e) {
  const t = [], i = Object.keys(e);
  for (let s = 0; s < i.length; s++) {
    const n = A[i[s]];
    n && n.active() && t.push(n.wait());
  }
  return Promise.all(t);
}
function Ew(A, e) {
  if (!e)
    return;
  let t = A.options;
  if (!t) {
    A.options = e;
    return;
  }
  return t.$shared && (A.options = t = Object.assign({}, t, {
    $shared: !1,
    $animations: {}
  })), t;
}
function ph(A, e) {
  const t = A && A.options || {}, i = t.reverse, s = t.min === void 0 ? e : 0, n = t.max === void 0 ? e : 0;
  return {
    start: i ? n : s,
    end: i ? s : n
  };
}
function Fw(A, e, t) {
  if (t === !1)
    return !1;
  const i = ph(A, t), s = ph(e, t);
  return {
    top: s.end,
    right: i.end,
    bottom: s.start,
    left: i.start
  };
}
function xw(A) {
  let e, t, i, s;
  return pe(A) ? (e = A.top, t = A.right, i = A.bottom, s = A.left) : e = t = i = s = A, {
    top: e,
    right: t,
    bottom: i,
    left: s,
    disabled: A === !1
  };
}
function id(A, e) {
  const t = [], i = A._getSortedDatasetMetas(e);
  let s, n;
  for (s = 0, n = i.length; s < n; ++s)
    t.push(i[s].index);
  return t;
}
function mh(A, e, t, i = {}) {
  const s = A.keys, n = i.mode === "single";
  let r, o, a, l;
  if (e === null)
    return;
  let h = !1;
  for (r = 0, o = s.length; r < o; ++r) {
    if (a = +s[r], a === t) {
      if (h = !0, i.all)
        continue;
      break;
    }
    l = A.values[a], Nt(l) && (n || e === 0 || Xs(e) === Xs(l)) && (e += l);
  }
  return !h && !i.all ? 0 : e;
}
function Qw(A, e) {
  const { iScale: t, vScale: i } = e, s = t.axis === "x" ? "x" : "y", n = i.axis === "x" ? "x" : "y", r = Object.keys(A), o = new Array(r.length);
  let a, l, h;
  for (a = 0, l = r.length; a < l; ++a)
    h = r[a], o[a] = {
      [s]: h,
      [n]: A[h]
    };
  return o;
}
function yo(A, e) {
  const t = A && A.options.stacked;
  return t || t === void 0 && e.stack !== void 0;
}
function Uw(A, e, t) {
  return `${A.id}.${e.id}.${t.stack || t.type}`;
}
function _w(A) {
  const { min: e, max: t, minDefined: i, maxDefined: s } = A.getUserBounds();
  return {
    min: i ? e : Number.NEGATIVE_INFINITY,
    max: s ? t : Number.POSITIVE_INFINITY
  };
}
function Hw(A, e, t) {
  const i = A[e] || (A[e] = {});
  return i[t] || (i[t] = {});
}
function bh(A, e, t, i) {
  for (const s of e.getMatchingVisibleMetas(i).reverse()) {
    const n = A[s.index];
    if (t && n > 0 || !t && n < 0)
      return s.index;
  }
  return null;
}
function wh(A, e) {
  const { chart: t, _cachedMeta: i } = A, s = t._stacks || (t._stacks = {}), { iScale: n, vScale: r, index: o } = i, a = n.axis, l = r.axis, h = Uw(n, r, i), c = e.length;
  let u;
  for (let d = 0; d < c; ++d) {
    const f = e[d], { [a]: p, [l]: b } = f, w = f._stacks || (f._stacks = {});
    u = w[l] = Hw(s, h, p), u[o] = b, u._top = bh(u, r, !0, i.type), u._bottom = bh(u, r, !1, i.type);
    const C = u._visualValues || (u._visualValues = {});
    C[o] = b;
  }
}
function Eo(A, e) {
  const t = A.scales;
  return Object.keys(t).filter((i) => t[i].axis === e).shift();
}
function Mw(A, e) {
  return Bs(A, {
    active: !1,
    dataset: void 0,
    datasetIndex: e,
    index: e,
    mode: "default",
    type: "dataset"
  });
}
function Dw(A, e, t) {
  return Bs(A, {
    active: !1,
    dataIndex: e,
    parsed: void 0,
    raw: void 0,
    element: t,
    index: e,
    mode: "default",
    type: "data"
  });
}
function cA(A, e) {
  const t = A.controller.index, i = A.vScale && A.vScale.axis;
  if (i) {
    e = e || A._parsed;
    for (const s of e) {
      const n = s._stacks;
      if (!n || n[i] === void 0 || n[i][t] === void 0)
        return;
      delete n[i][t], n[i]._visualValues !== void 0 && n[i]._visualValues[t] !== void 0 && delete n[i]._visualValues[t];
    }
  }
}
const Fo = (A) => A === "reset" || A === "none", vh = (A, e) => e ? A : Object.assign({}, A), Sw = (A, e, t) => A && !e.hidden && e._stacked && {
  keys: id(t, !0),
  values: null
};
class IA {
  constructor(e, t) {
    this.chart = e, this._ctx = e.ctx, this.index = t, this._cachedDataOpts = {}, this._cachedMeta = this.getMeta(), this._type = this._cachedMeta.type, this.options = void 0, this._parsing = !1, this._data = void 0, this._objectData = void 0, this._sharedOptions = void 0, this._drawStart = void 0, this._drawCount = void 0, this.enableOptionSharing = !1, this.supportsDecimation = !1, this.$context = void 0, this._syncList = [], this.datasetElementType = new.target.datasetElementType, this.dataElementType = new.target.dataElementType, this.initialize();
  }
  initialize() {
    const e = this._cachedMeta;
    this.configure(), this.linkScales(), e._stacked = yo(e.vScale, e), this.addElements(), this.options.fill && !this.chart.isPluginEnabled("filler") && console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options");
  }
  updateIndex(e) {
    this.index !== e && cA(this._cachedMeta), this.index = e;
  }
  linkScales() {
    const e = this.chart, t = this._cachedMeta, i = this.getDataset(), s = (c, u, d, f) => c === "x" ? u : c === "r" ? f : d, n = t.xAxisID = de(i.xAxisID, Eo(e, "x")), r = t.yAxisID = de(i.yAxisID, Eo(e, "y")), o = t.rAxisID = de(i.rAxisID, Eo(e, "r")), a = t.indexAxis, l = t.iAxisID = s(a, n, r, o), h = t.vAxisID = s(a, r, n, o);
    t.xScale = this.getScaleForId(n), t.yScale = this.getScaleForId(r), t.rScale = this.getScaleForId(o), t.iScale = this.getScaleForId(l), t.vScale = this.getScaleForId(h);
  }
  getDataset() {
    return this.chart.data.datasets[this.index];
  }
  getMeta() {
    return this.chart.getDatasetMeta(this.index);
  }
  getScaleForId(e) {
    return this.chart.scales[e];
  }
  _getOtherScale(e) {
    const t = this._cachedMeta;
    return e === t.iScale ? t.vScale : t.iScale;
  }
  reset() {
    this._update("reset");
  }
  _destroy() {
    const e = this._cachedMeta;
    this._data && th(this._data, this), e._stacked && cA(e);
  }
  _dataCheck() {
    const e = this.getDataset(), t = e.data || (e.data = []), i = this._data;
    if (pe(t)) {
      const s = this._cachedMeta;
      this._data = Qw(t, s);
    } else if (i !== t) {
      if (i) {
        th(i, this);
        const s = this._cachedMeta;
        cA(s), s._parsed = [];
      }
      t && Object.isExtensible(t) && hb(t, this), this._syncList = [], this._data = t;
    }
  }
  addElements() {
    const e = this._cachedMeta;
    this._dataCheck(), this.datasetElementType && (e.dataset = new this.datasetElementType());
  }
  buildOrUpdateElements(e) {
    const t = this._cachedMeta, i = this.getDataset();
    let s = !1;
    this._dataCheck();
    const n = t._stacked;
    t._stacked = yo(t.vScale, t), t.stack !== i.stack && (s = !0, cA(t), t.stack = i.stack), this._resyncElements(e), (s || n !== t._stacked) && (wh(this, t._parsed), t._stacked = yo(t.vScale, t));
  }
  configure() {
    const e = this.chart.config, t = e.datasetScopeKeys(this._type), i = e.getOptionScopes(this.getDataset(), t, !0);
    this.options = e.createResolver(i, this.getContext()), this._parsing = this.options.parsing, this._cachedDataOpts = {};
  }
  parse(e, t) {
    const { _cachedMeta: i, _data: s } = this, { iScale: n, _stacked: r } = i, o = n.axis;
    let a = e === 0 && t === s.length ? !0 : i._sorted, l = e > 0 && i._parsed[e - 1], h, c, u;
    if (this._parsing === !1)
      i._parsed = s, i._sorted = !0, u = s;
    else {
      $e(s[e]) ? u = this.parseArrayData(i, s, e, t) : pe(s[e]) ? u = this.parseObjectData(i, s, e, t) : u = this.parsePrimitiveData(i, s, e, t);
      const d = () => c[o] === null || l && c[o] < l[o];
      for (h = 0; h < t; ++h)
        i._parsed[h + e] = c = u[h], a && (d() && (a = !1), l = c);
      i._sorted = a;
    }
    r && wh(this, u);
  }
  parsePrimitiveData(e, t, i, s) {
    const { iScale: n, vScale: r } = e, o = n.axis, a = r.axis, l = n.getLabels(), h = n === r, c = new Array(s);
    let u, d, f;
    for (u = 0, d = s; u < d; ++u)
      f = u + i, c[u] = {
        [o]: h || n.parse(l[f], f),
        [a]: r.parse(t[f], f)
      };
    return c;
  }
  parseArrayData(e, t, i, s) {
    const { xScale: n, yScale: r } = e, o = new Array(s);
    let a, l, h, c;
    for (a = 0, l = s; a < l; ++a)
      h = a + i, c = t[h], o[a] = {
        x: n.parse(c[0], h),
        y: r.parse(c[1], h)
      };
    return o;
  }
  parseObjectData(e, t, i, s) {
    const { xScale: n, yScale: r } = e, { xAxisKey: o = "x", yAxisKey: a = "y" } = this._parsing, l = new Array(s);
    let h, c, u, d;
    for (h = 0, c = s; h < c; ++h)
      u = h + i, d = t[u], l[h] = {
        x: n.parse(Br(d, o), u),
        y: r.parse(Br(d, a), u)
      };
    return l;
  }
  getParsed(e) {
    return this._cachedMeta._parsed[e];
  }
  getDataElement(e) {
    return this._cachedMeta.data[e];
  }
  applyStack(e, t, i) {
    const s = this.chart, n = this._cachedMeta, r = t[e.axis], o = {
      keys: id(s, !0),
      values: t._stacks[e.axis]._visualValues
    };
    return mh(o, r, n.index, {
      mode: i
    });
  }
  updateRangeFromParsed(e, t, i, s) {
    const n = i[t.axis];
    let r = n === null ? NaN : n;
    const o = s && i._stacks[t.axis];
    s && o && (s.values = o, r = mh(s, n, this._cachedMeta.index)), e.min = Math.min(e.min, r), e.max = Math.max(e.max, r);
  }
  getMinMax(e, t) {
    const i = this._cachedMeta, s = i._parsed, n = i._sorted && e === i.iScale, r = s.length, o = this._getOtherScale(e), a = Sw(t, i, this.chart), l = {
      min: Number.POSITIVE_INFINITY,
      max: Number.NEGATIVE_INFINITY
    }, { min: h, max: c } = _w(o);
    let u, d;
    function f() {
      d = s[u];
      const p = d[o.axis];
      return !Nt(d[e.axis]) || h > p || c < p;
    }
    for (u = 0; u < r && !(!f() && (this.updateRangeFromParsed(l, e, d, a), n)); ++u)
      ;
    if (n) {
      for (u = r - 1; u >= 0; --u)
        if (!f()) {
          this.updateRangeFromParsed(l, e, d, a);
          break;
        }
    }
    return l;
  }
  getAllParsedValues(e) {
    const t = this._cachedMeta._parsed, i = [];
    let s, n, r;
    for (s = 0, n = t.length; s < n; ++s)
      r = t[s][e.axis], Nt(r) && i.push(r);
    return i;
  }
  getMaxOverflow() {
    return !1;
  }
  getLabelAndValue(e) {
    const t = this._cachedMeta, i = t.iScale, s = t.vScale, n = this.getParsed(e);
    return {
      label: i ? "" + i.getLabelForValue(n[i.axis]) : "",
      value: s ? "" + s.getLabelForValue(n[s.axis]) : ""
    };
  }
  _update(e) {
    const t = this._cachedMeta;
    this.update(e || "default"), t._clip = xw(de(this.options.clip, Fw(t.xScale, t.yScale, this.getMaxOverflow())));
  }
  update(e) {
  }
  draw() {
    const e = this._ctx, t = this.chart, i = this._cachedMeta, s = i.data || [], n = t.chartArea, r = [], o = this._drawStart || 0, a = this._drawCount || s.length - o, l = this.options.drawActiveElementsOnTop;
    let h;
    for (i.dataset && i.dataset.draw(e, n, o, a), h = o; h < o + a; ++h) {
      const c = s[h];
      c.hidden || (c.active && l ? r.push(c) : c.draw(e, n));
    }
    for (h = 0; h < r.length; ++h)
      r[h].draw(e, n);
  }
  getStyle(e, t) {
    const i = t ? "active" : "default";
    return e === void 0 && this._cachedMeta.dataset ? this.resolveDatasetElementOptions(i) : this.resolveDataElementOptions(e || 0, i);
  }
  getContext(e, t, i) {
    const s = this.getDataset();
    let n;
    if (e >= 0 && e < this._cachedMeta.data.length) {
      const r = this._cachedMeta.data[e];
      n = r.$context || (r.$context = Dw(this.getContext(), e, r)), n.parsed = this.getParsed(e), n.raw = s.data[e], n.index = n.dataIndex = e;
    } else
      n = this.$context || (this.$context = Mw(this.chart.getContext(), this.index)), n.dataset = s, n.index = n.datasetIndex = this.index;
    return n.active = !!t, n.mode = i, n;
  }
  resolveDatasetElementOptions(e) {
    return this._resolveElementOptions(this.datasetElementType.id, e);
  }
  resolveDataElementOptions(e, t) {
    return this._resolveElementOptions(this.dataElementType.id, t, e);
  }
  _resolveElementOptions(e, t = "default", i) {
    const s = t === "active", n = this._cachedDataOpts, r = e + "-" + t, o = n[r], a = this.enableOptionSharing && Cr(i);
    if (o)
      return vh(o, a);
    const l = this.chart.config, h = l.datasetElementScopeKeys(this._type, e), c = s ? [
      `${e}Hover`,
      "hover",
      e,
      ""
    ] : [
      e,
      ""
    ], u = l.getOptionScopes(this.getDataset(), h), d = Object.keys(ke.elements[e]), f = () => this.getContext(i, s, t), p = l.resolveNamedOptions(u, d, f, c);
    return p.$shared && (p.$shared = a, n[r] = Object.freeze(vh(p, a))), p;
  }
  _resolveAnimations(e, t, i) {
    const s = this.chart, n = this._cachedDataOpts, r = `animation-${t}`, o = n[r];
    if (o)
      return o;
    let a;
    if (s.options.animation !== !1) {
      const h = this.chart.config, c = h.datasetAnimationScopeKeys(this._type, t), u = h.getOptionScopes(this.getDataset(), c);
      a = h.createResolver(u, this.getContext(e, i, t));
    }
    const l = new td(s, a && a.animations);
    return a && a._cacheable && (n[r] = Object.freeze(l)), l;
  }
  getSharedOptions(e) {
    if (e.$shared)
      return this._sharedOptions || (this._sharedOptions = Object.assign({}, e));
  }
  includeOptions(e, t) {
    return !t || Fo(e) || this.chart._animationsDisabled;
  }
  _getSharedOptions(e, t) {
    const i = this.resolveDataElementOptions(e, t), s = this._sharedOptions, n = this.getSharedOptions(i), r = this.includeOptions(t, n) || n !== s;
    return this.updateSharedOptions(n, t, i), {
      sharedOptions: n,
      includeOptions: r
    };
  }
  updateElement(e, t, i, s) {
    Fo(s) ? Object.assign(e, i) : this._resolveAnimations(t, s).update(e, i);
  }
  updateSharedOptions(e, t, i) {
    e && !Fo(t) && this._resolveAnimations(void 0, t).update(e, i);
  }
  _setStyle(e, t, i, s) {
    e.active = s;
    const n = this.getStyle(t, s);
    this._resolveAnimations(t, i, s).update(e, {
      options: !s && this.getSharedOptions(n) || n
    });
  }
  removeHoverStyle(e, t, i) {
    this._setStyle(e, i, "active", !1);
  }
  setHoverStyle(e, t, i) {
    this._setStyle(e, i, "active", !0);
  }
  _removeDatasetHoverStyle() {
    const e = this._cachedMeta.dataset;
    e && this._setStyle(e, void 0, "active", !1);
  }
  _setDatasetHoverStyle() {
    const e = this._cachedMeta.dataset;
    e && this._setStyle(e, void 0, "active", !0);
  }
  _resyncElements(e) {
    const t = this._data, i = this._cachedMeta.data;
    for (const [o, a, l] of this._syncList)
      this[o](a, l);
    this._syncList = [];
    const s = i.length, n = t.length, r = Math.min(n, s);
    r && this.parse(0, r), n > s ? this._insertElements(s, n - s, e) : n < s && this._removeElements(n, s - n);
  }
  _insertElements(e, t, i = !0) {
    const s = this._cachedMeta, n = s.data, r = e + t;
    let o;
    const a = (l) => {
      for (l.length += t, o = l.length - 1; o >= r; o--)
        l[o] = l[o - t];
    };
    for (a(n), o = e; o < r; ++o)
      n[o] = new this.dataElementType();
    this._parsing && a(s._parsed), this.parse(e, t), i && this.updateElements(n, e, t, "reset");
  }
  updateElements(e, t, i, s) {
  }
  _removeElements(e, t) {
    const i = this._cachedMeta;
    if (this._parsing) {
      const s = i._parsed.splice(e, t);
      i._stacked && cA(i, s);
    }
    i.data.splice(e, t);
  }
  _sync(e) {
    if (this._parsing)
      this._syncList.push(e);
    else {
      const [t, i, s] = e;
      this[t](i, s);
    }
    this.chart._dataChanges.push([
      this.index,
      ...e
    ]);
  }
  _onDataPush() {
    const e = arguments.length;
    this._sync([
      "_insertElements",
      this.getDataset().data.length - e,
      e
    ]);
  }
  _onDataPop() {
    this._sync([
      "_removeElements",
      this._cachedMeta.data.length - 1,
      1
    ]);
  }
  _onDataShift() {
    this._sync([
      "_removeElements",
      0,
      1
    ]);
  }
  _onDataSplice(e, t) {
    t && this._sync([
      "_removeElements",
      e,
      t
    ]);
    const i = arguments.length - 2;
    i && this._sync([
      "_insertElements",
      e,
      i
    ]);
  }
  _onDataUnshift() {
    this._sync([
      "_insertElements",
      0,
      arguments.length
    ]);
  }
}
D(IA, "defaults", {}), D(IA, "datasetElementType", null), D(IA, "dataElementType", null);
class cr extends IA {
  initialize() {
    this.enableOptionSharing = !0, this.supportsDecimation = !0, super.initialize();
  }
  update(e) {
    const t = this._cachedMeta, { dataset: i, data: s = [], _dataset: n } = t, r = this.chart._animationsDisabled;
    let { start: o, count: a } = fb(t, s, r);
    this._drawStart = o, this._drawCount = a, gb(t) && (o = 0, a = s.length), i._chart = this.chart, i._datasetIndex = this.index, i._decimated = !!n._decimated, i.points = s;
    const l = this.resolveDatasetElementOptions(e);
    this.options.showLine || (l.borderWidth = 0), l.segment = this.options.segment, this.updateElement(i, void 0, {
      animated: !r,
      options: l
    }, e), this.updateElements(s, o, a, e);
  }
  updateElements(e, t, i, s) {
    const n = s === "reset", { iScale: r, vScale: o, _stacked: a, _dataset: l } = this._cachedMeta, { sharedOptions: h, includeOptions: c } = this._getSharedOptions(t, s), u = r.axis, d = o.axis, { spanGaps: f, segment: p } = this.options, b = $A(f) ? f : Number.POSITIVE_INFINITY, w = this.chart._animationsDisabled || n || s === "none", C = t + i, x = e.length;
    let U = t > 0 && this.getParsed(t - 1);
    for (let E = 0; E < x; ++E) {
      const H = e[E], T = w ? H : {};
      if (E < t || E >= C) {
        T.skip = !0;
        continue;
      }
      const S = this.getParsed(E), R = Qe(S[d]), J = T[u] = r.getPixelForValue(S[u], E), X = T[d] = n || R ? o.getBasePixel() : o.getPixelForValue(a ? this.applyStack(o, S, a) : S[d], E);
      T.skip = isNaN(J) || isNaN(X) || R, T.stop = E > 0 && Math.abs(S[u] - U[u]) > b, p && (T.parsed = S, T.raw = l.data[E]), c && (T.options = h || this.resolveDataElementOptions(E, H.active ? "active" : s)), w || this.updateElement(H, E, T, s), U = S;
    }
  }
  getMaxOverflow() {
    const e = this._cachedMeta, t = e.dataset, i = t.options && t.options.borderWidth || 0, s = e.data || [];
    if (!s.length)
      return i;
    const n = s[0].size(this.resolveDataElementOptions(0)), r = s[s.length - 1].size(this.resolveDataElementOptions(s.length - 1));
    return Math.max(i, n, r) / 2;
  }
  draw() {
    const e = this._cachedMeta;
    e.dataset.updateControlPoints(this.chart.chartArea, e.iScale.axis), super.draw();
  }
}
D(cr, "id", "line"), D(cr, "defaults", {
  datasetElementType: "line",
  dataElementType: "point",
  showLine: !0,
  spanGaps: !1
}), D(cr, "overrides", {
  scales: {
    _index_: {
      type: "category"
    },
    _value_: {
      type: "linear"
    }
  }
});
function As() {
  throw new Error("This method is not implemented: Check that a complete date adapter is provided.");
}
class Hl {
  constructor(e) {
    D(this, "options");
    this.options = e || {};
  }
  /**
  * Override default date adapter methods.
  * Accepts type parameter to define options type.
  * @example
  * Chart._adapters._date.override<{myAdapterOption: string}>({
  *   init() {
  *     console.log(this.options.myAdapterOption);
  *   }
  * })
  */
  static override(e) {
    Object.assign(Hl.prototype, e);
  }
  // eslint-disable-next-line @typescript-eslint/no-empty-function
  init() {
  }
  formats() {
    return As();
  }
  parse() {
    return As();
  }
  format() {
    return As();
  }
  add() {
    return As();
  }
  diff() {
    return As();
  }
  startOf() {
    return As();
  }
  endOf() {
    return As();
  }
}
var Tw = {
  _date: Hl
};
function Lw(A, e, t, i) {
  const { controller: s, data: n, _sorted: r } = A, o = s._cachedMeta.iScale, a = A.dataset && A.dataset.options ? A.dataset.options.spanGaps : null;
  if (o && e === o.axis && e !== "r" && r && n.length) {
    const l = o._reversePixels ? ab : fs;
    if (i) {
      if (s._sharedOptions) {
        const h = n[0], c = typeof h.getRange == "function" && h.getRange(e);
        if (c) {
          const u = l(n, e, t - c), d = l(n, e, t + c);
          return {
            lo: u.lo,
            hi: d.hi
          };
        }
      }
    } else {
      const h = l(n, e, t);
      if (a) {
        const { vScale: c } = s._cachedMeta, { _parsed: u } = A, d = u.slice(0, h.lo + 1).reverse().findIndex((p) => !Qe(p[c.axis]));
        h.lo -= Math.max(0, d);
        const f = u.slice(h.hi).findIndex((p) => !Qe(p[c.axis]));
        h.hi += Math.max(0, f);
      }
      return h;
    }
  }
  return {
    lo: 0,
    hi: n.length - 1
  };
}
function Vr(A, e, t, i, s) {
  const n = A.getSortedVisibleDatasetMetas(), r = t[e];
  for (let o = 0, a = n.length; o < a; ++o) {
    const { index: l, data: h } = n[o], { lo: c, hi: u } = Lw(n[o], e, r, s);
    for (let d = c; d <= u; ++d) {
      const f = h[d];
      f.skip || i(f, l, d);
    }
  }
}
function Rw(A) {
  const e = A.indexOf("x") !== -1, t = A.indexOf("y") !== -1;
  return function(i, s) {
    const n = e ? Math.abs(i.x - s.x) : 0, r = t ? Math.abs(i.y - s.y) : 0;
    return Math.sqrt(Math.pow(n, 2) + Math.pow(r, 2));
  };
}
function xo(A, e, t, i, s) {
  const n = [];
  return !s && !A.isPointInArea(e) || Vr(A, t, e, function(o, a, l) {
    !s && !ZA(o, A.chartArea, 0) || o.inRange(e.x, e.y, i) && n.push({
      element: o,
      datasetIndex: a,
      index: l
    });
  }, !0), n;
}
function Iw(A, e, t, i) {
  let s = [];
  function n(r, o, a) {
    const { startAngle: l, endAngle: h } = r.getProps([
      "startAngle",
      "endAngle"
    ], i), { angle: c } = nb(r, {
      x: e.x,
      y: e.y
    });
    Ou(c, l, h) && s.push({
      element: r,
      datasetIndex: o,
      index: a
    });
  }
  return Vr(A, t, e, n), s;
}
function kw(A, e, t, i, s, n) {
  let r = [];
  const o = Rw(t);
  let a = Number.POSITIVE_INFINITY;
  function l(h, c, u) {
    const d = h.inRange(e.x, e.y, s);
    if (i && !d)
      return;
    const f = h.getCenterPoint(s);
    if (!(!!n || A.isPointInArea(f)) && !d)
      return;
    const b = o(e, f);
    b < a ? (r = [
      {
        element: h,
        datasetIndex: c,
        index: u
      }
    ], a = b) : b === a && r.push({
      element: h,
      datasetIndex: c,
      index: u
    });
  }
  return Vr(A, t, e, l), r;
}
function Qo(A, e, t, i, s, n) {
  return !n && !A.isPointInArea(e) ? [] : t === "r" && !i ? Iw(A, e, t, s) : kw(A, e, t, i, s, n);
}
function Bh(A, e, t, i, s) {
  const n = [], r = t === "x" ? "inXRange" : "inYRange";
  let o = !1;
  return Vr(A, t, e, (a, l, h) => {
    a[r] && a[r](e[t], s) && (n.push({
      element: a,
      datasetIndex: l,
      index: h
    }), o = o || a.inRange(e.x, e.y, s));
  }), i && !o ? [] : n;
}
var Ow = {
  modes: {
    index(A, e, t, i) {
      const s = rs(e, A), n = t.axis || "x", r = t.includeInvisible || !1, o = t.intersect ? xo(A, s, n, i, r) : Qo(A, s, n, !1, i, r), a = [];
      return o.length ? (A.getSortedVisibleDatasetMetas().forEach((l) => {
        const h = o[0].index, c = l.data[h];
        c && !c.skip && a.push({
          element: c,
          datasetIndex: l.index,
          index: h
        });
      }), a) : [];
    },
    dataset(A, e, t, i) {
      const s = rs(e, A), n = t.axis || "xy", r = t.includeInvisible || !1;
      let o = t.intersect ? xo(A, s, n, i, r) : Qo(A, s, n, !1, i, r);
      if (o.length > 0) {
        const a = o[0].datasetIndex, l = A.getDatasetMeta(a).data;
        o = [];
        for (let h = 0; h < l.length; ++h)
          o.push({
            element: l[h],
            datasetIndex: a,
            index: h
          });
      }
      return o;
    },
    point(A, e, t, i) {
      const s = rs(e, A), n = t.axis || "xy", r = t.includeInvisible || !1;
      return xo(A, s, n, i, r);
    },
    nearest(A, e, t, i) {
      const s = rs(e, A), n = t.axis || "xy", r = t.includeInvisible || !1;
      return Qo(A, s, n, t.intersect, i, r);
    },
    x(A, e, t, i) {
      const s = rs(e, A);
      return Bh(A, s, "x", t.intersect, i);
    },
    y(A, e, t, i) {
      const s = rs(e, A);
      return Bh(A, s, "y", t.intersect, i);
    }
  }
};
const sd = [
  "left",
  "top",
  "right",
  "bottom"
];
function uA(A, e) {
  return A.filter((t) => t.pos === e);
}
function Ch(A, e) {
  return A.filter((t) => sd.indexOf(t.pos) === -1 && t.box.axis === e);
}
function dA(A, e) {
  return A.sort((t, i) => {
    const s = e ? i : t, n = e ? t : i;
    return s.weight === n.weight ? s.index - n.index : s.weight - n.weight;
  });
}
function Pw(A) {
  const e = [];
  let t, i, s, n, r, o;
  for (t = 0, i = (A || []).length; t < i; ++t)
    s = A[t], { position: n, options: { stack: r, stackWeight: o = 1 } } = s, e.push({
      index: t,
      box: s,
      pos: n,
      horizontal: s.isHorizontal(),
      weight: s.weight,
      stack: r && n + r,
      stackWeight: o
    });
  return e;
}
function Nw(A) {
  const e = {};
  for (const t of A) {
    const { stack: i, pos: s, stackWeight: n } = t;
    if (!i || !sd.includes(s))
      continue;
    const r = e[i] || (e[i] = {
      count: 0,
      placed: 0,
      weight: 0,
      size: 0
    });
    r.count++, r.weight += n;
  }
  return e;
}
function Kw(A, e) {
  const t = Nw(A), { vBoxMaxWidth: i, hBoxMaxHeight: s } = e;
  let n, r, o;
  for (n = 0, r = A.length; n < r; ++n) {
    o = A[n];
    const { fullSize: a } = o.box, l = t[o.stack], h = l && o.stackWeight / l.weight;
    o.horizontal ? (o.width = h ? h * i : a && e.availableWidth, o.height = s) : (o.width = i, o.height = h ? h * s : a && e.availableHeight);
  }
  return t;
}
function Vw(A) {
  const e = Pw(A), t = dA(e.filter((l) => l.box.fullSize), !0), i = dA(uA(e, "left"), !0), s = dA(uA(e, "right")), n = dA(uA(e, "top"), !0), r = dA(uA(e, "bottom")), o = Ch(e, "x"), a = Ch(e, "y");
  return {
    fullSize: t,
    leftAndTop: i.concat(n),
    rightAndBottom: s.concat(a).concat(r).concat(o),
    chartArea: uA(e, "chartArea"),
    vertical: i.concat(s).concat(a),
    horizontal: n.concat(r).concat(o)
  };
}
function yh(A, e, t, i) {
  return Math.max(A[t], e[t]) + Math.max(A[i], e[i]);
}
function Ad(A, e) {
  A.top = Math.max(A.top, e.top), A.left = Math.max(A.left, e.left), A.bottom = Math.max(A.bottom, e.bottom), A.right = Math.max(A.right, e.right);
}
function zw(A, e, t, i) {
  const { pos: s, box: n } = t, r = A.maxPadding;
  if (!pe(s)) {
    t.size && (A[s] -= t.size);
    const c = i[t.stack] || {
      size: 0,
      count: 1
    };
    c.size = Math.max(c.size, t.horizontal ? n.height : n.width), t.size = c.size / c.count, A[s] += t.size;
  }
  n.getPadding && Ad(r, n.getPadding());
  const o = Math.max(0, e.outerWidth - yh(r, A, "left", "right")), a = Math.max(0, e.outerHeight - yh(r, A, "top", "bottom")), l = o !== A.w, h = a !== A.h;
  return A.w = o, A.h = a, t.horizontal ? {
    same: l,
    other: h
  } : {
    same: h,
    other: l
  };
}
function Gw(A) {
  const e = A.maxPadding;
  function t(i) {
    const s = Math.max(e[i] - A[i], 0);
    return A[i] += s, s;
  }
  A.y += t("top"), A.x += t("left"), t("right"), t("bottom");
}
function Ww(A, e) {
  const t = e.maxPadding;
  function i(s) {
    const n = {
      left: 0,
      top: 0,
      right: 0,
      bottom: 0
    };
    return s.forEach((r) => {
      n[r] = Math.max(e[r], t[r]);
    }), n;
  }
  return i(A ? [
    "left",
    "right"
  ] : [
    "top",
    "bottom"
  ]);
}
function CA(A, e, t, i) {
  const s = [];
  let n, r, o, a, l, h;
  for (n = 0, r = A.length, l = 0; n < r; ++n) {
    o = A[n], a = o.box, a.update(o.width || e.w, o.height || e.h, Ww(o.horizontal, e));
    const { same: c, other: u } = zw(e, t, o, i);
    l |= c && s.length, h = h || u, a.fullSize || s.push(o);
  }
  return l && CA(s, e, t, i) || h;
}
function Dn(A, e, t, i, s) {
  A.top = t, A.left = e, A.right = e + i, A.bottom = t + s, A.width = i, A.height = s;
}
function Eh(A, e, t, i) {
  const s = t.padding;
  let { x: n, y: r } = e;
  for (const o of A) {
    const a = o.box, l = i[o.stack] || {
      placed: 0,
      weight: 1
    }, h = o.stackWeight / l.weight || 1;
    if (o.horizontal) {
      const c = e.w * h, u = l.size || a.height;
      Cr(l.start) && (r = l.start), a.fullSize ? Dn(a, s.left, r, t.outerWidth - s.right - s.left, u) : Dn(a, e.left + l.placed, r, c, u), l.start = r, l.placed += c, r = a.bottom;
    } else {
      const c = e.h * h, u = l.size || a.width;
      Cr(l.start) && (n = l.start), a.fullSize ? Dn(a, n, s.top, u, t.outerHeight - s.bottom - s.top) : Dn(a, n, e.top + l.placed, u, c), l.start = n, l.placed += c, n = a.right;
    }
  }
  e.x = n, e.y = r;
}
var kt = {
  addBox(A, e) {
    A.boxes || (A.boxes = []), e.fullSize = e.fullSize || !1, e.position = e.position || "top", e.weight = e.weight || 0, e._layers = e._layers || function() {
      return [
        {
          z: 0,
          draw(t) {
            e.draw(t);
          }
        }
      ];
    }, A.boxes.push(e);
  },
  removeBox(A, e) {
    const t = A.boxes ? A.boxes.indexOf(e) : -1;
    t !== -1 && A.boxes.splice(t, 1);
  },
  configure(A, e, t) {
    e.fullSize = t.fullSize, e.position = t.position, e.weight = t.weight;
  },
  update(A, e, t, i) {
    if (!A)
      return;
    const s = Kt(A.options.layout.padding), n = Math.max(e - s.width, 0), r = Math.max(t - s.height, 0), o = Vw(A.boxes), a = o.vertical, l = o.horizontal;
    ve(A.boxes, (p) => {
      typeof p.beforeLayout == "function" && p.beforeLayout();
    });
    const h = a.reduce((p, b) => b.box.options && b.box.options.display === !1 ? p : p + 1, 0) || 1, c = Object.freeze({
      outerWidth: e,
      outerHeight: t,
      padding: s,
      availableWidth: n,
      availableHeight: r,
      vBoxMaxWidth: n / 2 / h,
      hBoxMaxHeight: r / 2
    }), u = Object.assign({}, s);
    Ad(u, Kt(i));
    const d = Object.assign({
      maxPadding: u,
      w: n,
      h: r,
      x: s.left,
      y: s.top
    }, s), f = Kw(a.concat(l), c);
    CA(o.fullSize, d, c, f), CA(a, d, c, f), CA(l, d, c, f) && CA(a, d, c, f), Gw(d), Eh(o.leftAndTop, d, c, f), d.x += d.w, d.y += d.h, Eh(o.rightAndBottom, d, c, f), A.chartArea = {
      left: d.left,
      top: d.top,
      right: d.left + d.w,
      bottom: d.top + d.h,
      height: d.h,
      width: d.w
    }, ve(o.chartArea, (p) => {
      const b = p.box;
      Object.assign(b, A.chartArea), b.update(d.w, d.h, {
        left: 0,
        top: 0,
        right: 0,
        bottom: 0
      });
    });
  }
};
class nd {
  acquireContext(e, t) {
  }
  releaseContext(e) {
    return !1;
  }
  addEventListener(e, t, i) {
  }
  removeEventListener(e, t, i) {
  }
  getDevicePixelRatio() {
    return 1;
  }
  getMaximumSize(e, t, i, s) {
    return t = Math.max(0, t || e.width), i = i || e.height, {
      width: t,
      height: Math.max(0, s ? Math.floor(t / s) : i)
    };
  }
  isAttached(e) {
    return !0;
  }
  updateConfig(e) {
  }
}
class jw extends nd {
  acquireContext(e) {
    return e && e.getContext && e.getContext("2d") || null;
  }
  updateConfig(e) {
    e.options.animation = !1;
  }
}
const ur = "$chartjs", Xw = {
  touchstart: "mousedown",
  touchmove: "mousemove",
  touchend: "mouseup",
  pointerenter: "mouseenter",
  pointerdown: "mousedown",
  pointermove: "mousemove",
  pointerup: "mouseup",
  pointerleave: "mouseout",
  pointerout: "mouseout"
}, Fh = (A) => A === null || A === "";
function Yw(A, e) {
  const t = A.style, i = A.getAttribute("height"), s = A.getAttribute("width");
  if (A[ur] = {
    initial: {
      height: i,
      width: s,
      style: {
        display: t.display,
        height: t.height,
        width: t.width
      }
    }
  }, t.display = t.display || "block", t.boxSizing = t.boxSizing || "border-box", Fh(s)) {
    const n = ch(A, "width");
    n !== void 0 && (A.width = n);
  }
  if (Fh(i))
    if (A.style.height === "")
      A.height = A.width / (e || 2);
    else {
      const n = ch(A, "height");
      n !== void 0 && (A.height = n);
    }
  return A;
}
const rd = nw ? {
  passive: !0
} : !1;
function Jw(A, e, t) {
  A && A.addEventListener(e, t, rd);
}
function $w(A, e, t) {
  A && A.canvas && A.canvas.removeEventListener(e, t, rd);
}
function Zw(A, e) {
  const t = Xw[A.type] || A.type, { x: i, y: s } = rs(A, e);
  return {
    type: t,
    chart: e,
    native: A,
    x: i !== void 0 ? i : null,
    y: s !== void 0 ? s : null
  };
}
function Fr(A, e) {
  for (const t of A)
    if (t === e || t.contains(e))
      return !0;
}
function qw(A, e, t) {
  const i = A.canvas, s = new MutationObserver((n) => {
    let r = !1;
    for (const o of n)
      r = r || Fr(o.addedNodes, i), r = r && !Fr(o.removedNodes, i);
    r && t();
  });
  return s.observe(document, {
    childList: !0,
    subtree: !0
  }), s;
}
function ev(A, e, t) {
  const i = A.canvas, s = new MutationObserver((n) => {
    let r = !1;
    for (const o of n)
      r = r || Fr(o.removedNodes, i), r = r && !Fr(o.addedNodes, i);
    r && t();
  });
  return s.observe(document, {
    childList: !0,
    subtree: !0
  }), s;
}
const en = /* @__PURE__ */ new Map();
let xh = 0;
function od() {
  const A = window.devicePixelRatio;
  A !== xh && (xh = A, en.forEach((e, t) => {
    t.currentDevicePixelRatio !== A && e();
  }));
}
function tv(A, e) {
  en.size || window.addEventListener("resize", od), en.set(A, e);
}
function iv(A) {
  en.delete(A), en.size || window.removeEventListener("resize", od);
}
function sv(A, e, t) {
  const i = A.canvas, s = i && _l(i);
  if (!s)
    return;
  const n = Ku((o, a) => {
    const l = s.clientWidth;
    t(o, a), l < s.clientWidth && t();
  }, window), r = new ResizeObserver((o) => {
    const a = o[0], l = a.contentRect.width, h = a.contentRect.height;
    l === 0 && h === 0 || n(l, h);
  });
  return r.observe(s), tv(A, n), r;
}
function Uo(A, e, t) {
  t && t.disconnect(), e === "resize" && iv(A);
}
function Av(A, e, t) {
  const i = A.canvas, s = Ku((n) => {
    A.ctx !== null && t(Zw(n, A));
  }, A);
  return Jw(i, e, s), s;
}
class nv extends nd {
  acquireContext(e, t) {
    const i = e && e.getContext && e.getContext("2d");
    return i && i.canvas === e ? (Yw(e, t), i) : null;
  }
  releaseContext(e) {
    const t = e.canvas;
    if (!t[ur])
      return !1;
    const i = t[ur].initial;
    [
      "height",
      "width"
    ].forEach((n) => {
      const r = i[n];
      Qe(r) ? t.removeAttribute(n) : t.setAttribute(n, r);
    });
    const s = i.style || {};
    return Object.keys(s).forEach((n) => {
      t.style[n] = s[n];
    }), t.width = t.width, delete t[ur], !0;
  }
  addEventListener(e, t, i) {
    this.removeEventListener(e, t);
    const s = e.$proxies || (e.$proxies = {}), r = {
      attach: qw,
      detach: ev,
      resize: sv
    }[t] || Av;
    s[t] = r(e, t, i);
  }
  removeEventListener(e, t) {
    const i = e.$proxies || (e.$proxies = {}), s = i[t];
    if (!s)
      return;
    ({
      attach: Uo,
      detach: Uo,
      resize: Uo
    }[t] || $w)(e, t, s), i[t] = void 0;
  }
  getDevicePixelRatio() {
    return window.devicePixelRatio;
  }
  getMaximumSize(e, t, i, s) {
    return Aw(e, t, i, s);
  }
  isAttached(e) {
    const t = e && _l(e);
    return !!(t && t.isConnected);
  }
}
function rv(A) {
  return !Ul() || typeof OffscreenCanvas < "u" && A instanceof OffscreenCanvas ? jw : nv;
}
class vi {
  constructor() {
    D(this, "x");
    D(this, "y");
    D(this, "active", !1);
    D(this, "options");
    D(this, "$animations");
  }
  tooltipPosition(e) {
    const { x: t, y: i } = this.getProps([
      "x",
      "y"
    ], e);
    return {
      x: t,
      y: i
    };
  }
  hasValue() {
    return $A(this.x) && $A(this.y);
  }
  getProps(e, t) {
    const i = this.$animations;
    if (!t || !i)
      return this;
    const s = {};
    return e.forEach((n) => {
      s[n] = i[n] && i[n].active() ? i[n]._to : this[n];
    }), s;
  }
}
D(vi, "defaults", {}), D(vi, "defaultRoutes");
function ov(A, e) {
  const t = A.options.ticks, i = av(A), s = Math.min(t.maxTicksLimit || i, i), n = t.major.enabled ? hv(e) : [], r = n.length, o = n[0], a = n[r - 1], l = [];
  if (r > s)
    return cv(e, l, n, r / s), l;
  const h = lv(n, e, s);
  if (r > 0) {
    let c, u;
    const d = r > 1 ? Math.round((a - o) / (r - 1)) : null;
    for (Sn(e, l, h, Qe(d) ? 0 : o - d, o), c = 0, u = r - 1; c < u; c++)
      Sn(e, l, h, n[c], n[c + 1]);
    return Sn(e, l, h, a, Qe(d) ? e.length : a + d), l;
  }
  return Sn(e, l, h), l;
}
function av(A) {
  const e = A.options.offset, t = A._tickSize(), i = A._length / t + (e ? 0 : 1), s = A._maxLength / t;
  return Math.floor(Math.min(i, s));
}
function lv(A, e, t) {
  const i = uv(A), s = e.length / t;
  if (!i)
    return Math.max(s, 1);
  const n = eb(i);
  for (let r = 0, o = n.length - 1; r < o; r++) {
    const a = n[r];
    if (a > s)
      return a;
  }
  return Math.max(s, 1);
}
function hv(A) {
  const e = [];
  let t, i;
  for (t = 0, i = A.length; t < i; t++)
    A[t].major && e.push(t);
  return e;
}
function cv(A, e, t, i) {
  let s = 0, n = t[0], r;
  for (i = Math.ceil(i), r = 0; r < A.length; r++)
    r === n && (e.push(A[r]), s++, n = t[s * i]);
}
function Sn(A, e, t, i, s) {
  const n = de(i, 0), r = Math.min(de(s, A.length), A.length);
  let o = 0, a, l, h;
  for (t = Math.ceil(t), s && (a = s - i, t = a / Math.floor(a / t)), h = n; h < 0; )
    o++, h = Math.round(n + o * t);
  for (l = Math.max(n, 0); l < r; l++)
    l === h && (e.push(A[l]), o++, h = Math.round(n + o * t));
}
function uv(A) {
  const e = A.length;
  let t, i;
  if (e < 2)
    return !1;
  for (i = A[0], t = 1; t < e; ++t)
    if (A[t] - A[t - 1] !== i)
      return !1;
  return i;
}
const dv = (A) => A === "left" ? "right" : A === "right" ? "left" : A, Qh = (A, e, t) => e === "top" || e === "left" ? A[e] + t : A[e] - t, Uh = (A, e) => Math.min(e || A, A);
function _h(A, e) {
  const t = [], i = A.length / e, s = A.length;
  let n = 0;
  for (; n < s; n += i)
    t.push(A[Math.floor(n)]);
  return t;
}
function fv(A, e, t) {
  const i = A.ticks.length, s = Math.min(e, i - 1), n = A._startPixel, r = A._endPixel, o = 1e-6;
  let a = A.getPixelForTick(s), l;
  if (!(t && (i === 1 ? l = Math.max(a - n, r - a) : e === 0 ? l = (A.getPixelForTick(1) - a) / 2 : l = (a - A.getPixelForTick(s - 1)) / 2, a += s < e ? l : -l, a < n - o || a > r + o)))
    return a;
}
function gv(A, e) {
  ve(A, (t) => {
    const i = t.gc, s = i.length / 2;
    let n;
    if (s > e) {
      for (n = 0; n < s; ++n)
        delete t.data[i[n]];
      i.splice(0, s);
    }
  });
}
function fA(A) {
  return A.drawTicks ? A.tickLength : 0;
}
function Hh(A, e) {
  if (!A.display)
    return 0;
  const t = lt(A.font, e), i = Kt(A.padding);
  return ($e(A.text) ? A.text.length : 1) * t.lineHeight + i.height;
}
function pv(A, e) {
  return Bs(A, {
    scale: e,
    type: "scale"
  });
}
function mv(A, e, t) {
  return Bs(A, {
    tick: t,
    index: e,
    type: "tick"
  });
}
function bv(A, e, t) {
  let i = Bl(A);
  return (t && e !== "right" || !t && e === "right") && (i = dv(i)), i;
}
function wv(A, e, t, i) {
  const { top: s, left: n, bottom: r, right: o, chart: a } = A, { chartArea: l, scales: h } = a;
  let c = 0, u, d, f;
  const p = r - s, b = o - n;
  if (A.isHorizontal()) {
    if (d = nt(i, n, o), pe(t)) {
      const w = Object.keys(t)[0], C = t[w];
      f = h[w].getPixelForValue(C) + p - e;
    } else t === "center" ? f = (l.bottom + l.top) / 2 + p - e : f = Qh(A, t, e);
    u = o - n;
  } else {
    if (pe(t)) {
      const w = Object.keys(t)[0], C = t[w];
      d = h[w].getPixelForValue(C) - b + e;
    } else t === "center" ? d = (l.left + l.right) / 2 - b + e : d = Qh(A, t, e);
    f = nt(i, r, s), c = t === "left" ? -Yt : Yt;
  }
  return {
    titleX: d,
    titleY: f,
    maxWidth: u,
    rotation: c
  };
}
class Zs extends vi {
  constructor(e) {
    super(), this.id = e.id, this.type = e.type, this.options = void 0, this.ctx = e.ctx, this.chart = e.chart, this.top = void 0, this.bottom = void 0, this.left = void 0, this.right = void 0, this.width = void 0, this.height = void 0, this._margins = {
      left: 0,
      right: 0,
      top: 0,
      bottom: 0
    }, this.maxWidth = void 0, this.maxHeight = void 0, this.paddingTop = void 0, this.paddingBottom = void 0, this.paddingLeft = void 0, this.paddingRight = void 0, this.axis = void 0, this.labelRotation = void 0, this.min = void 0, this.max = void 0, this._range = void 0, this.ticks = [], this._gridLineItems = null, this._labelItems = null, this._labelSizes = null, this._length = 0, this._maxLength = 0, this._longestTextCache = {}, this._startPixel = void 0, this._endPixel = void 0, this._reversePixels = !1, this._userMax = void 0, this._userMin = void 0, this._suggestedMax = void 0, this._suggestedMin = void 0, this._ticksLength = 0, this._borderValue = 0, this._cache = {}, this._dataLimitsCached = !1, this.$context = void 0;
  }
  init(e) {
    this.options = e.setContext(this.getContext()), this.axis = e.axis, this._userMin = this.parse(e.min), this._userMax = this.parse(e.max), this._suggestedMin = this.parse(e.suggestedMin), this._suggestedMax = this.parse(e.suggestedMax);
  }
  parse(e, t) {
    return e;
  }
  getUserBounds() {
    let { _userMin: e, _userMax: t, _suggestedMin: i, _suggestedMax: s } = this;
    return e = ti(e, Number.POSITIVE_INFINITY), t = ti(t, Number.NEGATIVE_INFINITY), i = ti(i, Number.POSITIVE_INFINITY), s = ti(s, Number.NEGATIVE_INFINITY), {
      min: ti(e, i),
      max: ti(t, s),
      minDefined: Nt(e),
      maxDefined: Nt(t)
    };
  }
  getMinMax(e) {
    let { min: t, max: i, minDefined: s, maxDefined: n } = this.getUserBounds(), r;
    if (s && n)
      return {
        min: t,
        max: i
      };
    const o = this.getMatchingVisibleMetas();
    for (let a = 0, l = o.length; a < l; ++a)
      r = o[a].controller.getMinMax(this, e), s || (t = Math.min(t, r.min)), n || (i = Math.max(i, r.max));
    return t = n && t > i ? i : t, i = s && t > i ? t : i, {
      min: ti(t, ti(i, t)),
      max: ti(i, ti(t, i))
    };
  }
  getPadding() {
    return {
      left: this.paddingLeft || 0,
      top: this.paddingTop || 0,
      right: this.paddingRight || 0,
      bottom: this.paddingBottom || 0
    };
  }
  getTicks() {
    return this.ticks;
  }
  getLabels() {
    const e = this.chart.data;
    return this.options.labels || (this.isHorizontal() ? e.xLabels : e.yLabels) || e.labels || [];
  }
  getLabelItems(e = this.chart.chartArea) {
    return this._labelItems || (this._labelItems = this._computeLabelItems(e));
  }
  beforeLayout() {
    this._cache = {}, this._dataLimitsCached = !1;
  }
  beforeUpdate() {
    Ue(this.options.beforeUpdate, [
      this
    ]);
  }
  update(e, t, i) {
    const { beginAtZero: s, grace: n, ticks: r } = this.options, o = r.sampleSize;
    this.beforeUpdate(), this.maxWidth = e, this.maxHeight = t, this._margins = i = Object.assign({
      left: 0,
      right: 0,
      top: 0,
      bottom: 0
    }, i), this.ticks = null, this._labelSizes = null, this._gridLineItems = null, this._labelItems = null, this.beforeSetDimensions(), this.setDimensions(), this.afterSetDimensions(), this._maxLength = this.isHorizontal() ? this.width + i.left + i.right : this.height + i.top + i.bottom, this._dataLimitsCached || (this.beforeDataLimits(), this.determineDataLimits(), this.afterDataLimits(), this._range = Rb(this, n, s), this._dataLimitsCached = !0), this.beforeBuildTicks(), this.ticks = this.buildTicks() || [], this.afterBuildTicks();
    const a = o < this.ticks.length;
    this._convertTicksToLabels(a ? _h(this.ticks, o) : this.ticks), this.configure(), this.beforeCalculateLabelRotation(), this.calculateLabelRotation(), this.afterCalculateLabelRotation(), r.display && (r.autoSkip || r.source === "auto") && (this.ticks = ov(this, this.ticks), this._labelSizes = null, this.afterAutoSkip()), a && this._convertTicksToLabels(this.ticks), this.beforeFit(), this.fit(), this.afterFit(), this.afterUpdate();
  }
  configure() {
    let e = this.options.reverse, t, i;
    this.isHorizontal() ? (t = this.left, i = this.right) : (t = this.top, i = this.bottom, e = !e), this._startPixel = t, this._endPixel = i, this._reversePixels = e, this._length = i - t, this._alignToPixels = this.options.alignToPixels;
  }
  afterUpdate() {
    Ue(this.options.afterUpdate, [
      this
    ]);
  }
  beforeSetDimensions() {
    Ue(this.options.beforeSetDimensions, [
      this
    ]);
  }
  setDimensions() {
    this.isHorizontal() ? (this.width = this.maxWidth, this.left = 0, this.right = this.width) : (this.height = this.maxHeight, this.top = 0, this.bottom = this.height), this.paddingLeft = 0, this.paddingTop = 0, this.paddingRight = 0, this.paddingBottom = 0;
  }
  afterSetDimensions() {
    Ue(this.options.afterSetDimensions, [
      this
    ]);
  }
  _callHooks(e) {
    this.chart.notifyPlugins(e, this.getContext()), Ue(this.options[e], [
      this
    ]);
  }
  beforeDataLimits() {
    this._callHooks("beforeDataLimits");
  }
  determineDataLimits() {
  }
  afterDataLimits() {
    this._callHooks("afterDataLimits");
  }
  beforeBuildTicks() {
    this._callHooks("beforeBuildTicks");
  }
  buildTicks() {
    return [];
  }
  afterBuildTicks() {
    this._callHooks("afterBuildTicks");
  }
  beforeTickToLabelConversion() {
    Ue(this.options.beforeTickToLabelConversion, [
      this
    ]);
  }
  generateTickLabels(e) {
    const t = this.options.ticks;
    let i, s, n;
    for (i = 0, s = e.length; i < s; i++)
      n = e[i], n.label = Ue(t.callback, [
        n.value,
        i,
        e
      ], this);
  }
  afterTickToLabelConversion() {
    Ue(this.options.afterTickToLabelConversion, [
      this
    ]);
  }
  beforeCalculateLabelRotation() {
    Ue(this.options.beforeCalculateLabelRotation, [
      this
    ]);
  }
  calculateLabelRotation() {
    const e = this.options, t = e.ticks, i = Uh(this.ticks.length, e.ticks.maxTicksLimit), s = t.minRotation || 0, n = t.maxRotation;
    let r = s, o, a, l;
    if (!this._isVisible() || !t.display || s >= n || i <= 1 || !this.isHorizontal()) {
      this.labelRotation = s;
      return;
    }
    const h = this._getLabelSizes(), c = h.widest.width, u = h.highest.height, d = It(this.chart.width - c, 0, this.maxWidth);
    o = e.offset ? this.maxWidth / i : d / (i - 1), c + 6 > o && (o = d / (i - (e.offset ? 0.5 : 1)), a = this.maxHeight - fA(e.grid) - t.padding - Hh(e.title, this.chart.options.font), l = Math.sqrt(c * c + u * u), r = Ab(Math.min(Math.asin(It((h.highest.height + 6) / o, -1, 1)), Math.asin(It(a / l, -1, 1)) - Math.asin(It(u / l, -1, 1)))), r = Math.max(s, Math.min(n, r))), this.labelRotation = r;
  }
  afterCalculateLabelRotation() {
    Ue(this.options.afterCalculateLabelRotation, [
      this
    ]);
  }
  afterAutoSkip() {
  }
  beforeFit() {
    Ue(this.options.beforeFit, [
      this
    ]);
  }
  fit() {
    const e = {
      width: 0,
      height: 0
    }, { chart: t, options: { ticks: i, title: s, grid: n } } = this, r = this._isVisible(), o = this.isHorizontal();
    if (r) {
      const a = Hh(s, t.options.font);
      if (o ? (e.width = this.maxWidth, e.height = fA(n) + a) : (e.height = this.maxHeight, e.width = fA(n) + a), i.display && this.ticks.length) {
        const { first: l, last: h, widest: c, highest: u } = this._getLabelSizes(), d = i.padding * 2, f = ds(this.labelRotation), p = Math.cos(f), b = Math.sin(f);
        if (o) {
          const w = i.mirror ? 0 : b * c.width + p * u.height;
          e.height = Math.min(this.maxHeight, e.height + w + d);
        } else {
          const w = i.mirror ? 0 : p * c.width + b * u.height;
          e.width = Math.min(this.maxWidth, e.width + w + d);
        }
        this._calculatePadding(l, h, b, p);
      }
    }
    this._handleMargins(), o ? (this.width = this._length = t.width - this._margins.left - this._margins.right, this.height = e.height) : (this.width = e.width, this.height = this._length = t.height - this._margins.top - this._margins.bottom);
  }
  _calculatePadding(e, t, i, s) {
    const { ticks: { align: n, padding: r }, position: o } = this.options, a = this.labelRotation !== 0, l = o !== "top" && this.axis === "x";
    if (this.isHorizontal()) {
      const h = this.getPixelForTick(0) - this.left, c = this.right - this.getPixelForTick(this.ticks.length - 1);
      let u = 0, d = 0;
      a ? l ? (u = s * e.width, d = i * t.height) : (u = i * e.height, d = s * t.width) : n === "start" ? d = t.width : n === "end" ? u = e.width : n !== "inner" && (u = e.width / 2, d = t.width / 2), this.paddingLeft = Math.max((u - h + r) * this.width / (this.width - h), 0), this.paddingRight = Math.max((d - c + r) * this.width / (this.width - c), 0);
    } else {
      let h = t.height / 2, c = e.height / 2;
      n === "start" ? (h = 0, c = e.height) : n === "end" && (h = t.height, c = 0), this.paddingTop = h + r, this.paddingBottom = c + r;
    }
  }
  _handleMargins() {
    this._margins && (this._margins.left = Math.max(this.paddingLeft, this._margins.left), this._margins.top = Math.max(this.paddingTop, this._margins.top), this._margins.right = Math.max(this.paddingRight, this._margins.right), this._margins.bottom = Math.max(this.paddingBottom, this._margins.bottom));
  }
  afterFit() {
    Ue(this.options.afterFit, [
      this
    ]);
  }
  isHorizontal() {
    const { axis: e, position: t } = this.options;
    return t === "top" || t === "bottom" || e === "x";
  }
  isFullSize() {
    return this.options.fullSize;
  }
  _convertTicksToLabels(e) {
    this.beforeTickToLabelConversion(), this.generateTickLabels(e);
    let t, i;
    for (t = 0, i = e.length; t < i; t++)
      Qe(e[t].label) && (e.splice(t, 1), i--, t--);
    this.afterTickToLabelConversion();
  }
  _getLabelSizes() {
    let e = this._labelSizes;
    if (!e) {
      const t = this.options.ticks.sampleSize;
      let i = this.ticks;
      t < i.length && (i = _h(i, t)), this._labelSizes = e = this._computeLabelSizes(i, i.length, this.options.ticks.maxTicksLimit);
    }
    return e;
  }
  _computeLabelSizes(e, t, i) {
    const { ctx: s, _longestTextCache: n } = this, r = [], o = [], a = Math.floor(t / Uh(t, i));
    let l = 0, h = 0, c, u, d, f, p, b, w, C, x, U, E;
    for (c = 0; c < t; c += a) {
      if (f = e[c].label, p = this._resolveTickFontOptions(c), s.font = b = p.string, w = n[b] = n[b] || {
        data: {},
        gc: []
      }, C = p.lineHeight, x = U = 0, !Qe(f) && !$e(f))
        x = rh(s, w.data, w.gc, x, f), U = C;
      else if ($e(f))
        for (u = 0, d = f.length; u < d; ++u)
          E = f[u], !Qe(E) && !$e(E) && (x = rh(s, w.data, w.gc, x, E), U += C);
      r.push(x), o.push(U), l = Math.max(x, l), h = Math.max(U, h);
    }
    gv(n, t);
    const H = r.indexOf(l), T = o.indexOf(h), S = (R) => ({
      width: r[R] || 0,
      height: o[R] || 0
    });
    return {
      first: S(0),
      last: S(t - 1),
      widest: S(H),
      highest: S(T),
      widths: r,
      heights: o
    };
  }
  getLabelForValue(e) {
    return e;
  }
  getPixelForValue(e, t) {
    return NaN;
  }
  getValueForPixel(e) {
  }
  getPixelForTick(e) {
    const t = this.ticks;
    return e < 0 || e > t.length - 1 ? null : this.getPixelForValue(t[e].value);
  }
  getPixelForDecimal(e) {
    this._reversePixels && (e = 1 - e);
    const t = this._startPixel + e * this._length;
    return ob(this._alignToPixels ? ss(this.chart, t, 0) : t);
  }
  getDecimalForPixel(e) {
    const t = (e - this._startPixel) / this._length;
    return this._reversePixels ? 1 - t : t;
  }
  getBasePixel() {
    return this.getPixelForValue(this.getBaseValue());
  }
  getBaseValue() {
    const { min: e, max: t } = this;
    return e < 0 && t < 0 ? t : e > 0 && t > 0 ? e : 0;
  }
  getContext(e) {
    const t = this.ticks || [];
    if (e >= 0 && e < t.length) {
      const i = t[e];
      return i.$context || (i.$context = mv(this.getContext(), e, i));
    }
    return this.$context || (this.$context = pv(this.chart.getContext(), this));
  }
  _tickSize() {
    const e = this.options.ticks, t = ds(this.labelRotation), i = Math.abs(Math.cos(t)), s = Math.abs(Math.sin(t)), n = this._getLabelSizes(), r = e.autoSkipPadding || 0, o = n ? n.widest.width + r : 0, a = n ? n.highest.height + r : 0;
    return this.isHorizontal() ? a * i > o * s ? o / i : a / s : a * s < o * i ? a / i : o / s;
  }
  _isVisible() {
    const e = this.options.display;
    return e !== "auto" ? !!e : this.getMatchingVisibleMetas().length > 0;
  }
  _computeGridLineItems(e) {
    const t = this.axis, i = this.chart, s = this.options, { grid: n, position: r, border: o } = s, a = n.offset, l = this.isHorizontal(), c = this.ticks.length + (a ? 1 : 0), u = fA(n), d = [], f = o.setContext(this.getContext()), p = f.display ? f.width : 0, b = p / 2, w = function(le) {
      return ss(i, le, p);
    };
    let C, x, U, E, H, T, S, R, J, X, P, Z;
    if (r === "top")
      C = w(this.bottom), T = this.bottom - u, R = C - b, X = w(e.top) + b, Z = e.bottom;
    else if (r === "bottom")
      C = w(this.top), X = e.top, Z = w(e.bottom) - b, T = C + b, R = this.top + u;
    else if (r === "left")
      C = w(this.right), H = this.right - u, S = C - b, J = w(e.left) + b, P = e.right;
    else if (r === "right")
      C = w(this.left), J = e.left, P = w(e.right) - b, H = C + b, S = this.left + u;
    else if (t === "x") {
      if (r === "center")
        C = w((e.top + e.bottom) / 2 + 0.5);
      else if (pe(r)) {
        const le = Object.keys(r)[0], fe = r[le];
        C = w(this.chart.scales[le].getPixelForValue(fe));
      }
      X = e.top, Z = e.bottom, T = C + b, R = T + u;
    } else if (t === "y") {
      if (r === "center")
        C = w((e.left + e.right) / 2);
      else if (pe(r)) {
        const le = Object.keys(r)[0], fe = r[le];
        C = w(this.chart.scales[le].getPixelForValue(fe));
      }
      H = C - b, S = H - u, J = e.left, P = e.right;
    }
    const ae = de(s.ticks.maxTicksLimit, c), ce = Math.max(1, Math.ceil(c / ae));
    for (x = 0; x < c; x += ce) {
      const le = this.getContext(x), fe = n.setContext(le), be = o.setContext(le), _e = fe.lineWidth, Ke = fe.color, We = be.dash || [], Te = be.dashOffset, Ve = fe.tickWidth, ze = fe.tickColor, ee = fe.tickBorderDash || [], Le = fe.tickBorderDashOffset;
      U = fv(this, x, a), U !== void 0 && (E = ss(i, U, _e), l ? H = S = J = P = E : T = R = X = Z = E, d.push({
        tx1: H,
        ty1: T,
        tx2: S,
        ty2: R,
        x1: J,
        y1: X,
        x2: P,
        y2: Z,
        width: _e,
        color: Ke,
        borderDash: We,
        borderDashOffset: Te,
        tickWidth: Ve,
        tickColor: ze,
        tickBorderDash: ee,
        tickBorderDashOffset: Le
      }));
    }
    return this._ticksLength = c, this._borderValue = C, d;
  }
  _computeLabelItems(e) {
    const t = this.axis, i = this.options, { position: s, ticks: n } = i, r = this.isHorizontal(), o = this.ticks, { align: a, crossAlign: l, padding: h, mirror: c } = n, u = fA(i.grid), d = u + h, f = c ? -h : d, p = -ds(this.labelRotation), b = [];
    let w, C, x, U, E, H, T, S, R, J, X, P, Z = "middle";
    if (s === "top")
      H = this.bottom - f, T = this._getXAxisLabelAlignment();
    else if (s === "bottom")
      H = this.top + f, T = this._getXAxisLabelAlignment();
    else if (s === "left") {
      const ce = this._getYAxisLabelAlignment(u);
      T = ce.textAlign, E = ce.x;
    } else if (s === "right") {
      const ce = this._getYAxisLabelAlignment(u);
      T = ce.textAlign, E = ce.x;
    } else if (t === "x") {
      if (s === "center")
        H = (e.top + e.bottom) / 2 + d;
      else if (pe(s)) {
        const ce = Object.keys(s)[0], le = s[ce];
        H = this.chart.scales[ce].getPixelForValue(le) + d;
      }
      T = this._getXAxisLabelAlignment();
    } else if (t === "y") {
      if (s === "center")
        E = (e.left + e.right) / 2 - d;
      else if (pe(s)) {
        const ce = Object.keys(s)[0], le = s[ce];
        E = this.chart.scales[ce].getPixelForValue(le);
      }
      T = this._getYAxisLabelAlignment(u).textAlign;
    }
    t === "y" && (a === "start" ? Z = "top" : a === "end" && (Z = "bottom"));
    const ae = this._getLabelSizes();
    for (w = 0, C = o.length; w < C; ++w) {
      x = o[w], U = x.label;
      const ce = n.setContext(this.getContext(w));
      S = this.getPixelForTick(w) + n.labelOffset, R = this._resolveTickFontOptions(w), J = R.lineHeight, X = $e(U) ? U.length : 1;
      const le = X / 2, fe = ce.color, be = ce.textStrokeColor, _e = ce.textStrokeWidth;
      let Ke = T;
      r ? (E = S, T === "inner" && (w === C - 1 ? Ke = this.options.reverse ? "left" : "right" : w === 0 ? Ke = this.options.reverse ? "right" : "left" : Ke = "center"), s === "top" ? l === "near" || p !== 0 ? P = -X * J + J / 2 : l === "center" ? P = -ae.highest.height / 2 - le * J + J : P = -ae.highest.height + J / 2 : l === "near" || p !== 0 ? P = J / 2 : l === "center" ? P = ae.highest.height / 2 - le * J : P = ae.highest.height - X * J, c && (P *= -1), p !== 0 && !ce.showLabelBackdrop && (E += J / 2 * Math.sin(p))) : (H = S, P = (1 - X) * J / 2);
      let We;
      if (ce.showLabelBackdrop) {
        const Te = Kt(ce.backdropPadding), Ve = ae.heights[w], ze = ae.widths[w];
        let ee = P - Te.top, Le = 0 - Te.left;
        switch (Z) {
          case "middle":
            ee -= Ve / 2;
            break;
          case "bottom":
            ee -= Ve;
            break;
        }
        switch (T) {
          case "center":
            Le -= ze / 2;
            break;
          case "right":
            Le -= ze;
            break;
          case "inner":
            w === C - 1 ? Le -= ze : w > 0 && (Le -= ze / 2);
            break;
        }
        We = {
          left: Le,
          top: ee,
          width: ze + Te.width,
          height: Ve + Te.height,
          color: ce.backdropColor
        };
      }
      b.push({
        label: U,
        font: R,
        textOffset: P,
        options: {
          rotation: p,
          color: fe,
          strokeColor: be,
          strokeWidth: _e,
          textAlign: Ke,
          textBaseline: Z,
          translation: [
            E,
            H
          ],
          backdrop: We
        }
      });
    }
    return b;
  }
  _getXAxisLabelAlignment() {
    const { position: e, ticks: t } = this.options;
    if (-ds(this.labelRotation))
      return e === "top" ? "left" : "right";
    let s = "center";
    return t.align === "start" ? s = "left" : t.align === "end" ? s = "right" : t.align === "inner" && (s = "inner"), s;
  }
  _getYAxisLabelAlignment(e) {
    const { position: t, ticks: { crossAlign: i, mirror: s, padding: n } } = this.options, r = this._getLabelSizes(), o = e + n, a = r.widest.width;
    let l, h;
    return t === "left" ? s ? (h = this.right + n, i === "near" ? l = "left" : i === "center" ? (l = "center", h += a / 2) : (l = "right", h += a)) : (h = this.right - o, i === "near" ? l = "right" : i === "center" ? (l = "center", h -= a / 2) : (l = "left", h = this.left)) : t === "right" ? s ? (h = this.left + n, i === "near" ? l = "right" : i === "center" ? (l = "center", h -= a / 2) : (l = "left", h -= a)) : (h = this.left + o, i === "near" ? l = "left" : i === "center" ? (l = "center", h += a / 2) : (l = "right", h = this.right)) : l = "right", {
      textAlign: l,
      x: h
    };
  }
  _computeLabelArea() {
    if (this.options.ticks.mirror)
      return;
    const e = this.chart, t = this.options.position;
    if (t === "left" || t === "right")
      return {
        top: 0,
        left: this.left,
        bottom: e.height,
        right: this.right
      };
    if (t === "top" || t === "bottom")
      return {
        top: this.top,
        left: 0,
        bottom: this.bottom,
        right: e.width
      };
  }
  drawBackground() {
    const { ctx: e, options: { backgroundColor: t }, left: i, top: s, width: n, height: r } = this;
    t && (e.save(), e.fillStyle = t, e.fillRect(i, s, n, r), e.restore());
  }
  getLineWidthForValue(e) {
    const t = this.options.grid;
    if (!this._isVisible() || !t.display)
      return 0;
    const s = this.ticks.findIndex((n) => n.value === e);
    return s >= 0 ? t.setContext(this.getContext(s)).lineWidth : 0;
  }
  drawGrid(e) {
    const t = this.options.grid, i = this.ctx, s = this._gridLineItems || (this._gridLineItems = this._computeGridLineItems(e));
    let n, r;
    const o = (a, l, h) => {
      !h.width || !h.color || (i.save(), i.lineWidth = h.width, i.strokeStyle = h.color, i.setLineDash(h.borderDash || []), i.lineDashOffset = h.borderDashOffset, i.beginPath(), i.moveTo(a.x, a.y), i.lineTo(l.x, l.y), i.stroke(), i.restore());
    };
    if (t.display)
      for (n = 0, r = s.length; n < r; ++n) {
        const a = s[n];
        t.drawOnChartArea && o({
          x: a.x1,
          y: a.y1
        }, {
          x: a.x2,
          y: a.y2
        }, a), t.drawTicks && o({
          x: a.tx1,
          y: a.ty1
        }, {
          x: a.tx2,
          y: a.ty2
        }, {
          color: a.tickColor,
          width: a.tickWidth,
          borderDash: a.tickBorderDash,
          borderDashOffset: a.tickBorderDashOffset
        });
      }
  }
  drawBorder() {
    const { chart: e, ctx: t, options: { border: i, grid: s } } = this, n = i.setContext(this.getContext()), r = i.display ? n.width : 0;
    if (!r)
      return;
    const o = s.setContext(this.getContext(0)).lineWidth, a = this._borderValue;
    let l, h, c, u;
    this.isHorizontal() ? (l = ss(e, this.left, r) - r / 2, h = ss(e, this.right, o) + o / 2, c = u = a) : (c = ss(e, this.top, r) - r / 2, u = ss(e, this.bottom, o) + o / 2, l = h = a), t.save(), t.lineWidth = n.width, t.strokeStyle = n.color, t.beginPath(), t.moveTo(l, c), t.lineTo(h, u), t.stroke(), t.restore();
  }
  drawLabels(e) {
    if (!this.options.ticks.display)
      return;
    const i = this.ctx, s = this._computeLabelArea();
    s && yl(i, s);
    const n = this.getLabelItems(e);
    for (const r of n) {
      const o = r.options, a = r.font, l = r.label, h = r.textOffset;
      qA(i, l, 0, h, a, o);
    }
    s && El(i);
  }
  drawTitle() {
    const { ctx: e, options: { position: t, title: i, reverse: s } } = this;
    if (!i.display)
      return;
    const n = lt(i.font), r = Kt(i.padding), o = i.align;
    let a = n.lineHeight / 2;
    t === "bottom" || t === "center" || pe(t) ? (a += r.bottom, $e(i.text) && (a += n.lineHeight * (i.text.length - 1))) : a += r.top;
    const { titleX: l, titleY: h, maxWidth: c, rotation: u } = wv(this, a, t, o);
    qA(e, i.text, 0, 0, n, {
      color: i.color,
      maxWidth: c,
      rotation: u,
      textAlign: bv(o, t, s),
      textBaseline: "middle",
      translation: [
        l,
        h
      ]
    });
  }
  draw(e) {
    this._isVisible() && (this.drawBackground(), this.drawGrid(e), this.drawBorder(), this.drawTitle(), this.drawLabels(e));
  }
  _layers() {
    const e = this.options, t = e.ticks && e.ticks.z || 0, i = de(e.grid && e.grid.z, -1), s = de(e.border && e.border.z, 0);
    return !this._isVisible() || this.draw !== Zs.prototype.draw ? [
      {
        z: t,
        draw: (n) => {
          this.draw(n);
        }
      }
    ] : [
      {
        z: i,
        draw: (n) => {
          this.drawBackground(), this.drawGrid(n), this.drawTitle();
        }
      },
      {
        z: s,
        draw: () => {
          this.drawBorder();
        }
      },
      {
        z: t,
        draw: (n) => {
          this.drawLabels(n);
        }
      }
    ];
  }
  getMatchingVisibleMetas(e) {
    const t = this.chart.getSortedVisibleDatasetMetas(), i = this.axis + "AxisID", s = [];
    let n, r;
    for (n = 0, r = t.length; n < r; ++n) {
      const o = t[n];
      o[i] === this.id && (!e || o.type === e) && s.push(o);
    }
    return s;
  }
  _resolveTickFontOptions(e) {
    const t = this.options.ticks.setContext(this.getContext(e));
    return lt(t.font);
  }
  _maxDigits() {
    const e = this._resolveTickFontOptions(0).lineHeight;
    return (this.isHorizontal() ? this.width : this.height) / e;
  }
}
class Tn {
  constructor(e, t, i) {
    this.type = e, this.scope = t, this.override = i, this.items = /* @__PURE__ */ Object.create(null);
  }
  isForType(e) {
    return Object.prototype.isPrototypeOf.call(this.type.prototype, e.prototype);
  }
  register(e) {
    const t = Object.getPrototypeOf(e);
    let i;
    Cv(t) && (i = this.register(t));
    const s = this.items, n = e.id, r = this.scope + "." + n;
    if (!n)
      throw new Error("class does not have id: " + e);
    return n in s || (s[n] = e, vv(e, r, i), this.override && ke.override(e.id, e.overrides)), r;
  }
  get(e) {
    return this.items[e];
  }
  unregister(e) {
    const t = this.items, i = e.id, s = this.scope;
    i in t && delete t[i], s && i in ke[s] && (delete ke[s][i], this.override && delete vs[i]);
  }
}
function vv(A, e, t) {
  const i = JA(/* @__PURE__ */ Object.create(null), [
    t ? ke.get(t) : {},
    ke.get(e),
    A.defaults
  ]);
  ke.set(e, i), A.defaultRoutes && Bv(e, A.defaultRoutes), A.descriptors && ke.describe(e, A.descriptors);
}
function Bv(A, e) {
  Object.keys(e).forEach((t) => {
    const i = t.split("."), s = i.pop(), n = [
      A
    ].concat(i).join("."), r = e[t].split("."), o = r.pop(), a = r.join(".");
    ke.route(n, s, a, o);
  });
}
function Cv(A) {
  return "id" in A && "defaults" in A;
}
class yv {
  constructor() {
    this.controllers = new Tn(IA, "datasets", !0), this.elements = new Tn(vi, "elements"), this.plugins = new Tn(Object, "plugins"), this.scales = new Tn(Zs, "scales"), this._typedRegistries = [
      this.controllers,
      this.scales,
      this.elements
    ];
  }
  add(...e) {
    this._each("register", e);
  }
  remove(...e) {
    this._each("unregister", e);
  }
  addControllers(...e) {
    this._each("register", e, this.controllers);
  }
  addElements(...e) {
    this._each("register", e, this.elements);
  }
  addPlugins(...e) {
    this._each("register", e, this.plugins);
  }
  addScales(...e) {
    this._each("register", e, this.scales);
  }
  getController(e) {
    return this._get(e, this.controllers, "controller");
  }
  getElement(e) {
    return this._get(e, this.elements, "element");
  }
  getPlugin(e) {
    return this._get(e, this.plugins, "plugin");
  }
  getScale(e) {
    return this._get(e, this.scales, "scale");
  }
  removeControllers(...e) {
    this._each("unregister", e, this.controllers);
  }
  removeElements(...e) {
    this._each("unregister", e, this.elements);
  }
  removePlugins(...e) {
    this._each("unregister", e, this.plugins);
  }
  removeScales(...e) {
    this._each("unregister", e, this.scales);
  }
  _each(e, t, i) {
    [
      ...t
    ].forEach((s) => {
      const n = i || this._getRegistryForType(s);
      i || n.isForType(s) || n === this.plugins && s.id ? this._exec(e, n, s) : ve(s, (r) => {
        const o = i || this._getRegistryForType(r);
        this._exec(e, o, r);
      });
    });
  }
  _exec(e, t, i) {
    const s = wl(e);
    Ue(i["before" + s], [], i), t[e](i), Ue(i["after" + s], [], i);
  }
  _getRegistryForType(e) {
    for (let t = 0; t < this._typedRegistries.length; t++) {
      const i = this._typedRegistries[t];
      if (i.isForType(e))
        return i;
    }
    return this.plugins;
  }
  _get(e, t, i) {
    const s = t.get(e);
    if (s === void 0)
      throw new Error('"' + e + '" is not a registered ' + i + ".");
    return s;
  }
}
var Ai = /* @__PURE__ */ new yv();
class Ev {
  constructor() {
    this._init = void 0;
  }
  notify(e, t, i, s) {
    if (t === "beforeInit" && (this._init = this._createDescriptors(e, !0), this._notify(this._init, e, "install")), this._init === void 0)
      return;
    const n = s ? this._descriptors(e).filter(s) : this._descriptors(e), r = this._notify(n, e, t, i);
    return t === "afterDestroy" && (this._notify(n, e, "stop"), this._notify(this._init, e, "uninstall"), this._init = void 0), r;
  }
  _notify(e, t, i, s) {
    s = s || {};
    for (const n of e) {
      const r = n.plugin, o = r[i], a = [
        t,
        s,
        n.options
      ];
      if (Ue(o, a, r) === !1 && s.cancelable)
        return !1;
    }
    return !0;
  }
  invalidate() {
    Qe(this._cache) || (this._oldCache = this._cache, this._cache = void 0);
  }
  _descriptors(e) {
    if (this._cache)
      return this._cache;
    const t = this._cache = this._createDescriptors(e);
    return this._notifyStateChanges(e), t;
  }
  _createDescriptors(e, t) {
    const i = e && e.config, s = de(i.options && i.options.plugins, {}), n = Fv(i);
    return s === !1 && !t ? [] : Qv(e, n, s, t);
  }
  _notifyStateChanges(e) {
    const t = this._oldCache || [], i = this._cache, s = (n, r) => n.filter((o) => !r.some((a) => o.plugin.id === a.plugin.id));
    this._notify(s(t, i), e, "stop"), this._notify(s(i, t), e, "start");
  }
}
function Fv(A) {
  const e = {}, t = [], i = Object.keys(Ai.plugins.items);
  for (let n = 0; n < i.length; n++)
    t.push(Ai.getPlugin(i[n]));
  const s = A.plugins || [];
  for (let n = 0; n < s.length; n++) {
    const r = s[n];
    t.indexOf(r) === -1 && (t.push(r), e[r.id] = !0);
  }
  return {
    plugins: t,
    localIds: e
  };
}
function xv(A, e) {
  return !e && A === !1 ? null : A === !0 ? {} : A;
}
function Qv(A, { plugins: e, localIds: t }, i, s) {
  const n = [], r = A.getContext();
  for (const o of e) {
    const a = o.id, l = xv(i[a], s);
    l !== null && n.push({
      plugin: o,
      options: Uv(A.config, {
        plugin: o,
        local: t[a]
      }, l, r)
    });
  }
  return n;
}
function Uv(A, { plugin: e, local: t }, i, s) {
  const n = A.pluginScopeKeys(e), r = A.getOptionScopes(i, n);
  return t && e.defaults && r.push(e.defaults), A.createResolver(r, s, [
    ""
  ], {
    scriptable: !1,
    indexable: !1,
    allKeys: !0
  });
}
function ka(A, e) {
  const t = ke.datasets[A] || {};
  return ((e.datasets || {})[A] || {}).indexAxis || e.indexAxis || t.indexAxis || "x";
}
function _v(A, e) {
  let t = A;
  return A === "_index_" ? t = e : A === "_value_" && (t = e === "x" ? "y" : "x"), t;
}
function Hv(A, e) {
  return A === e ? "_index_" : "_value_";
}
function Mh(A) {
  if (A === "x" || A === "y" || A === "r")
    return A;
}
function Mv(A) {
  if (A === "top" || A === "bottom")
    return "x";
  if (A === "left" || A === "right")
    return "y";
}
function Oa(A, ...e) {
  if (Mh(A))
    return A;
  for (const t of e) {
    const i = t.axis || Mv(t.position) || A.length > 1 && Mh(A[0].toLowerCase());
    if (i)
      return i;
  }
  throw new Error(`Cannot determine type of '${A}' axis. Please provide 'axis' or 'position' option.`);
}
function Dh(A, e, t) {
  if (t[e + "AxisID"] === A)
    return {
      axis: e
    };
}
function Dv(A, e) {
  if (e.data && e.data.datasets) {
    const t = e.data.datasets.filter((i) => i.xAxisID === A || i.yAxisID === A);
    if (t.length)
      return Dh(A, "x", t[0]) || Dh(A, "y", t[0]);
  }
  return {};
}
function Sv(A, e) {
  const t = vs[A.type] || {
    scales: {}
  }, i = e.scales || {}, s = ka(A.type, e), n = /* @__PURE__ */ Object.create(null);
  return Object.keys(i).forEach((r) => {
    const o = i[r];
    if (!pe(o))
      return console.error(`Invalid scale configuration for scale: ${r}`);
    if (o._proxy)
      return console.warn(`Ignoring resolver passed as options for scale: ${r}`);
    const a = Oa(r, o, Dv(r, A), ke.scales[o.type]), l = Hv(a, s), h = t.scales || {};
    n[r] = DA(/* @__PURE__ */ Object.create(null), [
      {
        axis: a
      },
      o,
      h[a],
      h[l]
    ]);
  }), A.data.datasets.forEach((r) => {
    const o = r.type || A.type, a = r.indexAxis || ka(o, e), h = (vs[o] || {}).scales || {};
    Object.keys(h).forEach((c) => {
      const u = _v(c, a), d = r[u + "AxisID"] || u;
      n[d] = n[d] || /* @__PURE__ */ Object.create(null), DA(n[d], [
        {
          axis: u
        },
        i[d],
        h[c]
      ]);
    });
  }), Object.keys(n).forEach((r) => {
    const o = n[r];
    DA(o, [
      ke.scales[o.type],
      ke.scale
    ]);
  }), n;
}
function ad(A) {
  const e = A.options || (A.options = {});
  e.plugins = de(e.plugins, {}), e.scales = Sv(A, e);
}
function ld(A) {
  return A = A || {}, A.datasets = A.datasets || [], A.labels = A.labels || [], A;
}
function Tv(A) {
  return A = A || {}, A.data = ld(A.data), ad(A), A;
}
const Sh = /* @__PURE__ */ new Map(), hd = /* @__PURE__ */ new Set();
function Ln(A, e) {
  let t = Sh.get(A);
  return t || (t = e(), Sh.set(A, t), hd.add(t)), t;
}
const gA = (A, e, t) => {
  const i = Br(e, t);
  i !== void 0 && A.add(i);
};
class Lv {
  constructor(e) {
    this._config = Tv(e), this._scopeCache = /* @__PURE__ */ new Map(), this._resolverCache = /* @__PURE__ */ new Map();
  }
  get platform() {
    return this._config.platform;
  }
  get type() {
    return this._config.type;
  }
  set type(e) {
    this._config.type = e;
  }
  get data() {
    return this._config.data;
  }
  set data(e) {
    this._config.data = ld(e);
  }
  get options() {
    return this._config.options;
  }
  set options(e) {
    this._config.options = e;
  }
  get plugins() {
    return this._config.plugins;
  }
  update() {
    const e = this._config;
    this.clearCache(), ad(e);
  }
  clearCache() {
    this._scopeCache.clear(), this._resolverCache.clear();
  }
  datasetScopeKeys(e) {
    return Ln(e, () => [
      [
        `datasets.${e}`,
        ""
      ]
    ]);
  }
  datasetAnimationScopeKeys(e, t) {
    return Ln(`${e}.transition.${t}`, () => [
      [
        `datasets.${e}.transitions.${t}`,
        `transitions.${t}`
      ],
      [
        `datasets.${e}`,
        ""
      ]
    ]);
  }
  datasetElementScopeKeys(e, t) {
    return Ln(`${e}-${t}`, () => [
      [
        `datasets.${e}.elements.${t}`,
        `datasets.${e}`,
        `elements.${t}`,
        ""
      ]
    ]);
  }
  pluginScopeKeys(e) {
    const t = e.id, i = this.type;
    return Ln(`${i}-plugin-${t}`, () => [
      [
        `plugins.${t}`,
        ...e.additionalOptionScopes || []
      ]
    ]);
  }
  _cachedScopes(e, t) {
    const i = this._scopeCache;
    let s = i.get(e);
    return (!s || t) && (s = /* @__PURE__ */ new Map(), i.set(e, s)), s;
  }
  getOptionScopes(e, t, i) {
    const { options: s, type: n } = this, r = this._cachedScopes(e, i), o = r.get(t);
    if (o)
      return o;
    const a = /* @__PURE__ */ new Set();
    t.forEach((h) => {
      e && (a.add(e), h.forEach((c) => gA(a, e, c))), h.forEach((c) => gA(a, s, c)), h.forEach((c) => gA(a, vs[n] || {}, c)), h.forEach((c) => gA(a, ke, c)), h.forEach((c) => gA(a, La, c));
    });
    const l = Array.from(a);
    return l.length === 0 && l.push(/* @__PURE__ */ Object.create(null)), hd.has(t) && r.set(t, l), l;
  }
  chartOptionScopes() {
    const { options: e, type: t } = this;
    return [
      e,
      vs[t] || {},
      ke.datasets[t] || {},
      {
        type: t
      },
      ke,
      La
    ];
  }
  resolveNamedOptions(e, t, i, s = [
    ""
  ]) {
    const n = {
      $shared: !0
    }, { resolver: r, subPrefixes: o } = Th(this._resolverCache, e, s);
    let a = r;
    if (Iv(r, t)) {
      n.$shared = !1, i = ji(i) ? i() : i;
      const l = this.createResolver(e, i, o);
      a = Ys(r, i, l);
    }
    for (const l of t)
      n[l] = a[l];
    return n;
  }
  createResolver(e, t, i = [
    ""
  ], s) {
    const { resolver: n } = Th(this._resolverCache, e, i);
    return pe(t) ? Ys(n, t, void 0, s) : n;
  }
}
function Th(A, e, t) {
  let i = A.get(e);
  i || (i = /* @__PURE__ */ new Map(), A.set(e, i));
  const s = t.join();
  let n = i.get(s);
  return n || (n = {
    resolver: Fl(e, t),
    subPrefixes: t.filter((o) => !o.toLowerCase().includes("hover"))
  }, i.set(s, n)), n;
}
const Rv = (A) => pe(A) && Object.getOwnPropertyNames(A).some((e) => ji(A[e]));
function Iv(A, e) {
  const { isScriptable: t, isIndexable: i } = ju(A);
  for (const s of e) {
    const n = t(s), r = i(s), o = (r || n) && A[s];
    if (n && (ji(o) || Rv(o)) || r && $e(o))
      return !0;
  }
  return !1;
}
var kv = "4.5.1";
const Ov = [
  "top",
  "bottom",
  "left",
  "right",
  "chartArea"
];
function Lh(A, e) {
  return A === "top" || A === "bottom" || Ov.indexOf(A) === -1 && e === "x";
}
function Rh(A, e) {
  return function(t, i) {
    return t[A] === i[A] ? t[e] - i[e] : t[A] - i[A];
  };
}
function Ih(A) {
  const e = A.chart, t = e.options.animation;
  e.notifyPlugins("afterRender"), Ue(t && t.onComplete, [
    A
  ], e);
}
function Pv(A) {
  const e = A.chart, t = e.options.animation;
  Ue(t && t.onProgress, [
    A
  ], e);
}
function cd(A) {
  return Ul() && typeof A == "string" ? A = document.getElementById(A) : A && A.length && (A = A[0]), A && A.canvas && (A = A.canvas), A;
}
const dr = {}, kh = (A) => {
  const e = cd(A);
  return Object.values(dr).filter((t) => t.canvas === e).pop();
};
function Nv(A, e, t) {
  const i = Object.keys(A);
  for (const s of i) {
    const n = +s;
    if (n >= e) {
      const r = A[s];
      delete A[s], (t > 0 || n > e) && (A[n + t] = r);
    }
  }
}
function Kv(A, e, t, i) {
  return !t || A.type === "mouseout" ? null : i ? e : A;
}
var Qi;
let zr = (Qi = class {
  static register(...e) {
    Ai.add(...e), Oh();
  }
  static unregister(...e) {
    Ai.remove(...e), Oh();
  }
  constructor(e, t) {
    const i = this.config = new Lv(t), s = cd(e), n = kh(s);
    if (n)
      throw new Error("Canvas is already in use. Chart with ID '" + n.id + "' must be destroyed before the canvas with ID '" + n.canvas.id + "' can be reused.");
    const r = i.createResolver(i.chartOptionScopes(), this.getContext());
    this.platform = new (i.platform || rv(s))(), this.platform.updateConfig(i);
    const o = this.platform.acquireContext(s, r.aspectRatio), a = o && o.canvas, l = a && a.height, h = a && a.width;
    if (this.id = Gm(), this.ctx = o, this.canvas = a, this.width = h, this.height = l, this._options = r, this._aspectRatio = this.aspectRatio, this._layers = [], this._metasets = [], this._stacks = void 0, this.boxes = [], this.currentDevicePixelRatio = void 0, this.chartArea = void 0, this._active = [], this._lastEvent = void 0, this._listeners = {}, this._responsiveListeners = void 0, this._sortedMetasets = [], this.scales = {}, this._plugins = new Ev(), this.$proxies = {}, this._hiddenIndices = {}, this.attached = !1, this._animationsDisabled = void 0, this.$context = void 0, this._doResize = ub((c) => this.update(c), r.resizeDelay || 0), this._dataChanges = [], dr[this.id] = this, !o || !a) {
      console.error("Failed to create chart: can't acquire context from the given item");
      return;
    }
    fi.listen(this, "complete", Ih), fi.listen(this, "progress", Pv), this._initialize(), this.attached && this.update();
  }
  get aspectRatio() {
    const { options: { aspectRatio: e, maintainAspectRatio: t }, width: i, height: s, _aspectRatio: n } = this;
    return Qe(e) ? t && n ? n : s ? i / s : null : e;
  }
  get data() {
    return this.config.data;
  }
  set data(e) {
    this.config.data = e;
  }
  get options() {
    return this._options;
  }
  set options(e) {
    this.config.options = e;
  }
  get registry() {
    return Ai;
  }
  _initialize() {
    return this.notifyPlugins("beforeInit"), this.options.responsive ? this.resize() : hh(this, this.options.devicePixelRatio), this.bindEvents(), this.notifyPlugins("afterInit"), this;
  }
  clear() {
    return oh(this.canvas, this.ctx), this;
  }
  stop() {
    return fi.stop(this), this;
  }
  resize(e, t) {
    fi.running(this) ? this._resizeBeforeDraw = {
      width: e,
      height: t
    } : this._resize(e, t);
  }
  _resize(e, t) {
    const i = this.options, s = this.canvas, n = i.maintainAspectRatio && this.aspectRatio, r = this.platform.getMaximumSize(s, e, t, n), o = i.devicePixelRatio || this.platform.getDevicePixelRatio(), a = this.width ? "resize" : "attach";
    this.width = r.width, this.height = r.height, this._aspectRatio = this.aspectRatio, hh(this, o, !0) && (this.notifyPlugins("resize", {
      size: r
    }), Ue(i.onResize, [
      this,
      r
    ], this), this.attached && this._doResize(a) && this.render());
  }
  ensureScalesHaveIDs() {
    const t = this.options.scales || {};
    ve(t, (i, s) => {
      i.id = s;
    });
  }
  buildOrUpdateScales() {
    const e = this.options, t = e.scales, i = this.scales, s = Object.keys(i).reduce((r, o) => (r[o] = !1, r), {});
    let n = [];
    t && (n = n.concat(Object.keys(t).map((r) => {
      const o = t[r], a = Oa(r, o), l = a === "r", h = a === "x";
      return {
        options: o,
        dposition: l ? "chartArea" : h ? "bottom" : "left",
        dtype: l ? "radialLinear" : h ? "category" : "linear"
      };
    }))), ve(n, (r) => {
      const o = r.options, a = o.id, l = Oa(a, o), h = de(o.type, r.dtype);
      (o.position === void 0 || Lh(o.position, l) !== Lh(r.dposition)) && (o.position = r.dposition), s[a] = !0;
      let c = null;
      if (a in i && i[a].type === h)
        c = i[a];
      else {
        const u = Ai.getScale(h);
        c = new u({
          id: a,
          type: h,
          ctx: this.ctx,
          chart: this
        }), i[c.id] = c;
      }
      c.init(o, e);
    }), ve(s, (r, o) => {
      r || delete i[o];
    }), ve(i, (r) => {
      kt.configure(this, r, r.options), kt.addBox(this, r);
    });
  }
  _updateMetasets() {
    const e = this._metasets, t = this.data.datasets.length, i = e.length;
    if (e.sort((s, n) => s.index - n.index), i > t) {
      for (let s = t; s < i; ++s)
        this._destroyDatasetMeta(s);
      e.splice(t, i - t);
    }
    this._sortedMetasets = e.slice(0).sort(Rh("order", "index"));
  }
  _removeUnreferencedMetasets() {
    const { _metasets: e, data: { datasets: t } } = this;
    e.length > t.length && delete this._stacks, e.forEach((i, s) => {
      t.filter((n) => n === i._dataset).length === 0 && this._destroyDatasetMeta(s);
    });
  }
  buildOrUpdateControllers() {
    const e = [], t = this.data.datasets;
    let i, s;
    for (this._removeUnreferencedMetasets(), i = 0, s = t.length; i < s; i++) {
      const n = t[i];
      let r = this.getDatasetMeta(i);
      const o = n.type || this.config.type;
      if (r.type && r.type !== o && (this._destroyDatasetMeta(i), r = this.getDatasetMeta(i)), r.type = o, r.indexAxis = n.indexAxis || ka(o, this.options), r.order = n.order || 0, r.index = i, r.label = "" + n.label, r.visible = this.isDatasetVisible(i), r.controller)
        r.controller.updateIndex(i), r.controller.linkScales();
      else {
        const a = Ai.getController(o), { datasetElementType: l, dataElementType: h } = ke.datasets[o];
        Object.assign(a, {
          dataElementType: Ai.getElement(h),
          datasetElementType: l && Ai.getElement(l)
        }), r.controller = new a(this, i), e.push(r.controller);
      }
    }
    return this._updateMetasets(), e;
  }
  _resetElements() {
    ve(this.data.datasets, (e, t) => {
      this.getDatasetMeta(t).controller.reset();
    }, this);
  }
  reset() {
    this._resetElements(), this.notifyPlugins("reset");
  }
  update(e) {
    const t = this.config;
    t.update();
    const i = this._options = t.createResolver(t.chartOptionScopes(), this.getContext()), s = this._animationsDisabled = !i.animation;
    if (this._updateScales(), this._checkEventBindings(), this._updateHiddenIndices(), this._plugins.invalidate(), this.notifyPlugins("beforeUpdate", {
      mode: e,
      cancelable: !0
    }) === !1)
      return;
    const n = this.buildOrUpdateControllers();
    this.notifyPlugins("beforeElementsUpdate");
    let r = 0;
    for (let l = 0, h = this.data.datasets.length; l < h; l++) {
      const { controller: c } = this.getDatasetMeta(l), u = !s && n.indexOf(c) === -1;
      c.buildOrUpdateElements(u), r = Math.max(+c.getMaxOverflow(), r);
    }
    r = this._minPadding = i.layout.autoPadding ? r : 0, this._updateLayout(r), s || ve(n, (l) => {
      l.reset();
    }), this._updateDatasets(e), this.notifyPlugins("afterUpdate", {
      mode: e
    }), this._layers.sort(Rh("z", "_idx"));
    const { _active: o, _lastEvent: a } = this;
    a ? this._eventHandler(a, !0) : o.length && this._updateHoverStyles(o, o, !0), this.render();
  }
  _updateScales() {
    ve(this.scales, (e) => {
      kt.removeBox(this, e);
    }), this.ensureScalesHaveIDs(), this.buildOrUpdateScales();
  }
  _checkEventBindings() {
    const e = this.options, t = new Set(Object.keys(this._listeners)), i = new Set(e.events);
    (!$l(t, i) || !!this._responsiveListeners !== e.responsive) && (this.unbindEvents(), this.bindEvents());
  }
  _updateHiddenIndices() {
    const { _hiddenIndices: e } = this, t = this._getUniformDataChanges() || [];
    for (const { method: i, start: s, count: n } of t) {
      const r = i === "_removeElements" ? -n : n;
      Nv(e, s, r);
    }
  }
  _getUniformDataChanges() {
    const e = this._dataChanges;
    if (!e || !e.length)
      return;
    this._dataChanges = [];
    const t = this.data.datasets.length, i = (n) => new Set(e.filter((r) => r[0] === n).map((r, o) => o + "," + r.splice(1).join(","))), s = i(0);
    for (let n = 1; n < t; n++)
      if (!$l(s, i(n)))
        return;
    return Array.from(s).map((n) => n.split(",")).map((n) => ({
      method: n[1],
      start: +n[2],
      count: +n[3]
    }));
  }
  _updateLayout(e) {
    if (this.notifyPlugins("beforeLayout", {
      cancelable: !0
    }) === !1)
      return;
    kt.update(this, this.width, this.height, e);
    const t = this.chartArea, i = t.width <= 0 || t.height <= 0;
    this._layers = [], ve(this.boxes, (s) => {
      i && s.position === "chartArea" || (s.configure && s.configure(), this._layers.push(...s._layers()));
    }, this), this._layers.forEach((s, n) => {
      s._idx = n;
    }), this.notifyPlugins("afterLayout");
  }
  _updateDatasets(e) {
    if (this.notifyPlugins("beforeDatasetsUpdate", {
      mode: e,
      cancelable: !0
    }) !== !1) {
      for (let t = 0, i = this.data.datasets.length; t < i; ++t)
        this.getDatasetMeta(t).controller.configure();
      for (let t = 0, i = this.data.datasets.length; t < i; ++t)
        this._updateDataset(t, ji(e) ? e({
          datasetIndex: t
        }) : e);
      this.notifyPlugins("afterDatasetsUpdate", {
        mode: e
      });
    }
  }
  _updateDataset(e, t) {
    const i = this.getDatasetMeta(e), s = {
      meta: i,
      index: e,
      mode: t,
      cancelable: !0
    };
    this.notifyPlugins("beforeDatasetUpdate", s) !== !1 && (i.controller._update(t), s.cancelable = !1, this.notifyPlugins("afterDatasetUpdate", s));
  }
  render() {
    this.notifyPlugins("beforeRender", {
      cancelable: !0
    }) !== !1 && (fi.has(this) ? this.attached && !fi.running(this) && fi.start(this) : (this.draw(), Ih({
      chart: this
    })));
  }
  draw() {
    let e;
    if (this._resizeBeforeDraw) {
      const { width: i, height: s } = this._resizeBeforeDraw;
      this._resizeBeforeDraw = null, this._resize(i, s);
    }
    if (this.clear(), this.width <= 0 || this.height <= 0 || this.notifyPlugins("beforeDraw", {
      cancelable: !0
    }) === !1)
      return;
    const t = this._layers;
    for (e = 0; e < t.length && t[e].z <= 0; ++e)
      t[e].draw(this.chartArea);
    for (this._drawDatasets(); e < t.length; ++e)
      t[e].draw(this.chartArea);
    this.notifyPlugins("afterDraw");
  }
  _getSortedDatasetMetas(e) {
    const t = this._sortedMetasets, i = [];
    let s, n;
    for (s = 0, n = t.length; s < n; ++s) {
      const r = t[s];
      (!e || r.visible) && i.push(r);
    }
    return i;
  }
  getSortedVisibleDatasetMetas() {
    return this._getSortedDatasetMetas(!0);
  }
  _drawDatasets() {
    if (this.notifyPlugins("beforeDatasetsDraw", {
      cancelable: !0
    }) === !1)
      return;
    const e = this.getSortedVisibleDatasetMetas();
    for (let t = e.length - 1; t >= 0; --t)
      this._drawDataset(e[t]);
    this.notifyPlugins("afterDatasetsDraw");
  }
  _drawDataset(e) {
    const t = this.ctx, i = {
      meta: e,
      index: e.index,
      cancelable: !0
    }, s = ww(this, e);
    this.notifyPlugins("beforeDatasetDraw", i) !== !1 && (s && yl(t, s), e.controller.draw(), s && El(t), i.cancelable = !1, this.notifyPlugins("afterDatasetDraw", i));
  }
  isPointInArea(e) {
    return ZA(e, this.chartArea, this._minPadding);
  }
  getElementsAtEventForMode(e, t, i, s) {
    const n = Ow.modes[t];
    return typeof n == "function" ? n(this, e, i, s) : [];
  }
  getDatasetMeta(e) {
    const t = this.data.datasets[e], i = this._metasets;
    let s = i.filter((n) => n && n._dataset === t).pop();
    return s || (s = {
      type: null,
      data: [],
      dataset: null,
      controller: null,
      hidden: null,
      xAxisID: null,
      yAxisID: null,
      order: t && t.order || 0,
      index: e,
      _dataset: t,
      _parsed: [],
      _sorted: !1
    }, i.push(s)), s;
  }
  getContext() {
    return this.$context || (this.$context = Bs(null, {
      chart: this,
      type: "chart"
    }));
  }
  getVisibleDatasetCount() {
    return this.getSortedVisibleDatasetMetas().length;
  }
  isDatasetVisible(e) {
    const t = this.data.datasets[e];
    if (!t)
      return !1;
    const i = this.getDatasetMeta(e);
    return typeof i.hidden == "boolean" ? !i.hidden : !t.hidden;
  }
  setDatasetVisibility(e, t) {
    const i = this.getDatasetMeta(e);
    i.hidden = !t;
  }
  toggleDataVisibility(e) {
    this._hiddenIndices[e] = !this._hiddenIndices[e];
  }
  getDataVisibility(e) {
    return !this._hiddenIndices[e];
  }
  _updateVisibility(e, t, i) {
    const s = i ? "show" : "hide", n = this.getDatasetMeta(e), r = n.controller._resolveAnimations(void 0, s);
    Cr(t) ? (n.data[t].hidden = !i, this.update()) : (this.setDatasetVisibility(e, i), r.update(n, {
      visible: i
    }), this.update((o) => o.datasetIndex === e ? s : void 0));
  }
  hide(e, t) {
    this._updateVisibility(e, t, !1);
  }
  show(e, t) {
    this._updateVisibility(e, t, !0);
  }
  _destroyDatasetMeta(e) {
    const t = this._metasets[e];
    t && t.controller && t.controller._destroy(), delete this._metasets[e];
  }
  _stop() {
    let e, t;
    for (this.stop(), fi.remove(this), e = 0, t = this.data.datasets.length; e < t; ++e)
      this._destroyDatasetMeta(e);
  }
  destroy() {
    this.notifyPlugins("beforeDestroy");
    const { canvas: e, ctx: t } = this;
    this._stop(), this.config.clearCache(), e && (this.unbindEvents(), oh(e, t), this.platform.releaseContext(t), this.canvas = null, this.ctx = null), delete dr[this.id], this.notifyPlugins("afterDestroy");
  }
  toBase64Image(...e) {
    return this.canvas.toDataURL(...e);
  }
  bindEvents() {
    this.bindUserEvents(), this.options.responsive ? this.bindResponsiveEvents() : this.attached = !0;
  }
  bindUserEvents() {
    const e = this._listeners, t = this.platform, i = (n, r) => {
      t.addEventListener(this, n, r), e[n] = r;
    }, s = (n, r, o) => {
      n.offsetX = r, n.offsetY = o, this._eventHandler(n);
    };
    ve(this.options.events, (n) => i(n, s));
  }
  bindResponsiveEvents() {
    this._responsiveListeners || (this._responsiveListeners = {});
    const e = this._responsiveListeners, t = this.platform, i = (a, l) => {
      t.addEventListener(this, a, l), e[a] = l;
    }, s = (a, l) => {
      e[a] && (t.removeEventListener(this, a, l), delete e[a]);
    }, n = (a, l) => {
      this.canvas && this.resize(a, l);
    };
    let r;
    const o = () => {
      s("attach", o), this.attached = !0, this.resize(), i("resize", n), i("detach", r);
    };
    r = () => {
      this.attached = !1, s("resize", n), this._stop(), this._resize(0, 0), i("attach", o);
    }, t.isAttached(this.canvas) ? o() : r();
  }
  unbindEvents() {
    ve(this._listeners, (e, t) => {
      this.platform.removeEventListener(this, t, e);
    }), this._listeners = {}, ve(this._responsiveListeners, (e, t) => {
      this.platform.removeEventListener(this, t, e);
    }), this._responsiveListeners = void 0;
  }
  updateHoverStyle(e, t, i) {
    const s = i ? "set" : "remove";
    let n, r, o, a;
    for (t === "dataset" && (n = this.getDatasetMeta(e[0].datasetIndex), n.controller["_" + s + "DatasetHoverStyle"]()), o = 0, a = e.length; o < a; ++o) {
      r = e[o];
      const l = r && this.getDatasetMeta(r.datasetIndex).controller;
      l && l[s + "HoverStyle"](r.element, r.datasetIndex, r.index);
    }
  }
  getActiveElements() {
    return this._active || [];
  }
  setActiveElements(e) {
    const t = this._active || [], i = e.map(({ datasetIndex: n, index: r }) => {
      const o = this.getDatasetMeta(n);
      if (!o)
        throw new Error("No dataset found at index " + n);
      return {
        datasetIndex: n,
        element: o.data[r],
        index: r
      };
    });
    !wr(i, t) && (this._active = i, this._lastEvent = null, this._updateHoverStyles(i, t));
  }
  notifyPlugins(e, t, i) {
    return this._plugins.notify(this, e, t, i);
  }
  isPluginEnabled(e) {
    return this._plugins._cache.filter((t) => t.plugin.id === e).length === 1;
  }
  _updateHoverStyles(e, t, i) {
    const s = this.options.hover, n = (a, l) => a.filter((h) => !l.some((c) => h.datasetIndex === c.datasetIndex && h.index === c.index)), r = n(t, e), o = i ? e : n(e, t);
    r.length && this.updateHoverStyle(r, s.mode, !1), o.length && s.mode && this.updateHoverStyle(o, s.mode, !0);
  }
  _eventHandler(e, t) {
    const i = {
      event: e,
      replay: t,
      cancelable: !0,
      inChartArea: this.isPointInArea(e)
    }, s = (r) => (r.options.events || this.options.events).includes(e.native.type);
    if (this.notifyPlugins("beforeEvent", i, s) === !1)
      return;
    const n = this._handleEvent(e, t, i.inChartArea);
    return i.cancelable = !1, this.notifyPlugins("afterEvent", i, s), (n || i.changed) && this.render(), this;
  }
  _handleEvent(e, t, i) {
    const { _active: s = [], options: n } = this, r = t, o = this._getActiveElements(e, s, i, r), a = $m(e), l = Kv(e, this._lastEvent, i, a);
    i && (this._lastEvent = null, Ue(n.onHover, [
      e,
      o,
      this
    ], this), a && Ue(n.onClick, [
      e,
      o,
      this
    ], this));
    const h = !wr(o, s);
    return (h || t) && (this._active = o, this._updateHoverStyles(o, s, t)), this._lastEvent = l, h;
  }
  _getActiveElements(e, t, i, s) {
    if (e.type === "mouseout")
      return [];
    if (!i)
      return t;
    const n = this.options.hover;
    return this.getElementsAtEventForMode(e, n.mode, n, s);
  }
}, D(Qi, "defaults", ke), D(Qi, "instances", dr), D(Qi, "overrides", vs), D(Qi, "registry", Ai), D(Qi, "version", kv), D(Qi, "getChart", kh), Qi);
function Oh() {
  return ve(zr.instances, (A) => A._plugins.invalidate());
}
function ud(A, e, t = e) {
  A.lineCap = de(t.borderCapStyle, e.borderCapStyle), A.setLineDash(de(t.borderDash, e.borderDash)), A.lineDashOffset = de(t.borderDashOffset, e.borderDashOffset), A.lineJoin = de(t.borderJoinStyle, e.borderJoinStyle), A.lineWidth = de(t.borderWidth, e.borderWidth), A.strokeStyle = de(t.borderColor, e.borderColor);
}
function Vv(A, e, t) {
  A.lineTo(t.x, t.y);
}
function zv(A) {
  return A.stepped ? xb : A.tension || A.cubicInterpolationMode === "monotone" ? Qb : Vv;
}
function dd(A, e, t = {}) {
  const i = A.length, { start: s = 0, end: n = i - 1 } = t, { start: r, end: o } = e, a = Math.max(s, r), l = Math.min(n, o), h = s < r && n < r || s > o && n > o;
  return {
    count: i,
    start: a,
    loop: e.loop,
    ilen: l < a && !h ? i + l - a : l - a
  };
}
function Gv(A, e, t, i) {
  const { points: s, options: n } = e, { count: r, start: o, loop: a, ilen: l } = dd(s, t, i), h = zv(n);
  let { move: c = !0, reverse: u } = i || {}, d, f, p;
  for (d = 0; d <= l; ++d)
    f = s[(o + (u ? l - d : d)) % r], !f.skip && (c ? (A.moveTo(f.x, f.y), c = !1) : h(A, p, f, u, n.stepped), p = f);
  return a && (f = s[(o + (u ? l : 0)) % r], h(A, p, f, u, n.stepped)), !!a;
}
function Wv(A, e, t, i) {
  const s = e.points, { count: n, start: r, ilen: o } = dd(s, t, i), { move: a = !0, reverse: l } = i || {};
  let h = 0, c = 0, u, d, f, p, b, w;
  const C = (U) => (r + (l ? o - U : U)) % n, x = () => {
    p !== b && (A.lineTo(h, b), A.lineTo(h, p), A.lineTo(h, w));
  };
  for (a && (d = s[C(0)], A.moveTo(d.x, d.y)), u = 0; u <= o; ++u) {
    if (d = s[C(u)], d.skip)
      continue;
    const U = d.x, E = d.y, H = U | 0;
    H === f ? (E < p ? p = E : E > b && (b = E), h = (c * h + U) / ++c) : (x(), A.lineTo(U, E), f = H, c = 0, p = b = E), w = E;
  }
  x();
}
function Pa(A) {
  const e = A.options, t = e.borderDash && e.borderDash.length;
  return !A._decimated && !A._loop && !e.tension && e.cubicInterpolationMode !== "monotone" && !e.stepped && !t ? Wv : Gv;
}
function jv(A) {
  return A.stepped ? rw : A.tension || A.cubicInterpolationMode === "monotone" ? ow : os;
}
function Xv(A, e, t, i) {
  let s = e._path;
  s || (s = e._path = new Path2D(), e.path(s, t, i) && s.closePath()), ud(A, e.options), A.stroke(s);
}
function Yv(A, e, t, i) {
  const { segments: s, options: n } = e, r = Pa(e);
  for (const o of s)
    ud(A, n, o.style), A.beginPath(), r(A, e, o, {
      start: t,
      end: t + i - 1
    }) && A.closePath(), A.stroke();
}
const Jv = typeof Path2D == "function";
function $v(A, e, t, i) {
  Jv && !e.options.segment ? Xv(A, e, t, i) : Yv(A, e, t, i);
}
class yA extends vi {
  constructor(e) {
    super(), this.animated = !0, this.options = void 0, this._chart = void 0, this._loop = void 0, this._fullLoop = void 0, this._path = void 0, this._points = void 0, this._segments = void 0, this._decimated = !1, this._pointsUpdated = !1, this._datasetIndex = void 0, e && Object.assign(this, e);
  }
  updateControlPoints(e, t) {
    const i = this.options;
    if ((i.tension || i.cubicInterpolationMode === "monotone") && !i.stepped && !this._pointsUpdated) {
      const s = i.spanGaps ? this._loop : this._fullLoop;
      Zb(this._points, i, e, s, t), this._pointsUpdated = !0;
    }
  }
  set points(e) {
    this._points = e, delete this._segments, delete this._path, this._pointsUpdated = !1;
  }
  get points() {
    return this._points;
  }
  get segments() {
    return this._segments || (this._segments = gw(this, this.options.segment));
  }
  first() {
    const e = this.segments, t = this.points;
    return e.length && t[e[0].start];
  }
  last() {
    const e = this.segments, t = this.points, i = e.length;
    return i && t[e[i - 1].end];
  }
  interpolate(e, t) {
    const i = this.options, s = e[t], n = this.points, r = uw(this, {
      property: t,
      start: s,
      end: s
    });
    if (!r.length)
      return;
    const o = [], a = jv(i);
    let l, h;
    for (l = 0, h = r.length; l < h; ++l) {
      const { start: c, end: u } = r[l], d = n[c], f = n[u];
      if (d === f) {
        o.push(d);
        continue;
      }
      const p = Math.abs((s - d[t]) / (f[t] - d[t])), b = a(d, f, p, i.stepped);
      b[t] = e[t], o.push(b);
    }
    return o.length === 1 ? o[0] : o;
  }
  pathSegment(e, t, i) {
    return Pa(this)(e, this, t, i);
  }
  path(e, t, i) {
    const s = this.segments, n = Pa(this);
    let r = this._loop;
    t = t || 0, i = i || this.points.length - t;
    for (const o of s)
      r &= n(e, this, o, {
        start: t,
        end: t + i - 1
      });
    return !!r;
  }
  draw(e, t, i, s) {
    const n = this.options || {};
    (this.points || []).length && n.borderWidth && (e.save(), $v(e, this, i, s), e.restore()), this.animated && (this._pointsUpdated = !1, this._path = void 0);
  }
}
D(yA, "id", "line"), D(yA, "defaults", {
  borderCapStyle: "butt",
  borderDash: [],
  borderDashOffset: 0,
  borderJoinStyle: "miter",
  borderWidth: 3,
  capBezierPoints: !0,
  cubicInterpolationMode: "default",
  fill: !1,
  spanGaps: !1,
  stepped: !1,
  tension: 0
}), D(yA, "defaultRoutes", {
  backgroundColor: "backgroundColor",
  borderColor: "borderColor"
}), D(yA, "descriptors", {
  _scriptable: !0,
  _indexable: (e) => e !== "borderDash" && e !== "fill"
});
function Ph(A, e, t, i) {
  const s = A.options, { [t]: n } = A.getProps([
    t
  ], i);
  return Math.abs(e - n) < s.radius + s.hitRadius;
}
class fr extends vi {
  constructor(t) {
    super();
    D(this, "parsed");
    D(this, "skip");
    D(this, "stop");
    this.options = void 0, this.parsed = void 0, this.skip = void 0, this.stop = void 0, t && Object.assign(this, t);
  }
  inRange(t, i, s) {
    const n = this.options, { x: r, y: o } = this.getProps([
      "x",
      "y"
    ], s);
    return Math.pow(t - r, 2) + Math.pow(i - o, 2) < Math.pow(n.hitRadius + n.radius, 2);
  }
  inXRange(t, i) {
    return Ph(this, t, "x", i);
  }
  inYRange(t, i) {
    return Ph(this, t, "y", i);
  }
  getCenterPoint(t) {
    const { x: i, y: s } = this.getProps([
      "x",
      "y"
    ], t);
    return {
      x: i,
      y: s
    };
  }
  size(t) {
    t = t || this.options || {};
    let i = t.radius || 0;
    i = Math.max(i, i && t.hoverRadius || 0);
    const s = i && t.borderWidth || 0;
    return (i + s) * 2;
  }
  draw(t, i) {
    const s = this.options;
    this.skip || s.radius < 0.1 || !ZA(this, i, this.size(s) / 2) || (t.strokeStyle = s.borderColor, t.lineWidth = s.borderWidth, t.fillStyle = s.backgroundColor, Ra(t, s, this.x, this.y));
  }
  getRange() {
    const t = this.options || {};
    return t.radius + t.hitRadius;
  }
}
D(fr, "id", "point"), /**
* @type {any}
*/
D(fr, "defaults", {
  borderWidth: 1,
  hitRadius: 1,
  hoverBorderWidth: 1,
  hoverRadius: 4,
  pointStyle: "circle",
  radius: 3,
  rotation: 0
}), /**
* @type {any}
*/
D(fr, "defaultRoutes", {
  backgroundColor: "backgroundColor",
  borderColor: "borderColor"
});
const Nh = (A, e) => {
  let { boxHeight: t = e, boxWidth: i = e } = A;
  return A.usePointStyle && (t = Math.min(t, e), i = A.pointStyleWidth || Math.min(i, e)), {
    boxWidth: i,
    boxHeight: t,
    itemHeight: Math.max(e, t)
  };
}, Zv = (A, e) => A !== null && e !== null && A.datasetIndex === e.datasetIndex && A.index === e.index;
class Kh extends vi {
  constructor(e) {
    super(), this._added = !1, this.legendHitBoxes = [], this._hoveredItem = null, this.doughnutMode = !1, this.chart = e.chart, this.options = e.options, this.ctx = e.ctx, this.legendItems = void 0, this.columnSizes = void 0, this.lineWidths = void 0, this.maxHeight = void 0, this.maxWidth = void 0, this.top = void 0, this.bottom = void 0, this.left = void 0, this.right = void 0, this.height = void 0, this.width = void 0, this._margins = void 0, this.position = void 0, this.weight = void 0, this.fullSize = void 0;
  }
  update(e, t, i) {
    this.maxWidth = e, this.maxHeight = t, this._margins = i, this.setDimensions(), this.buildLabels(), this.fit();
  }
  setDimensions() {
    this.isHorizontal() ? (this.width = this.maxWidth, this.left = this._margins.left, this.right = this.width) : (this.height = this.maxHeight, this.top = this._margins.top, this.bottom = this.height);
  }
  buildLabels() {
    const e = this.options.labels || {};
    let t = Ue(e.generateLabels, [
      this.chart
    ], this) || [];
    e.filter && (t = t.filter((i) => e.filter(i, this.chart.data))), e.sort && (t = t.sort((i, s) => e.sort(i, s, this.chart.data))), this.options.reverse && t.reverse(), this.legendItems = t;
  }
  fit() {
    const { options: e, ctx: t } = this;
    if (!e.display) {
      this.width = this.height = 0;
      return;
    }
    const i = e.labels, s = lt(i.font), n = s.size, r = this._computeTitleHeight(), { boxWidth: o, itemHeight: a } = Nh(i, n);
    let l, h;
    t.font = s.string, this.isHorizontal() ? (l = this.maxWidth, h = this._fitRows(r, n, o, a) + 10) : (h = this.maxHeight, l = this._fitCols(r, s, o, a) + 10), this.width = Math.min(l, e.maxWidth || this.maxWidth), this.height = Math.min(h, e.maxHeight || this.maxHeight);
  }
  _fitRows(e, t, i, s) {
    const { ctx: n, maxWidth: r, options: { labels: { padding: o } } } = this, a = this.legendHitBoxes = [], l = this.lineWidths = [
      0
    ], h = s + o;
    let c = e;
    n.textAlign = "left", n.textBaseline = "middle";
    let u = -1, d = -h;
    return this.legendItems.forEach((f, p) => {
      const b = i + t / 2 + n.measureText(f.text).width;
      (p === 0 || l[l.length - 1] + b + 2 * o > r) && (c += h, l[l.length - (p > 0 ? 0 : 1)] = 0, d += h, u++), a[p] = {
        left: 0,
        top: d,
        row: u,
        width: b,
        height: s
      }, l[l.length - 1] += b + o;
    }), c;
  }
  _fitCols(e, t, i, s) {
    const { ctx: n, maxHeight: r, options: { labels: { padding: o } } } = this, a = this.legendHitBoxes = [], l = this.columnSizes = [], h = r - e;
    let c = o, u = 0, d = 0, f = 0, p = 0;
    return this.legendItems.forEach((b, w) => {
      const { itemWidth: C, itemHeight: x } = qv(i, t, n, b, s);
      w > 0 && d + x + 2 * o > h && (c += u + o, l.push({
        width: u,
        height: d
      }), f += u + o, p++, u = d = 0), a[w] = {
        left: f,
        top: d,
        col: p,
        width: C,
        height: x
      }, u = Math.max(u, C), d += x + o;
    }), c += u, l.push({
      width: u,
      height: d
    }), c;
  }
  adjustHitBoxes() {
    if (!this.options.display)
      return;
    const e = this._computeTitleHeight(), { legendHitBoxes: t, options: { align: i, labels: { padding: s }, rtl: n } } = this, r = zs(n, this.left, this.width);
    if (this.isHorizontal()) {
      let o = 0, a = nt(i, this.left + s, this.right - this.lineWidths[o]);
      for (const l of t)
        o !== l.row && (o = l.row, a = nt(i, this.left + s, this.right - this.lineWidths[o])), l.top += this.top + e + s, l.left = r.leftForLtr(r.x(a), l.width), a += l.width + s;
    } else {
      let o = 0, a = nt(i, this.top + e + s, this.bottom - this.columnSizes[o].height);
      for (const l of t)
        l.col !== o && (o = l.col, a = nt(i, this.top + e + s, this.bottom - this.columnSizes[o].height)), l.top = a, l.left += this.left + s, l.left = r.leftForLtr(r.x(l.left), l.width), a += l.height + s;
    }
  }
  isHorizontal() {
    return this.options.position === "top" || this.options.position === "bottom";
  }
  draw() {
    if (this.options.display) {
      const e = this.ctx;
      yl(e, this), this._draw(), El(e);
    }
  }
  _draw() {
    const { options: e, columnSizes: t, lineWidths: i, ctx: s } = this, { align: n, labels: r } = e, o = ke.color, a = zs(e.rtl, this.left, this.width), l = lt(r.font), { padding: h } = r, c = l.size, u = c / 2;
    let d;
    this.drawTitle(), s.textAlign = a.textAlign("left"), s.textBaseline = "middle", s.lineWidth = 0.5, s.font = l.string;
    const { boxWidth: f, boxHeight: p, itemHeight: b } = Nh(r, c), w = function(H, T, S) {
      if (isNaN(f) || f <= 0 || isNaN(p) || p < 0)
        return;
      s.save();
      const R = de(S.lineWidth, 1);
      if (s.fillStyle = de(S.fillStyle, o), s.lineCap = de(S.lineCap, "butt"), s.lineDashOffset = de(S.lineDashOffset, 0), s.lineJoin = de(S.lineJoin, "miter"), s.lineWidth = R, s.strokeStyle = de(S.strokeStyle, o), s.setLineDash(de(S.lineDash, [])), r.usePointStyle) {
        const J = {
          radius: p * Math.SQRT2 / 2,
          pointStyle: S.pointStyle,
          rotation: S.rotation,
          borderWidth: R
        }, X = a.xPlus(H, f / 2), P = T + u;
        Gu(s, J, X, P, r.pointStyleWidth && f);
      } else {
        const J = T + Math.max((c - p) / 2, 0), X = a.leftForLtr(H, f), P = RA(S.borderRadius);
        s.beginPath(), Object.values(P).some((Z) => Z !== 0) ? Ia(s, {
          x: X,
          y: J,
          w: f,
          h: p,
          radius: P
        }) : s.rect(X, J, f, p), s.fill(), R !== 0 && s.stroke();
      }
      s.restore();
    }, C = function(H, T, S) {
      qA(s, S.text, H, T + b / 2, l, {
        strikethrough: S.hidden,
        textAlign: a.textAlign(S.textAlign)
      });
    }, x = this.isHorizontal(), U = this._computeTitleHeight();
    x ? d = {
      x: nt(n, this.left + h, this.right - i[0]),
      y: this.top + h + U,
      line: 0
    } : d = {
      x: this.left + h,
      y: nt(n, this.top + U + h, this.bottom - t[0].height),
      line: 0
    }, Zu(this.ctx, e.textDirection);
    const E = b + h;
    this.legendItems.forEach((H, T) => {
      s.strokeStyle = H.fontColor, s.fillStyle = H.fontColor;
      const S = s.measureText(H.text).width, R = a.textAlign(H.textAlign || (H.textAlign = r.textAlign)), J = f + u + S;
      let X = d.x, P = d.y;
      a.setWidth(this.width), x ? T > 0 && X + J + h > this.right && (P = d.y += E, d.line++, X = d.x = nt(n, this.left + h, this.right - i[d.line])) : T > 0 && P + E > this.bottom && (X = d.x = X + t[d.line].width + h, d.line++, P = d.y = nt(n, this.top + U + h, this.bottom - t[d.line].height));
      const Z = a.x(X);
      if (w(Z, P, H), X = db(R, X + f + u, x ? X + J : this.right, e.rtl), C(a.x(X), P, H), x)
        d.x += J + h;
      else if (typeof H.text != "string") {
        const ae = l.lineHeight;
        d.y += fd(H, ae) + h;
      } else
        d.y += E;
    }), qu(this.ctx, e.textDirection);
  }
  drawTitle() {
    const e = this.options, t = e.title, i = lt(t.font), s = Kt(t.padding);
    if (!t.display)
      return;
    const n = zs(e.rtl, this.left, this.width), r = this.ctx, o = t.position, a = i.size / 2, l = s.top + a;
    let h, c = this.left, u = this.width;
    if (this.isHorizontal())
      u = Math.max(...this.lineWidths), h = this.top + l, c = nt(e.align, c, this.right - u);
    else {
      const f = this.columnSizes.reduce((p, b) => Math.max(p, b.height), 0);
      h = l + nt(e.align, this.top, this.bottom - f - e.labels.padding - this._computeTitleHeight());
    }
    const d = nt(o, c, c + u);
    r.textAlign = n.textAlign(Bl(o)), r.textBaseline = "middle", r.strokeStyle = t.color, r.fillStyle = t.color, r.font = i.string, qA(r, t.text, d, h, i);
  }
  _computeTitleHeight() {
    const e = this.options.title, t = lt(e.font), i = Kt(e.padding);
    return e.display ? t.lineHeight + i.height : 0;
  }
  _getLegendItemAt(e, t) {
    let i, s, n;
    if (BA(e, this.left, this.right) && BA(t, this.top, this.bottom)) {
      for (n = this.legendHitBoxes, i = 0; i < n.length; ++i)
        if (s = n[i], BA(e, s.left, s.left + s.width) && BA(t, s.top, s.top + s.height))
          return this.legendItems[i];
    }
    return null;
  }
  handleEvent(e) {
    const t = this.options;
    if (!iB(e.type, t))
      return;
    const i = this._getLegendItemAt(e.x, e.y);
    if (e.type === "mousemove" || e.type === "mouseout") {
      const s = this._hoveredItem, n = Zv(s, i);
      s && !n && Ue(t.onLeave, [
        e,
        s,
        this
      ], this), this._hoveredItem = i, i && !n && Ue(t.onHover, [
        e,
        i,
        this
      ], this);
    } else i && Ue(t.onClick, [
      e,
      i,
      this
    ], this);
  }
}
function qv(A, e, t, i, s) {
  const n = eB(i, A, e, t), r = tB(s, i, e.lineHeight);
  return {
    itemWidth: n,
    itemHeight: r
  };
}
function eB(A, e, t, i) {
  let s = A.text;
  return s && typeof s != "string" && (s = s.reduce((n, r) => n.length > r.length ? n : r)), e + t.size / 2 + i.measureText(s).width;
}
function tB(A, e, t) {
  let i = A;
  return typeof e.text != "string" && (i = fd(e, t)), i;
}
function fd(A, e) {
  const t = A.text ? A.text.length : 0;
  return e * t;
}
function iB(A, e) {
  return !!((A === "mousemove" || A === "mouseout") && (e.onHover || e.onLeave) || e.onClick && (A === "click" || A === "mouseup"));
}
var sB = {
  id: "legend",
  _element: Kh,
  start(A, e, t) {
    const i = A.legend = new Kh({
      ctx: A.ctx,
      options: t,
      chart: A
    });
    kt.configure(A, i, t), kt.addBox(A, i);
  },
  stop(A) {
    kt.removeBox(A, A.legend), delete A.legend;
  },
  beforeUpdate(A, e, t) {
    const i = A.legend;
    kt.configure(A, i, t), i.options = t;
  },
  afterUpdate(A) {
    const e = A.legend;
    e.buildLabels(), e.adjustHitBoxes();
  },
  afterEvent(A, e) {
    e.replay || A.legend.handleEvent(e.event);
  },
  defaults: {
    display: !0,
    position: "top",
    align: "center",
    fullSize: !0,
    reverse: !1,
    weight: 1e3,
    onClick(A, e, t) {
      const i = e.datasetIndex, s = t.chart;
      s.isDatasetVisible(i) ? (s.hide(i), e.hidden = !0) : (s.show(i), e.hidden = !1);
    },
    onHover: null,
    onLeave: null,
    labels: {
      color: (A) => A.chart.options.color,
      boxWidth: 40,
      padding: 10,
      generateLabels(A) {
        const e = A.data.datasets, { labels: { usePointStyle: t, pointStyle: i, textAlign: s, color: n, useBorderRadius: r, borderRadius: o } } = A.legend.options;
        return A._getSortedDatasetMetas().map((a) => {
          const l = a.controller.getStyle(t ? 0 : void 0), h = Kt(l.borderWidth);
          return {
            text: e[a.index].label,
            fillStyle: l.backgroundColor,
            fontColor: n,
            hidden: !a.visible,
            lineCap: l.borderCapStyle,
            lineDash: l.borderDash,
            lineDashOffset: l.borderDashOffset,
            lineJoin: l.borderJoinStyle,
            lineWidth: (h.width + h.height) / 4,
            strokeStyle: l.borderColor,
            pointStyle: i || l.pointStyle,
            rotation: l.rotation,
            textAlign: s || l.textAlign,
            borderRadius: r && (o || l.borderRadius),
            datasetIndex: a.index
          };
        }, this);
      }
    },
    title: {
      color: (A) => A.chart.options.color,
      display: !1,
      position: "center",
      text: ""
    }
  },
  descriptors: {
    _scriptable: (A) => !A.startsWith("on"),
    labels: {
      _scriptable: (A) => ![
        "generateLabels",
        "filter",
        "sort"
      ].includes(A)
    }
  }
};
class gd extends vi {
  constructor(e) {
    super(), this.chart = e.chart, this.options = e.options, this.ctx = e.ctx, this._padding = void 0, this.top = void 0, this.bottom = void 0, this.left = void 0, this.right = void 0, this.width = void 0, this.height = void 0, this.position = void 0, this.weight = void 0, this.fullSize = void 0;
  }
  update(e, t) {
    const i = this.options;
    if (this.left = 0, this.top = 0, !i.display) {
      this.width = this.height = this.right = this.bottom = 0;
      return;
    }
    this.width = this.right = e, this.height = this.bottom = t;
    const s = $e(i.text) ? i.text.length : 1;
    this._padding = Kt(i.padding);
    const n = s * lt(i.font).lineHeight + this._padding.height;
    this.isHorizontal() ? this.height = n : this.width = n;
  }
  isHorizontal() {
    const e = this.options.position;
    return e === "top" || e === "bottom";
  }
  _drawArgs(e) {
    const { top: t, left: i, bottom: s, right: n, options: r } = this, o = r.align;
    let a = 0, l, h, c;
    return this.isHorizontal() ? (h = nt(o, i, n), c = t + e, l = n - i) : (r.position === "left" ? (h = i + e, c = nt(o, s, t), a = Ze * -0.5) : (h = n - e, c = nt(o, t, s), a = Ze * 0.5), l = s - t), {
      titleX: h,
      titleY: c,
      maxWidth: l,
      rotation: a
    };
  }
  draw() {
    const e = this.ctx, t = this.options;
    if (!t.display)
      return;
    const i = lt(t.font), n = i.lineHeight / 2 + this._padding.top, { titleX: r, titleY: o, maxWidth: a, rotation: l } = this._drawArgs(n);
    qA(e, t.text, 0, 0, i, {
      color: t.color,
      maxWidth: a,
      rotation: l,
      textAlign: Bl(t.align),
      textBaseline: "middle",
      translation: [
        r,
        o
      ]
    });
  }
}
function AB(A, e) {
  const t = new gd({
    ctx: A.ctx,
    options: e,
    chart: A
  });
  kt.configure(A, t, e), kt.addBox(A, t), A.titleBlock = t;
}
var nB = {
  id: "title",
  _element: gd,
  start(A, e, t) {
    AB(A, t);
  },
  stop(A) {
    const e = A.titleBlock;
    kt.removeBox(A, e), delete A.titleBlock;
  },
  beforeUpdate(A, e, t) {
    const i = A.titleBlock;
    kt.configure(A, i, t), i.options = t;
  },
  defaults: {
    align: "center",
    display: !1,
    font: {
      weight: "bold"
    },
    fullSize: !0,
    padding: 10,
    position: "top",
    text: "",
    weight: 2e3
  },
  defaultRoutes: {
    color: "color"
  },
  descriptors: {
    _scriptable: !0,
    _indexable: !1
  }
};
const EA = {
  average(A) {
    if (!A.length)
      return !1;
    let e, t, i = /* @__PURE__ */ new Set(), s = 0, n = 0;
    for (e = 0, t = A.length; e < t; ++e) {
      const o = A[e].element;
      if (o && o.hasValue()) {
        const a = o.tooltipPosition();
        i.add(a.x), s += a.y, ++n;
      }
    }
    return n === 0 || i.size === 0 ? !1 : {
      x: [
        ...i
      ].reduce((o, a) => o + a) / i.size,
      y: s / n
    };
  },
  nearest(A, e) {
    if (!A.length)
      return !1;
    let t = e.x, i = e.y, s = Number.POSITIVE_INFINITY, n, r, o;
    for (n = 0, r = A.length; n < r; ++n) {
      const a = A[n].element;
      if (a && a.hasValue()) {
        const l = a.getCenterPoint(), h = Ta(e, l);
        h < s && (s = h, o = a);
      }
    }
    if (o) {
      const a = o.tooltipPosition();
      t = a.x, i = a.y;
    }
    return {
      x: t,
      y: i
    };
  }
};
function si(A, e) {
  return e && ($e(e) ? Array.prototype.push.apply(A, e) : A.push(e)), A;
}
function gi(A) {
  return (typeof A == "string" || A instanceof String) && A.indexOf(`
`) > -1 ? A.split(`
`) : A;
}
function rB(A, e) {
  const { element: t, datasetIndex: i, index: s } = e, n = A.getDatasetMeta(i).controller, { label: r, value: o } = n.getLabelAndValue(s);
  return {
    chart: A,
    label: r,
    parsed: n.getParsed(s),
    raw: A.data.datasets[i].data[s],
    formattedValue: o,
    dataset: n.getDataset(),
    dataIndex: s,
    datasetIndex: i,
    element: t
  };
}
function Vh(A, e) {
  const t = A.chart.ctx, { body: i, footer: s, title: n } = A, { boxWidth: r, boxHeight: o } = e, a = lt(e.bodyFont), l = lt(e.titleFont), h = lt(e.footerFont), c = n.length, u = s.length, d = i.length, f = Kt(e.padding);
  let p = f.height, b = 0, w = i.reduce((U, E) => U + E.before.length + E.lines.length + E.after.length, 0);
  if (w += A.beforeBody.length + A.afterBody.length, c && (p += c * l.lineHeight + (c - 1) * e.titleSpacing + e.titleMarginBottom), w) {
    const U = e.displayColors ? Math.max(o, a.lineHeight) : a.lineHeight;
    p += d * U + (w - d) * a.lineHeight + (w - 1) * e.bodySpacing;
  }
  u && (p += e.footerMarginTop + u * h.lineHeight + (u - 1) * e.footerSpacing);
  let C = 0;
  const x = function(U) {
    b = Math.max(b, t.measureText(U).width + C);
  };
  return t.save(), t.font = l.string, ve(A.title, x), t.font = a.string, ve(A.beforeBody.concat(A.afterBody), x), C = e.displayColors ? r + 2 + e.boxPadding : 0, ve(i, (U) => {
    ve(U.before, x), ve(U.lines, x), ve(U.after, x);
  }), C = 0, t.font = h.string, ve(A.footer, x), t.restore(), b += f.width, {
    width: b,
    height: p
  };
}
function oB(A, e) {
  const { y: t, height: i } = e;
  return t < i / 2 ? "top" : t > A.height - i / 2 ? "bottom" : "center";
}
function aB(A, e, t, i) {
  const { x: s, width: n } = i, r = t.caretSize + t.caretPadding;
  if (A === "left" && s + n + r > e.width || A === "right" && s - n - r < 0)
    return !0;
}
function lB(A, e, t, i) {
  const { x: s, width: n } = t, { width: r, chartArea: { left: o, right: a } } = A;
  let l = "center";
  return i === "center" ? l = s <= (o + a) / 2 ? "left" : "right" : s <= n / 2 ? l = "left" : s >= r - n / 2 && (l = "right"), aB(l, A, e, t) && (l = "center"), l;
}
function zh(A, e, t) {
  const i = t.yAlign || e.yAlign || oB(A, t);
  return {
    xAlign: t.xAlign || e.xAlign || lB(A, e, t, i),
    yAlign: i
  };
}
function hB(A, e) {
  let { x: t, width: i } = A;
  return e === "right" ? t -= i : e === "center" && (t -= i / 2), t;
}
function cB(A, e, t) {
  let { y: i, height: s } = A;
  return e === "top" ? i += t : e === "bottom" ? i -= s + t : i -= s / 2, i;
}
function Gh(A, e, t, i) {
  const { caretSize: s, caretPadding: n, cornerRadius: r } = A, { xAlign: o, yAlign: a } = t, l = s + n, { topLeft: h, topRight: c, bottomLeft: u, bottomRight: d } = RA(r);
  let f = hB(e, o);
  const p = cB(e, a, l);
  return a === "center" ? o === "left" ? f += l : o === "right" && (f -= l) : o === "left" ? f -= Math.max(h, u) + s : o === "right" && (f += Math.max(c, d) + s), {
    x: It(f, 0, i.width - e.width),
    y: It(p, 0, i.height - e.height)
  };
}
function Rn(A, e, t) {
  const i = Kt(t.padding);
  return e === "center" ? A.x + A.width / 2 : e === "right" ? A.x + A.width - i.right : A.x + i.left;
}
function Wh(A) {
  return si([], gi(A));
}
function uB(A, e, t) {
  return Bs(A, {
    tooltip: e,
    tooltipItems: t,
    type: "tooltip"
  });
}
function jh(A, e) {
  const t = e && e.dataset && e.dataset.tooltip && e.dataset.tooltip.callbacks;
  return t ? A.override(t) : A;
}
const pd = {
  beforeTitle: ci,
  title(A) {
    if (A.length > 0) {
      const e = A[0], t = e.chart.data.labels, i = t ? t.length : 0;
      if (this && this.options && this.options.mode === "dataset")
        return e.dataset.label || "";
      if (e.label)
        return e.label;
      if (i > 0 && e.dataIndex < i)
        return t[e.dataIndex];
    }
    return "";
  },
  afterTitle: ci,
  beforeBody: ci,
  beforeLabel: ci,
  label(A) {
    if (this && this.options && this.options.mode === "dataset")
      return A.label + ": " + A.formattedValue || A.formattedValue;
    let e = A.dataset.label || "";
    e && (e += ": ");
    const t = A.formattedValue;
    return Qe(t) || (e += t), e;
  },
  labelColor(A) {
    const t = A.chart.getDatasetMeta(A.datasetIndex).controller.getStyle(A.dataIndex);
    return {
      borderColor: t.borderColor,
      backgroundColor: t.backgroundColor,
      borderWidth: t.borderWidth,
      borderDash: t.borderDash,
      borderDashOffset: t.borderDashOffset,
      borderRadius: 0
    };
  },
  labelTextColor() {
    return this.options.bodyColor;
  },
  labelPointStyle(A) {
    const t = A.chart.getDatasetMeta(A.datasetIndex).controller.getStyle(A.dataIndex);
    return {
      pointStyle: t.pointStyle,
      rotation: t.rotation
    };
  },
  afterLabel: ci,
  afterBody: ci,
  beforeFooter: ci,
  footer: ci,
  afterFooter: ci
};
function gt(A, e, t, i) {
  const s = A[e].call(t, i);
  return typeof s > "u" ? pd[e].call(t, i) : s;
}
class Na extends vi {
  constructor(e) {
    super(), this.opacity = 0, this._active = [], this._eventPosition = void 0, this._size = void 0, this._cachedAnimations = void 0, this._tooltipItems = [], this.$animations = void 0, this.$context = void 0, this.chart = e.chart, this.options = e.options, this.dataPoints = void 0, this.title = void 0, this.beforeBody = void 0, this.body = void 0, this.afterBody = void 0, this.footer = void 0, this.xAlign = void 0, this.yAlign = void 0, this.x = void 0, this.y = void 0, this.height = void 0, this.width = void 0, this.caretX = void 0, this.caretY = void 0, this.labelColors = void 0, this.labelPointStyles = void 0, this.labelTextColors = void 0;
  }
  initialize(e) {
    this.options = e, this._cachedAnimations = void 0, this.$context = void 0;
  }
  _resolveAnimations() {
    const e = this._cachedAnimations;
    if (e)
      return e;
    const t = this.chart, i = this.options.setContext(this.getContext()), s = i.enabled && t.options.animation && i.animations, n = new td(this.chart, s);
    return s._cacheable && (this._cachedAnimations = Object.freeze(n)), n;
  }
  getContext() {
    return this.$context || (this.$context = uB(this.chart.getContext(), this, this._tooltipItems));
  }
  getTitle(e, t) {
    const { callbacks: i } = t, s = gt(i, "beforeTitle", this, e), n = gt(i, "title", this, e), r = gt(i, "afterTitle", this, e);
    let o = [];
    return o = si(o, gi(s)), o = si(o, gi(n)), o = si(o, gi(r)), o;
  }
  getBeforeBody(e, t) {
    return Wh(gt(t.callbacks, "beforeBody", this, e));
  }
  getBody(e, t) {
    const { callbacks: i } = t, s = [];
    return ve(e, (n) => {
      const r = {
        before: [],
        lines: [],
        after: []
      }, o = jh(i, n);
      si(r.before, gi(gt(o, "beforeLabel", this, n))), si(r.lines, gt(o, "label", this, n)), si(r.after, gi(gt(o, "afterLabel", this, n))), s.push(r);
    }), s;
  }
  getAfterBody(e, t) {
    return Wh(gt(t.callbacks, "afterBody", this, e));
  }
  getFooter(e, t) {
    const { callbacks: i } = t, s = gt(i, "beforeFooter", this, e), n = gt(i, "footer", this, e), r = gt(i, "afterFooter", this, e);
    let o = [];
    return o = si(o, gi(s)), o = si(o, gi(n)), o = si(o, gi(r)), o;
  }
  _createItems(e) {
    const t = this._active, i = this.chart.data, s = [], n = [], r = [];
    let o = [], a, l;
    for (a = 0, l = t.length; a < l; ++a)
      o.push(rB(this.chart, t[a]));
    return e.filter && (o = o.filter((h, c, u) => e.filter(h, c, u, i))), e.itemSort && (o = o.sort((h, c) => e.itemSort(h, c, i))), ve(o, (h) => {
      const c = jh(e.callbacks, h);
      s.push(gt(c, "labelColor", this, h)), n.push(gt(c, "labelPointStyle", this, h)), r.push(gt(c, "labelTextColor", this, h));
    }), this.labelColors = s, this.labelPointStyles = n, this.labelTextColors = r, this.dataPoints = o, o;
  }
  update(e, t) {
    const i = this.options.setContext(this.getContext()), s = this._active;
    let n, r = [];
    if (!s.length)
      this.opacity !== 0 && (n = {
        opacity: 0
      });
    else {
      const o = EA[i.position].call(this, s, this._eventPosition);
      r = this._createItems(i), this.title = this.getTitle(r, i), this.beforeBody = this.getBeforeBody(r, i), this.body = this.getBody(r, i), this.afterBody = this.getAfterBody(r, i), this.footer = this.getFooter(r, i);
      const a = this._size = Vh(this, i), l = Object.assign({}, o, a), h = zh(this.chart, i, l), c = Gh(i, l, h, this.chart);
      this.xAlign = h.xAlign, this.yAlign = h.yAlign, n = {
        opacity: 1,
        x: c.x,
        y: c.y,
        width: a.width,
        height: a.height,
        caretX: o.x,
        caretY: o.y
      };
    }
    this._tooltipItems = r, this.$context = void 0, n && this._resolveAnimations().update(this, n), e && i.external && i.external.call(this, {
      chart: this.chart,
      tooltip: this,
      replay: t
    });
  }
  drawCaret(e, t, i, s) {
    const n = this.getCaretPosition(e, i, s);
    t.lineTo(n.x1, n.y1), t.lineTo(n.x2, n.y2), t.lineTo(n.x3, n.y3);
  }
  getCaretPosition(e, t, i) {
    const { xAlign: s, yAlign: n } = this, { caretSize: r, cornerRadius: o } = i, { topLeft: a, topRight: l, bottomLeft: h, bottomRight: c } = RA(o), { x: u, y: d } = e, { width: f, height: p } = t;
    let b, w, C, x, U, E;
    return n === "center" ? (U = d + p / 2, s === "left" ? (b = u, w = b - r, x = U + r, E = U - r) : (b = u + f, w = b + r, x = U - r, E = U + r), C = b) : (s === "left" ? w = u + Math.max(a, h) + r : s === "right" ? w = u + f - Math.max(l, c) - r : w = this.caretX, n === "top" ? (x = d, U = x - r, b = w - r, C = w + r) : (x = d + p, U = x + r, b = w + r, C = w - r), E = x), {
      x1: b,
      x2: w,
      x3: C,
      y1: x,
      y2: U,
      y3: E
    };
  }
  drawTitle(e, t, i) {
    const s = this.title, n = s.length;
    let r, o, a;
    if (n) {
      const l = zs(i.rtl, this.x, this.width);
      for (e.x = Rn(this, i.titleAlign, i), t.textAlign = l.textAlign(i.titleAlign), t.textBaseline = "middle", r = lt(i.titleFont), o = i.titleSpacing, t.fillStyle = i.titleColor, t.font = r.string, a = 0; a < n; ++a)
        t.fillText(s[a], l.x(e.x), e.y + r.lineHeight / 2), e.y += r.lineHeight + o, a + 1 === n && (e.y += i.titleMarginBottom - o);
    }
  }
  _drawColorBox(e, t, i, s, n) {
    const r = this.labelColors[i], o = this.labelPointStyles[i], { boxHeight: a, boxWidth: l } = n, h = lt(n.bodyFont), c = Rn(this, "left", n), u = s.x(c), d = a < h.lineHeight ? (h.lineHeight - a) / 2 : 0, f = t.y + d;
    if (n.usePointStyle) {
      const p = {
        radius: Math.min(l, a) / 2,
        pointStyle: o.pointStyle,
        rotation: o.rotation,
        borderWidth: 1
      }, b = s.leftForLtr(u, l) + l / 2, w = f + a / 2;
      e.strokeStyle = n.multiKeyBackground, e.fillStyle = n.multiKeyBackground, Ra(e, p, b, w), e.strokeStyle = r.borderColor, e.fillStyle = r.backgroundColor, Ra(e, p, b, w);
    } else {
      e.lineWidth = pe(r.borderWidth) ? Math.max(...Object.values(r.borderWidth)) : r.borderWidth || 1, e.strokeStyle = r.borderColor, e.setLineDash(r.borderDash || []), e.lineDashOffset = r.borderDashOffset || 0;
      const p = s.leftForLtr(u, l), b = s.leftForLtr(s.xPlus(u, 1), l - 2), w = RA(r.borderRadius);
      Object.values(w).some((C) => C !== 0) ? (e.beginPath(), e.fillStyle = n.multiKeyBackground, Ia(e, {
        x: p,
        y: f,
        w: l,
        h: a,
        radius: w
      }), e.fill(), e.stroke(), e.fillStyle = r.backgroundColor, e.beginPath(), Ia(e, {
        x: b,
        y: f + 1,
        w: l - 2,
        h: a - 2,
        radius: w
      }), e.fill()) : (e.fillStyle = n.multiKeyBackground, e.fillRect(p, f, l, a), e.strokeRect(p, f, l, a), e.fillStyle = r.backgroundColor, e.fillRect(b, f + 1, l - 2, a - 2));
    }
    e.fillStyle = this.labelTextColors[i];
  }
  drawBody(e, t, i) {
    const { body: s } = this, { bodySpacing: n, bodyAlign: r, displayColors: o, boxHeight: a, boxWidth: l, boxPadding: h } = i, c = lt(i.bodyFont);
    let u = c.lineHeight, d = 0;
    const f = zs(i.rtl, this.x, this.width), p = function(S) {
      t.fillText(S, f.x(e.x + d), e.y + u / 2), e.y += u + n;
    }, b = f.textAlign(r);
    let w, C, x, U, E, H, T;
    for (t.textAlign = r, t.textBaseline = "middle", t.font = c.string, e.x = Rn(this, b, i), t.fillStyle = i.bodyColor, ve(this.beforeBody, p), d = o && b !== "right" ? r === "center" ? l / 2 + h : l + 2 + h : 0, U = 0, H = s.length; U < H; ++U) {
      for (w = s[U], C = this.labelTextColors[U], t.fillStyle = C, ve(w.before, p), x = w.lines, o && x.length && (this._drawColorBox(t, e, U, f, i), u = Math.max(c.lineHeight, a)), E = 0, T = x.length; E < T; ++E)
        p(x[E]), u = c.lineHeight;
      ve(w.after, p);
    }
    d = 0, u = c.lineHeight, ve(this.afterBody, p), e.y -= n;
  }
  drawFooter(e, t, i) {
    const s = this.footer, n = s.length;
    let r, o;
    if (n) {
      const a = zs(i.rtl, this.x, this.width);
      for (e.x = Rn(this, i.footerAlign, i), e.y += i.footerMarginTop, t.textAlign = a.textAlign(i.footerAlign), t.textBaseline = "middle", r = lt(i.footerFont), t.fillStyle = i.footerColor, t.font = r.string, o = 0; o < n; ++o)
        t.fillText(s[o], a.x(e.x), e.y + r.lineHeight / 2), e.y += r.lineHeight + i.footerSpacing;
    }
  }
  drawBackground(e, t, i, s) {
    const { xAlign: n, yAlign: r } = this, { x: o, y: a } = e, { width: l, height: h } = i, { topLeft: c, topRight: u, bottomLeft: d, bottomRight: f } = RA(s.cornerRadius);
    t.fillStyle = s.backgroundColor, t.strokeStyle = s.borderColor, t.lineWidth = s.borderWidth, t.beginPath(), t.moveTo(o + c, a), r === "top" && this.drawCaret(e, t, i, s), t.lineTo(o + l - u, a), t.quadraticCurveTo(o + l, a, o + l, a + u), r === "center" && n === "right" && this.drawCaret(e, t, i, s), t.lineTo(o + l, a + h - f), t.quadraticCurveTo(o + l, a + h, o + l - f, a + h), r === "bottom" && this.drawCaret(e, t, i, s), t.lineTo(o + d, a + h), t.quadraticCurveTo(o, a + h, o, a + h - d), r === "center" && n === "left" && this.drawCaret(e, t, i, s), t.lineTo(o, a + c), t.quadraticCurveTo(o, a, o + c, a), t.closePath(), t.fill(), s.borderWidth > 0 && t.stroke();
  }
  _updateAnimationTarget(e) {
    const t = this.chart, i = this.$animations, s = i && i.x, n = i && i.y;
    if (s || n) {
      const r = EA[e.position].call(this, this._active, this._eventPosition);
      if (!r)
        return;
      const o = this._size = Vh(this, e), a = Object.assign({}, r, this._size), l = zh(t, e, a), h = Gh(e, a, l, t);
      (s._to !== h.x || n._to !== h.y) && (this.xAlign = l.xAlign, this.yAlign = l.yAlign, this.width = o.width, this.height = o.height, this.caretX = r.x, this.caretY = r.y, this._resolveAnimations().update(this, h));
    }
  }
  _willRender() {
    return !!this.opacity;
  }
  draw(e) {
    const t = this.options.setContext(this.getContext());
    let i = this.opacity;
    if (!i)
      return;
    this._updateAnimationTarget(t);
    const s = {
      width: this.width,
      height: this.height
    }, n = {
      x: this.x,
      y: this.y
    };
    i = Math.abs(i) < 1e-3 ? 0 : i;
    const r = Kt(t.padding), o = this.title.length || this.beforeBody.length || this.body.length || this.afterBody.length || this.footer.length;
    t.enabled && o && (e.save(), e.globalAlpha = i, this.drawBackground(n, e, s, t), Zu(e, t.textDirection), n.y += r.top, this.drawTitle(n, e, t), this.drawBody(n, e, t), this.drawFooter(n, e, t), qu(e, t.textDirection), e.restore());
  }
  getActiveElements() {
    return this._active || [];
  }
  setActiveElements(e, t) {
    const i = this._active, s = e.map(({ datasetIndex: o, index: a }) => {
      const l = this.chart.getDatasetMeta(o);
      if (!l)
        throw new Error("Cannot find a dataset at index " + o);
      return {
        datasetIndex: o,
        element: l.data[a],
        index: a
      };
    }), n = !wr(i, s), r = this._positionChanged(s, t);
    (n || r) && (this._active = s, this._eventPosition = t, this._ignoreReplayEvents = !0, this.update(!0));
  }
  handleEvent(e, t, i = !0) {
    if (t && this._ignoreReplayEvents)
      return !1;
    this._ignoreReplayEvents = !1;
    const s = this.options, n = this._active || [], r = this._getActiveElements(e, n, t, i), o = this._positionChanged(r, e), a = t || !wr(r, n) || o;
    return a && (this._active = r, (s.enabled || s.external) && (this._eventPosition = {
      x: e.x,
      y: e.y
    }, this.update(!0, t))), a;
  }
  _getActiveElements(e, t, i, s) {
    const n = this.options;
    if (e.type === "mouseout")
      return [];
    if (!s)
      return t.filter((o) => this.chart.data.datasets[o.datasetIndex] && this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index) !== void 0);
    const r = this.chart.getElementsAtEventForMode(e, n.mode, n, i);
    return n.reverse && r.reverse(), r;
  }
  _positionChanged(e, t) {
    const { caretX: i, caretY: s, options: n } = this, r = EA[n.position].call(this, e, t);
    return r !== !1 && (i !== r.x || s !== r.y);
  }
}
D(Na, "positioners", EA);
var dB = {
  id: "tooltip",
  _element: Na,
  positioners: EA,
  afterInit(A, e, t) {
    t && (A.tooltip = new Na({
      chart: A,
      options: t
    }));
  },
  beforeUpdate(A, e, t) {
    A.tooltip && A.tooltip.initialize(t);
  },
  reset(A, e, t) {
    A.tooltip && A.tooltip.initialize(t);
  },
  afterDraw(A) {
    const e = A.tooltip;
    if (e && e._willRender()) {
      const t = {
        tooltip: e
      };
      if (A.notifyPlugins("beforeTooltipDraw", {
        ...t,
        cancelable: !0
      }) === !1)
        return;
      e.draw(A.ctx), A.notifyPlugins("afterTooltipDraw", t);
    }
  },
  afterEvent(A, e) {
    if (A.tooltip) {
      const t = e.replay;
      A.tooltip.handleEvent(e.event, t, e.inChartArea) && (e.changed = !0);
    }
  },
  defaults: {
    enabled: !0,
    external: null,
    position: "average",
    backgroundColor: "rgba(0,0,0,0.8)",
    titleColor: "#fff",
    titleFont: {
      weight: "bold"
    },
    titleSpacing: 2,
    titleMarginBottom: 6,
    titleAlign: "left",
    bodyColor: "#fff",
    bodySpacing: 2,
    bodyFont: {},
    bodyAlign: "left",
    footerColor: "#fff",
    footerSpacing: 2,
    footerMarginTop: 6,
    footerFont: {
      weight: "bold"
    },
    footerAlign: "left",
    padding: 6,
    caretPadding: 2,
    caretSize: 5,
    cornerRadius: 6,
    boxHeight: (A, e) => e.bodyFont.size,
    boxWidth: (A, e) => e.bodyFont.size,
    multiKeyBackground: "#fff",
    displayColors: !0,
    boxPadding: 0,
    borderColor: "rgba(0,0,0,0)",
    borderWidth: 0,
    animation: {
      duration: 400,
      easing: "easeOutQuart"
    },
    animations: {
      numbers: {
        type: "number",
        properties: [
          "x",
          "y",
          "width",
          "height",
          "caretX",
          "caretY"
        ]
      },
      opacity: {
        easing: "linear",
        duration: 200
      }
    },
    callbacks: pd
  },
  defaultRoutes: {
    bodyFont: "font",
    footerFont: "font",
    titleFont: "font"
  },
  descriptors: {
    _scriptable: (A) => A !== "filter" && A !== "itemSort" && A !== "external",
    _indexable: !1,
    callbacks: {
      _scriptable: !1,
      _indexable: !1
    },
    animation: {
      _fallback: !1
    },
    animations: {
      _fallback: "animation"
    }
  },
  additionalOptionScopes: [
    "interaction"
  ]
};
const fB = (A, e, t, i) => (typeof e == "string" ? (t = A.push(e) - 1, i.unshift({
  index: t,
  label: e
})) : isNaN(e) && (t = null), t);
function gB(A, e, t, i) {
  const s = A.indexOf(e);
  if (s === -1)
    return fB(A, e, t, i);
  const n = A.lastIndexOf(e);
  return s !== n ? t : s;
}
const pB = (A, e) => A === null ? null : It(Math.round(A), 0, e);
function Xh(A) {
  const e = this.getLabels();
  return A >= 0 && A < e.length ? e[A] : A;
}
class Ka extends Zs {
  constructor(e) {
    super(e), this._startValue = void 0, this._valueRange = 0, this._addedLabels = [];
  }
  init(e) {
    const t = this._addedLabels;
    if (t.length) {
      const i = this.getLabels();
      for (const { index: s, label: n } of t)
        i[s] === n && i.splice(s, 1);
      this._addedLabels = [];
    }
    super.init(e);
  }
  parse(e, t) {
    if (Qe(e))
      return null;
    const i = this.getLabels();
    return t = isFinite(t) && i[t] === e ? t : gB(i, e, de(t, e), this._addedLabels), pB(t, i.length - 1);
  }
  determineDataLimits() {
    const { minDefined: e, maxDefined: t } = this.getUserBounds();
    let { min: i, max: s } = this.getMinMax(!0);
    this.options.bounds === "ticks" && (e || (i = 0), t || (s = this.getLabels().length - 1)), this.min = i, this.max = s;
  }
  buildTicks() {
    const e = this.min, t = this.max, i = this.options.offset, s = [];
    let n = this.getLabels();
    n = e === 0 && t === n.length - 1 ? n : n.slice(e, t + 1), this._valueRange = Math.max(n.length - (i ? 0 : 1), 1), this._startValue = this.min - (i ? 0.5 : 0);
    for (let r = e; r <= t; r++)
      s.push({
        value: r
      });
    return s;
  }
  getLabelForValue(e) {
    return Xh.call(this, e);
  }
  configure() {
    super.configure(), this.isHorizontal() || (this._reversePixels = !this._reversePixels);
  }
  getPixelForValue(e) {
    return typeof e != "number" && (e = this.parse(e)), e === null ? NaN : this.getPixelForDecimal((e - this._startValue) / this._valueRange);
  }
  getPixelForTick(e) {
    const t = this.ticks;
    return e < 0 || e > t.length - 1 ? null : this.getPixelForValue(t[e].value);
  }
  getValueForPixel(e) {
    return Math.round(this._startValue + this.getDecimalForPixel(e) * this._valueRange);
  }
  getBasePixel() {
    return this.bottom;
  }
}
D(Ka, "id", "category"), D(Ka, "defaults", {
  ticks: {
    callback: Xh
  }
});
function mB(A, e) {
  const t = [], { bounds: s, step: n, min: r, max: o, precision: a, count: l, maxTicks: h, maxDigits: c, includeBounds: u } = A, d = n || 1, f = h - 1, { min: p, max: b } = e, w = !Qe(r), C = !Qe(o), x = !Qe(l), U = (b - p) / (c + 1);
  let E = ql((b - p) / f / d) * d, H, T, S, R;
  if (E < 1e-14 && !w && !C)
    return [
      {
        value: p
      },
      {
        value: b
      }
    ];
  R = Math.ceil(b / E) - Math.floor(p / E), R > f && (E = ql(R * E / f / d) * d), Qe(a) || (H = Math.pow(10, a), E = Math.ceil(E * H) / H), s === "ticks" ? (T = Math.floor(p / E) * E, S = Math.ceil(b / E) * E) : (T = p, S = b), w && C && n && ib((o - r) / n, E / 1e3) ? (R = Math.round(Math.min((o - r) / E, h)), E = (o - r) / R, T = r, S = o) : x ? (T = w ? r : T, S = C ? o : S, R = l - 1, E = (S - T) / R) : (R = (S - T) / E, SA(R, Math.round(R), E / 1e3) ? R = Math.round(R) : R = Math.ceil(R));
  const J = Math.max(eh(E), eh(T));
  H = Math.pow(10, Qe(a) ? J : a), T = Math.round(T * H) / H, S = Math.round(S * H) / H;
  let X = 0;
  for (w && (u && T !== r ? (t.push({
    value: r
  }), T < r && X++, SA(Math.round((T + X * E) * H) / H, r, Yh(r, U, A)) && X++) : T < r && X++); X < R; ++X) {
    const P = Math.round((T + X * E) * H) / H;
    if (C && P > o)
      break;
    t.push({
      value: P
    });
  }
  return C && u && S !== o ? t.length && SA(t[t.length - 1].value, o, Yh(o, U, A)) ? t[t.length - 1].value = o : t.push({
    value: o
  }) : (!C || S === o) && t.push({
    value: S
  }), t;
}
function Yh(A, e, { horizontal: t, minRotation: i }) {
  const s = ds(i), n = (t ? Math.sin(s) : Math.cos(s)) || 1e-3, r = 0.75 * e * ("" + A).length;
  return Math.min(e / n, r);
}
class bB extends Zs {
  constructor(e) {
    super(e), this.start = void 0, this.end = void 0, this._startValue = void 0, this._endValue = void 0, this._valueRange = 0;
  }
  parse(e, t) {
    return Qe(e) || (typeof e == "number" || e instanceof Number) && !isFinite(+e) ? null : +e;
  }
  handleTickRangeOptions() {
    const { beginAtZero: e } = this.options, { minDefined: t, maxDefined: i } = this.getUserBounds();
    let { min: s, max: n } = this;
    const r = (a) => s = t ? s : a, o = (a) => n = i ? n : a;
    if (e) {
      const a = Xs(s), l = Xs(n);
      a < 0 && l < 0 ? o(0) : a > 0 && l > 0 && r(0);
    }
    if (s === n) {
      let a = n === 0 ? 1 : Math.abs(n * 0.05);
      o(n + a), e || r(s - a);
    }
    this.min = s, this.max = n;
  }
  getTickLimit() {
    const e = this.options.ticks;
    let { maxTicksLimit: t, stepSize: i } = e, s;
    return i ? (s = Math.ceil(this.max / i) - Math.floor(this.min / i) + 1, s > 1e3 && (console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`), s = 1e3)) : (s = this.computeTickLimit(), t = t || 11), t && (s = Math.min(t, s)), s;
  }
  computeTickLimit() {
    return Number.POSITIVE_INFINITY;
  }
  buildTicks() {
    const e = this.options, t = e.ticks;
    let i = this.getTickLimit();
    i = Math.max(2, i);
    const s = {
      maxTicks: i,
      bounds: e.bounds,
      min: e.min,
      max: e.max,
      precision: t.precision,
      step: t.stepSize,
      count: t.count,
      maxDigits: this._maxDigits(),
      horizontal: this.isHorizontal(),
      minRotation: t.minRotation || 0,
      includeBounds: t.includeBounds !== !1
    }, n = this._range || this, r = mB(s, n);
    return e.bounds === "ticks" && sb(r, this, "value"), e.reverse ? (r.reverse(), this.start = this.max, this.end = this.min) : (this.start = this.min, this.end = this.max), r;
  }
  configure() {
    const e = this.ticks;
    let t = this.min, i = this.max;
    if (super.configure(), this.options.offset && e.length) {
      const s = (i - t) / Math.max(e.length - 1, 1) / 2;
      t -= s, i += s;
    }
    this._startValue = t, this._endValue = i, this._valueRange = i - t;
  }
  getLabelForValue(e) {
    return Vu(e, this.chart.options.locale, this.options.ticks.format);
  }
}
class Va extends bB {
  determineDataLimits() {
    const { min: e, max: t } = this.getMinMax(!0);
    this.min = Nt(e) ? e : 0, this.max = Nt(t) ? t : 1, this.handleTickRangeOptions();
  }
  computeTickLimit() {
    const e = this.isHorizontal(), t = e ? this.width : this.height, i = ds(this.options.ticks.minRotation), s = (e ? Math.sin(i) : Math.cos(i)) || 1e-3, n = this._resolveTickFontOptions(0);
    return Math.ceil(t / Math.min(40, n.lineHeight / s));
  }
  getPixelForValue(e) {
    return e === null ? NaN : this.getPixelForDecimal((e - this._startValue) / this._valueRange);
  }
  getValueForPixel(e) {
    return this._startValue + this.getDecimalForPixel(e) * this._valueRange;
  }
}
D(Va, "id", "linear"), D(Va, "defaults", {
  ticks: {
    callback: zu.formatters.numeric
  }
});
const Gr = {
  millisecond: {
    common: !0,
    size: 1,
    steps: 1e3
  },
  second: {
    common: !0,
    size: 1e3,
    steps: 60
  },
  minute: {
    common: !0,
    size: 6e4,
    steps: 60
  },
  hour: {
    common: !0,
    size: 36e5,
    steps: 24
  },
  day: {
    common: !0,
    size: 864e5,
    steps: 30
  },
  week: {
    common: !1,
    size: 6048e5,
    steps: 4
  },
  month: {
    common: !0,
    size: 2628e6,
    steps: 12
  },
  quarter: {
    common: !1,
    size: 7884e6,
    steps: 4
  },
  year: {
    common: !0,
    size: 3154e7
  }
}, vt = /* @__PURE__ */ Object.keys(Gr);
function Jh(A, e) {
  return A - e;
}
function $h(A, e) {
  if (Qe(e))
    return null;
  const t = A._adapter, { parser: i, round: s, isoWeekday: n } = A._parseOpts;
  let r = e;
  return typeof i == "function" && (r = i(r)), Nt(r) || (r = typeof i == "string" ? t.parse(r, i) : t.parse(r)), r === null ? null : (s && (r = s === "week" && ($A(n) || n === !0) ? t.startOf(r, "isoWeek", n) : t.startOf(r, s)), +r);
}
function Zh(A, e, t, i) {
  const s = vt.length;
  for (let n = vt.indexOf(A); n < s - 1; ++n) {
    const r = Gr[vt[n]], o = r.steps ? r.steps : Number.MAX_SAFE_INTEGER;
    if (r.common && Math.ceil((t - e) / (o * r.size)) <= i)
      return vt[n];
  }
  return vt[s - 1];
}
function wB(A, e, t, i, s) {
  for (let n = vt.length - 1; n >= vt.indexOf(t); n--) {
    const r = vt[n];
    if (Gr[r].common && A._adapter.diff(s, i, r) >= e - 1)
      return r;
  }
  return vt[t ? vt.indexOf(t) : 0];
}
function vB(A) {
  for (let e = vt.indexOf(A) + 1, t = vt.length; e < t; ++e)
    if (Gr[vt[e]].common)
      return vt[e];
}
function qh(A, e, t) {
  if (!t)
    A[e] = !0;
  else if (t.length) {
    const { lo: i, hi: s } = vl(t, e), n = t[i] >= e ? t[i] : t[s];
    A[n] = !0;
  }
}
function BB(A, e, t, i) {
  const s = A._adapter, n = +s.startOf(e[0].value, i), r = e[e.length - 1].value;
  let o, a;
  for (o = n; o <= r; o = +s.add(o, 1, i))
    a = t[o], a >= 0 && (e[a].major = !0);
  return e;
}
function ec(A, e, t) {
  const i = [], s = {}, n = e.length;
  let r, o;
  for (r = 0; r < n; ++r)
    o = e[r], s[o] = r, i.push({
      value: o,
      major: !1
    });
  return n === 0 || !t ? i : BB(A, i, s, t);
}
class xr extends Zs {
  constructor(e) {
    super(e), this._cache = {
      data: [],
      labels: [],
      all: []
    }, this._unit = "day", this._majorUnit = void 0, this._offsets = {}, this._normalized = !1, this._parseOpts = void 0;
  }
  init(e, t = {}) {
    const i = e.time || (e.time = {}), s = this._adapter = new Tw._date(e.adapters.date);
    s.init(t), DA(i.displayFormats, s.formats()), this._parseOpts = {
      parser: i.parser,
      round: i.round,
      isoWeekday: i.isoWeekday
    }, super.init(e), this._normalized = t.normalized;
  }
  parse(e, t) {
    return e === void 0 ? null : $h(this, e);
  }
  beforeLayout() {
    super.beforeLayout(), this._cache = {
      data: [],
      labels: [],
      all: []
    };
  }
  determineDataLimits() {
    const e = this.options, t = this._adapter, i = e.time.unit || "day";
    let { min: s, max: n, minDefined: r, maxDefined: o } = this.getUserBounds();
    function a(l) {
      !r && !isNaN(l.min) && (s = Math.min(s, l.min)), !o && !isNaN(l.max) && (n = Math.max(n, l.max));
    }
    (!r || !o) && (a(this._getLabelBounds()), (e.bounds !== "ticks" || e.ticks.source !== "labels") && a(this.getMinMax(!1))), s = Nt(s) && !isNaN(s) ? s : +t.startOf(Date.now(), i), n = Nt(n) && !isNaN(n) ? n : +t.endOf(Date.now(), i) + 1, this.min = Math.min(s, n - 1), this.max = Math.max(s + 1, n);
  }
  _getLabelBounds() {
    const e = this.getLabelTimestamps();
    let t = Number.POSITIVE_INFINITY, i = Number.NEGATIVE_INFINITY;
    return e.length && (t = e[0], i = e[e.length - 1]), {
      min: t,
      max: i
    };
  }
  buildTicks() {
    const e = this.options, t = e.time, i = e.ticks, s = i.source === "labels" ? this.getLabelTimestamps() : this._generate();
    e.bounds === "ticks" && s.length && (this.min = this._userMin || s[0], this.max = this._userMax || s[s.length - 1]);
    const n = this.min, r = this.max, o = lb(s, n, r);
    return this._unit = t.unit || (i.autoSkip ? Zh(t.minUnit, this.min, this.max, this._getLabelCapacity(n)) : wB(this, o.length, t.minUnit, this.min, this.max)), this._majorUnit = !i.major.enabled || this._unit === "year" ? void 0 : vB(this._unit), this.initOffsets(s), e.reverse && o.reverse(), ec(this, o, this._majorUnit);
  }
  afterAutoSkip() {
    this.options.offsetAfterAutoskip && this.initOffsets(this.ticks.map((e) => +e.value));
  }
  initOffsets(e = []) {
    let t = 0, i = 0, s, n;
    this.options.offset && e.length && (s = this.getDecimalForValue(e[0]), e.length === 1 ? t = 1 - s : t = (this.getDecimalForValue(e[1]) - s) / 2, n = this.getDecimalForValue(e[e.length - 1]), e.length === 1 ? i = n : i = (n - this.getDecimalForValue(e[e.length - 2])) / 2);
    const r = e.length < 3 ? 0.5 : 0.25;
    t = It(t, 0, r), i = It(i, 0, r), this._offsets = {
      start: t,
      end: i,
      factor: 1 / (t + 1 + i)
    };
  }
  _generate() {
    const e = this._adapter, t = this.min, i = this.max, s = this.options, n = s.time, r = n.unit || Zh(n.minUnit, t, i, this._getLabelCapacity(t)), o = de(s.ticks.stepSize, 1), a = r === "week" ? n.isoWeekday : !1, l = $A(a) || a === !0, h = {};
    let c = t, u, d;
    if (l && (c = +e.startOf(c, "isoWeek", a)), c = +e.startOf(c, l ? "day" : r), e.diff(i, t, r) > 1e5 * o)
      throw new Error(t + " and " + i + " are too far apart with stepSize of " + o + " " + r);
    const f = s.ticks.source === "data" && this.getDataTimestamps();
    for (u = c, d = 0; u < i; u = +e.add(u, o, r), d++)
      qh(h, u, f);
    return (u === i || s.bounds === "ticks" || d === 1) && qh(h, u, f), Object.keys(h).sort(Jh).map((p) => +p);
  }
  getLabelForValue(e) {
    const t = this._adapter, i = this.options.time;
    return i.tooltipFormat ? t.format(e, i.tooltipFormat) : t.format(e, i.displayFormats.datetime);
  }
  format(e, t) {
    const s = this.options.time.displayFormats, n = this._unit, r = t || s[n];
    return this._adapter.format(e, r);
  }
  _tickFormatFunction(e, t, i, s) {
    const n = this.options, r = n.ticks.callback;
    if (r)
      return Ue(r, [
        e,
        t,
        i
      ], this);
    const o = n.time.displayFormats, a = this._unit, l = this._majorUnit, h = a && o[a], c = l && o[l], u = i[t], d = l && c && u && u.major;
    return this._adapter.format(e, s || (d ? c : h));
  }
  generateTickLabels(e) {
    let t, i, s;
    for (t = 0, i = e.length; t < i; ++t)
      s = e[t], s.label = this._tickFormatFunction(s.value, t, e);
  }
  getDecimalForValue(e) {
    return e === null ? NaN : (e - this.min) / (this.max - this.min);
  }
  getPixelForValue(e) {
    const t = this._offsets, i = this.getDecimalForValue(e);
    return this.getPixelForDecimal((t.start + i) * t.factor);
  }
  getValueForPixel(e) {
    const t = this._offsets, i = this.getDecimalForPixel(e) / t.factor - t.end;
    return this.min + i * (this.max - this.min);
  }
  _getLabelSize(e) {
    const t = this.options.ticks, i = this.ctx.measureText(e).width, s = ds(this.isHorizontal() ? t.maxRotation : t.minRotation), n = Math.cos(s), r = Math.sin(s), o = this._resolveTickFontOptions(0).size;
    return {
      w: i * n + o * r,
      h: i * r + o * n
    };
  }
  _getLabelCapacity(e) {
    const t = this.options.time, i = t.displayFormats, s = i[t.unit] || i.millisecond, n = this._tickFormatFunction(e, 0, ec(this, [
      e
    ], this._majorUnit), s), r = this._getLabelSize(n), o = Math.floor(this.isHorizontal() ? this.width / r.w : this.height / r.h) - 1;
    return o > 0 ? o : 1;
  }
  getDataTimestamps() {
    let e = this._cache.data || [], t, i;
    if (e.length)
      return e;
    const s = this.getMatchingVisibleMetas();
    if (this._normalized && s.length)
      return this._cache.data = s[0].controller.getAllParsedValues(this);
    for (t = 0, i = s.length; t < i; ++t)
      e = e.concat(s[t].controller.getAllParsedValues(this));
    return this._cache.data = this.normalize(e);
  }
  getLabelTimestamps() {
    const e = this._cache.labels || [];
    let t, i;
    if (e.length)
      return e;
    const s = this.getLabels();
    for (t = 0, i = s.length; t < i; ++t)
      e.push($h(this, s[t]));
    return this._cache.labels = this._normalized ? e : this.normalize(e);
  }
  normalize(e) {
    return cb(e.sort(Jh));
  }
}
D(xr, "id", "time"), D(xr, "defaults", {
  bounds: "data",
  adapters: {},
  time: {
    parser: !1,
    unit: !1,
    round: !1,
    isoWeekday: !1,
    minUnit: "millisecond",
    displayFormats: {}
  },
  ticks: {
    source: "auto",
    callback: !1,
    major: {
      enabled: !1
    }
  }
});
function In(A, e, t) {
  let i = 0, s = A.length - 1, n, r, o, a;
  t ? (e >= A[i].pos && e <= A[s].pos && ({ lo: i, hi: s } = fs(A, "pos", e)), { pos: n, time: o } = A[i], { pos: r, time: a } = A[s]) : (e >= A[i].time && e <= A[s].time && ({ lo: i, hi: s } = fs(A, "time", e)), { time: n, pos: o } = A[i], { time: r, pos: a } = A[s]);
  const l = r - n;
  return l ? o + (a - o) * (e - n) / l : o;
}
class tc extends xr {
  constructor(e) {
    super(e), this._table = [], this._minPos = void 0, this._tableRange = void 0;
  }
  initOffsets() {
    const e = this._getTimestampsForTable(), t = this._table = this.buildLookupTable(e);
    this._minPos = In(t, this.min), this._tableRange = In(t, this.max) - this._minPos, super.initOffsets(e);
  }
  buildLookupTable(e) {
    const { min: t, max: i } = this, s = [], n = [];
    let r, o, a, l, h;
    for (r = 0, o = e.length; r < o; ++r)
      l = e[r], l >= t && l <= i && s.push(l);
    if (s.length < 2)
      return [
        {
          time: t,
          pos: 0
        },
        {
          time: i,
          pos: 1
        }
      ];
    for (r = 0, o = s.length; r < o; ++r)
      h = s[r + 1], a = s[r - 1], l = s[r], Math.round((h + a) / 2) !== l && n.push({
        time: l,
        pos: r / (o - 1)
      });
    return n;
  }
  _generate() {
    const e = this.min, t = this.max;
    let i = super.getDataTimestamps();
    return (!i.includes(e) || !i.length) && i.splice(0, 0, e), (!i.includes(t) || i.length === 1) && i.push(t), i.sort((s, n) => s - n);
  }
  _getTimestampsForTable() {
    let e = this._cache.all || [];
    if (e.length)
      return e;
    const t = this.getDataTimestamps(), i = this.getLabelTimestamps();
    return t.length && i.length ? e = this.normalize(t.concat(i)) : e = t.length ? t : i, e = this._cache.all = e, e;
  }
  getDecimalForValue(e) {
    return (In(this._table, e) - this._minPos) / this._tableRange;
  }
  getValueForPixel(e) {
    const t = this._offsets, i = this.getDecimalForPixel(e) / t.factor - t.end;
    return In(this._table, i * this._tableRange + this._minPos, !0);
  }
}
D(tc, "id", "timeseries"), D(tc, "defaults", xr.defaults);
const md = {
  data: {
    type: Object,
    required: !0
  },
  options: {
    type: Object,
    default: () => ({})
  },
  plugins: {
    type: Array,
    default: () => []
  },
  datasetIdKey: {
    type: String,
    default: "label"
  },
  updateMode: {
    type: String,
    default: void 0
  }
}, CB = {
  ariaLabel: {
    type: String
  },
  ariaDescribedby: {
    type: String
  }
}, yB = {
  type: {
    type: String,
    required: !0
  },
  destroyDelay: {
    type: Number,
    default: 0
    // No delay by default
  },
  ...md,
  ...CB
}, EB = zf[0] === "2" ? (A, e) => Object.assign(A, {
  attrs: e
}) : (A, e) => Object.assign(A, e);
function Us(A) {
  return ou(A) ? na(A) : A;
}
function FB(A) {
  let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : A;
  return ou(e) ? new Proxy(A, {}) : A;
}
function xB(A, e) {
  const t = A.options;
  t && e && Object.assign(t, e);
}
function bd(A, e) {
  A.labels = e;
}
function wd(A, e, t) {
  const i = [];
  A.datasets = e.map((s) => {
    const n = A.datasets.find((r) => r[t] === s[t]);
    return !n || !s.data || i.includes(n) ? {
      ...s
    } : (i.push(n), Object.assign(n, s), n);
  });
}
function QB(A, e) {
  const t = {
    labels: [],
    datasets: []
  };
  return bd(t, A.labels), wd(t, A.datasets, e), t;
}
const UB = kr({
  props: yB,
  setup(A, e) {
    let { expose: t, slots: i } = e;
    const s = te(null), n = ru(null);
    t({
      chart: n
    });
    const r = () => {
      if (!s.value) return;
      const { type: l, data: h, options: c, plugins: u, datasetIdKey: d } = A, f = QB(h, d), p = FB(f, h);
      n.value = new zr(s.value, {
        type: l,
        data: p,
        options: {
          ...c
        },
        plugins: u
      });
    }, o = () => {
      const l = na(n.value);
      l && (A.destroyDelay > 0 ? setTimeout(() => {
        l.destroy(), n.value = null;
      }, A.destroyDelay) : (l.destroy(), n.value = null));
    }, a = (l) => {
      l.update(A.updateMode);
    };
    return Aa(r), Vf(o), jt([
      () => A.options,
      () => A.data
    ], (l, h) => {
      let [c, u] = l, [d, f] = h;
      const p = na(n.value);
      if (!p)
        return;
      let b = !1;
      if (c) {
        const w = Us(c), C = Us(d);
        w && w !== C && (xB(p, w), b = !0);
      }
      if (u) {
        const w = Us(u.labels), C = Us(f.labels), x = Us(u.datasets), U = Us(f.datasets);
        w !== C && (bd(p.config.data, w), b = !0), x && x !== U && (wd(p.config.data, x, A.datasetIdKey), b = !0);
      }
      b && Gt(() => {
        a(p);
      });
    }, {
      deep: !0
    }), () => sa("canvas", {
      role: "img",
      "aria-label": A.ariaLabel,
      "aria-describedby": A.ariaDescribedby,
      ref: s
    }, [
      sa("p", {}, [
        i.default ? i.default() : ""
      ])
    ]);
  }
});
function _B(A, e) {
  return zr.register(e), kr({
    props: md,
    setup(t, i) {
      let { expose: s } = i;
      const n = ru(null), r = (o) => {
        n.value = o == null ? void 0 : o.chart;
      };
      return s({
        chart: n
      }), () => sa(UB, EB({
        ref: r
      }, {
        type: A,
        ...t
      }));
    }
  });
}
const ic = /* @__PURE__ */ _B("line", cr);
/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var za = function(A, e) {
  return za = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, i) {
    t.__proto__ = i;
  } || function(t, i) {
    for (var s in i) Object.prototype.hasOwnProperty.call(i, s) && (t[s] = i[s]);
  }, za(A, e);
};
function Jt(A, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");
  za(A, e);
  function t() {
    this.constructor = A;
  }
  A.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());
}
var Ga = function() {
  return Ga = Object.assign || function(e) {
    for (var t, i = 1, s = arguments.length; i < s; i++) {
      t = arguments[i];
      for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
    }
    return e;
  }, Ga.apply(this, arguments);
};
function ut(A, e, t, i) {
  function s(n) {
    return n instanceof t ? n : new t(function(r) {
      r(n);
    });
  }
  return new (t || (t = Promise))(function(n, r) {
    function o(h) {
      try {
        l(i.next(h));
      } catch (c) {
        r(c);
      }
    }
    function a(h) {
      try {
        l(i.throw(h));
      } catch (c) {
        r(c);
      }
    }
    function l(h) {
      h.done ? n(h.value) : s(h.value).then(o, a);
    }
    l((i = i.apply(A, [])).next());
  });
}
function At(A, e) {
  var t = { label: 0, sent: function() {
    if (n[0] & 1) throw n[1];
    return n[1];
  }, trys: [], ops: [] }, i, s, n, r;
  return r = { next: o(0), throw: o(1), return: o(2) }, typeof Symbol == "function" && (r[Symbol.iterator] = function() {
    return this;
  }), r;
  function o(l) {
    return function(h) {
      return a([l, h]);
    };
  }
  function a(l) {
    if (i) throw new TypeError("Generator is already executing.");
    for (; t; ) try {
      if (i = 1, s && (n = l[0] & 2 ? s.return : l[0] ? s.throw || ((n = s.return) && n.call(s), 0) : s.next) && !(n = n.call(s, l[1])).done) return n;
      switch (s = 0, n && (l = [l[0] & 2, n.value]), l[0]) {
        case 0:
        case 1:
          n = l;
          break;
        case 4:
          return t.label++, { value: l[1], done: !1 };
        case 5:
          t.label++, s = l[1], l = [0];
          continue;
        case 7:
          l = t.ops.pop(), t.trys.pop();
          continue;
        default:
          if (n = t.trys, !(n = n.length > 0 && n[n.length - 1]) && (l[0] === 6 || l[0] === 2)) {
            t = 0;
            continue;
          }
          if (l[0] === 3 && (!n || l[1] > n[0] && l[1] < n[3])) {
            t.label = l[1];
            break;
          }
          if (l[0] === 6 && t.label < n[1]) {
            t.label = n[1], n = l;
            break;
          }
          if (n && t.label < n[2]) {
            t.label = n[2], t.ops.push(l);
            break;
          }
          n[2] && t.ops.pop(), t.trys.pop();
          continue;
      }
      l = e.call(A, t);
    } catch (h) {
      l = [6, h], s = 0;
    } finally {
      i = n = 0;
    }
    if (l[0] & 5) throw l[1];
    return { value: l[0] ? l[1] : void 0, done: !0 };
  }
}
function kn(A, e, t) {
  if (arguments.length === 2) for (var i = 0, s = e.length, n; i < s; i++)
    (n || !(i in e)) && (n || (n = Array.prototype.slice.call(e, 0, i)), n[i] = e[i]);
  return A.concat(n || e);
}
var Bi = (
  /** @class */
  function() {
    function A(e, t, i, s) {
      this.left = e, this.top = t, this.width = i, this.height = s;
    }
    return A.prototype.add = function(e, t, i, s) {
      return new A(this.left + e, this.top + t, this.width + i, this.height + s);
    }, A.fromClientRect = function(e, t) {
      return new A(t.left + e.windowBounds.left, t.top + e.windowBounds.top, t.width, t.height);
    }, A.fromDOMRectList = function(e, t) {
      var i = Array.from(t).find(function(s) {
        return s.width !== 0;
      });
      return i ? new A(i.left + e.windowBounds.left, i.top + e.windowBounds.top, i.width, i.height) : A.EMPTY;
    }, A.EMPTY = new A(0, 0, 0, 0), A;
  }()
), Wr = function(A, e) {
  return Bi.fromClientRect(A, e.getBoundingClientRect());
}, HB = function(A) {
  var e = A.body, t = A.documentElement;
  if (!e || !t)
    throw new Error("Unable to get document size");
  var i = Math.max(Math.max(e.scrollWidth, t.scrollWidth), Math.max(e.offsetWidth, t.offsetWidth), Math.max(e.clientWidth, t.clientWidth)), s = Math.max(Math.max(e.scrollHeight, t.scrollHeight), Math.max(e.offsetHeight, t.offsetHeight), Math.max(e.clientHeight, t.clientHeight));
  return new Bi(0, 0, i, s);
}, jr = function(A) {
  for (var e = [], t = 0, i = A.length; t < i; ) {
    var s = A.charCodeAt(t++);
    if (s >= 55296 && s <= 56319 && t < i) {
      var n = A.charCodeAt(t++);
      (n & 64512) === 56320 ? e.push(((s & 1023) << 10) + (n & 1023) + 65536) : (e.push(s), t--);
    } else
      e.push(s);
  }
  return e;
}, Ie = function() {
  for (var A = [], e = 0; e < arguments.length; e++)
    A[e] = arguments[e];
  if (String.fromCodePoint)
    return String.fromCodePoint.apply(String, A);
  var t = A.length;
  if (!t)
    return "";
  for (var i = [], s = -1, n = ""; ++s < t; ) {
    var r = A[s];
    r <= 65535 ? i.push(r) : (r -= 65536, i.push((r >> 10) + 55296, r % 1024 + 56320)), (s + 1 === t || i.length > 16384) && (n += String.fromCharCode.apply(String, i), i.length = 0);
  }
  return n;
}, sc = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", MB = typeof Uint8Array > "u" ? [] : new Uint8Array(256);
for (var On = 0; On < sc.length; On++)
  MB[sc.charCodeAt(On)] = On;
var Ac = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", FA = typeof Uint8Array > "u" ? [] : new Uint8Array(256);
for (var Pn = 0; Pn < Ac.length; Pn++)
  FA[Ac.charCodeAt(Pn)] = Pn;
var DB = function(A) {
  var e = A.length * 0.75, t = A.length, i, s = 0, n, r, o, a;
  A[A.length - 1] === "=" && (e--, A[A.length - 2] === "=" && e--);
  var l = typeof ArrayBuffer < "u" && typeof Uint8Array < "u" && typeof Uint8Array.prototype.slice < "u" ? new ArrayBuffer(e) : new Array(e), h = Array.isArray(l) ? l : new Uint8Array(l);
  for (i = 0; i < t; i += 4)
    n = FA[A.charCodeAt(i)], r = FA[A.charCodeAt(i + 1)], o = FA[A.charCodeAt(i + 2)], a = FA[A.charCodeAt(i + 3)], h[s++] = n << 2 | r >> 4, h[s++] = (r & 15) << 4 | o >> 2, h[s++] = (o & 3) << 6 | a & 63;
  return l;
}, SB = function(A) {
  for (var e = A.length, t = [], i = 0; i < e; i += 2)
    t.push(A[i + 1] << 8 | A[i]);
  return t;
}, TB = function(A) {
  for (var e = A.length, t = [], i = 0; i < e; i += 4)
    t.push(A[i + 3] << 24 | A[i + 2] << 16 | A[i + 1] << 8 | A[i]);
  return t;
}, bs = 5, Ml = 11, _o = 2, LB = Ml - bs, vd = 65536 >> bs, RB = 1 << bs, Ho = RB - 1, IB = 1024 >> bs, kB = vd + IB, OB = kB, PB = 32, NB = OB + PB, KB = 65536 >> Ml, VB = 1 << LB, zB = VB - 1, nc = function(A, e, t) {
  return A.slice ? A.slice(e, t) : new Uint16Array(Array.prototype.slice.call(A, e, t));
}, GB = function(A, e, t) {
  return A.slice ? A.slice(e, t) : new Uint32Array(Array.prototype.slice.call(A, e, t));
}, WB = function(A, e) {
  var t = DB(A), i = Array.isArray(t) ? TB(t) : new Uint32Array(t), s = Array.isArray(t) ? SB(t) : new Uint16Array(t), n = 24, r = nc(s, n / 2, i[4] / 2), o = i[5] === 2 ? nc(s, (n + i[4]) / 2) : GB(i, Math.ceil((n + i[4]) / 4));
  return new jB(i[0], i[1], i[2], i[3], r, o);
}, jB = (
  /** @class */
  function() {
    function A(e, t, i, s, n, r) {
      this.initialValue = e, this.errorValue = t, this.highStart = i, this.highValueIndex = s, this.index = n, this.data = r;
    }
    return A.prototype.get = function(e) {
      var t;
      if (e >= 0) {
        if (e < 55296 || e > 56319 && e <= 65535)
          return t = this.index[e >> bs], t = (t << _o) + (e & Ho), this.data[t];
        if (e <= 65535)
          return t = this.index[vd + (e - 55296 >> bs)], t = (t << _o) + (e & Ho), this.data[t];
        if (e < this.highStart)
          return t = NB - KB + (e >> Ml), t = this.index[t], t += e >> bs & zB, t = this.index[t], t = (t << _o) + (e & Ho), this.data[t];
        if (e <= 1114111)
          return this.data[this.highValueIndex];
      }
      return this.errorValue;
    }, A;
  }()
), rc = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", XB = typeof Uint8Array > "u" ? [] : new Uint8Array(256);
for (var Nn = 0; Nn < rc.length; Nn++)
  XB[rc.charCodeAt(Nn)] = Nn;
var YB = "KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==", oc = 50, JB = 1, Bd = 2, Cd = 3, $B = 4, ZB = 5, ac = 7, yd = 8, lc = 9, Ni = 10, Wa = 11, hc = 12, ja = 13, qB = 14, xA = 15, Xa = 16, Kn = 17, pA = 18, eC = 19, cc = 20, Ya = 21, mA = 22, Mo = 23, _s = 24, Qt = 25, QA = 26, UA = 27, Hs = 28, tC = 29, as = 30, iC = 31, Vn = 32, zn = 33, Ja = 34, $a = 35, Za = 36, tn = 37, qa = 38, gr = 39, pr = 40, Do = 41, Ed = 42, sC = 43, AC = [9001, 65288], Fd = "!", he = "", Gn = "", el = WB(YB), ui = [as, Za], tl = [JB, Bd, Cd, ZB], xd = [Ni, yd], uc = [UA, QA], nC = tl.concat(xd), dc = [qa, gr, pr, Ja, $a], rC = [xA, ja], oC = function(A, e) {
  e === void 0 && (e = "strict");
  var t = [], i = [], s = [];
  return A.forEach(function(n, r) {
    var o = el.get(n);
    if (o > oc ? (s.push(!0), o -= oc) : s.push(!1), ["normal", "auto", "loose"].indexOf(e) !== -1 && [8208, 8211, 12316, 12448].indexOf(n) !== -1)
      return i.push(r), t.push(Xa);
    if (o === $B || o === Wa) {
      if (r === 0)
        return i.push(r), t.push(as);
      var a = t[r - 1];
      return nC.indexOf(a) === -1 ? (i.push(i[r - 1]), t.push(a)) : (i.push(r), t.push(as));
    }
    if (i.push(r), o === iC)
      return t.push(e === "strict" ? Ya : tn);
    if (o === Ed || o === tC)
      return t.push(as);
    if (o === sC)
      return n >= 131072 && n <= 196605 || n >= 196608 && n <= 262141 ? t.push(tn) : t.push(as);
    t.push(o);
  }), [i, t, s];
}, So = function(A, e, t, i) {
  var s = i[t];
  if (Array.isArray(A) ? A.indexOf(s) !== -1 : A === s)
    for (var n = t; n <= i.length; ) {
      n++;
      var r = i[n];
      if (r === e)
        return !0;
      if (r !== Ni)
        break;
    }
  if (s === Ni)
    for (var n = t; n > 0; ) {
      n--;
      var o = i[n];
      if (Array.isArray(A) ? A.indexOf(o) !== -1 : A === o)
        for (var a = t; a <= i.length; ) {
          a++;
          var r = i[a];
          if (r === e)
            return !0;
          if (r !== Ni)
            break;
        }
      if (o !== Ni)
        break;
    }
  return !1;
}, fc = function(A, e) {
  for (var t = A; t >= 0; ) {
    var i = e[t];
    if (i === Ni)
      t--;
    else
      return i;
  }
  return 0;
}, aC = function(A, e, t, i, s) {
  if (t[i] === 0)
    return he;
  var n = i - 1;
  if (Array.isArray(s) && s[n] === !0)
    return he;
  var r = n - 1, o = n + 1, a = e[n], l = r >= 0 ? e[r] : 0, h = e[o];
  if (a === Bd && h === Cd)
    return he;
  if (tl.indexOf(a) !== -1)
    return Fd;
  if (tl.indexOf(h) !== -1 || xd.indexOf(h) !== -1)
    return he;
  if (fc(n, e) === yd)
    return Gn;
  if (el.get(A[n]) === Wa || (a === Vn || a === zn) && el.get(A[o]) === Wa || a === ac || h === ac || a === lc || [Ni, ja, xA].indexOf(a) === -1 && h === lc || [Kn, pA, eC, _s, Hs].indexOf(h) !== -1 || fc(n, e) === mA || So(Mo, mA, n, e) || So([Kn, pA], Ya, n, e) || So(hc, hc, n, e))
    return he;
  if (a === Ni)
    return Gn;
  if (a === Mo || h === Mo)
    return he;
  if (h === Xa || a === Xa)
    return Gn;
  if ([ja, xA, Ya].indexOf(h) !== -1 || a === qB || l === Za && rC.indexOf(a) !== -1 || a === Hs && h === Za || h === cc || ui.indexOf(h) !== -1 && a === Qt || ui.indexOf(a) !== -1 && h === Qt || a === UA && [tn, Vn, zn].indexOf(h) !== -1 || [tn, Vn, zn].indexOf(a) !== -1 && h === QA || ui.indexOf(a) !== -1 && uc.indexOf(h) !== -1 || uc.indexOf(a) !== -1 && ui.indexOf(h) !== -1 || // (PR | PO)  ( OP | HY )? NU
  [UA, QA].indexOf(a) !== -1 && (h === Qt || [mA, xA].indexOf(h) !== -1 && e[o + 1] === Qt) || // ( OP | HY )  NU
  [mA, xA].indexOf(a) !== -1 && h === Qt || // NU 	(NU | SY | IS)
  a === Qt && [Qt, Hs, _s].indexOf(h) !== -1)
    return he;
  if ([Qt, Hs, _s, Kn, pA].indexOf(h) !== -1)
    for (var c = n; c >= 0; ) {
      var u = e[c];
      if (u === Qt)
        return he;
      if ([Hs, _s].indexOf(u) !== -1)
        c--;
      else
        break;
    }
  if ([UA, QA].indexOf(h) !== -1)
    for (var c = [Kn, pA].indexOf(a) !== -1 ? r : n; c >= 0; ) {
      var u = e[c];
      if (u === Qt)
        return he;
      if ([Hs, _s].indexOf(u) !== -1)
        c--;
      else
        break;
    }
  if (qa === a && [qa, gr, Ja, $a].indexOf(h) !== -1 || [gr, Ja].indexOf(a) !== -1 && [gr, pr].indexOf(h) !== -1 || [pr, $a].indexOf(a) !== -1 && h === pr || dc.indexOf(a) !== -1 && [cc, QA].indexOf(h) !== -1 || dc.indexOf(h) !== -1 && a === UA || ui.indexOf(a) !== -1 && ui.indexOf(h) !== -1 || a === _s && ui.indexOf(h) !== -1 || ui.concat(Qt).indexOf(a) !== -1 && h === mA && AC.indexOf(A[o]) === -1 || ui.concat(Qt).indexOf(h) !== -1 && a === pA)
    return he;
  if (a === Do && h === Do) {
    for (var d = t[n], f = 1; d > 0 && (d--, e[d] === Do); )
      f++;
    if (f % 2 !== 0)
      return he;
  }
  return a === Vn && h === zn ? he : Gn;
}, lC = function(A, e) {
  e || (e = { lineBreak: "normal", wordBreak: "normal" });
  var t = oC(A, e.lineBreak), i = t[0], s = t[1], n = t[2];
  (e.wordBreak === "break-all" || e.wordBreak === "break-word") && (s = s.map(function(o) {
    return [Qt, as, Ed].indexOf(o) !== -1 ? tn : o;
  }));
  var r = e.wordBreak === "keep-all" ? n.map(function(o, a) {
    return o && A[a] >= 19968 && A[a] <= 40959;
  }) : void 0;
  return [i, s, r];
}, hC = (
  /** @class */
  function() {
    function A(e, t, i, s) {
      this.codePoints = e, this.required = t === Fd, this.start = i, this.end = s;
    }
    return A.prototype.slice = function() {
      return Ie.apply(void 0, this.codePoints.slice(this.start, this.end));
    }, A;
  }()
), cC = function(A, e) {
  var t = jr(A), i = lC(t, e), s = i[0], n = i[1], r = i[2], o = t.length, a = 0, l = 0;
  return {
    next: function() {
      if (l >= o)
        return { done: !0, value: null };
      for (var h = he; l < o && (h = aC(t, n, s, ++l, r)) === he; )
        ;
      if (h !== he || l === o) {
        var c = new hC(t, h, a, l);
        return a = l, { value: c, done: !1 };
      }
      return { done: !0, value: null };
    }
  };
}, uC = 1, dC = 2, an = 4, gc = 8, Qr = 10, pc = 47, kA = 92, fC = 9, gC = 32, Wn = 34, bA = 61, pC = 35, mC = 36, bC = 37, jn = 39, Xn = 40, wA = 41, wC = 95, bt = 45, vC = 33, BC = 60, CC = 62, yC = 64, EC = 91, FC = 93, xC = 61, QC = 123, Yn = 63, UC = 125, mc = 124, _C = 126, HC = 128, bc = 65533, To = 42, gs = 43, MC = 44, DC = 58, SC = 59, sn = 46, TC = 0, LC = 8, RC = 11, IC = 14, kC = 31, OC = 127, ii = -1, Qd = 48, Ud = 97, _d = 101, PC = 102, NC = 117, KC = 122, Hd = 65, Md = 69, Dd = 70, VC = 85, zC = 90, at = function(A) {
  return A >= Qd && A <= 57;
}, GC = function(A) {
  return A >= 55296 && A <= 57343;
}, Ms = function(A) {
  return at(A) || A >= Hd && A <= Dd || A >= Ud && A <= PC;
}, WC = function(A) {
  return A >= Ud && A <= KC;
}, jC = function(A) {
  return A >= Hd && A <= zC;
}, XC = function(A) {
  return WC(A) || jC(A);
}, YC = function(A) {
  return A >= HC;
}, Jn = function(A) {
  return A === Qr || A === fC || A === gC;
}, Ur = function(A) {
  return XC(A) || YC(A) || A === wC;
}, wc = function(A) {
  return Ur(A) || at(A) || A === bt;
}, JC = function(A) {
  return A >= TC && A <= LC || A === RC || A >= IC && A <= kC || A === OC;
}, Mi = function(A, e) {
  return A !== kA ? !1 : e !== Qr;
}, $n = function(A, e, t) {
  return A === bt ? Ur(e) || Mi(e, t) : Ur(A) ? !0 : !!(A === kA && Mi(A, e));
}, Lo = function(A, e, t) {
  return A === gs || A === bt ? at(e) ? !0 : e === sn && at(t) : at(A === sn ? e : A);
}, $C = function(A) {
  var e = 0, t = 1;
  (A[e] === gs || A[e] === bt) && (A[e] === bt && (t = -1), e++);
  for (var i = []; at(A[e]); )
    i.push(A[e++]);
  var s = i.length ? parseInt(Ie.apply(void 0, i), 10) : 0;
  A[e] === sn && e++;
  for (var n = []; at(A[e]); )
    n.push(A[e++]);
  var r = n.length, o = r ? parseInt(Ie.apply(void 0, n), 10) : 0;
  (A[e] === Md || A[e] === _d) && e++;
  var a = 1;
  (A[e] === gs || A[e] === bt) && (A[e] === bt && (a = -1), e++);
  for (var l = []; at(A[e]); )
    l.push(A[e++]);
  var h = l.length ? parseInt(Ie.apply(void 0, l), 10) : 0;
  return t * (s + o * Math.pow(10, -r)) * Math.pow(10, a * h);
}, ZC = {
  type: 2
  /* LEFT_PARENTHESIS_TOKEN */
}, qC = {
  type: 3
  /* RIGHT_PARENTHESIS_TOKEN */
}, ey = {
  type: 4
  /* COMMA_TOKEN */
}, ty = {
  type: 13
  /* SUFFIX_MATCH_TOKEN */
}, iy = {
  type: 8
  /* PREFIX_MATCH_TOKEN */
}, sy = {
  type: 21
  /* COLUMN_TOKEN */
}, Ay = {
  type: 9
  /* DASH_MATCH_TOKEN */
}, ny = {
  type: 10
  /* INCLUDE_MATCH_TOKEN */
}, ry = {
  type: 11
  /* LEFT_CURLY_BRACKET_TOKEN */
}, oy = {
  type: 12
  /* RIGHT_CURLY_BRACKET_TOKEN */
}, ay = {
  type: 14
  /* SUBSTRING_MATCH_TOKEN */
}, Zn = {
  type: 23
  /* BAD_URL_TOKEN */
}, ly = {
  type: 1
  /* BAD_STRING_TOKEN */
}, hy = {
  type: 25
  /* CDO_TOKEN */
}, cy = {
  type: 24
  /* CDC_TOKEN */
}, uy = {
  type: 26
  /* COLON_TOKEN */
}, dy = {
  type: 27
  /* SEMICOLON_TOKEN */
}, fy = {
  type: 28
  /* LEFT_SQUARE_BRACKET_TOKEN */
}, gy = {
  type: 29
  /* RIGHT_SQUARE_BRACKET_TOKEN */
}, py = {
  type: 31
  /* WHITESPACE_TOKEN */
}, il = {
  type: 32
  /* EOF_TOKEN */
}, Sd = (
  /** @class */
  function() {
    function A() {
      this._value = [];
    }
    return A.prototype.write = function(e) {
      this._value = this._value.concat(jr(e));
    }, A.prototype.read = function() {
      for (var e = [], t = this.consumeToken(); t !== il; )
        e.push(t), t = this.consumeToken();
      return e;
    }, A.prototype.consumeToken = function() {
      var e = this.consumeCodePoint();
      switch (e) {
        case Wn:
          return this.consumeStringToken(Wn);
        case pC:
          var t = this.peekCodePoint(0), i = this.peekCodePoint(1), s = this.peekCodePoint(2);
          if (wc(t) || Mi(i, s)) {
            var n = $n(t, i, s) ? dC : uC, r = this.consumeName();
            return { type: 5, value: r, flags: n };
          }
          break;
        case mC:
          if (this.peekCodePoint(0) === bA)
            return this.consumeCodePoint(), ty;
          break;
        case jn:
          return this.consumeStringToken(jn);
        case Xn:
          return ZC;
        case wA:
          return qC;
        case To:
          if (this.peekCodePoint(0) === bA)
            return this.consumeCodePoint(), ay;
          break;
        case gs:
          if (Lo(e, this.peekCodePoint(0), this.peekCodePoint(1)))
            return this.reconsumeCodePoint(e), this.consumeNumericToken();
          break;
        case MC:
          return ey;
        case bt:
          var o = e, a = this.peekCodePoint(0), l = this.peekCodePoint(1);
          if (Lo(o, a, l))
            return this.reconsumeCodePoint(e), this.consumeNumericToken();
          if ($n(o, a, l))
            return this.reconsumeCodePoint(e), this.consumeIdentLikeToken();
          if (a === bt && l === CC)
            return this.consumeCodePoint(), this.consumeCodePoint(), cy;
          break;
        case sn:
          if (Lo(e, this.peekCodePoint(0), this.peekCodePoint(1)))
            return this.reconsumeCodePoint(e), this.consumeNumericToken();
          break;
        case pc:
          if (this.peekCodePoint(0) === To)
            for (this.consumeCodePoint(); ; ) {
              var h = this.consumeCodePoint();
              if (h === To && (h = this.consumeCodePoint(), h === pc))
                return this.consumeToken();
              if (h === ii)
                return this.consumeToken();
            }
          break;
        case DC:
          return uy;
        case SC:
          return dy;
        case BC:
          if (this.peekCodePoint(0) === vC && this.peekCodePoint(1) === bt && this.peekCodePoint(2) === bt)
            return this.consumeCodePoint(), this.consumeCodePoint(), hy;
          break;
        case yC:
          var c = this.peekCodePoint(0), u = this.peekCodePoint(1), d = this.peekCodePoint(2);
          if ($n(c, u, d)) {
            var r = this.consumeName();
            return { type: 7, value: r };
          }
          break;
        case EC:
          return fy;
        case kA:
          if (Mi(e, this.peekCodePoint(0)))
            return this.reconsumeCodePoint(e), this.consumeIdentLikeToken();
          break;
        case FC:
          return gy;
        case xC:
          if (this.peekCodePoint(0) === bA)
            return this.consumeCodePoint(), iy;
          break;
        case QC:
          return ry;
        case UC:
          return oy;
        case NC:
        case VC:
          var f = this.peekCodePoint(0), p = this.peekCodePoint(1);
          return f === gs && (Ms(p) || p === Yn) && (this.consumeCodePoint(), this.consumeUnicodeRangeToken()), this.reconsumeCodePoint(e), this.consumeIdentLikeToken();
        case mc:
          if (this.peekCodePoint(0) === bA)
            return this.consumeCodePoint(), Ay;
          if (this.peekCodePoint(0) === mc)
            return this.consumeCodePoint(), sy;
          break;
        case _C:
          if (this.peekCodePoint(0) === bA)
            return this.consumeCodePoint(), ny;
          break;
        case ii:
          return il;
      }
      return Jn(e) ? (this.consumeWhiteSpace(), py) : at(e) ? (this.reconsumeCodePoint(e), this.consumeNumericToken()) : Ur(e) ? (this.reconsumeCodePoint(e), this.consumeIdentLikeToken()) : { type: 6, value: Ie(e) };
    }, A.prototype.consumeCodePoint = function() {
      var e = this._value.shift();
      return typeof e > "u" ? -1 : e;
    }, A.prototype.reconsumeCodePoint = function(e) {
      this._value.unshift(e);
    }, A.prototype.peekCodePoint = function(e) {
      return e >= this._value.length ? -1 : this._value[e];
    }, A.prototype.consumeUnicodeRangeToken = function() {
      for (var e = [], t = this.consumeCodePoint(); Ms(t) && e.length < 6; )
        e.push(t), t = this.consumeCodePoint();
      for (var i = !1; t === Yn && e.length < 6; )
        e.push(t), t = this.consumeCodePoint(), i = !0;
      if (i) {
        var s = parseInt(Ie.apply(void 0, e.map(function(a) {
          return a === Yn ? Qd : a;
        })), 16), n = parseInt(Ie.apply(void 0, e.map(function(a) {
          return a === Yn ? Dd : a;
        })), 16);
        return { type: 30, start: s, end: n };
      }
      var r = parseInt(Ie.apply(void 0, e), 16);
      if (this.peekCodePoint(0) === bt && Ms(this.peekCodePoint(1))) {
        this.consumeCodePoint(), t = this.consumeCodePoint();
        for (var o = []; Ms(t) && o.length < 6; )
          o.push(t), t = this.consumeCodePoint();
        var n = parseInt(Ie.apply(void 0, o), 16);
        return { type: 30, start: r, end: n };
      } else
        return { type: 30, start: r, end: r };
    }, A.prototype.consumeIdentLikeToken = function() {
      var e = this.consumeName();
      return e.toLowerCase() === "url" && this.peekCodePoint(0) === Xn ? (this.consumeCodePoint(), this.consumeUrlToken()) : this.peekCodePoint(0) === Xn ? (this.consumeCodePoint(), { type: 19, value: e }) : { type: 20, value: e };
    }, A.prototype.consumeUrlToken = function() {
      var e = [];
      if (this.consumeWhiteSpace(), this.peekCodePoint(0) === ii)
        return { type: 22, value: "" };
      var t = this.peekCodePoint(0);
      if (t === jn || t === Wn) {
        var i = this.consumeStringToken(this.consumeCodePoint());
        return i.type === 0 && (this.consumeWhiteSpace(), this.peekCodePoint(0) === ii || this.peekCodePoint(0) === wA) ? (this.consumeCodePoint(), { type: 22, value: i.value }) : (this.consumeBadUrlRemnants(), Zn);
      }
      for (; ; ) {
        var s = this.consumeCodePoint();
        if (s === ii || s === wA)
          return { type: 22, value: Ie.apply(void 0, e) };
        if (Jn(s))
          return this.consumeWhiteSpace(), this.peekCodePoint(0) === ii || this.peekCodePoint(0) === wA ? (this.consumeCodePoint(), { type: 22, value: Ie.apply(void 0, e) }) : (this.consumeBadUrlRemnants(), Zn);
        if (s === Wn || s === jn || s === Xn || JC(s))
          return this.consumeBadUrlRemnants(), Zn;
        if (s === kA)
          if (Mi(s, this.peekCodePoint(0)))
            e.push(this.consumeEscapedCodePoint());
          else
            return this.consumeBadUrlRemnants(), Zn;
        else
          e.push(s);
      }
    }, A.prototype.consumeWhiteSpace = function() {
      for (; Jn(this.peekCodePoint(0)); )
        this.consumeCodePoint();
    }, A.prototype.consumeBadUrlRemnants = function() {
      for (; ; ) {
        var e = this.consumeCodePoint();
        if (e === wA || e === ii)
          return;
        Mi(e, this.peekCodePoint(0)) && this.consumeEscapedCodePoint();
      }
    }, A.prototype.consumeStringSlice = function(e) {
      for (var t = 5e4, i = ""; e > 0; ) {
        var s = Math.min(t, e);
        i += Ie.apply(void 0, this._value.splice(0, s)), e -= s;
      }
      return this._value.shift(), i;
    }, A.prototype.consumeStringToken = function(e) {
      var t = "", i = 0;
      do {
        var s = this._value[i];
        if (s === ii || s === void 0 || s === e)
          return t += this.consumeStringSlice(i), { type: 0, value: t };
        if (s === Qr)
          return this._value.splice(0, i), ly;
        if (s === kA) {
          var n = this._value[i + 1];
          n !== ii && n !== void 0 && (n === Qr ? (t += this.consumeStringSlice(i), i = -1, this._value.shift()) : Mi(s, n) && (t += this.consumeStringSlice(i), t += Ie(this.consumeEscapedCodePoint()), i = -1));
        }
        i++;
      } while (!0);
    }, A.prototype.consumeNumber = function() {
      var e = [], t = an, i = this.peekCodePoint(0);
      for ((i === gs || i === bt) && e.push(this.consumeCodePoint()); at(this.peekCodePoint(0)); )
        e.push(this.consumeCodePoint());
      i = this.peekCodePoint(0);
      var s = this.peekCodePoint(1);
      if (i === sn && at(s))
        for (e.push(this.consumeCodePoint(), this.consumeCodePoint()), t = gc; at(this.peekCodePoint(0)); )
          e.push(this.consumeCodePoint());
      i = this.peekCodePoint(0), s = this.peekCodePoint(1);
      var n = this.peekCodePoint(2);
      if ((i === Md || i === _d) && ((s === gs || s === bt) && at(n) || at(s)))
        for (e.push(this.consumeCodePoint(), this.consumeCodePoint()), t = gc; at(this.peekCodePoint(0)); )
          e.push(this.consumeCodePoint());
      return [$C(e), t];
    }, A.prototype.consumeNumericToken = function() {
      var e = this.consumeNumber(), t = e[0], i = e[1], s = this.peekCodePoint(0), n = this.peekCodePoint(1), r = this.peekCodePoint(2);
      if ($n(s, n, r)) {
        var o = this.consumeName();
        return { type: 15, number: t, flags: i, unit: o };
      }
      return s === bC ? (this.consumeCodePoint(), { type: 16, number: t, flags: i }) : { type: 17, number: t, flags: i };
    }, A.prototype.consumeEscapedCodePoint = function() {
      var e = this.consumeCodePoint();
      if (Ms(e)) {
        for (var t = Ie(e); Ms(this.peekCodePoint(0)) && t.length < 6; )
          t += Ie(this.consumeCodePoint());
        Jn(this.peekCodePoint(0)) && this.consumeCodePoint();
        var i = parseInt(t, 16);
        return i === 0 || GC(i) || i > 1114111 ? bc : i;
      }
      return e === ii ? bc : e;
    }, A.prototype.consumeName = function() {
      for (var e = ""; ; ) {
        var t = this.consumeCodePoint();
        if (wc(t))
          e += Ie(t);
        else if (Mi(t, this.peekCodePoint(0)))
          e += Ie(this.consumeEscapedCodePoint());
        else
          return this.reconsumeCodePoint(t), e;
      }
    }, A;
  }()
), Td = (
  /** @class */
  function() {
    function A(e) {
      this._tokens = e;
    }
    return A.create = function(e) {
      var t = new Sd();
      return t.write(e), new A(t.read());
    }, A.parseValue = function(e) {
      return A.create(e).parseComponentValue();
    }, A.parseValues = function(e) {
      return A.create(e).parseComponentValues();
    }, A.prototype.parseComponentValue = function() {
      for (var e = this.consumeToken(); e.type === 31; )
        e = this.consumeToken();
      if (e.type === 32)
        throw new SyntaxError("Error parsing CSS component value, unexpected EOF");
      this.reconsumeToken(e);
      var t = this.consumeComponentValue();
      do
        e = this.consumeToken();
      while (e.type === 31);
      if (e.type === 32)
        return t;
      throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one");
    }, A.prototype.parseComponentValues = function() {
      for (var e = []; ; ) {
        var t = this.consumeComponentValue();
        if (t.type === 32)
          return e;
        e.push(t), e.push();
      }
    }, A.prototype.consumeComponentValue = function() {
      var e = this.consumeToken();
      switch (e.type) {
        case 11:
        case 28:
        case 2:
          return this.consumeSimpleBlock(e.type);
        case 19:
          return this.consumeFunction(e);
      }
      return e;
    }, A.prototype.consumeSimpleBlock = function(e) {
      for (var t = { type: e, values: [] }, i = this.consumeToken(); ; ) {
        if (i.type === 32 || by(i, e))
          return t;
        this.reconsumeToken(i), t.values.push(this.consumeComponentValue()), i = this.consumeToken();
      }
    }, A.prototype.consumeFunction = function(e) {
      for (var t = {
        name: e.value,
        values: [],
        type: 18
        /* FUNCTION */
      }; ; ) {
        var i = this.consumeToken();
        if (i.type === 32 || i.type === 3)
          return t;
        this.reconsumeToken(i), t.values.push(this.consumeComponentValue());
      }
    }, A.prototype.consumeToken = function() {
      var e = this._tokens.shift();
      return typeof e > "u" ? il : e;
    }, A.prototype.reconsumeToken = function(e) {
      this._tokens.unshift(e);
    }, A;
  }()
), ln = function(A) {
  return A.type === 15;
}, qs = function(A) {
  return A.type === 17;
}, ye = function(A) {
  return A.type === 20;
}, my = function(A) {
  return A.type === 0;
}, sl = function(A, e) {
  return ye(A) && A.value === e;
}, Ld = function(A) {
  return A.type !== 31;
}, $s = function(A) {
  return A.type !== 31 && A.type !== 4;
}, ri = function(A) {
  var e = [], t = [];
  return A.forEach(function(i) {
    if (i.type === 4) {
      if (t.length === 0)
        throw new Error("Error parsing function args, zero tokens for arg");
      e.push(t), t = [];
      return;
    }
    i.type !== 31 && t.push(i);
  }), t.length && e.push(t), e;
}, by = function(A, e) {
  return e === 11 && A.type === 12 || e === 28 && A.type === 29 ? !0 : e === 2 && A.type === 3;
}, Xi = function(A) {
  return A.type === 17 || A.type === 15;
}, Ne = function(A) {
  return A.type === 16 || Xi(A);
}, Rd = function(A) {
  return A.length > 1 ? [A[0], A[1]] : [A[0]];
}, it = {
  type: 17,
  number: 0,
  flags: an
}, Dl = {
  type: 16,
  number: 50,
  flags: an
}, Ki = {
  type: 16,
  number: 100,
  flags: an
}, _A = function(A, e, t) {
  var i = A[0], s = A[1];
  return [xe(i, e), xe(typeof s < "u" ? s : i, t)];
}, xe = function(A, e) {
  if (A.type === 16)
    return A.number / 100 * e;
  if (ln(A))
    switch (A.unit) {
      case "rem":
      case "em":
        return 16 * A.number;
      case "px":
      default:
        return A.number;
    }
  return A.number;
}, Id = "deg", kd = "grad", Od = "rad", Pd = "turn", Xr = {
  name: "angle",
  parse: function(A, e) {
    if (e.type === 15)
      switch (e.unit) {
        case Id:
          return Math.PI * e.number / 180;
        case kd:
          return Math.PI / 200 * e.number;
        case Od:
          return e.number;
        case Pd:
          return Math.PI * 2 * e.number;
      }
    throw new Error("Unsupported angle type");
  }
}, Nd = function(A) {
  return A.type === 15 && (A.unit === Id || A.unit === kd || A.unit === Od || A.unit === Pd);
}, Kd = function(A) {
  var e = A.filter(ye).map(function(t) {
    return t.value;
  }).join(" ");
  switch (e) {
    case "to bottom right":
    case "to right bottom":
    case "left top":
    case "top left":
      return [it, it];
    case "to top":
    case "bottom":
      return Ot(0);
    case "to bottom left":
    case "to left bottom":
    case "right top":
    case "top right":
      return [it, Ki];
    case "to right":
    case "left":
      return Ot(90);
    case "to top left":
    case "to left top":
    case "right bottom":
    case "bottom right":
      return [Ki, Ki];
    case "to bottom":
    case "top":
      return Ot(180);
    case "to top right":
    case "to right top":
    case "left bottom":
    case "bottom left":
      return [Ki, it];
    case "to left":
    case "right":
      return Ot(270);
  }
  return 0;
}, Ot = function(A) {
  return Math.PI * A / 180;
}, Gi = {
  name: "color",
  parse: function(A, e) {
    if (e.type === 18) {
      var t = wy[e.name];
      if (typeof t > "u")
        throw new Error('Attempting to parse an unsupported color function "' + e.name + '"');
      return t(A, e.values);
    }
    if (e.type === 5) {
      if (e.value.length === 3) {
        var i = e.value.substring(0, 1), s = e.value.substring(1, 2), n = e.value.substring(2, 3);
        return Vi(parseInt(i + i, 16), parseInt(s + s, 16), parseInt(n + n, 16), 1);
      }
      if (e.value.length === 4) {
        var i = e.value.substring(0, 1), s = e.value.substring(1, 2), n = e.value.substring(2, 3), r = e.value.substring(3, 4);
        return Vi(parseInt(i + i, 16), parseInt(s + s, 16), parseInt(n + n, 16), parseInt(r + r, 16) / 255);
      }
      if (e.value.length === 6) {
        var i = e.value.substring(0, 2), s = e.value.substring(2, 4), n = e.value.substring(4, 6);
        return Vi(parseInt(i, 16), parseInt(s, 16), parseInt(n, 16), 1);
      }
      if (e.value.length === 8) {
        var i = e.value.substring(0, 2), s = e.value.substring(2, 4), n = e.value.substring(4, 6), r = e.value.substring(6, 8);
        return Vi(parseInt(i, 16), parseInt(s, 16), parseInt(n, 16), parseInt(r, 16) / 255);
      }
    }
    if (e.type === 20) {
      var o = wi[e.value.toUpperCase()];
      if (typeof o < "u")
        return o;
    }
    return wi.TRANSPARENT;
  }
}, Wi = function(A) {
  return (255 & A) === 0;
}, Je = function(A) {
  var e = 255 & A, t = 255 & A >> 8, i = 255 & A >> 16, s = 255 & A >> 24;
  return e < 255 ? "rgba(" + s + "," + i + "," + t + "," + e / 255 + ")" : "rgb(" + s + "," + i + "," + t + ")";
}, Vi = function(A, e, t, i) {
  return (A << 24 | e << 16 | t << 8 | Math.round(i * 255) << 0) >>> 0;
}, vc = function(A, e) {
  if (A.type === 17)
    return A.number;
  if (A.type === 16) {
    var t = e === 3 ? 1 : 255;
    return e === 3 ? A.number / 100 * t : Math.round(A.number / 100 * t);
  }
  return 0;
}, Bc = function(A, e) {
  var t = e.filter($s);
  if (t.length === 3) {
    var i = t.map(vc), s = i[0], n = i[1], r = i[2];
    return Vi(s, n, r, 1);
  }
  if (t.length === 4) {
    var o = t.map(vc), s = o[0], n = o[1], r = o[2], a = o[3];
    return Vi(s, n, r, a);
  }
  return 0;
};
function Ro(A, e, t) {
  return t < 0 && (t += 1), t >= 1 && (t -= 1), t < 1 / 6 ? (e - A) * t * 6 + A : t < 1 / 2 ? e : t < 2 / 3 ? (e - A) * 6 * (2 / 3 - t) + A : A;
}
var Cc = function(A, e) {
  var t = e.filter($s), i = t[0], s = t[1], n = t[2], r = t[3], o = (i.type === 17 ? Ot(i.number) : Xr.parse(A, i)) / (Math.PI * 2), a = Ne(s) ? s.number / 100 : 0, l = Ne(n) ? n.number / 100 : 0, h = typeof r < "u" && Ne(r) ? xe(r, 1) : 1;
  if (a === 0)
    return Vi(l * 255, l * 255, l * 255, 1);
  var c = l <= 0.5 ? l * (a + 1) : l + a - l * a, u = l * 2 - c, d = Ro(u, c, o + 1 / 3), f = Ro(u, c, o), p = Ro(u, c, o - 1 / 3);
  return Vi(d * 255, f * 255, p * 255, h);
}, wy = {
  hsl: Cc,
  hsla: Cc,
  rgb: Bc,
  rgba: Bc
}, OA = function(A, e) {
  return Gi.parse(A, Td.create(e).parseComponentValue());
}, wi = {
  ALICEBLUE: 4042850303,
  ANTIQUEWHITE: 4209760255,
  AQUA: 16777215,
  AQUAMARINE: 2147472639,
  AZURE: 4043309055,
  BEIGE: 4126530815,
  BISQUE: 4293182719,
  BLACK: 255,
  BLANCHEDALMOND: 4293643775,
  BLUE: 65535,
  BLUEVIOLET: 2318131967,
  BROWN: 2771004159,
  BURLYWOOD: 3736635391,
  CADETBLUE: 1604231423,
  CHARTREUSE: 2147418367,
  CHOCOLATE: 3530104575,
  CORAL: 4286533887,
  CORNFLOWERBLUE: 1687547391,
  CORNSILK: 4294499583,
  CRIMSON: 3692313855,
  CYAN: 16777215,
  DARKBLUE: 35839,
  DARKCYAN: 9145343,
  DARKGOLDENROD: 3095837695,
  DARKGRAY: 2846468607,
  DARKGREEN: 6553855,
  DARKGREY: 2846468607,
  DARKKHAKI: 3182914559,
  DARKMAGENTA: 2332068863,
  DARKOLIVEGREEN: 1433087999,
  DARKORANGE: 4287365375,
  DARKORCHID: 2570243327,
  DARKRED: 2332033279,
  DARKSALMON: 3918953215,
  DARKSEAGREEN: 2411499519,
  DARKSLATEBLUE: 1211993087,
  DARKSLATEGRAY: 793726975,
  DARKSLATEGREY: 793726975,
  DARKTURQUOISE: 13554175,
  DARKVIOLET: 2483082239,
  DEEPPINK: 4279538687,
  DEEPSKYBLUE: 12582911,
  DIMGRAY: 1768516095,
  DIMGREY: 1768516095,
  DODGERBLUE: 512819199,
  FIREBRICK: 2988581631,
  FLORALWHITE: 4294635775,
  FORESTGREEN: 579543807,
  FUCHSIA: 4278255615,
  GAINSBORO: 3705462015,
  GHOSTWHITE: 4177068031,
  GOLD: 4292280575,
  GOLDENROD: 3668254975,
  GRAY: 2155905279,
  GREEN: 8388863,
  GREENYELLOW: 2919182335,
  GREY: 2155905279,
  HONEYDEW: 4043305215,
  HOTPINK: 4285117695,
  INDIANRED: 3445382399,
  INDIGO: 1258324735,
  IVORY: 4294963455,
  KHAKI: 4041641215,
  LAVENDER: 3873897215,
  LAVENDERBLUSH: 4293981695,
  LAWNGREEN: 2096890111,
  LEMONCHIFFON: 4294626815,
  LIGHTBLUE: 2916673279,
  LIGHTCORAL: 4034953471,
  LIGHTCYAN: 3774873599,
  LIGHTGOLDENRODYELLOW: 4210742015,
  LIGHTGRAY: 3553874943,
  LIGHTGREEN: 2431553791,
  LIGHTGREY: 3553874943,
  LIGHTPINK: 4290167295,
  LIGHTSALMON: 4288707327,
  LIGHTSEAGREEN: 548580095,
  LIGHTSKYBLUE: 2278488831,
  LIGHTSLATEGRAY: 2005441023,
  LIGHTSLATEGREY: 2005441023,
  LIGHTSTEELBLUE: 2965692159,
  LIGHTYELLOW: 4294959359,
  LIME: 16711935,
  LIMEGREEN: 852308735,
  LINEN: 4210091775,
  MAGENTA: 4278255615,
  MAROON: 2147483903,
  MEDIUMAQUAMARINE: 1724754687,
  MEDIUMBLUE: 52735,
  MEDIUMORCHID: 3126187007,
  MEDIUMPURPLE: 2473647103,
  MEDIUMSEAGREEN: 1018393087,
  MEDIUMSLATEBLUE: 2070474495,
  MEDIUMSPRINGGREEN: 16423679,
  MEDIUMTURQUOISE: 1221709055,
  MEDIUMVIOLETRED: 3340076543,
  MIDNIGHTBLUE: 421097727,
  MINTCREAM: 4127193855,
  MISTYROSE: 4293190143,
  MOCCASIN: 4293178879,
  NAVAJOWHITE: 4292783615,
  NAVY: 33023,
  OLDLACE: 4260751103,
  OLIVE: 2155872511,
  OLIVEDRAB: 1804477439,
  ORANGE: 4289003775,
  ORANGERED: 4282712319,
  ORCHID: 3664828159,
  PALEGOLDENROD: 4008225535,
  PALEGREEN: 2566625535,
  PALETURQUOISE: 2951671551,
  PALEVIOLETRED: 3681588223,
  PAPAYAWHIP: 4293907967,
  PEACHPUFF: 4292524543,
  PERU: 3448061951,
  PINK: 4290825215,
  PLUM: 3718307327,
  POWDERBLUE: 2967529215,
  PURPLE: 2147516671,
  REBECCAPURPLE: 1714657791,
  RED: 4278190335,
  ROSYBROWN: 3163525119,
  ROYALBLUE: 1097458175,
  SADDLEBROWN: 2336560127,
  SALMON: 4202722047,
  SANDYBROWN: 4104413439,
  SEAGREEN: 780883967,
  SEASHELL: 4294307583,
  SIENNA: 2689740287,
  SILVER: 3233857791,
  SKYBLUE: 2278484991,
  SLATEBLUE: 1784335871,
  SLATEGRAY: 1887473919,
  SLATEGREY: 1887473919,
  SNOW: 4294638335,
  SPRINGGREEN: 16744447,
  STEELBLUE: 1182971135,
  TAN: 3535047935,
  TEAL: 8421631,
  THISTLE: 3636451583,
  TOMATO: 4284696575,
  TRANSPARENT: 0,
  TURQUOISE: 1088475391,
  VIOLET: 4001558271,
  WHEAT: 4125012991,
  WHITE: 4294967295,
  WHITESMOKE: 4126537215,
  YELLOW: 4294902015,
  YELLOWGREEN: 2597139199
}, vy = {
  name: "background-clip",
  initialValue: "border-box",
  prefix: !1,
  type: 1,
  parse: function(A, e) {
    return e.map(function(t) {
      if (ye(t))
        switch (t.value) {
          case "padding-box":
            return 1;
          case "content-box":
            return 2;
        }
      return 0;
    });
  }
}, By = {
  name: "background-color",
  initialValue: "transparent",
  prefix: !1,
  type: 3,
  format: "color"
}, Yr = function(A, e) {
  var t = Gi.parse(A, e[0]), i = e[1];
  return i && Ne(i) ? { color: t, stop: i } : { color: t, stop: null };
}, yc = function(A, e) {
  var t = A[0], i = A[A.length - 1];
  t.stop === null && (t.stop = it), i.stop === null && (i.stop = Ki);
  for (var s = [], n = 0, r = 0; r < A.length; r++) {
    var o = A[r].stop;
    if (o !== null) {
      var a = xe(o, e);
      a > n ? s.push(a) : s.push(n), n = a;
    } else
      s.push(null);
  }
  for (var l = null, r = 0; r < s.length; r++) {
    var h = s[r];
    if (h === null)
      l === null && (l = r);
    else if (l !== null) {
      for (var c = r - l, u = s[l - 1], d = (h - u) / (c + 1), f = 1; f <= c; f++)
        s[l + f - 1] = d * f;
      l = null;
    }
  }
  return A.map(function(p, b) {
    var w = p.color;
    return { color: w, stop: Math.max(Math.min(1, s[b] / e), 0) };
  });
}, Cy = function(A, e, t) {
  var i = e / 2, s = t / 2, n = xe(A[0], e) - i, r = s - xe(A[1], t);
  return (Math.atan2(r, n) + Math.PI * 2) % (Math.PI * 2);
}, yy = function(A, e, t) {
  var i = typeof A == "number" ? A : Cy(A, e, t), s = Math.abs(e * Math.sin(i)) + Math.abs(t * Math.cos(i)), n = e / 2, r = t / 2, o = s / 2, a = Math.sin(i - Math.PI / 2) * o, l = Math.cos(i - Math.PI / 2) * o;
  return [s, n - l, n + l, r - a, r + a];
}, Wt = function(A, e) {
  return Math.sqrt(A * A + e * e);
}, Ec = function(A, e, t, i, s) {
  var n = [
    [0, 0],
    [0, e],
    [A, 0],
    [A, e]
  ];
  return n.reduce(function(r, o) {
    var a = o[0], l = o[1], h = Wt(t - a, i - l);
    return (s ? h < r.optimumDistance : h > r.optimumDistance) ? {
      optimumCorner: o,
      optimumDistance: h
    } : r;
  }, {
    optimumDistance: s ? 1 / 0 : -1 / 0,
    optimumCorner: null
  }).optimumCorner;
}, Ey = function(A, e, t, i, s) {
  var n = 0, r = 0;
  switch (A.size) {
    case 0:
      A.shape === 0 ? n = r = Math.min(Math.abs(e), Math.abs(e - i), Math.abs(t), Math.abs(t - s)) : A.shape === 1 && (n = Math.min(Math.abs(e), Math.abs(e - i)), r = Math.min(Math.abs(t), Math.abs(t - s)));
      break;
    case 2:
      if (A.shape === 0)
        n = r = Math.min(Wt(e, t), Wt(e, t - s), Wt(e - i, t), Wt(e - i, t - s));
      else if (A.shape === 1) {
        var o = Math.min(Math.abs(t), Math.abs(t - s)) / Math.min(Math.abs(e), Math.abs(e - i)), a = Ec(i, s, e, t, !0), l = a[0], h = a[1];
        n = Wt(l - e, (h - t) / o), r = o * n;
      }
      break;
    case 1:
      A.shape === 0 ? n = r = Math.max(Math.abs(e), Math.abs(e - i), Math.abs(t), Math.abs(t - s)) : A.shape === 1 && (n = Math.max(Math.abs(e), Math.abs(e - i)), r = Math.max(Math.abs(t), Math.abs(t - s)));
      break;
    case 3:
      if (A.shape === 0)
        n = r = Math.max(Wt(e, t), Wt(e, t - s), Wt(e - i, t), Wt(e - i, t - s));
      else if (A.shape === 1) {
        var o = Math.max(Math.abs(t), Math.abs(t - s)) / Math.max(Math.abs(e), Math.abs(e - i)), c = Ec(i, s, e, t, !1), l = c[0], h = c[1];
        n = Wt(l - e, (h - t) / o), r = o * n;
      }
      break;
  }
  return Array.isArray(A.size) && (n = xe(A.size[0], i), r = A.size.length === 2 ? xe(A.size[1], s) : n), [n, r];
}, Fy = function(A, e) {
  var t = Ot(180), i = [];
  return ri(e).forEach(function(s, n) {
    if (n === 0) {
      var r = s[0];
      if (r.type === 20 && r.value === "to") {
        t = Kd(s);
        return;
      } else if (Nd(r)) {
        t = Xr.parse(A, r);
        return;
      }
    }
    var o = Yr(A, s);
    i.push(o);
  }), {
    angle: t,
    stops: i,
    type: 1
    /* LINEAR_GRADIENT */
  };
}, qn = function(A, e) {
  var t = Ot(180), i = [];
  return ri(e).forEach(function(s, n) {
    if (n === 0) {
      var r = s[0];
      if (r.type === 20 && ["top", "left", "right", "bottom"].indexOf(r.value) !== -1) {
        t = Kd(s);
        return;
      } else if (Nd(r)) {
        t = (Xr.parse(A, r) + Ot(270)) % Ot(360);
        return;
      }
    }
    var o = Yr(A, s);
    i.push(o);
  }), {
    angle: t,
    stops: i,
    type: 1
    /* LINEAR_GRADIENT */
  };
}, xy = function(A, e) {
  var t = Ot(180), i = [], s = 1, n = 0, r = 3, o = [];
  return ri(e).forEach(function(a, l) {
    var h = a[0];
    if (l === 0) {
      if (ye(h) && h.value === "linear") {
        s = 1;
        return;
      } else if (ye(h) && h.value === "radial") {
        s = 2;
        return;
      }
    }
    if (h.type === 18) {
      if (h.name === "from") {
        var c = Gi.parse(A, h.values[0]);
        i.push({ stop: it, color: c });
      } else if (h.name === "to") {
        var c = Gi.parse(A, h.values[0]);
        i.push({ stop: Ki, color: c });
      } else if (h.name === "color-stop") {
        var u = h.values.filter($s);
        if (u.length === 2) {
          var c = Gi.parse(A, u[1]), d = u[0];
          qs(d) && i.push({
            stop: { type: 16, number: d.number * 100, flags: d.flags },
            color: c
          });
        }
      }
    }
  }), s === 1 ? {
    angle: (t + Ot(180)) % Ot(360),
    stops: i,
    type: s
  } : { size: r, shape: n, stops: i, position: o, type: s };
}, Vd = "closest-side", zd = "farthest-side", Gd = "closest-corner", Wd = "farthest-corner", jd = "circle", Xd = "ellipse", Yd = "cover", Jd = "contain", Qy = function(A, e) {
  var t = 0, i = 3, s = [], n = [];
  return ri(e).forEach(function(r, o) {
    var a = !0;
    if (o === 0) {
      var l = !1;
      a = r.reduce(function(c, u) {
        if (l)
          if (ye(u))
            switch (u.value) {
              case "center":
                return n.push(Dl), c;
              case "top":
              case "left":
                return n.push(it), c;
              case "right":
              case "bottom":
                return n.push(Ki), c;
            }
          else (Ne(u) || Xi(u)) && n.push(u);
        else if (ye(u))
          switch (u.value) {
            case jd:
              return t = 0, !1;
            case Xd:
              return t = 1, !1;
            case "at":
              return l = !0, !1;
            case Vd:
              return i = 0, !1;
            case Yd:
            case zd:
              return i = 1, !1;
            case Jd:
            case Gd:
              return i = 2, !1;
            case Wd:
              return i = 3, !1;
          }
        else if (Xi(u) || Ne(u))
          return Array.isArray(i) || (i = []), i.push(u), !1;
        return c;
      }, a);
    }
    if (a) {
      var h = Yr(A, r);
      s.push(h);
    }
  }), {
    size: i,
    shape: t,
    stops: s,
    position: n,
    type: 2
    /* RADIAL_GRADIENT */
  };
}, er = function(A, e) {
  var t = 0, i = 3, s = [], n = [];
  return ri(e).forEach(function(r, o) {
    var a = !0;
    if (o === 0 ? a = r.reduce(function(h, c) {
      if (ye(c))
        switch (c.value) {
          case "center":
            return n.push(Dl), !1;
          case "top":
          case "left":
            return n.push(it), !1;
          case "right":
          case "bottom":
            return n.push(Ki), !1;
        }
      else if (Ne(c) || Xi(c))
        return n.push(c), !1;
      return h;
    }, a) : o === 1 && (a = r.reduce(function(h, c) {
      if (ye(c))
        switch (c.value) {
          case jd:
            return t = 0, !1;
          case Xd:
            return t = 1, !1;
          case Jd:
          case Vd:
            return i = 0, !1;
          case zd:
            return i = 1, !1;
          case Gd:
            return i = 2, !1;
          case Yd:
          case Wd:
            return i = 3, !1;
        }
      else if (Xi(c) || Ne(c))
        return Array.isArray(i) || (i = []), i.push(c), !1;
      return h;
    }, a)), a) {
      var l = Yr(A, r);
      s.push(l);
    }
  }), {
    size: i,
    shape: t,
    stops: s,
    position: n,
    type: 2
    /* RADIAL_GRADIENT */
  };
}, Uy = function(A) {
  return A.type === 1;
}, _y = function(A) {
  return A.type === 2;
}, Sl = {
  name: "image",
  parse: function(A, e) {
    if (e.type === 22) {
      var t = {
        url: e.value,
        type: 0
        /* URL */
      };
      return A.cache.addImage(e.value), t;
    }
    if (e.type === 18) {
      var i = $d[e.name];
      if (typeof i > "u")
        throw new Error('Attempting to parse an unsupported image function "' + e.name + '"');
      return i(A, e.values);
    }
    throw new Error("Unsupported image type " + e.type);
  }
};
function Hy(A) {
  return !(A.type === 20 && A.value === "none") && (A.type !== 18 || !!$d[A.name]);
}
var $d = {
  "linear-gradient": Fy,
  "-moz-linear-gradient": qn,
  "-ms-linear-gradient": qn,
  "-o-linear-gradient": qn,
  "-webkit-linear-gradient": qn,
  "radial-gradient": Qy,
  "-moz-radial-gradient": er,
  "-ms-radial-gradient": er,
  "-o-radial-gradient": er,
  "-webkit-radial-gradient": er,
  "-webkit-gradient": xy
}, My = {
  name: "background-image",
  initialValue: "none",
  type: 1,
  prefix: !1,
  parse: function(A, e) {
    if (e.length === 0)
      return [];
    var t = e[0];
    return t.type === 20 && t.value === "none" ? [] : e.filter(function(i) {
      return $s(i) && Hy(i);
    }).map(function(i) {
      return Sl.parse(A, i);
    });
  }
}, Dy = {
  name: "background-origin",
  initialValue: "border-box",
  prefix: !1,
  type: 1,
  parse: function(A, e) {
    return e.map(function(t) {
      if (ye(t))
        switch (t.value) {
          case "padding-box":
            return 1;
          case "content-box":
            return 2;
        }
      return 0;
    });
  }
}, Sy = {
  name: "background-position",
  initialValue: "0% 0%",
  type: 1,
  prefix: !1,
  parse: function(A, e) {
    return ri(e).map(function(t) {
      return t.filter(Ne);
    }).map(Rd);
  }
}, Ty = {
  name: "background-repeat",
  initialValue: "repeat",
  prefix: !1,
  type: 1,
  parse: function(A, e) {
    return ri(e).map(function(t) {
      return t.filter(ye).map(function(i) {
        return i.value;
      }).join(" ");
    }).map(Ly);
  }
}, Ly = function(A) {
  switch (A) {
    case "no-repeat":
      return 1;
    case "repeat-x":
    case "repeat no-repeat":
      return 2;
    case "repeat-y":
    case "no-repeat repeat":
      return 3;
    case "repeat":
    default:
      return 0;
  }
}, Gs;
(function(A) {
  A.AUTO = "auto", A.CONTAIN = "contain", A.COVER = "cover";
})(Gs || (Gs = {}));
var Ry = {
  name: "background-size",
  initialValue: "0",
  prefix: !1,
  type: 1,
  parse: function(A, e) {
    return ri(e).map(function(t) {
      return t.filter(Iy);
    });
  }
}, Iy = function(A) {
  return ye(A) || Ne(A);
}, Jr = function(A) {
  return {
    name: "border-" + A + "-color",
    initialValue: "transparent",
    prefix: !1,
    type: 3,
    format: "color"
  };
}, ky = Jr("top"), Oy = Jr("right"), Py = Jr("bottom"), Ny = Jr("left"), $r = function(A) {
  return {
    name: "border-radius-" + A,
    initialValue: "0 0",
    prefix: !1,
    type: 1,
    parse: function(e, t) {
      return Rd(t.filter(Ne));
    }
  };
}, Ky = $r("top-left"), Vy = $r("top-right"), zy = $r("bottom-right"), Gy = $r("bottom-left"), Zr = function(A) {
  return {
    name: "border-" + A + "-style",
    initialValue: "solid",
    prefix: !1,
    type: 2,
    parse: function(e, t) {
      switch (t) {
        case "none":
          return 0;
        case "dashed":
          return 2;
        case "dotted":
          return 3;
        case "double":
          return 4;
      }
      return 1;
    }
  };
}, Wy = Zr("top"), jy = Zr("right"), Xy = Zr("bottom"), Yy = Zr("left"), qr = function(A) {
  return {
    name: "border-" + A + "-width",
    initialValue: "0",
    type: 0,
    prefix: !1,
    parse: function(e, t) {
      return ln(t) ? t.number : 0;
    }
  };
}, Jy = qr("top"), $y = qr("right"), Zy = qr("bottom"), qy = qr("left"), e0 = {
  name: "color",
  initialValue: "transparent",
  prefix: !1,
  type: 3,
  format: "color"
}, t0 = {
  name: "direction",
  initialValue: "ltr",
  prefix: !1,
  type: 2,
  parse: function(A, e) {
    switch (e) {
      case "rtl":
        return 1;
      case "ltr":
      default:
        return 0;
    }
  }
}, i0 = {
  name: "display",
  initialValue: "inline-block",
  prefix: !1,
  type: 1,
  parse: function(A, e) {
    return e.filter(ye).reduce(
      function(t, i) {
        return t | s0(i.value);
      },
      0
      /* NONE */
    );
  }
}, s0 = function(A) {
  switch (A) {
    case "block":
    case "-webkit-box":
      return 2;
    case "inline":
      return 4;
    case "run-in":
      return 8;
    case "flow":
      return 16;
    case "flow-root":
      return 32;
    case "table":
      return 64;
    case "flex":
    case "-webkit-flex":
      return 128;
    case "grid":
    case "-ms-grid":
      return 256;
    case "ruby":
      return 512;
    case "subgrid":
      return 1024;
    case "list-item":
      return 2048;
    case "table-row-group":
      return 4096;
    case "table-header-group":
      return 8192;
    case "table-footer-group":
      return 16384;
    case "table-row":
      return 32768;
    case "table-cell":
      return 65536;
    case "table-column-group":
      return 131072;
    case "table-column":
      return 262144;
    case "table-caption":
      return 524288;
    case "ruby-base":
      return 1048576;
    case "ruby-text":
      return 2097152;
    case "ruby-base-container":
      return 4194304;
    case "ruby-text-container":
      return 8388608;
    case "contents":
      return 16777216;
    case "inline-block":
      return 33554432;
    case "inline-list-item":
      return 67108864;
    case "inline-table":
      return 134217728;
    case "inline-flex":
      return 268435456;
    case "inline-grid":
      return 536870912;
  }
  return 0;
}, A0 = {
  name: "float",
  initialValue: "none",
  prefix: !1,
  type: 2,
  parse: function(A, e) {
    switch (e) {
      case "left":
        return 1;
      case "right":
        return 2;
      case "inline-start":
        return 3;
      case "inline-end":
        return 4;
    }
    return 0;
  }
}, n0 = {
  name: "letter-spacing",
  initialValue: "0",
  prefix: !1,
  type: 0,
  parse: function(A, e) {
    return e.type === 20 && e.value === "normal" ? 0 : e.type === 17 || e.type === 15 ? e.number : 0;
  }
}, _r;
(function(A) {
  A.NORMAL = "normal", A.STRICT = "strict";
})(_r || (_r = {}));
var r0 = {
  name: "line-break",
  initialValue: "normal",
  prefix: !1,
  type: 2,
  parse: function(A, e) {
    switch (e) {
      case "strict":
        return _r.STRICT;
      case "normal":
      default:
        return _r.NORMAL;
    }
  }
}, o0 = {
  name: "line-height",
  initialValue: "normal",
  prefix: !1,
  type: 4
  /* TOKEN_VALUE */
}, Fc = function(A, e) {
  return ye(A) && A.value === "normal" ? 1.2 * e : A.type === 17 ? e * A.number : Ne(A) ? xe(A, e) : e;
}, a0 = {
  name: "list-style-image",
  initialValue: "none",
  type: 0,
  prefix: !1,
  parse: function(A, e) {
    return e.type === 20 && e.value === "none" ? null : Sl.parse(A, e);
  }
}, l0 = {
  name: "list-style-position",
  initialValue: "outside",
  prefix: !1,
  type: 2,
  parse: function(A, e) {
    switch (e) {
      case "inside":
        return 0;
      case "outside":
      default:
        return 1;
    }
  }
}, Al = {
  name: "list-style-type",
  initialValue: "none",
  prefix: !1,
  type: 2,
  parse: function(A, e) {
    switch (e) {
      case "disc":
        return 0;
      case "circle":
        return 1;
      case "square":
        return 2;
      case "decimal":
        return 3;
      case "cjk-decimal":
        return 4;
      case "decimal-leading-zero":
        return 5;
      case "lower-roman":
        return 6;
      case "upper-roman":
        return 7;
      case "lower-greek":
        return 8;
      case "lower-alpha":
        return 9;
      case "upper-alpha":
        return 10;
      case "arabic-indic":
        return 11;
      case "armenian":
        return 12;
      case "bengali":
        return 13;
      case "cambodian":
        return 14;
      case "cjk-earthly-branch":
        return 15;
      case "cjk-heavenly-stem":
        return 16;
      case "cjk-ideographic":
        return 17;
      case "devanagari":
        return 18;
      case "ethiopic-numeric":
        return 19;
      case "georgian":
        return 20;
      case "gujarati":
        return 21;
      case "gurmukhi":
        return 22;
      case "hebrew":
        return 22;
      case "hiragana":
        return 23;
      case "hiragana-iroha":
        return 24;
      case "japanese-formal":
        return 25;
      case "japanese-informal":
        return 26;
      case "kannada":
        return 27;
      case "katakana":
        return 28;
      case "katakana-iroha":
        return 29;
      case "khmer":
        return 30;
      case "korean-hangul-formal":
        return 31;
      case "korean-hanja-formal":
        return 32;
      case "korean-hanja-informal":
        return 33;
      case "lao":
        return 34;
      case "lower-armenian":
        return 35;
      case "malayalam":
        return 36;
      case "mongolian":
        return 37;
      case "myanmar":
        return 38;
      case "oriya":
        return 39;
      case "persian":
        return 40;
      case "simp-chinese-formal":
        return 41;
      case "simp-chinese-informal":
        return 42;
      case "tamil":
        return 43;
      case "telugu":
        return 44;
      case "thai":
        return 45;
      case "tibetan":
        return 46;
      case "trad-chinese-formal":
        return 47;
      case "trad-chinese-informal":
        return 48;
      case "upper-armenian":
        return 49;
      case "disclosure-open":
        return 50;
      case "disclosure-closed":
        return 51;
      case "none":
      default:
        return -1;
    }
  }
}, eo = function(A) {
  return {
    name: "margin-" + A,
    initialValue: "0",
    prefix: !1,
    type: 4
    /* TOKEN_VALUE */
  };
}, h0 = eo("top"), c0 = eo("right"), u0 = eo("bottom"), d0 = eo("left"), f0 = {
  name: "overflow",
  initialValue: "visible",
  prefix: !1,
  type: 1,
  parse: function(A, e) {
    return e.filter(ye).map(function(t) {
      switch (t.value) {
        case "hidden":
          return 1;
        case "scroll":
          return 2;
        case "clip":
          return 3;
        case "auto":
          return 4;
        case "visible":
        default:
          return 0;
      }
    });
  }
}, g0 = {
  name: "overflow-wrap",
  initialValue: "normal",
  prefix: !1,
  type: 2,
  parse: function(A, e) {
    switch (e) {
      case "break-word":
        return "break-word";
      case "normal":
      default:
        return "normal";
    }
  }
}, to = function(A) {
  return {
    name: "padding-" + A,
    initialValue: "0",
    prefix: !1,
    type: 3,
    format: "length-percentage"
  };
}, p0 = to("top"), m0 = to("right"), b0 = to("bottom"), w0 = to("left"), v0 = {
  name: "text-align",
  initialValue: "left",
  prefix: !1,
  type: 2,
  parse: function(A, e) {
    switch (e) {
      case "right":
        return 2;
      case "center":
      case "justify":
        return 1;
      case "left":
      default:
        return 0;
    }
  }
}, B0 = {
  name: "position",
  initialValue: "static",
  prefix: !1,
  type: 2,
  parse: function(A, e) {
    switch (e) {
      case "relative":
        return 1;
      case "absolute":
        return 2;
      case "fixed":
        return 3;
      case "sticky":
        return 4;
    }
    return 0;
  }
}, C0 = {
  name: "text-shadow",
  initialValue: "none",
  type: 1,
  prefix: !1,
  parse: function(A, e) {
    return e.length === 1 && sl(e[0], "none") ? [] : ri(e).map(function(t) {
      for (var i = {
        color: wi.TRANSPARENT,
        offsetX: it,
        offsetY: it,
        blur: it
      }, s = 0, n = 0; n < t.length; n++) {
        var r = t[n];
        Xi(r) ? (s === 0 ? i.offsetX = r : s === 1 ? i.offsetY = r : i.blur = r, s++) : i.color = Gi.parse(A, r);
      }
      return i;
    });
  }
}, y0 = {
  name: "text-transform",
  initialValue: "none",
  prefix: !1,
  type: 2,
  parse: function(A, e) {
    switch (e) {
      case "uppercase":
        return 2;
      case "lowercase":
        return 1;
      case "capitalize":
        return 3;
    }
    return 0;
  }
}, E0 = {
  name: "transform",
  initialValue: "none",
  prefix: !0,
  type: 0,
  parse: function(A, e) {
    if (e.type === 20 && e.value === "none")
      return null;
    if (e.type === 18) {
      var t = Q0[e.name];
      if (typeof t > "u")
        throw new Error('Attempting to parse an unsupported transform function "' + e.name + '"');
      return t(e.values);
    }
    return null;
  }
}, F0 = function(A) {
  var e = A.filter(function(t) {
    return t.type === 17;
  }).map(function(t) {
    return t.number;
  });
  return e.length === 6 ? e : null;
}, x0 = function(A) {
  var e = A.filter(function(a) {
    return a.type === 17;
  }).map(function(a) {
    return a.number;
  }), t = e[0], i = e[1];
  e[2], e[3];
  var s = e[4], n = e[5];
  e[6], e[7], e[8], e[9], e[10], e[11];
  var r = e[12], o = e[13];
  return e[14], e[15], e.length === 16 ? [t, i, s, n, r, o] : null;
}, Q0 = {
  matrix: F0,
  matrix3d: x0
}, xc = {
  type: 16,
  number: 50,
  flags: an
}, U0 = [xc, xc], _0 = {
  name: "transform-origin",
  initialValue: "50% 50%",
  prefix: !0,
  type: 1,
  parse: function(A, e) {
    var t = e.filter(Ne);
    return t.length !== 2 ? U0 : [t[0], t[1]];
  }
}, H0 = {
  name: "visible",
  initialValue: "none",
  prefix: !1,
  type: 2,
  parse: function(A, e) {
    switch (e) {
      case "hidden":
        return 1;
      case "collapse":
        return 2;
      case "visible":
      default:
        return 0;
    }
  }
}, PA;
(function(A) {
  A.NORMAL = "normal", A.BREAK_ALL = "break-all", A.KEEP_ALL = "keep-all";
})(PA || (PA = {}));
var M0 = {
  name: "word-break",
  initialValue: "normal",
  prefix: !1,
  type: 2,
  parse: function(A, e) {
    switch (e) {
      case "break-all":
        return PA.BREAK_ALL;
      case "keep-all":
        return PA.KEEP_ALL;
      case "normal":
      default:
        return PA.NORMAL;
    }
  }
}, D0 = {
  name: "z-index",
  initialValue: "auto",
  prefix: !1,
  type: 0,
  parse: function(A, e) {
    if (e.type === 20)
      return { auto: !0, order: 0 };
    if (qs(e))
      return { auto: !1, order: e.number };
    throw new Error("Invalid z-index number parsed");
  }
}, Zd = {
  name: "time",
  parse: function(A, e) {
    if (e.type === 15)
      switch (e.unit.toLowerCase()) {
        case "s":
          return 1e3 * e.number;
        case "ms":
          return e.number;
      }
    throw new Error("Unsupported time type");
  }
}, S0 = {
  name: "opacity",
  initialValue: "1",
  type: 0,
  prefix: !1,
  parse: function(A, e) {
    return qs(e) ? e.number : 1;
  }
}, T0 = {
  name: "text-decoration-color",
  initialValue: "transparent",
  prefix: !1,
  type: 3,
  format: "color"
}, L0 = {
  name: "text-decoration-line",
  initialValue: "none",
  prefix: !1,
  type: 1,
  parse: function(A, e) {
    return e.filter(ye).map(function(t) {
      switch (t.value) {
        case "underline":
          return 1;
        case "overline":
          return 2;
        case "line-through":
          return 3;
        case "none":
          return 4;
      }
      return 0;
    }).filter(function(t) {
      return t !== 0;
    });
  }
}, R0 = {
  name: "font-family",
  initialValue: "",
  prefix: !1,
  type: 1,
  parse: function(A, e) {
    var t = [], i = [];
    return e.forEach(function(s) {
      switch (s.type) {
        case 20:
        case 0:
          t.push(s.value);
          break;
        case 17:
          t.push(s.number.toString());
          break;
        case 4:
          i.push(t.join(" ")), t.length = 0;
          break;
      }
    }), t.length && i.push(t.join(" ")), i.map(function(s) {
      return s.indexOf(" ") === -1 ? s : "'" + s + "'";
    });
  }
}, I0 = {
  name: "font-size",
  initialValue: "0",
  prefix: !1,
  type: 3,
  format: "length"
}, k0 = {
  name: "font-weight",
  initialValue: "normal",
  type: 0,
  prefix: !1,
  parse: function(A, e) {
    if (qs(e))
      return e.number;
    if (ye(e))
      switch (e.value) {
        case "bold":
          return 700;
        case "normal":
        default:
          return 400;
      }
    return 400;
  }
}, O0 = {
  name: "font-variant",
  initialValue: "none",
  type: 1,
  prefix: !1,
  parse: function(A, e) {
    return e.filter(ye).map(function(t) {
      return t.value;
    });
  }
}, P0 = {
  name: "font-style",
  initialValue: "normal",
  prefix: !1,
  type: 2,
  parse: function(A, e) {
    switch (e) {
      case "oblique":
        return "oblique";
      case "italic":
        return "italic";
      case "normal":
      default:
        return "normal";
    }
  }
}, Ge = function(A, e) {
  return (A & e) !== 0;
}, N0 = {
  name: "content",
  initialValue: "none",
  type: 1,
  prefix: !1,
  parse: function(A, e) {
    if (e.length === 0)
      return [];
    var t = e[0];
    return t.type === 20 && t.value === "none" ? [] : e;
  }
}, K0 = {
  name: "counter-increment",
  initialValue: "none",
  prefix: !0,
  type: 1,
  parse: function(A, e) {
    if (e.length === 0)
      return null;
    var t = e[0];
    if (t.type === 20 && t.value === "none")
      return null;
    for (var i = [], s = e.filter(Ld), n = 0; n < s.length; n++) {
      var r = s[n], o = s[n + 1];
      if (r.type === 20) {
        var a = o && qs(o) ? o.number : 1;
        i.push({ counter: r.value, increment: a });
      }
    }
    return i;
  }
}, V0 = {
  name: "counter-reset",
  initialValue: "none",
  prefix: !0,
  type: 1,
  parse: function(A, e) {
    if (e.length === 0)
      return [];
    for (var t = [], i = e.filter(Ld), s = 0; s < i.length; s++) {
      var n = i[s], r = i[s + 1];
      if (ye(n) && n.value !== "none") {
        var o = r && qs(r) ? r.number : 0;
        t.push({ counter: n.value, reset: o });
      }
    }
    return t;
  }
}, z0 = {
  name: "duration",
  initialValue: "0s",
  prefix: !1,
  type: 1,
  parse: function(A, e) {
    return e.filter(ln).map(function(t) {
      return Zd.parse(A, t);
    });
  }
}, G0 = {
  name: "quotes",
  initialValue: "none",
  prefix: !0,
  type: 1,
  parse: function(A, e) {
    if (e.length === 0)
      return null;
    var t = e[0];
    if (t.type === 20 && t.value === "none")
      return null;
    var i = [], s = e.filter(my);
    if (s.length % 2 !== 0)
      return null;
    for (var n = 0; n < s.length; n += 2) {
      var r = s[n].value, o = s[n + 1].value;
      i.push({ open: r, close: o });
    }
    return i;
  }
}, Qc = function(A, e, t) {
  if (!A)
    return "";
  var i = A[Math.min(e, A.length - 1)];
  return i ? t ? i.open : i.close : "";
}, W0 = {
  name: "box-shadow",
  initialValue: "none",
  type: 1,
  prefix: !1,
  parse: function(A, e) {
    return e.length === 1 && sl(e[0], "none") ? [] : ri(e).map(function(t) {
      for (var i = {
        color: 255,
        offsetX: it,
        offsetY: it,
        blur: it,
        spread: it,
        inset: !1
      }, s = 0, n = 0; n < t.length; n++) {
        var r = t[n];
        sl(r, "inset") ? i.inset = !0 : Xi(r) ? (s === 0 ? i.offsetX = r : s === 1 ? i.offsetY = r : s === 2 ? i.blur = r : i.spread = r, s++) : i.color = Gi.parse(A, r);
      }
      return i;
    });
  }
}, j0 = {
  name: "paint-order",
  initialValue: "normal",
  prefix: !1,
  type: 1,
  parse: function(A, e) {
    var t = [
      0,
      1,
      2
      /* MARKERS */
    ], i = [];
    return e.filter(ye).forEach(function(s) {
      switch (s.value) {
        case "stroke":
          i.push(
            1
            /* STROKE */
          );
          break;
        case "fill":
          i.push(
            0
            /* FILL */
          );
          break;
        case "markers":
          i.push(
            2
            /* MARKERS */
          );
          break;
      }
    }), t.forEach(function(s) {
      i.indexOf(s) === -1 && i.push(s);
    }), i;
  }
}, X0 = {
  name: "-webkit-text-stroke-color",
  initialValue: "currentcolor",
  prefix: !1,
  type: 3,
  format: "color"
}, Y0 = {
  name: "-webkit-text-stroke-width",
  initialValue: "0",
  type: 0,
  prefix: !1,
  parse: function(A, e) {
    return ln(e) ? e.number : 0;
  }
}, J0 = (
  /** @class */
  function() {
    function A(e, t) {
      var i, s;
      this.animationDuration = V(e, z0, t.animationDuration), this.backgroundClip = V(e, vy, t.backgroundClip), this.backgroundColor = V(e, By, t.backgroundColor), this.backgroundImage = V(e, My, t.backgroundImage), this.backgroundOrigin = V(e, Dy, t.backgroundOrigin), this.backgroundPosition = V(e, Sy, t.backgroundPosition), this.backgroundRepeat = V(e, Ty, t.backgroundRepeat), this.backgroundSize = V(e, Ry, t.backgroundSize), this.borderTopColor = V(e, ky, t.borderTopColor), this.borderRightColor = V(e, Oy, t.borderRightColor), this.borderBottomColor = V(e, Py, t.borderBottomColor), this.borderLeftColor = V(e, Ny, t.borderLeftColor), this.borderTopLeftRadius = V(e, Ky, t.borderTopLeftRadius), this.borderTopRightRadius = V(e, Vy, t.borderTopRightRadius), this.borderBottomRightRadius = V(e, zy, t.borderBottomRightRadius), this.borderBottomLeftRadius = V(e, Gy, t.borderBottomLeftRadius), this.borderTopStyle = V(e, Wy, t.borderTopStyle), this.borderRightStyle = V(e, jy, t.borderRightStyle), this.borderBottomStyle = V(e, Xy, t.borderBottomStyle), this.borderLeftStyle = V(e, Yy, t.borderLeftStyle), this.borderTopWidth = V(e, Jy, t.borderTopWidth), this.borderRightWidth = V(e, $y, t.borderRightWidth), this.borderBottomWidth = V(e, Zy, t.borderBottomWidth), this.borderLeftWidth = V(e, qy, t.borderLeftWidth), this.boxShadow = V(e, W0, t.boxShadow), this.color = V(e, e0, t.color), this.direction = V(e, t0, t.direction), this.display = V(e, i0, t.display), this.float = V(e, A0, t.cssFloat), this.fontFamily = V(e, R0, t.fontFamily), this.fontSize = V(e, I0, t.fontSize), this.fontStyle = V(e, P0, t.fontStyle), this.fontVariant = V(e, O0, t.fontVariant), this.fontWeight = V(e, k0, t.fontWeight), this.letterSpacing = V(e, n0, t.letterSpacing), this.lineBreak = V(e, r0, t.lineBreak), this.lineHeight = V(e, o0, t.lineHeight), this.listStyleImage = V(e, a0, t.listStyleImage), this.listStylePosition = V(e, l0, t.listStylePosition), this.listStyleType = V(e, Al, t.listStyleType), this.marginTop = V(e, h0, t.marginTop), this.marginRight = V(e, c0, t.marginRight), this.marginBottom = V(e, u0, t.marginBottom), this.marginLeft = V(e, d0, t.marginLeft), this.opacity = V(e, S0, t.opacity);
      var n = V(e, f0, t.overflow);
      this.overflowX = n[0], this.overflowY = n[n.length > 1 ? 1 : 0], this.overflowWrap = V(e, g0, t.overflowWrap), this.paddingTop = V(e, p0, t.paddingTop), this.paddingRight = V(e, m0, t.paddingRight), this.paddingBottom = V(e, b0, t.paddingBottom), this.paddingLeft = V(e, w0, t.paddingLeft), this.paintOrder = V(e, j0, t.paintOrder), this.position = V(e, B0, t.position), this.textAlign = V(e, v0, t.textAlign), this.textDecorationColor = V(e, T0, (i = t.textDecorationColor) !== null && i !== void 0 ? i : t.color), this.textDecorationLine = V(e, L0, (s = t.textDecorationLine) !== null && s !== void 0 ? s : t.textDecoration), this.textShadow = V(e, C0, t.textShadow), this.textTransform = V(e, y0, t.textTransform), this.transform = V(e, E0, t.transform), this.transformOrigin = V(e, _0, t.transformOrigin), this.visibility = V(e, H0, t.visibility), this.webkitTextStrokeColor = V(e, X0, t.webkitTextStrokeColor), this.webkitTextStrokeWidth = V(e, Y0, t.webkitTextStrokeWidth), this.wordBreak = V(e, M0, t.wordBreak), this.zIndex = V(e, D0, t.zIndex);
    }
    return A.prototype.isVisible = function() {
      return this.display > 0 && this.opacity > 0 && this.visibility === 0;
    }, A.prototype.isTransparent = function() {
      return Wi(this.backgroundColor);
    }, A.prototype.isTransformed = function() {
      return this.transform !== null;
    }, A.prototype.isPositioned = function() {
      return this.position !== 0;
    }, A.prototype.isPositionedWithZIndex = function() {
      return this.isPositioned() && !this.zIndex.auto;
    }, A.prototype.isFloating = function() {
      return this.float !== 0;
    }, A.prototype.isInlineLevel = function() {
      return Ge(
        this.display,
        4
        /* INLINE */
      ) || Ge(
        this.display,
        33554432
        /* INLINE_BLOCK */
      ) || Ge(
        this.display,
        268435456
        /* INLINE_FLEX */
      ) || Ge(
        this.display,
        536870912
        /* INLINE_GRID */
      ) || Ge(
        this.display,
        67108864
        /* INLINE_LIST_ITEM */
      ) || Ge(
        this.display,
        134217728
        /* INLINE_TABLE */
      );
    }, A;
  }()
), $0 = (
  /** @class */
  /* @__PURE__ */ function() {
    function A(e, t) {
      this.content = V(e, N0, t.content), this.quotes = V(e, G0, t.quotes);
    }
    return A;
  }()
), Uc = (
  /** @class */
  /* @__PURE__ */ function() {
    function A(e, t) {
      this.counterIncrement = V(e, K0, t.counterIncrement), this.counterReset = V(e, V0, t.counterReset);
    }
    return A;
  }()
), V = function(A, e, t) {
  var i = new Sd(), s = t !== null && typeof t < "u" ? t.toString() : e.initialValue;
  i.write(s);
  var n = new Td(i.read());
  switch (e.type) {
    case 2:
      var r = n.parseComponentValue();
      return e.parse(A, ye(r) ? r.value : e.initialValue);
    case 0:
      return e.parse(A, n.parseComponentValue());
    case 1:
      return e.parse(A, n.parseComponentValues());
    case 4:
      return n.parseComponentValue();
    case 3:
      switch (e.format) {
        case "angle":
          return Xr.parse(A, n.parseComponentValue());
        case "color":
          return Gi.parse(A, n.parseComponentValue());
        case "image":
          return Sl.parse(A, n.parseComponentValue());
        case "length":
          var o = n.parseComponentValue();
          return Xi(o) ? o : it;
        case "length-percentage":
          var a = n.parseComponentValue();
          return Ne(a) ? a : it;
        case "time":
          return Zd.parse(A, n.parseComponentValue());
      }
      break;
  }
}, Z0 = "data-html2canvas-debug", q0 = function(A) {
  var e = A.getAttribute(Z0);
  switch (e) {
    case "all":
      return 1;
    case "clone":
      return 2;
    case "parse":
      return 3;
    case "render":
      return 4;
    default:
      return 0;
  }
}, nl = function(A, e) {
  var t = q0(A);
  return t === 1 || e === t;
}, oi = (
  /** @class */
  /* @__PURE__ */ function() {
    function A(e, t) {
      if (this.context = e, this.textNodes = [], this.elements = [], this.flags = 0, nl(
        t,
        3
        /* PARSE */
      ))
        debugger;
      this.styles = new J0(e, window.getComputedStyle(t, null)), al(t) && (this.styles.animationDuration.some(function(i) {
        return i > 0;
      }) && (t.style.animationDuration = "0s"), this.styles.transform !== null && (t.style.transform = "none")), this.bounds = Wr(this.context, t), nl(
        t,
        4
        /* RENDER */
      ) && (this.flags |= 16);
    }
    return A;
  }()
), eE = "AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=", _c = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", HA = typeof Uint8Array > "u" ? [] : new Uint8Array(256);
for (var tr = 0; tr < _c.length; tr++)
  HA[_c.charCodeAt(tr)] = tr;
var tE = function(A) {
  var e = A.length * 0.75, t = A.length, i, s = 0, n, r, o, a;
  A[A.length - 1] === "=" && (e--, A[A.length - 2] === "=" && e--);
  var l = typeof ArrayBuffer < "u" && typeof Uint8Array < "u" && typeof Uint8Array.prototype.slice < "u" ? new ArrayBuffer(e) : new Array(e), h = Array.isArray(l) ? l : new Uint8Array(l);
  for (i = 0; i < t; i += 4)
    n = HA[A.charCodeAt(i)], r = HA[A.charCodeAt(i + 1)], o = HA[A.charCodeAt(i + 2)], a = HA[A.charCodeAt(i + 3)], h[s++] = n << 2 | r >> 4, h[s++] = (r & 15) << 4 | o >> 2, h[s++] = (o & 3) << 6 | a & 63;
  return l;
}, iE = function(A) {
  for (var e = A.length, t = [], i = 0; i < e; i += 2)
    t.push(A[i + 1] << 8 | A[i]);
  return t;
}, sE = function(A) {
  for (var e = A.length, t = [], i = 0; i < e; i += 4)
    t.push(A[i + 3] << 24 | A[i + 2] << 16 | A[i + 1] << 8 | A[i]);
  return t;
}, ws = 5, Tl = 11, Io = 2, AE = Tl - ws, qd = 65536 >> ws, nE = 1 << ws, ko = nE - 1, rE = 1024 >> ws, oE = qd + rE, aE = oE, lE = 32, hE = aE + lE, cE = 65536 >> Tl, uE = 1 << AE, dE = uE - 1, Hc = function(A, e, t) {
  return A.slice ? A.slice(e, t) : new Uint16Array(Array.prototype.slice.call(A, e, t));
}, fE = function(A, e, t) {
  return A.slice ? A.slice(e, t) : new Uint32Array(Array.prototype.slice.call(A, e, t));
}, gE = function(A, e) {
  var t = tE(A), i = Array.isArray(t) ? sE(t) : new Uint32Array(t), s = Array.isArray(t) ? iE(t) : new Uint16Array(t), n = 24, r = Hc(s, n / 2, i[4] / 2), o = i[5] === 2 ? Hc(s, (n + i[4]) / 2) : fE(i, Math.ceil((n + i[4]) / 4));
  return new pE(i[0], i[1], i[2], i[3], r, o);
}, pE = (
  /** @class */
  function() {
    function A(e, t, i, s, n, r) {
      this.initialValue = e, this.errorValue = t, this.highStart = i, this.highValueIndex = s, this.index = n, this.data = r;
    }
    return A.prototype.get = function(e) {
      var t;
      if (e >= 0) {
        if (e < 55296 || e > 56319 && e <= 65535)
          return t = this.index[e >> ws], t = (t << Io) + (e & ko), this.data[t];
        if (e <= 65535)
          return t = this.index[qd + (e - 55296 >> ws)], t = (t << Io) + (e & ko), this.data[t];
        if (e < this.highStart)
          return t = hE - cE + (e >> Tl), t = this.index[t], t += e >> ws & dE, t = this.index[t], t = (t << Io) + (e & ko), this.data[t];
        if (e <= 1114111)
          return this.data[this.highValueIndex];
      }
      return this.errorValue;
    }, A;
  }()
), Mc = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", mE = typeof Uint8Array > "u" ? [] : new Uint8Array(256);
for (var ir = 0; ir < Mc.length; ir++)
  mE[Mc.charCodeAt(ir)] = ir;
var bE = 1, Oo = 2, Po = 3, Dc = 4, Sc = 5, wE = 7, Tc = 8, No = 9, Ko = 10, Lc = 11, Rc = 12, Ic = 13, kc = 14, Vo = 15, vE = function(A) {
  for (var e = [], t = 0, i = A.length; t < i; ) {
    var s = A.charCodeAt(t++);
    if (s >= 55296 && s <= 56319 && t < i) {
      var n = A.charCodeAt(t++);
      (n & 64512) === 56320 ? e.push(((s & 1023) << 10) + (n & 1023) + 65536) : (e.push(s), t--);
    } else
      e.push(s);
  }
  return e;
}, BE = function() {
  for (var A = [], e = 0; e < arguments.length; e++)
    A[e] = arguments[e];
  if (String.fromCodePoint)
    return String.fromCodePoint.apply(String, A);
  var t = A.length;
  if (!t)
    return "";
  for (var i = [], s = -1, n = ""; ++s < t; ) {
    var r = A[s];
    r <= 65535 ? i.push(r) : (r -= 65536, i.push((r >> 10) + 55296, r % 1024 + 56320)), (s + 1 === t || i.length > 16384) && (n += String.fromCharCode.apply(String, i), i.length = 0);
  }
  return n;
}, CE = gE(eE), Lt = "", zo = "", yE = function(A) {
  return CE.get(A);
}, EE = function(A, e, t) {
  var i = t - 2, s = e[i], n = e[t - 1], r = e[t];
  if (n === Oo && r === Po)
    return Lt;
  if (n === Oo || n === Po || n === Dc || r === Oo || r === Po || r === Dc)
    return zo;
  if (n === Tc && [Tc, No, Lc, Rc].indexOf(r) !== -1 || (n === Lc || n === No) && (r === No || r === Ko) || (n === Rc || n === Ko) && r === Ko || r === Ic || r === Sc || r === wE || n === bE)
    return Lt;
  if (n === Ic && r === kc) {
    for (; s === Sc; )
      s = e[--i];
    if (s === kc)
      return Lt;
  }
  if (n === Vo && r === Vo) {
    for (var o = 0; s === Vo; )
      o++, s = e[--i];
    if (o % 2 === 0)
      return Lt;
  }
  return zo;
}, FE = function(A) {
  var e = vE(A), t = e.length, i = 0, s = 0, n = e.map(yE);
  return {
    next: function() {
      if (i >= t)
        return { done: !0, value: null };
      for (var r = Lt; i < t && (r = EE(e, n, ++i)) === Lt; )
        ;
      if (r !== Lt || i === t) {
        var o = BE.apply(null, e.slice(s, i));
        return s = i, { value: o, done: !1 };
      }
      return { done: !0, value: null };
    }
  };
}, xE = function(A) {
  for (var e = FE(A), t = [], i; !(i = e.next()).done; )
    i.value && t.push(i.value.slice());
  return t;
}, QE = function(A) {
  var e = 123;
  if (A.createRange) {
    var t = A.createRange();
    if (t.getBoundingClientRect) {
      var i = A.createElement("boundtest");
      i.style.height = e + "px", i.style.display = "block", A.body.appendChild(i), t.selectNode(i);
      var s = t.getBoundingClientRect(), n = Math.round(s.height);
      if (A.body.removeChild(i), n === e)
        return !0;
    }
  }
  return !1;
}, UE = function(A) {
  var e = A.createElement("boundtest");
  e.style.width = "50px", e.style.display = "block", e.style.fontSize = "12px", e.style.letterSpacing = "0px", e.style.wordSpacing = "0px", A.body.appendChild(e);
  var t = A.createRange();
  e.innerHTML = typeof "".repeat == "function" ? "&#128104;".repeat(10) : "";
  var i = e.firstChild, s = jr(i.data).map(function(a) {
    return Ie(a);
  }), n = 0, r = {}, o = s.every(function(a, l) {
    t.setStart(i, n), t.setEnd(i, n + a.length);
    var h = t.getBoundingClientRect();
    n += a.length;
    var c = h.x > r.x || h.y > r.y;
    return r = h, l === 0 ? !0 : c;
  });
  return A.body.removeChild(e), o;
}, _E = function() {
  return typeof new Image().crossOrigin < "u";
}, HE = function() {
  return typeof new XMLHttpRequest().responseType == "string";
}, ME = function(A) {
  var e = new Image(), t = A.createElement("canvas"), i = t.getContext("2d");
  if (!i)
    return !1;
  e.src = "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";
  try {
    i.drawImage(e, 0, 0), t.toDataURL();
  } catch {
    return !1;
  }
  return !0;
}, Oc = function(A) {
  return A[0] === 0 && A[1] === 255 && A[2] === 0 && A[3] === 255;
}, DE = function(A) {
  var e = A.createElement("canvas"), t = 100;
  e.width = t, e.height = t;
  var i = e.getContext("2d");
  if (!i)
    return Promise.reject(!1);
  i.fillStyle = "rgb(0, 255, 0)", i.fillRect(0, 0, t, t);
  var s = new Image(), n = e.toDataURL();
  s.src = n;
  var r = rl(t, t, 0, 0, s);
  return i.fillStyle = "red", i.fillRect(0, 0, t, t), Pc(r).then(function(o) {
    i.drawImage(o, 0, 0);
    var a = i.getImageData(0, 0, t, t).data;
    i.fillStyle = "red", i.fillRect(0, 0, t, t);
    var l = A.createElement("div");
    return l.style.backgroundImage = "url(" + n + ")", l.style.height = t + "px", Oc(a) ? Pc(rl(t, t, 0, 0, l)) : Promise.reject(!1);
  }).then(function(o) {
    return i.drawImage(o, 0, 0), Oc(i.getImageData(0, 0, t, t).data);
  }).catch(function() {
    return !1;
  });
}, rl = function(A, e, t, i, s) {
  var n = "http://www.w3.org/2000/svg", r = document.createElementNS(n, "svg"), o = document.createElementNS(n, "foreignObject");
  return r.setAttributeNS(null, "width", A.toString()), r.setAttributeNS(null, "height", e.toString()), o.setAttributeNS(null, "width", "100%"), o.setAttributeNS(null, "height", "100%"), o.setAttributeNS(null, "x", t.toString()), o.setAttributeNS(null, "y", i.toString()), o.setAttributeNS(null, "externalResourcesRequired", "true"), r.appendChild(o), o.appendChild(s), r;
}, Pc = function(A) {
  return new Promise(function(e, t) {
    var i = new Image();
    i.onload = function() {
      return e(i);
    }, i.onerror = t, i.src = "data:image/svg+xml;charset=utf-8," + encodeURIComponent(new XMLSerializer().serializeToString(A));
  });
}, tt = {
  get SUPPORT_RANGE_BOUNDS() {
    var A = QE(document);
    return Object.defineProperty(tt, "SUPPORT_RANGE_BOUNDS", { value: A }), A;
  },
  get SUPPORT_WORD_BREAKING() {
    var A = tt.SUPPORT_RANGE_BOUNDS && UE(document);
    return Object.defineProperty(tt, "SUPPORT_WORD_BREAKING", { value: A }), A;
  },
  get SUPPORT_SVG_DRAWING() {
    var A = ME(document);
    return Object.defineProperty(tt, "SUPPORT_SVG_DRAWING", { value: A }), A;
  },
  get SUPPORT_FOREIGNOBJECT_DRAWING() {
    var A = typeof Array.from == "function" && typeof window.fetch == "function" ? DE(document) : Promise.resolve(!1);
    return Object.defineProperty(tt, "SUPPORT_FOREIGNOBJECT_DRAWING", { value: A }), A;
  },
  get SUPPORT_CORS_IMAGES() {
    var A = _E();
    return Object.defineProperty(tt, "SUPPORT_CORS_IMAGES", { value: A }), A;
  },
  get SUPPORT_RESPONSE_TYPE() {
    var A = HE();
    return Object.defineProperty(tt, "SUPPORT_RESPONSE_TYPE", { value: A }), A;
  },
  get SUPPORT_CORS_XHR() {
    var A = "withCredentials" in new XMLHttpRequest();
    return Object.defineProperty(tt, "SUPPORT_CORS_XHR", { value: A }), A;
  },
  get SUPPORT_NATIVE_TEXT_SEGMENTATION() {
    var A = !!(typeof Intl < "u" && Intl.Segmenter);
    return Object.defineProperty(tt, "SUPPORT_NATIVE_TEXT_SEGMENTATION", { value: A }), A;
  }
}, NA = (
  /** @class */
  /* @__PURE__ */ function() {
    function A(e, t) {
      this.text = e, this.bounds = t;
    }
    return A;
  }()
), SE = function(A, e, t, i) {
  var s = RE(e, t), n = [], r = 0;
  return s.forEach(function(o) {
    if (t.textDecorationLine.length || o.trim().length > 0)
      if (tt.SUPPORT_RANGE_BOUNDS) {
        var a = Nc(i, r, o.length).getClientRects();
        if (a.length > 1) {
          var l = Ll(o), h = 0;
          l.forEach(function(u) {
            n.push(new NA(u, Bi.fromDOMRectList(A, Nc(i, h + r, u.length).getClientRects()))), h += u.length;
          });
        } else
          n.push(new NA(o, Bi.fromDOMRectList(A, a)));
      } else {
        var c = i.splitText(o.length);
        n.push(new NA(o, TE(A, i))), i = c;
      }
    else tt.SUPPORT_RANGE_BOUNDS || (i = i.splitText(o.length));
    r += o.length;
  }), n;
}, TE = function(A, e) {
  var t = e.ownerDocument;
  if (t) {
    var i = t.createElement("html2canvaswrapper");
    i.appendChild(e.cloneNode(!0));
    var s = e.parentNode;
    if (s) {
      s.replaceChild(i, e);
      var n = Wr(A, i);
      return i.firstChild && s.replaceChild(i.firstChild, i), n;
    }
  }
  return Bi.EMPTY;
}, Nc = function(A, e, t) {
  var i = A.ownerDocument;
  if (!i)
    throw new Error("Node has no owner document");
  var s = i.createRange();
  return s.setStart(A, e), s.setEnd(A, e + t), s;
}, Ll = function(A) {
  if (tt.SUPPORT_NATIVE_TEXT_SEGMENTATION) {
    var e = new Intl.Segmenter(void 0, { granularity: "grapheme" });
    return Array.from(e.segment(A)).map(function(t) {
      return t.segment;
    });
  }
  return xE(A);
}, LE = function(A, e) {
  if (tt.SUPPORT_NATIVE_TEXT_SEGMENTATION) {
    var t = new Intl.Segmenter(void 0, {
      granularity: "word"
    });
    return Array.from(t.segment(A)).map(function(i) {
      return i.segment;
    });
  }
  return kE(A, e);
}, RE = function(A, e) {
  return e.letterSpacing !== 0 ? Ll(A) : LE(A, e);
}, IE = [32, 160, 4961, 65792, 65793, 4153, 4241], kE = function(A, e) {
  for (var t = cC(A, {
    lineBreak: e.lineBreak,
    wordBreak: e.overflowWrap === "break-word" ? "break-word" : e.wordBreak
  }), i = [], s, n = function() {
    if (s.value) {
      var r = s.value.slice(), o = jr(r), a = "";
      o.forEach(function(l) {
        IE.indexOf(l) === -1 ? a += Ie(l) : (a.length && i.push(a), i.push(Ie(l)), a = "");
      }), a.length && i.push(a);
    }
  }; !(s = t.next()).done; )
    n();
  return i;
}, OE = (
  /** @class */
  /* @__PURE__ */ function() {
    function A(e, t, i) {
      this.text = PE(t.data, i.textTransform), this.textBounds = SE(e, this.text, i, t);
    }
    return A;
  }()
), PE = function(A, e) {
  switch (e) {
    case 1:
      return A.toLowerCase();
    case 3:
      return A.replace(NE, KE);
    case 2:
      return A.toUpperCase();
    default:
      return A;
  }
}, NE = /(^|\s|:|-|\(|\))([a-z])/g, KE = function(A, e, t) {
  return A.length > 0 ? e + t.toUpperCase() : A;
}, ef = (
  /** @class */
  function(A) {
    Jt(e, A);
    function e(t, i) {
      var s = A.call(this, t, i) || this;
      return s.src = i.currentSrc || i.src, s.intrinsicWidth = i.naturalWidth, s.intrinsicHeight = i.naturalHeight, s.context.cache.addImage(s.src), s;
    }
    return e;
  }(oi)
), tf = (
  /** @class */
  function(A) {
    Jt(e, A);
    function e(t, i) {
      var s = A.call(this, t, i) || this;
      return s.canvas = i, s.intrinsicWidth = i.width, s.intrinsicHeight = i.height, s;
    }
    return e;
  }(oi)
), sf = (
  /** @class */
  function(A) {
    Jt(e, A);
    function e(t, i) {
      var s = A.call(this, t, i) || this, n = new XMLSerializer(), r = Wr(t, i);
      return i.setAttribute("width", r.width + "px"), i.setAttribute("height", r.height + "px"), s.svg = "data:image/svg+xml," + encodeURIComponent(n.serializeToString(i)), s.intrinsicWidth = i.width.baseVal.value, s.intrinsicHeight = i.height.baseVal.value, s.context.cache.addImage(s.svg), s;
    }
    return e;
  }(oi)
), Af = (
  /** @class */
  function(A) {
    Jt(e, A);
    function e(t, i) {
      var s = A.call(this, t, i) || this;
      return s.value = i.value, s;
    }
    return e;
  }(oi)
), ol = (
  /** @class */
  function(A) {
    Jt(e, A);
    function e(t, i) {
      var s = A.call(this, t, i) || this;
      return s.start = i.start, s.reversed = typeof i.reversed == "boolean" && i.reversed === !0, s;
    }
    return e;
  }(oi)
), VE = [
  {
    type: 15,
    flags: 0,
    unit: "px",
    number: 3
  }
], zE = [
  {
    type: 16,
    flags: 0,
    number: 50
  }
], GE = function(A) {
  return A.width > A.height ? new Bi(A.left + (A.width - A.height) / 2, A.top, A.height, A.height) : A.width < A.height ? new Bi(A.left, A.top + (A.height - A.width) / 2, A.width, A.width) : A;
}, WE = function(A) {
  var e = A.type === jE ? new Array(A.value.length + 1).join("") : A.value;
  return e.length === 0 ? A.placeholder || "" : e;
}, Hr = "checkbox", Mr = "radio", jE = "password", Kc = 707406591, Rl = (
  /** @class */
  function(A) {
    Jt(e, A);
    function e(t, i) {
      var s = A.call(this, t, i) || this;
      switch (s.type = i.type.toLowerCase(), s.checked = i.checked, s.value = WE(i), (s.type === Hr || s.type === Mr) && (s.styles.backgroundColor = 3739148031, s.styles.borderTopColor = s.styles.borderRightColor = s.styles.borderBottomColor = s.styles.borderLeftColor = 2779096575, s.styles.borderTopWidth = s.styles.borderRightWidth = s.styles.borderBottomWidth = s.styles.borderLeftWidth = 1, s.styles.borderTopStyle = s.styles.borderRightStyle = s.styles.borderBottomStyle = s.styles.borderLeftStyle = 1, s.styles.backgroundClip = [
        0
        /* BORDER_BOX */
      ], s.styles.backgroundOrigin = [
        0
        /* BORDER_BOX */
      ], s.bounds = GE(s.bounds)), s.type) {
        case Hr:
          s.styles.borderTopRightRadius = s.styles.borderTopLeftRadius = s.styles.borderBottomRightRadius = s.styles.borderBottomLeftRadius = VE;
          break;
        case Mr:
          s.styles.borderTopRightRadius = s.styles.borderTopLeftRadius = s.styles.borderBottomRightRadius = s.styles.borderBottomLeftRadius = zE;
          break;
      }
      return s;
    }
    return e;
  }(oi)
), nf = (
  /** @class */
  function(A) {
    Jt(e, A);
    function e(t, i) {
      var s = A.call(this, t, i) || this, n = i.options[i.selectedIndex || 0];
      return s.value = n && n.text || "", s;
    }
    return e;
  }(oi)
), rf = (
  /** @class */
  function(A) {
    Jt(e, A);
    function e(t, i) {
      var s = A.call(this, t, i) || this;
      return s.value = i.value, s;
    }
    return e;
  }(oi)
), of = (
  /** @class */
  function(A) {
    Jt(e, A);
    function e(t, i) {
      var s = A.call(this, t, i) || this;
      s.src = i.src, s.width = parseInt(i.width, 10) || 0, s.height = parseInt(i.height, 10) || 0, s.backgroundColor = s.styles.backgroundColor;
      try {
        if (i.contentWindow && i.contentWindow.document && i.contentWindow.document.documentElement) {
          s.tree = lf(t, i.contentWindow.document.documentElement);
          var n = i.contentWindow.document.documentElement ? OA(t, getComputedStyle(i.contentWindow.document.documentElement).backgroundColor) : wi.TRANSPARENT, r = i.contentWindow.document.body ? OA(t, getComputedStyle(i.contentWindow.document.body).backgroundColor) : wi.TRANSPARENT;
          s.backgroundColor = Wi(n) ? Wi(r) ? s.styles.backgroundColor : r : n;
        }
      } catch {
      }
      return s;
    }
    return e;
  }(oi)
), XE = ["OL", "UL", "MENU"], mr = function(A, e, t, i) {
  for (var s = e.firstChild, n = void 0; s; s = n)
    if (n = s.nextSibling, hf(s) && s.data.trim().length > 0)
      t.textNodes.push(new OE(A, s, t.styles));
    else if (Os(s))
      if (ff(s) && s.assignedNodes)
        s.assignedNodes().forEach(function(o) {
          return mr(A, o, t, i);
        });
      else {
        var r = af(A, s);
        r.styles.isVisible() && (YE(s, r, i) ? r.flags |= 4 : JE(r.styles) && (r.flags |= 2), XE.indexOf(s.tagName) !== -1 && (r.flags |= 8), t.elements.push(r), s.slot, s.shadowRoot ? mr(A, s.shadowRoot, r, i) : !Dr(s) && !cf(s) && !Sr(s) && mr(A, s, r, i));
      }
}, af = function(A, e) {
  return ll(e) ? new ef(A, e) : uf(e) ? new tf(A, e) : cf(e) ? new sf(A, e) : $E(e) ? new Af(A, e) : ZE(e) ? new ol(A, e) : qE(e) ? new Rl(A, e) : Sr(e) ? new nf(A, e) : Dr(e) ? new rf(A, e) : df(e) ? new of(A, e) : new oi(A, e);
}, lf = function(A, e) {
  var t = af(A, e);
  return t.flags |= 4, mr(A, e, t, t), t;
}, YE = function(A, e, t) {
  return e.styles.isPositionedWithZIndex() || e.styles.opacity < 1 || e.styles.isTransformed() || Il(A) && t.styles.isTransparent();
}, JE = function(A) {
  return A.isPositioned() || A.isFloating();
}, hf = function(A) {
  return A.nodeType === Node.TEXT_NODE;
}, Os = function(A) {
  return A.nodeType === Node.ELEMENT_NODE;
}, al = function(A) {
  return Os(A) && typeof A.style < "u" && !br(A);
}, br = function(A) {
  return typeof A.className == "object";
}, $E = function(A) {
  return A.tagName === "LI";
}, ZE = function(A) {
  return A.tagName === "OL";
}, qE = function(A) {
  return A.tagName === "INPUT";
}, eF = function(A) {
  return A.tagName === "HTML";
}, cf = function(A) {
  return A.tagName === "svg";
}, Il = function(A) {
  return A.tagName === "BODY";
}, uf = function(A) {
  return A.tagName === "CANVAS";
}, Vc = function(A) {
  return A.tagName === "VIDEO";
}, ll = function(A) {
  return A.tagName === "IMG";
}, df = function(A) {
  return A.tagName === "IFRAME";
}, zc = function(A) {
  return A.tagName === "STYLE";
}, tF = function(A) {
  return A.tagName === "SCRIPT";
}, Dr = function(A) {
  return A.tagName === "TEXTAREA";
}, Sr = function(A) {
  return A.tagName === "SELECT";
}, ff = function(A) {
  return A.tagName === "SLOT";
}, Gc = function(A) {
  return A.tagName.indexOf("-") > 0;
}, iF = (
  /** @class */
  function() {
    function A() {
      this.counters = {};
    }
    return A.prototype.getCounterValue = function(e) {
      var t = this.counters[e];
      return t && t.length ? t[t.length - 1] : 1;
    }, A.prototype.getCounterValues = function(e) {
      var t = this.counters[e];
      return t || [];
    }, A.prototype.pop = function(e) {
      var t = this;
      e.forEach(function(i) {
        return t.counters[i].pop();
      });
    }, A.prototype.parse = function(e) {
      var t = this, i = e.counterIncrement, s = e.counterReset, n = !0;
      i !== null && i.forEach(function(o) {
        var a = t.counters[o.counter];
        a && o.increment !== 0 && (n = !1, a.length || a.push(1), a[Math.max(0, a.length - 1)] += o.increment);
      });
      var r = [];
      return n && s.forEach(function(o) {
        var a = t.counters[o.counter];
        r.push(o.counter), a || (a = t.counters[o.counter] = []), a.push(o.reset);
      }), r;
    }, A;
  }()
), Wc = {
  integers: [1e3, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],
  values: ["M", "CM", "D", "CD", "C", "XC", "L", "XL", "X", "IX", "V", "IV", "I"]
}, jc = {
  integers: [
    9e3,
    8e3,
    7e3,
    6e3,
    5e3,
    4e3,
    3e3,
    2e3,
    1e3,
    900,
    800,
    700,
    600,
    500,
    400,
    300,
    200,
    100,
    90,
    80,
    70,
    60,
    50,
    40,
    30,
    20,
    10,
    9,
    8,
    7,
    6,
    5,
    4,
    3,
    2,
    1
  ],
  values: [
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    ""
  ]
}, sF = {
  integers: [
    1e4,
    9e3,
    8e3,
    7e3,
    6e3,
    5e3,
    4e3,
    3e3,
    2e3,
    1e3,
    400,
    300,
    200,
    100,
    90,
    80,
    70,
    60,
    50,
    40,
    30,
    20,
    19,
    18,
    17,
    16,
    15,
    10,
    9,
    8,
    7,
    6,
    5,
    4,
    3,
    2,
    1
  ],
  values: [
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    ""
  ]
}, AF = {
  integers: [
    1e4,
    9e3,
    8e3,
    7e3,
    6e3,
    5e3,
    4e3,
    3e3,
    2e3,
    1e3,
    900,
    800,
    700,
    600,
    500,
    400,
    300,
    200,
    100,
    90,
    80,
    70,
    60,
    50,
    40,
    30,
    20,
    10,
    9,
    8,
    7,
    6,
    5,
    4,
    3,
    2,
    1
  ],
  values: [
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    ""
  ]
}, Ds = function(A, e, t, i, s, n) {
  return A < e || A > t ? An(A, s, n.length > 0) : i.integers.reduce(function(r, o, a) {
    for (; A >= o; )
      A -= o, r += i.values[a];
    return r;
  }, "") + n;
}, gf = function(A, e, t, i) {
  var s = "";
  do
    t || A--, s = i(A) + s, A /= e;
  while (A * e >= e);
  return s;
}, Re = function(A, e, t, i, s) {
  var n = t - e + 1;
  return (A < 0 ? "-" : "") + (gf(Math.abs(A), n, i, function(r) {
    return Ie(Math.floor(r % n) + e);
  }) + s);
}, ns = function(A, e, t) {
  t === void 0 && (t = ". ");
  var i = e.length;
  return gf(Math.abs(A), i, !1, function(s) {
    return e[Math.floor(s % i)];
  }) + t;
}, Ls = 1, _i = 2, Hi = 4, MA = 8, di = function(A, e, t, i, s, n) {
  if (A < -9999 || A > 9999)
    return An(A, 4, s.length > 0);
  var r = Math.abs(A), o = s;
  if (r === 0)
    return e[0] + o;
  for (var a = 0; r > 0 && a <= 4; a++) {
    var l = r % 10;
    l === 0 && Ge(n, Ls) && o !== "" ? o = e[l] + o : l > 1 || l === 1 && a === 0 || l === 1 && a === 1 && Ge(n, _i) || l === 1 && a === 1 && Ge(n, Hi) && A > 100 || l === 1 && a > 1 && Ge(n, MA) ? o = e[l] + (a > 0 ? t[a - 1] : "") + o : l === 1 && a > 0 && (o = t[a - 1] + o), r = Math.floor(r / 10);
  }
  return (A < 0 ? i : "") + o;
}, Xc = "", Yc = "", Jc = "", Go = "", An = function(A, e, t) {
  var i = t ? ". " : "", s = t ? "" : "", n = t ? ", " : "", r = t ? " " : "";
  switch (e) {
    case 0:
      return "" + r;
    case 1:
      return "" + r;
    case 2:
      return "" + r;
    case 5:
      var o = Re(A, 48, 57, !0, i);
      return o.length < 4 ? "0" + o : o;
    case 4:
      return ns(A, "", s);
    case 6:
      return Ds(A, 1, 3999, Wc, 3, i).toLowerCase();
    case 7:
      return Ds(A, 1, 3999, Wc, 3, i);
    case 8:
      return Re(A, 945, 969, !1, i);
    case 9:
      return Re(A, 97, 122, !1, i);
    case 10:
      return Re(A, 65, 90, !1, i);
    case 11:
      return Re(A, 1632, 1641, !0, i);
    case 12:
    case 49:
      return Ds(A, 1, 9999, jc, 3, i);
    case 35:
      return Ds(A, 1, 9999, jc, 3, i).toLowerCase();
    case 13:
      return Re(A, 2534, 2543, !0, i);
    case 14:
    case 30:
      return Re(A, 6112, 6121, !0, i);
    case 15:
      return ns(A, "", s);
    case 16:
      return ns(A, "", s);
    case 17:
    case 48:
      return di(A, "", Xc, "", s, _i | Hi | MA);
    case 47:
      return di(A, "", Yc, "", s, Ls | _i | Hi | MA);
    case 42:
      return di(A, "", Xc, "", s, _i | Hi | MA);
    case 41:
      return di(A, "", Yc, "", s, Ls | _i | Hi | MA);
    case 26:
      return di(A, "", "", Jc, s, 0);
    case 25:
      return di(A, "", "", Jc, s, Ls | _i | Hi);
    case 31:
      return di(A, "", "", Go, n, Ls | _i | Hi);
    case 33:
      return di(A, "", "", Go, n, 0);
    case 32:
      return di(A, "", "", Go, n, Ls | _i | Hi);
    case 18:
      return Re(A, 2406, 2415, !0, i);
    case 20:
      return Ds(A, 1, 19999, AF, 3, i);
    case 21:
      return Re(A, 2790, 2799, !0, i);
    case 22:
      return Re(A, 2662, 2671, !0, i);
    case 22:
      return Ds(A, 1, 10999, sF, 3, i);
    case 23:
      return ns(A, "");
    case 24:
      return ns(A, "");
    case 27:
      return Re(A, 3302, 3311, !0, i);
    case 28:
      return ns(A, "", s);
    case 29:
      return ns(A, "", s);
    case 34:
      return Re(A, 3792, 3801, !0, i);
    case 37:
      return Re(A, 6160, 6169, !0, i);
    case 38:
      return Re(A, 4160, 4169, !0, i);
    case 39:
      return Re(A, 2918, 2927, !0, i);
    case 40:
      return Re(A, 1776, 1785, !0, i);
    case 43:
      return Re(A, 3046, 3055, !0, i);
    case 44:
      return Re(A, 3174, 3183, !0, i);
    case 45:
      return Re(A, 3664, 3673, !0, i);
    case 46:
      return Re(A, 3872, 3881, !0, i);
    case 3:
    default:
      return Re(A, 48, 57, !0, i);
  }
}, pf = "data-html2canvas-ignore", $c = (
  /** @class */
  function() {
    function A(e, t, i) {
      if (this.context = e, this.options = i, this.scrolledElements = [], this.referenceElement = t, this.counters = new iF(), this.quoteDepth = 0, !t.ownerDocument)
        throw new Error("Cloned element does not have an owner document");
      this.documentElement = this.cloneNode(t.ownerDocument.documentElement, !1);
    }
    return A.prototype.toIFrame = function(e, t) {
      var i = this, s = nF(e, t);
      if (!s.contentWindow)
        return Promise.reject("Unable to find iframe window");
      var n = e.defaultView.pageXOffset, r = e.defaultView.pageYOffset, o = s.contentWindow, a = o.document, l = aF(s).then(function() {
        return ut(i, void 0, void 0, function() {
          var h, c;
          return At(this, function(u) {
            switch (u.label) {
              case 0:
                return this.scrolledElements.forEach(uF), o && (o.scrollTo(t.left, t.top), /(iPad|iPhone|iPod)/g.test(navigator.userAgent) && (o.scrollY !== t.top || o.scrollX !== t.left) && (this.context.logger.warn("Unable to restore scroll position for cloned document"), this.context.windowBounds = this.context.windowBounds.add(o.scrollX - t.left, o.scrollY - t.top, 0, 0))), h = this.options.onclone, c = this.clonedReferenceElement, typeof c > "u" ? [2, Promise.reject("Error finding the " + this.referenceElement.nodeName + " in the cloned document")] : a.fonts && a.fonts.ready ? [4, a.fonts.ready] : [3, 2];
              case 1:
                u.sent(), u.label = 2;
              case 2:
                return /(AppleWebKit)/g.test(navigator.userAgent) ? [4, oF(a)] : [3, 4];
              case 3:
                u.sent(), u.label = 4;
              case 4:
                return typeof h == "function" ? [2, Promise.resolve().then(function() {
                  return h(a, c);
                }).then(function() {
                  return s;
                })] : [2, s];
            }
          });
        });
      });
      return a.open(), a.write(hF(document.doctype) + "<html></html>"), cF(this.referenceElement.ownerDocument, n, r), a.replaceChild(a.adoptNode(this.documentElement), a.documentElement), a.close(), l;
    }, A.prototype.createElementClone = function(e) {
      if (nl(
        e,
        2
        /* CLONE */
      ))
        debugger;
      if (uf(e))
        return this.createCanvasClone(e);
      if (Vc(e))
        return this.createVideoClone(e);
      if (zc(e))
        return this.createStyleClone(e);
      var t = e.cloneNode(!1);
      return ll(t) && (ll(e) && e.currentSrc && e.currentSrc !== e.src && (t.src = e.currentSrc, t.srcset = ""), t.loading === "lazy" && (t.loading = "eager")), Gc(t) ? this.createCustomElementClone(t) : t;
    }, A.prototype.createCustomElementClone = function(e) {
      var t = document.createElement("html2canvascustomelement");
      return Wo(e.style, t), t;
    }, A.prototype.createStyleClone = function(e) {
      try {
        var t = e.sheet;
        if (t && t.cssRules) {
          var i = [].slice.call(t.cssRules, 0).reduce(function(n, r) {
            return r && typeof r.cssText == "string" ? n + r.cssText : n;
          }, ""), s = e.cloneNode(!1);
          return s.textContent = i, s;
        }
      } catch (n) {
        if (this.context.logger.error("Unable to access cssRules property", n), n.name !== "SecurityError")
          throw n;
      }
      return e.cloneNode(!1);
    }, A.prototype.createCanvasClone = function(e) {
      var t;
      if (this.options.inlineImages && e.ownerDocument) {
        var i = e.ownerDocument.createElement("img");
        try {
          return i.src = e.toDataURL(), i;
        } catch {
          this.context.logger.info("Unable to inline canvas contents, canvas is tainted", e);
        }
      }
      var s = e.cloneNode(!1);
      try {
        s.width = e.width, s.height = e.height;
        var n = e.getContext("2d"), r = s.getContext("2d");
        if (r)
          if (!this.options.allowTaint && n)
            r.putImageData(n.getImageData(0, 0, e.width, e.height), 0, 0);
          else {
            var o = (t = e.getContext("webgl2")) !== null && t !== void 0 ? t : e.getContext("webgl");
            if (o) {
              var a = o.getContextAttributes();
              (a == null ? void 0 : a.preserveDrawingBuffer) === !1 && this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false", e);
            }
            r.drawImage(e, 0, 0);
          }
        return s;
      } catch {
        this.context.logger.info("Unable to clone canvas as it is tainted", e);
      }
      return s;
    }, A.prototype.createVideoClone = function(e) {
      var t = e.ownerDocument.createElement("canvas");
      t.width = e.offsetWidth, t.height = e.offsetHeight;
      var i = t.getContext("2d");
      try {
        return i && (i.drawImage(e, 0, 0, t.width, t.height), this.options.allowTaint || i.getImageData(0, 0, t.width, t.height)), t;
      } catch {
        this.context.logger.info("Unable to clone video as it is tainted", e);
      }
      var s = e.ownerDocument.createElement("canvas");
      return s.width = e.offsetWidth, s.height = e.offsetHeight, s;
    }, A.prototype.appendChildNode = function(e, t, i) {
      (!Os(t) || !tF(t) && !t.hasAttribute(pf) && (typeof this.options.ignoreElements != "function" || !this.options.ignoreElements(t))) && (!this.options.copyStyles || !Os(t) || !zc(t)) && e.appendChild(this.cloneNode(t, i));
    }, A.prototype.cloneChildNodes = function(e, t, i) {
      for (var s = this, n = e.shadowRoot ? e.shadowRoot.firstChild : e.firstChild; n; n = n.nextSibling)
        if (Os(n) && ff(n) && typeof n.assignedNodes == "function") {
          var r = n.assignedNodes();
          r.length && r.forEach(function(o) {
            return s.appendChildNode(t, o, i);
          });
        } else
          this.appendChildNode(t, n, i);
    }, A.prototype.cloneNode = function(e, t) {
      if (hf(e))
        return document.createTextNode(e.data);
      if (!e.ownerDocument)
        return e.cloneNode(!1);
      var i = e.ownerDocument.defaultView;
      if (i && Os(e) && (al(e) || br(e))) {
        var s = this.createElementClone(e);
        s.style.transitionProperty = "none";
        var n = i.getComputedStyle(e), r = i.getComputedStyle(e, ":before"), o = i.getComputedStyle(e, ":after");
        this.referenceElement === e && al(s) && (this.clonedReferenceElement = s), Il(s) && gF(s);
        var a = this.counters.parse(new Uc(this.context, n)), l = this.resolvePseudoContent(e, s, r, KA.BEFORE);
        Gc(e) && (t = !0), Vc(e) || this.cloneChildNodes(e, s, t), l && s.insertBefore(l, s.firstChild);
        var h = this.resolvePseudoContent(e, s, o, KA.AFTER);
        return h && s.appendChild(h), this.counters.pop(a), (n && (this.options.copyStyles || br(e)) && !df(e) || t) && Wo(n, s), (e.scrollTop !== 0 || e.scrollLeft !== 0) && this.scrolledElements.push([s, e.scrollLeft, e.scrollTop]), (Dr(e) || Sr(e)) && (Dr(s) || Sr(s)) && (s.value = e.value), s;
      }
      return e.cloneNode(!1);
    }, A.prototype.resolvePseudoContent = function(e, t, i, s) {
      var n = this;
      if (i) {
        var r = i.content, o = t.ownerDocument;
        if (!(!o || !r || r === "none" || r === "-moz-alt-content" || i.display === "none")) {
          this.counters.parse(new Uc(this.context, i));
          var a = new $0(this.context, i), l = o.createElement("html2canvaspseudoelement");
          Wo(i, l), a.content.forEach(function(c) {
            if (c.type === 0)
              l.appendChild(o.createTextNode(c.value));
            else if (c.type === 22) {
              var u = o.createElement("img");
              u.src = c.value, u.style.opacity = "1", l.appendChild(u);
            } else if (c.type === 18) {
              if (c.name === "attr") {
                var d = c.values.filter(ye);
                d.length && l.appendChild(o.createTextNode(e.getAttribute(d[0].value) || ""));
              } else if (c.name === "counter") {
                var f = c.values.filter($s), p = f[0], b = f[1];
                if (p && ye(p)) {
                  var w = n.counters.getCounterValue(p.value), C = b && ye(b) ? Al.parse(n.context, b.value) : 3;
                  l.appendChild(o.createTextNode(An(w, C, !1)));
                }
              } else if (c.name === "counters") {
                var x = c.values.filter($s), p = x[0], U = x[1], b = x[2];
                if (p && ye(p)) {
                  var E = n.counters.getCounterValues(p.value), H = b && ye(b) ? Al.parse(n.context, b.value) : 3, T = U && U.type === 0 ? U.value : "", S = E.map(function(X) {
                    return An(X, H, !1);
                  }).join(T);
                  l.appendChild(o.createTextNode(S));
                }
              }
            } else if (c.type === 20)
              switch (c.value) {
                case "open-quote":
                  l.appendChild(o.createTextNode(Qc(a.quotes, n.quoteDepth++, !0)));
                  break;
                case "close-quote":
                  l.appendChild(o.createTextNode(Qc(a.quotes, --n.quoteDepth, !1)));
                  break;
                default:
                  l.appendChild(o.createTextNode(c.value));
              }
          }), l.className = hl + " " + cl;
          var h = s === KA.BEFORE ? " " + hl : " " + cl;
          return br(t) ? t.className.baseValue += h : t.className += h, l;
        }
      }
    }, A.destroy = function(e) {
      return e.parentNode ? (e.parentNode.removeChild(e), !0) : !1;
    }, A;
  }()
), KA;
(function(A) {
  A[A.BEFORE = 0] = "BEFORE", A[A.AFTER = 1] = "AFTER";
})(KA || (KA = {}));
var nF = function(A, e) {
  var t = A.createElement("iframe");
  return t.className = "html2canvas-container", t.style.visibility = "hidden", t.style.position = "fixed", t.style.left = "-10000px", t.style.top = "0px", t.style.border = "0", t.width = e.width.toString(), t.height = e.height.toString(), t.scrolling = "no", t.setAttribute(pf, "true"), A.body.appendChild(t), t;
}, rF = function(A) {
  return new Promise(function(e) {
    if (A.complete) {
      e();
      return;
    }
    if (!A.src) {
      e();
      return;
    }
    A.onload = e, A.onerror = e;
  });
}, oF = function(A) {
  return Promise.all([].slice.call(A.images, 0).map(rF));
}, aF = function(A) {
  return new Promise(function(e, t) {
    var i = A.contentWindow;
    if (!i)
      return t("No window assigned for iframe");
    var s = i.document;
    i.onload = A.onload = function() {
      i.onload = A.onload = null;
      var n = setInterval(function() {
        s.body.childNodes.length > 0 && s.readyState === "complete" && (clearInterval(n), e(A));
      }, 50);
    };
  });
}, lF = [
  "all",
  "d",
  "content"
  // Safari shows pseudoelements if content is set
], Wo = function(A, e) {
  for (var t = A.length - 1; t >= 0; t--) {
    var i = A.item(t);
    lF.indexOf(i) === -1 && e.style.setProperty(i, A.getPropertyValue(i));
  }
  return e;
}, hF = function(A) {
  var e = "";
  return A && (e += "<!DOCTYPE ", A.name && (e += A.name), A.internalSubset && (e += A.internalSubset), A.publicId && (e += '"' + A.publicId + '"'), A.systemId && (e += '"' + A.systemId + '"'), e += ">"), e;
}, cF = function(A, e, t) {
  A && A.defaultView && (e !== A.defaultView.pageXOffset || t !== A.defaultView.pageYOffset) && A.defaultView.scrollTo(e, t);
}, uF = function(A) {
  var e = A[0], t = A[1], i = A[2];
  e.scrollLeft = t, e.scrollTop = i;
}, dF = ":before", fF = ":after", hl = "___html2canvas___pseudoelement_before", cl = "___html2canvas___pseudoelement_after", Zc = `{
    content: "" !important;
    display: none !important;
}`, gF = function(A) {
  pF(A, "." + hl + dF + Zc + `
         .` + cl + fF + Zc);
}, pF = function(A, e) {
  var t = A.ownerDocument;
  if (t) {
    var i = t.createElement("style");
    i.textContent = e, A.appendChild(i);
  }
}, mf = (
  /** @class */
  function() {
    function A() {
    }
    return A.getOrigin = function(e) {
      var t = A._link;
      return t ? (t.href = e, t.href = t.href, t.protocol + t.hostname + t.port) : "about:blank";
    }, A.isSameOrigin = function(e) {
      return A.getOrigin(e) === A._origin;
    }, A.setContext = function(e) {
      A._link = e.document.createElement("a"), A._origin = A.getOrigin(e.location.href);
    }, A._origin = "about:blank", A;
  }()
), mF = (
  /** @class */
  function() {
    function A(e, t) {
      this.context = e, this._options = t, this._cache = {};
    }
    return A.prototype.addImage = function(e) {
      var t = Promise.resolve();
      return this.has(e) || (Xo(e) || BF(e)) && (this._cache[e] = this.loadImage(e)).catch(function() {
      }), t;
    }, A.prototype.match = function(e) {
      return this._cache[e];
    }, A.prototype.loadImage = function(e) {
      return ut(this, void 0, void 0, function() {
        var t, i, s, n, r = this;
        return At(this, function(o) {
          switch (o.label) {
            case 0:
              return t = mf.isSameOrigin(e), i = !jo(e) && this._options.useCORS === !0 && tt.SUPPORT_CORS_IMAGES && !t, s = !jo(e) && !t && !Xo(e) && typeof this._options.proxy == "string" && tt.SUPPORT_CORS_XHR && !i, !t && this._options.allowTaint === !1 && !jo(e) && !Xo(e) && !s && !i ? [
                2
                /*return*/
              ] : (n = e, s ? [4, this.proxy(n)] : [3, 2]);
            case 1:
              n = o.sent(), o.label = 2;
            case 2:
              return this.context.logger.debug("Added image " + e.substring(0, 256)), [4, new Promise(function(a, l) {
                var h = new Image();
                h.onload = function() {
                  return a(h);
                }, h.onerror = l, (CF(n) || i) && (h.crossOrigin = "anonymous"), h.src = n, h.complete === !0 && setTimeout(function() {
                  return a(h);
                }, 500), r._options.imageTimeout > 0 && setTimeout(function() {
                  return l("Timed out (" + r._options.imageTimeout + "ms) loading image");
                }, r._options.imageTimeout);
              })];
            case 3:
              return [2, o.sent()];
          }
        });
      });
    }, A.prototype.has = function(e) {
      return typeof this._cache[e] < "u";
    }, A.prototype.keys = function() {
      return Promise.resolve(Object.keys(this._cache));
    }, A.prototype.proxy = function(e) {
      var t = this, i = this._options.proxy;
      if (!i)
        throw new Error("No proxy defined");
      var s = e.substring(0, 256);
      return new Promise(function(n, r) {
        var o = tt.SUPPORT_RESPONSE_TYPE ? "blob" : "text", a = new XMLHttpRequest();
        a.onload = function() {
          if (a.status === 200)
            if (o === "text")
              n(a.response);
            else {
              var c = new FileReader();
              c.addEventListener("load", function() {
                return n(c.result);
              }, !1), c.addEventListener("error", function(u) {
                return r(u);
              }, !1), c.readAsDataURL(a.response);
            }
          else
            r("Failed to proxy resource " + s + " with status code " + a.status);
        }, a.onerror = r;
        var l = i.indexOf("?") > -1 ? "&" : "?";
        if (a.open("GET", "" + i + l + "url=" + encodeURIComponent(e) + "&responseType=" + o), o !== "text" && a instanceof XMLHttpRequest && (a.responseType = o), t._options.imageTimeout) {
          var h = t._options.imageTimeout;
          a.timeout = h, a.ontimeout = function() {
            return r("Timed out (" + h + "ms) proxying " + s);
          };
        }
        a.send();
      });
    }, A;
  }()
), bF = /^data:image\/svg\+xml/i, wF = /^data:image\/.*;base64,/i, vF = /^data:image\/.*/i, BF = function(A) {
  return tt.SUPPORT_SVG_DRAWING || !yF(A);
}, jo = function(A) {
  return vF.test(A);
}, CF = function(A) {
  return wF.test(A);
}, Xo = function(A) {
  return A.substr(0, 4) === "blob";
}, yF = function(A) {
  return A.substr(-3).toLowerCase() === "svg" || bF.test(A);
}, K = (
  /** @class */
  function() {
    function A(e, t) {
      this.type = 0, this.x = e, this.y = t;
    }
    return A.prototype.add = function(e, t) {
      return new A(this.x + e, this.y + t);
    }, A;
  }()
), Ss = function(A, e, t) {
  return new K(A.x + (e.x - A.x) * t, A.y + (e.y - A.y) * t);
}, sr = (
  /** @class */
  function() {
    function A(e, t, i, s) {
      this.type = 1, this.start = e, this.startControl = t, this.endControl = i, this.end = s;
    }
    return A.prototype.subdivide = function(e, t) {
      var i = Ss(this.start, this.startControl, e), s = Ss(this.startControl, this.endControl, e), n = Ss(this.endControl, this.end, e), r = Ss(i, s, e), o = Ss(s, n, e), a = Ss(r, o, e);
      return t ? new A(this.start, i, r, a) : new A(a, o, n, this.end);
    }, A.prototype.add = function(e, t) {
      return new A(this.start.add(e, t), this.startControl.add(e, t), this.endControl.add(e, t), this.end.add(e, t));
    }, A.prototype.reverse = function() {
      return new A(this.end, this.endControl, this.startControl, this.start);
    }, A;
  }()
), Rt = function(A) {
  return A.type === 1;
}, EF = (
  /** @class */
  /* @__PURE__ */ function() {
    function A(e) {
      var t = e.styles, i = e.bounds, s = _A(t.borderTopLeftRadius, i.width, i.height), n = s[0], r = s[1], o = _A(t.borderTopRightRadius, i.width, i.height), a = o[0], l = o[1], h = _A(t.borderBottomRightRadius, i.width, i.height), c = h[0], u = h[1], d = _A(t.borderBottomLeftRadius, i.width, i.height), f = d[0], p = d[1], b = [];
      b.push((n + a) / i.width), b.push((f + c) / i.width), b.push((r + p) / i.height), b.push((l + u) / i.height);
      var w = Math.max.apply(Math, b);
      w > 1 && (n /= w, r /= w, a /= w, l /= w, c /= w, u /= w, f /= w, p /= w);
      var C = i.width - a, x = i.height - u, U = i.width - c, E = i.height - p, H = t.borderTopWidth, T = t.borderRightWidth, S = t.borderBottomWidth, R = t.borderLeftWidth, J = xe(t.paddingTop, e.bounds.width), X = xe(t.paddingRight, e.bounds.width), P = xe(t.paddingBottom, e.bounds.width), Z = xe(t.paddingLeft, e.bounds.width);
      this.topLeftBorderDoubleOuterBox = n > 0 || r > 0 ? De(i.left + R / 3, i.top + H / 3, n - R / 3, r - H / 3, me.TOP_LEFT) : new K(i.left + R / 3, i.top + H / 3), this.topRightBorderDoubleOuterBox = n > 0 || r > 0 ? De(i.left + C, i.top + H / 3, a - T / 3, l - H / 3, me.TOP_RIGHT) : new K(i.left + i.width - T / 3, i.top + H / 3), this.bottomRightBorderDoubleOuterBox = c > 0 || u > 0 ? De(i.left + U, i.top + x, c - T / 3, u - S / 3, me.BOTTOM_RIGHT) : new K(i.left + i.width - T / 3, i.top + i.height - S / 3), this.bottomLeftBorderDoubleOuterBox = f > 0 || p > 0 ? De(i.left + R / 3, i.top + E, f - R / 3, p - S / 3, me.BOTTOM_LEFT) : new K(i.left + R / 3, i.top + i.height - S / 3), this.topLeftBorderDoubleInnerBox = n > 0 || r > 0 ? De(i.left + R * 2 / 3, i.top + H * 2 / 3, n - R * 2 / 3, r - H * 2 / 3, me.TOP_LEFT) : new K(i.left + R * 2 / 3, i.top + H * 2 / 3), this.topRightBorderDoubleInnerBox = n > 0 || r > 0 ? De(i.left + C, i.top + H * 2 / 3, a - T * 2 / 3, l - H * 2 / 3, me.TOP_RIGHT) : new K(i.left + i.width - T * 2 / 3, i.top + H * 2 / 3), this.bottomRightBorderDoubleInnerBox = c > 0 || u > 0 ? De(i.left + U, i.top + x, c - T * 2 / 3, u - S * 2 / 3, me.BOTTOM_RIGHT) : new K(i.left + i.width - T * 2 / 3, i.top + i.height - S * 2 / 3), this.bottomLeftBorderDoubleInnerBox = f > 0 || p > 0 ? De(i.left + R * 2 / 3, i.top + E, f - R * 2 / 3, p - S * 2 / 3, me.BOTTOM_LEFT) : new K(i.left + R * 2 / 3, i.top + i.height - S * 2 / 3), this.topLeftBorderStroke = n > 0 || r > 0 ? De(i.left + R / 2, i.top + H / 2, n - R / 2, r - H / 2, me.TOP_LEFT) : new K(i.left + R / 2, i.top + H / 2), this.topRightBorderStroke = n > 0 || r > 0 ? De(i.left + C, i.top + H / 2, a - T / 2, l - H / 2, me.TOP_RIGHT) : new K(i.left + i.width - T / 2, i.top + H / 2), this.bottomRightBorderStroke = c > 0 || u > 0 ? De(i.left + U, i.top + x, c - T / 2, u - S / 2, me.BOTTOM_RIGHT) : new K(i.left + i.width - T / 2, i.top + i.height - S / 2), this.bottomLeftBorderStroke = f > 0 || p > 0 ? De(i.left + R / 2, i.top + E, f - R / 2, p - S / 2, me.BOTTOM_LEFT) : new K(i.left + R / 2, i.top + i.height - S / 2), this.topLeftBorderBox = n > 0 || r > 0 ? De(i.left, i.top, n, r, me.TOP_LEFT) : new K(i.left, i.top), this.topRightBorderBox = a > 0 || l > 0 ? De(i.left + C, i.top, a, l, me.TOP_RIGHT) : new K(i.left + i.width, i.top), this.bottomRightBorderBox = c > 0 || u > 0 ? De(i.left + U, i.top + x, c, u, me.BOTTOM_RIGHT) : new K(i.left + i.width, i.top + i.height), this.bottomLeftBorderBox = f > 0 || p > 0 ? De(i.left, i.top + E, f, p, me.BOTTOM_LEFT) : new K(i.left, i.top + i.height), this.topLeftPaddingBox = n > 0 || r > 0 ? De(i.left + R, i.top + H, Math.max(0, n - R), Math.max(0, r - H), me.TOP_LEFT) : new K(i.left + R, i.top + H), this.topRightPaddingBox = a > 0 || l > 0 ? De(i.left + Math.min(C, i.width - T), i.top + H, C > i.width + T ? 0 : Math.max(0, a - T), Math.max(0, l - H), me.TOP_RIGHT) : new K(i.left + i.width - T, i.top + H), this.bottomRightPaddingBox = c > 0 || u > 0 ? De(i.left + Math.min(U, i.width - R), i.top + Math.min(x, i.height - S), Math.max(0, c - T), Math.max(0, u - S), me.BOTTOM_RIGHT) : new K(i.left + i.width - T, i.top + i.height - S), this.bottomLeftPaddingBox = f > 0 || p > 0 ? De(i.left + R, i.top + Math.min(E, i.height - S), Math.max(0, f - R), Math.max(0, p - S), me.BOTTOM_LEFT) : new K(i.left + R, i.top + i.height - S), this.topLeftContentBox = n > 0 || r > 0 ? De(i.left + R + Z, i.top + H + J, Math.max(0, n - (R + Z)), Math.max(0, r - (H + J)), me.TOP_LEFT) : new K(i.left + R + Z, i.top + H + J), this.topRightContentBox = a > 0 || l > 0 ? De(i.left + Math.min(C, i.width + R + Z), i.top + H + J, C > i.width + R + Z ? 0 : a - R + Z, l - (H + J), me.TOP_RIGHT) : new K(i.left + i.width - (T + X), i.top + H + J), this.bottomRightContentBox = c > 0 || u > 0 ? De(i.left + Math.min(U, i.width - (R + Z)), i.top + Math.min(x, i.height + H + J), Math.max(0, c - (T + X)), u - (S + P), me.BOTTOM_RIGHT) : new K(i.left + i.width - (T + X), i.top + i.height - (S + P)), this.bottomLeftContentBox = f > 0 || p > 0 ? De(i.left + R + Z, i.top + E, Math.max(0, f - (R + Z)), p - (S + P), me.BOTTOM_LEFT) : new K(i.left + R + Z, i.top + i.height - (S + P));
    }
    return A;
  }()
), me;
(function(A) {
  A[A.TOP_LEFT = 0] = "TOP_LEFT", A[A.TOP_RIGHT = 1] = "TOP_RIGHT", A[A.BOTTOM_RIGHT = 2] = "BOTTOM_RIGHT", A[A.BOTTOM_LEFT = 3] = "BOTTOM_LEFT";
})(me || (me = {}));
var De = function(A, e, t, i, s) {
  var n = 4 * ((Math.sqrt(2) - 1) / 3), r = t * n, o = i * n, a = A + t, l = e + i;
  switch (s) {
    case me.TOP_LEFT:
      return new sr(new K(A, l), new K(A, l - o), new K(a - r, e), new K(a, e));
    case me.TOP_RIGHT:
      return new sr(new K(A, e), new K(A + r, e), new K(a, l - o), new K(a, l));
    case me.BOTTOM_RIGHT:
      return new sr(new K(a, e), new K(a, e + o), new K(A + r, l), new K(A, l));
    case me.BOTTOM_LEFT:
    default:
      return new sr(new K(a, l), new K(a - r, l), new K(A, e + o), new K(A, e));
  }
}, Tr = function(A) {
  return [A.topLeftBorderBox, A.topRightBorderBox, A.bottomRightBorderBox, A.bottomLeftBorderBox];
}, FF = function(A) {
  return [
    A.topLeftContentBox,
    A.topRightContentBox,
    A.bottomRightContentBox,
    A.bottomLeftContentBox
  ];
}, Lr = function(A) {
  return [
    A.topLeftPaddingBox,
    A.topRightPaddingBox,
    A.bottomRightPaddingBox,
    A.bottomLeftPaddingBox
  ];
}, xF = (
  /** @class */
  /* @__PURE__ */ function() {
    function A(e, t, i) {
      this.offsetX = e, this.offsetY = t, this.matrix = i, this.type = 0, this.target = 6;
    }
    return A;
  }()
), Ar = (
  /** @class */
  /* @__PURE__ */ function() {
    function A(e, t) {
      this.path = e, this.target = t, this.type = 1;
    }
    return A;
  }()
), QF = (
  /** @class */
  /* @__PURE__ */ function() {
    function A(e) {
      this.opacity = e, this.type = 2, this.target = 6;
    }
    return A;
  }()
), UF = function(A) {
  return A.type === 0;
}, bf = function(A) {
  return A.type === 1;
}, _F = function(A) {
  return A.type === 2;
}, qc = function(A, e) {
  return A.length === e.length ? A.some(function(t, i) {
    return t === e[i];
  }) : !1;
}, HF = function(A, e, t, i, s) {
  return A.map(function(n, r) {
    switch (r) {
      case 0:
        return n.add(e, t);
      case 1:
        return n.add(e + i, t);
      case 2:
        return n.add(e + i, t + s);
      case 3:
        return n.add(e, t + s);
    }
    return n;
  });
}, wf = (
  /** @class */
  /* @__PURE__ */ function() {
    function A(e) {
      this.element = e, this.inlineLevel = [], this.nonInlineLevel = [], this.negativeZIndex = [], this.zeroOrAutoZIndexOrTransformedOrOpacity = [], this.positiveZIndex = [], this.nonPositionedFloats = [], this.nonPositionedInlineLevel = [];
    }
    return A;
  }()
), vf = (
  /** @class */
  function() {
    function A(e, t) {
      if (this.container = e, this.parent = t, this.effects = [], this.curves = new EF(this.container), this.container.styles.opacity < 1 && this.effects.push(new QF(this.container.styles.opacity)), this.container.styles.transform !== null) {
        var i = this.container.bounds.left + this.container.styles.transformOrigin[0].number, s = this.container.bounds.top + this.container.styles.transformOrigin[1].number, n = this.container.styles.transform;
        this.effects.push(new xF(i, s, n));
      }
      if (this.container.styles.overflowX !== 0) {
        var r = Tr(this.curves), o = Lr(this.curves);
        qc(r, o) ? this.effects.push(new Ar(
          r,
          6
          /* CONTENT */
        )) : (this.effects.push(new Ar(
          r,
          2
          /* BACKGROUND_BORDERS */
        )), this.effects.push(new Ar(
          o,
          4
          /* CONTENT */
        )));
      }
    }
    return A.prototype.getEffects = function(e) {
      for (var t = [
        2,
        3
        /* FIXED */
      ].indexOf(this.container.styles.position) === -1, i = this.parent, s = this.effects.slice(0); i; ) {
        var n = i.effects.filter(function(a) {
          return !bf(a);
        });
        if (t || i.container.styles.position !== 0 || !i.parent) {
          if (s.unshift.apply(s, n), t = [
            2,
            3
            /* FIXED */
          ].indexOf(i.container.styles.position) === -1, i.container.styles.overflowX !== 0) {
            var r = Tr(i.curves), o = Lr(i.curves);
            qc(r, o) || s.unshift(new Ar(
              o,
              6
              /* CONTENT */
            ));
          }
        } else
          s.unshift.apply(s, n);
        i = i.parent;
      }
      return s.filter(function(a) {
        return Ge(a.target, e);
      });
    }, A;
  }()
), ul = function(A, e, t, i) {
  A.container.elements.forEach(function(s) {
    var n = Ge(
      s.flags,
      4
      /* CREATES_REAL_STACKING_CONTEXT */
    ), r = Ge(
      s.flags,
      2
      /* CREATES_STACKING_CONTEXT */
    ), o = new vf(s, A);
    Ge(
      s.styles.display,
      2048
      /* LIST_ITEM */
    ) && i.push(o);
    var a = Ge(
      s.flags,
      8
      /* IS_LIST_OWNER */
    ) ? [] : i;
    if (n || r) {
      var l = n || s.styles.isPositioned() ? t : e, h = new wf(o);
      if (s.styles.isPositioned() || s.styles.opacity < 1 || s.styles.isTransformed()) {
        var c = s.styles.zIndex.order;
        if (c < 0) {
          var u = 0;
          l.negativeZIndex.some(function(f, p) {
            return c > f.element.container.styles.zIndex.order ? (u = p, !1) : u > 0;
          }), l.negativeZIndex.splice(u, 0, h);
        } else if (c > 0) {
          var d = 0;
          l.positiveZIndex.some(function(f, p) {
            return c >= f.element.container.styles.zIndex.order ? (d = p + 1, !1) : d > 0;
          }), l.positiveZIndex.splice(d, 0, h);
        } else
          l.zeroOrAutoZIndexOrTransformedOrOpacity.push(h);
      } else
        s.styles.isFloating() ? l.nonPositionedFloats.push(h) : l.nonPositionedInlineLevel.push(h);
      ul(o, h, n ? h : t, a);
    } else
      s.styles.isInlineLevel() ? e.inlineLevel.push(o) : e.nonInlineLevel.push(o), ul(o, e, t, a);
    Ge(
      s.flags,
      8
      /* IS_LIST_OWNER */
    ) && Bf(s, a);
  });
}, Bf = function(A, e) {
  for (var t = A instanceof ol ? A.start : 1, i = A instanceof ol ? A.reversed : !1, s = 0; s < e.length; s++) {
    var n = e[s];
    n.container instanceof Af && typeof n.container.value == "number" && n.container.value !== 0 && (t = n.container.value), n.listValue = An(t, n.container.styles.listStyleType, !0), t += i ? -1 : 1;
  }
}, MF = function(A) {
  var e = new vf(A, null), t = new wf(e), i = [];
  return ul(e, t, t, i), Bf(e.container, i), t;
}, eu = function(A, e) {
  switch (e) {
    case 0:
      return Pt(A.topLeftBorderBox, A.topLeftPaddingBox, A.topRightBorderBox, A.topRightPaddingBox);
    case 1:
      return Pt(A.topRightBorderBox, A.topRightPaddingBox, A.bottomRightBorderBox, A.bottomRightPaddingBox);
    case 2:
      return Pt(A.bottomRightBorderBox, A.bottomRightPaddingBox, A.bottomLeftBorderBox, A.bottomLeftPaddingBox);
    case 3:
    default:
      return Pt(A.bottomLeftBorderBox, A.bottomLeftPaddingBox, A.topLeftBorderBox, A.topLeftPaddingBox);
  }
}, DF = function(A, e) {
  switch (e) {
    case 0:
      return Pt(A.topLeftBorderBox, A.topLeftBorderDoubleOuterBox, A.topRightBorderBox, A.topRightBorderDoubleOuterBox);
    case 1:
      return Pt(A.topRightBorderBox, A.topRightBorderDoubleOuterBox, A.bottomRightBorderBox, A.bottomRightBorderDoubleOuterBox);
    case 2:
      return Pt(A.bottomRightBorderBox, A.bottomRightBorderDoubleOuterBox, A.bottomLeftBorderBox, A.bottomLeftBorderDoubleOuterBox);
    case 3:
    default:
      return Pt(A.bottomLeftBorderBox, A.bottomLeftBorderDoubleOuterBox, A.topLeftBorderBox, A.topLeftBorderDoubleOuterBox);
  }
}, SF = function(A, e) {
  switch (e) {
    case 0:
      return Pt(A.topLeftBorderDoubleInnerBox, A.topLeftPaddingBox, A.topRightBorderDoubleInnerBox, A.topRightPaddingBox);
    case 1:
      return Pt(A.topRightBorderDoubleInnerBox, A.topRightPaddingBox, A.bottomRightBorderDoubleInnerBox, A.bottomRightPaddingBox);
    case 2:
      return Pt(A.bottomRightBorderDoubleInnerBox, A.bottomRightPaddingBox, A.bottomLeftBorderDoubleInnerBox, A.bottomLeftPaddingBox);
    case 3:
    default:
      return Pt(A.bottomLeftBorderDoubleInnerBox, A.bottomLeftPaddingBox, A.topLeftBorderDoubleInnerBox, A.topLeftPaddingBox);
  }
}, TF = function(A, e) {
  switch (e) {
    case 0:
      return nr(A.topLeftBorderStroke, A.topRightBorderStroke);
    case 1:
      return nr(A.topRightBorderStroke, A.bottomRightBorderStroke);
    case 2:
      return nr(A.bottomRightBorderStroke, A.bottomLeftBorderStroke);
    case 3:
    default:
      return nr(A.bottomLeftBorderStroke, A.topLeftBorderStroke);
  }
}, nr = function(A, e) {
  var t = [];
  return Rt(A) ? t.push(A.subdivide(0.5, !1)) : t.push(A), Rt(e) ? t.push(e.subdivide(0.5, !0)) : t.push(e), t;
}, Pt = function(A, e, t, i) {
  var s = [];
  return Rt(A) ? s.push(A.subdivide(0.5, !1)) : s.push(A), Rt(t) ? s.push(t.subdivide(0.5, !0)) : s.push(t), Rt(i) ? s.push(i.subdivide(0.5, !0).reverse()) : s.push(i), Rt(e) ? s.push(e.subdivide(0.5, !1).reverse()) : s.push(e), s;
}, Cf = function(A) {
  var e = A.bounds, t = A.styles;
  return e.add(t.borderLeftWidth, t.borderTopWidth, -(t.borderRightWidth + t.borderLeftWidth), -(t.borderTopWidth + t.borderBottomWidth));
}, Rr = function(A) {
  var e = A.styles, t = A.bounds, i = xe(e.paddingLeft, t.width), s = xe(e.paddingRight, t.width), n = xe(e.paddingTop, t.width), r = xe(e.paddingBottom, t.width);
  return t.add(i + e.borderLeftWidth, n + e.borderTopWidth, -(e.borderRightWidth + e.borderLeftWidth + i + s), -(e.borderTopWidth + e.borderBottomWidth + n + r));
}, LF = function(A, e) {
  return A === 0 ? e.bounds : A === 2 ? Rr(e) : Cf(e);
}, RF = function(A, e) {
  return A === 0 ? e.bounds : A === 2 ? Rr(e) : Cf(e);
}, Yo = function(A, e, t) {
  var i = LF(Rs(A.styles.backgroundOrigin, e), A), s = RF(Rs(A.styles.backgroundClip, e), A), n = IF(Rs(A.styles.backgroundSize, e), t, i), r = n[0], o = n[1], a = _A(Rs(A.styles.backgroundPosition, e), i.width - r, i.height - o), l = kF(Rs(A.styles.backgroundRepeat, e), a, n, i, s), h = Math.round(i.left + a[0]), c = Math.round(i.top + a[1]);
  return [l, h, c, r, o];
}, Ts = function(A) {
  return ye(A) && A.value === Gs.AUTO;
}, rr = function(A) {
  return typeof A == "number";
}, IF = function(A, e, t) {
  var i = e[0], s = e[1], n = e[2], r = A[0], o = A[1];
  if (!r)
    return [0, 0];
  if (Ne(r) && o && Ne(o))
    return [xe(r, t.width), xe(o, t.height)];
  var a = rr(n);
  if (ye(r) && (r.value === Gs.CONTAIN || r.value === Gs.COVER)) {
    if (rr(n)) {
      var l = t.width / t.height;
      return l < n != (r.value === Gs.COVER) ? [t.width, t.width / n] : [t.height * n, t.height];
    }
    return [t.width, t.height];
  }
  var h = rr(i), c = rr(s), u = h || c;
  if (Ts(r) && (!o || Ts(o))) {
    if (h && c)
      return [i, s];
    if (!a && !u)
      return [t.width, t.height];
    if (u && a) {
      var d = h ? i : s * n, f = c ? s : i / n;
      return [d, f];
    }
    var p = h ? i : t.width, b = c ? s : t.height;
    return [p, b];
  }
  if (a) {
    var w = 0, C = 0;
    return Ne(r) ? w = xe(r, t.width) : Ne(o) && (C = xe(o, t.height)), Ts(r) ? w = C * n : (!o || Ts(o)) && (C = w / n), [w, C];
  }
  var x = null, U = null;
  if (Ne(r) ? x = xe(r, t.width) : o && Ne(o) && (U = xe(o, t.height)), x !== null && (!o || Ts(o)) && (U = h && c ? x / i * s : t.height), U !== null && Ts(r) && (x = h && c ? U / s * i : t.width), x !== null && U !== null)
    return [x, U];
  throw new Error("Unable to calculate background-size for element");
}, Rs = function(A, e) {
  var t = A[e];
  return typeof t > "u" ? A[0] : t;
}, kF = function(A, e, t, i, s) {
  var n = e[0], r = e[1], o = t[0], a = t[1];
  switch (A) {
    case 2:
      return [
        new K(Math.round(i.left), Math.round(i.top + r)),
        new K(Math.round(i.left + i.width), Math.round(i.top + r)),
        new K(Math.round(i.left + i.width), Math.round(a + i.top + r)),
        new K(Math.round(i.left), Math.round(a + i.top + r))
      ];
    case 3:
      return [
        new K(Math.round(i.left + n), Math.round(i.top)),
        new K(Math.round(i.left + n + o), Math.round(i.top)),
        new K(Math.round(i.left + n + o), Math.round(i.height + i.top)),
        new K(Math.round(i.left + n), Math.round(i.height + i.top))
      ];
    case 1:
      return [
        new K(Math.round(i.left + n), Math.round(i.top + r)),
        new K(Math.round(i.left + n + o), Math.round(i.top + r)),
        new K(Math.round(i.left + n + o), Math.round(i.top + r + a)),
        new K(Math.round(i.left + n), Math.round(i.top + r + a))
      ];
    default:
      return [
        new K(Math.round(s.left), Math.round(s.top)),
        new K(Math.round(s.left + s.width), Math.round(s.top)),
        new K(Math.round(s.left + s.width), Math.round(s.height + s.top)),
        new K(Math.round(s.left), Math.round(s.height + s.top))
      ];
  }
}, OF = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7", tu = "Hidden Text", PF = (
  /** @class */
  function() {
    function A(e) {
      this._data = {}, this._document = e;
    }
    return A.prototype.parseMetrics = function(e, t) {
      var i = this._document.createElement("div"), s = this._document.createElement("img"), n = this._document.createElement("span"), r = this._document.body;
      i.style.visibility = "hidden", i.style.fontFamily = e, i.style.fontSize = t, i.style.margin = "0", i.style.padding = "0", i.style.whiteSpace = "nowrap", r.appendChild(i), s.src = OF, s.width = 1, s.height = 1, s.style.margin = "0", s.style.padding = "0", s.style.verticalAlign = "baseline", n.style.fontFamily = e, n.style.fontSize = t, n.style.margin = "0", n.style.padding = "0", n.appendChild(this._document.createTextNode(tu)), i.appendChild(n), i.appendChild(s);
      var o = s.offsetTop - n.offsetTop + 2;
      i.removeChild(n), i.appendChild(this._document.createTextNode(tu)), i.style.lineHeight = "normal", s.style.verticalAlign = "super";
      var a = s.offsetTop - i.offsetTop + 2;
      return r.removeChild(i), { baseline: o, middle: a };
    }, A.prototype.getMetrics = function(e, t) {
      var i = e + " " + t;
      return typeof this._data[i] > "u" && (this._data[i] = this.parseMetrics(e, t)), this._data[i];
    }, A;
  }()
), yf = (
  /** @class */
  /* @__PURE__ */ function() {
    function A(e, t) {
      this.context = e, this.options = t;
    }
    return A;
  }()
), NF = 1e4, KF = (
  /** @class */
  function(A) {
    Jt(e, A);
    function e(t, i) {
      var s = A.call(this, t, i) || this;
      return s._activeEffects = [], s.canvas = i.canvas ? i.canvas : document.createElement("canvas"), s.ctx = s.canvas.getContext("2d"), i.canvas || (s.canvas.width = Math.floor(i.width * i.scale), s.canvas.height = Math.floor(i.height * i.scale), s.canvas.style.width = i.width + "px", s.canvas.style.height = i.height + "px"), s.fontMetrics = new PF(document), s.ctx.scale(s.options.scale, s.options.scale), s.ctx.translate(-i.x, -i.y), s.ctx.textBaseline = "bottom", s._activeEffects = [], s.context.logger.debug("Canvas renderer initialized (" + i.width + "x" + i.height + ") with scale " + i.scale), s;
    }
    return e.prototype.applyEffects = function(t) {
      for (var i = this; this._activeEffects.length; )
        this.popEffect();
      t.forEach(function(s) {
        return i.applyEffect(s);
      });
    }, e.prototype.applyEffect = function(t) {
      this.ctx.save(), _F(t) && (this.ctx.globalAlpha = t.opacity), UF(t) && (this.ctx.translate(t.offsetX, t.offsetY), this.ctx.transform(t.matrix[0], t.matrix[1], t.matrix[2], t.matrix[3], t.matrix[4], t.matrix[5]), this.ctx.translate(-t.offsetX, -t.offsetY)), bf(t) && (this.path(t.path), this.ctx.clip()), this._activeEffects.push(t);
    }, e.prototype.popEffect = function() {
      this._activeEffects.pop(), this.ctx.restore();
    }, e.prototype.renderStack = function(t) {
      return ut(this, void 0, void 0, function() {
        var i;
        return At(this, function(s) {
          switch (s.label) {
            case 0:
              return i = t.element.container.styles, i.isVisible() ? [4, this.renderStackContent(t)] : [3, 2];
            case 1:
              s.sent(), s.label = 2;
            case 2:
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.renderNode = function(t) {
      return ut(this, void 0, void 0, function() {
        return At(this, function(i) {
          switch (i.label) {
            case 0:
              if (Ge(
                t.container.flags,
                16
                /* DEBUG_RENDER */
              ))
                debugger;
              return t.container.styles.isVisible() ? [4, this.renderNodeBackgroundAndBorders(t)] : [3, 3];
            case 1:
              return i.sent(), [4, this.renderNodeContent(t)];
            case 2:
              i.sent(), i.label = 3;
            case 3:
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.renderTextWithLetterSpacing = function(t, i, s) {
      var n = this;
      if (i === 0)
        this.ctx.fillText(t.text, t.bounds.left, t.bounds.top + s);
      else {
        var r = Ll(t.text);
        r.reduce(function(o, a) {
          return n.ctx.fillText(a, o, t.bounds.top + s), o + n.ctx.measureText(a).width;
        }, t.bounds.left);
      }
    }, e.prototype.createFontStyle = function(t) {
      var i = t.fontVariant.filter(function(r) {
        return r === "normal" || r === "small-caps";
      }).join(""), s = jF(t.fontFamily).join(", "), n = ln(t.fontSize) ? "" + t.fontSize.number + t.fontSize.unit : t.fontSize.number + "px";
      return [
        [t.fontStyle, i, t.fontWeight, n, s].join(" "),
        s,
        n
      ];
    }, e.prototype.renderTextNode = function(t, i) {
      return ut(this, void 0, void 0, function() {
        var s, n, r, o, a, l, h, c, u = this;
        return At(this, function(d) {
          return s = this.createFontStyle(i), n = s[0], r = s[1], o = s[2], this.ctx.font = n, this.ctx.direction = i.direction === 1 ? "rtl" : "ltr", this.ctx.textAlign = "left", this.ctx.textBaseline = "alphabetic", a = this.fontMetrics.getMetrics(r, o), l = a.baseline, h = a.middle, c = i.paintOrder, t.textBounds.forEach(function(f) {
            c.forEach(function(p) {
              switch (p) {
                case 0:
                  u.ctx.fillStyle = Je(i.color), u.renderTextWithLetterSpacing(f, i.letterSpacing, l);
                  var b = i.textShadow;
                  b.length && f.text.trim().length && (b.slice(0).reverse().forEach(function(w) {
                    u.ctx.shadowColor = Je(w.color), u.ctx.shadowOffsetX = w.offsetX.number * u.options.scale, u.ctx.shadowOffsetY = w.offsetY.number * u.options.scale, u.ctx.shadowBlur = w.blur.number, u.renderTextWithLetterSpacing(f, i.letterSpacing, l);
                  }), u.ctx.shadowColor = "", u.ctx.shadowOffsetX = 0, u.ctx.shadowOffsetY = 0, u.ctx.shadowBlur = 0), i.textDecorationLine.length && (u.ctx.fillStyle = Je(i.textDecorationColor || i.color), i.textDecorationLine.forEach(function(w) {
                    switch (w) {
                      case 1:
                        u.ctx.fillRect(f.bounds.left, Math.round(f.bounds.top + l), f.bounds.width, 1);
                        break;
                      case 2:
                        u.ctx.fillRect(f.bounds.left, Math.round(f.bounds.top), f.bounds.width, 1);
                        break;
                      case 3:
                        u.ctx.fillRect(f.bounds.left, Math.ceil(f.bounds.top + h), f.bounds.width, 1);
                        break;
                    }
                  }));
                  break;
                case 1:
                  i.webkitTextStrokeWidth && f.text.trim().length && (u.ctx.strokeStyle = Je(i.webkitTextStrokeColor), u.ctx.lineWidth = i.webkitTextStrokeWidth, u.ctx.lineJoin = window.chrome ? "miter" : "round", u.ctx.strokeText(f.text, f.bounds.left, f.bounds.top + l)), u.ctx.strokeStyle = "", u.ctx.lineWidth = 0, u.ctx.lineJoin = "miter";
                  break;
              }
            });
          }), [
            2
            /*return*/
          ];
        });
      });
    }, e.prototype.renderReplacedElement = function(t, i, s) {
      if (s && t.intrinsicWidth > 0 && t.intrinsicHeight > 0) {
        var n = Rr(t), r = Lr(i);
        this.path(r), this.ctx.save(), this.ctx.clip(), this.ctx.drawImage(s, 0, 0, t.intrinsicWidth, t.intrinsicHeight, n.left, n.top, n.width, n.height), this.ctx.restore();
      }
    }, e.prototype.renderNodeContent = function(t) {
      return ut(this, void 0, void 0, function() {
        var i, s, n, r, o, a, C, C, l, h, c, u, U, d, f, E, p, b, w, C, x, U, E;
        return At(this, function(H) {
          switch (H.label) {
            case 0:
              this.applyEffects(t.getEffects(
                4
                /* CONTENT */
              )), i = t.container, s = t.curves, n = i.styles, r = 0, o = i.textNodes, H.label = 1;
            case 1:
              return r < o.length ? (a = o[r], [4, this.renderTextNode(a, n)]) : [3, 4];
            case 2:
              H.sent(), H.label = 3;
            case 3:
              return r++, [3, 1];
            case 4:
              if (!(i instanceof ef)) return [3, 8];
              H.label = 5;
            case 5:
              return H.trys.push([5, 7, , 8]), [4, this.context.cache.match(i.src)];
            case 6:
              return C = H.sent(), this.renderReplacedElement(i, s, C), [3, 8];
            case 7:
              return H.sent(), this.context.logger.error("Error loading image " + i.src), [3, 8];
            case 8:
              if (i instanceof tf && this.renderReplacedElement(i, s, i.canvas), !(i instanceof sf)) return [3, 12];
              H.label = 9;
            case 9:
              return H.trys.push([9, 11, , 12]), [4, this.context.cache.match(i.svg)];
            case 10:
              return C = H.sent(), this.renderReplacedElement(i, s, C), [3, 12];
            case 11:
              return H.sent(), this.context.logger.error("Error loading svg " + i.svg.substring(0, 255)), [3, 12];
            case 12:
              return i instanceof of && i.tree ? (l = new e(this.context, {
                scale: this.options.scale,
                backgroundColor: i.backgroundColor,
                x: 0,
                y: 0,
                width: i.width,
                height: i.height
              }), [4, l.render(i.tree)]) : [3, 14];
            case 13:
              h = H.sent(), i.width && i.height && this.ctx.drawImage(h, 0, 0, i.width, i.height, i.bounds.left, i.bounds.top, i.bounds.width, i.bounds.height), H.label = 14;
            case 14:
              if (i instanceof Rl && (c = Math.min(i.bounds.width, i.bounds.height), i.type === Hr ? i.checked && (this.ctx.save(), this.path([
                new K(i.bounds.left + c * 0.39363, i.bounds.top + c * 0.79),
                new K(i.bounds.left + c * 0.16, i.bounds.top + c * 0.5549),
                new K(i.bounds.left + c * 0.27347, i.bounds.top + c * 0.44071),
                new K(i.bounds.left + c * 0.39694, i.bounds.top + c * 0.5649),
                new K(i.bounds.left + c * 0.72983, i.bounds.top + c * 0.23),
                new K(i.bounds.left + c * 0.84, i.bounds.top + c * 0.34085),
                new K(i.bounds.left + c * 0.39363, i.bounds.top + c * 0.79)
              ]), this.ctx.fillStyle = Je(Kc), this.ctx.fill(), this.ctx.restore()) : i.type === Mr && i.checked && (this.ctx.save(), this.ctx.beginPath(), this.ctx.arc(i.bounds.left + c / 2, i.bounds.top + c / 2, c / 4, 0, Math.PI * 2, !0), this.ctx.fillStyle = Je(Kc), this.ctx.fill(), this.ctx.restore())), VF(i) && i.value.length) {
                switch (u = this.createFontStyle(n), U = u[0], d = u[1], f = this.fontMetrics.getMetrics(U, d).baseline, this.ctx.font = U, this.ctx.fillStyle = Je(n.color), this.ctx.textBaseline = "alphabetic", this.ctx.textAlign = GF(i.styles.textAlign), E = Rr(i), p = 0, i.styles.textAlign) {
                  case 1:
                    p += E.width / 2;
                    break;
                  case 2:
                    p += E.width;
                    break;
                }
                b = E.add(p, 0, 0, -E.height / 2 + 1), this.ctx.save(), this.path([
                  new K(E.left, E.top),
                  new K(E.left + E.width, E.top),
                  new K(E.left + E.width, E.top + E.height),
                  new K(E.left, E.top + E.height)
                ]), this.ctx.clip(), this.renderTextWithLetterSpacing(new NA(i.value, b), n.letterSpacing, f), this.ctx.restore(), this.ctx.textBaseline = "alphabetic", this.ctx.textAlign = "left";
              }
              if (!Ge(
                i.styles.display,
                2048
                /* LIST_ITEM */
              )) return [3, 20];
              if (i.styles.listStyleImage === null) return [3, 19];
              if (w = i.styles.listStyleImage, w.type !== 0) return [3, 18];
              C = void 0, x = w.url, H.label = 15;
            case 15:
              return H.trys.push([15, 17, , 18]), [4, this.context.cache.match(x)];
            case 16:
              return C = H.sent(), this.ctx.drawImage(C, i.bounds.left - (C.width + 10), i.bounds.top), [3, 18];
            case 17:
              return H.sent(), this.context.logger.error("Error loading list-style-image " + x), [3, 18];
            case 18:
              return [3, 20];
            case 19:
              t.listValue && i.styles.listStyleType !== -1 && (U = this.createFontStyle(n)[0], this.ctx.font = U, this.ctx.fillStyle = Je(n.color), this.ctx.textBaseline = "middle", this.ctx.textAlign = "right", E = new Bi(i.bounds.left, i.bounds.top + xe(i.styles.paddingTop, i.bounds.width), i.bounds.width, Fc(n.lineHeight, n.fontSize.number) / 2 + 1), this.renderTextWithLetterSpacing(new NA(t.listValue, E), n.letterSpacing, Fc(n.lineHeight, n.fontSize.number) / 2 + 2), this.ctx.textBaseline = "bottom", this.ctx.textAlign = "left"), H.label = 20;
            case 20:
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.renderStackContent = function(t) {
      return ut(this, void 0, void 0, function() {
        var i, s, w, n, r, w, o, a, w, l, h, w, c, u, w, d, f, w, p, b, w;
        return At(this, function(C) {
          switch (C.label) {
            case 0:
              if (Ge(
                t.element.container.flags,
                16
                /* DEBUG_RENDER */
              ))
                debugger;
              return [4, this.renderNodeBackgroundAndBorders(t.element)];
            case 1:
              C.sent(), i = 0, s = t.negativeZIndex, C.label = 2;
            case 2:
              return i < s.length ? (w = s[i], [4, this.renderStack(w)]) : [3, 5];
            case 3:
              C.sent(), C.label = 4;
            case 4:
              return i++, [3, 2];
            case 5:
              return [4, this.renderNodeContent(t.element)];
            case 6:
              C.sent(), n = 0, r = t.nonInlineLevel, C.label = 7;
            case 7:
              return n < r.length ? (w = r[n], [4, this.renderNode(w)]) : [3, 10];
            case 8:
              C.sent(), C.label = 9;
            case 9:
              return n++, [3, 7];
            case 10:
              o = 0, a = t.nonPositionedFloats, C.label = 11;
            case 11:
              return o < a.length ? (w = a[o], [4, this.renderStack(w)]) : [3, 14];
            case 12:
              C.sent(), C.label = 13;
            case 13:
              return o++, [3, 11];
            case 14:
              l = 0, h = t.nonPositionedInlineLevel, C.label = 15;
            case 15:
              return l < h.length ? (w = h[l], [4, this.renderStack(w)]) : [3, 18];
            case 16:
              C.sent(), C.label = 17;
            case 17:
              return l++, [3, 15];
            case 18:
              c = 0, u = t.inlineLevel, C.label = 19;
            case 19:
              return c < u.length ? (w = u[c], [4, this.renderNode(w)]) : [3, 22];
            case 20:
              C.sent(), C.label = 21;
            case 21:
              return c++, [3, 19];
            case 22:
              d = 0, f = t.zeroOrAutoZIndexOrTransformedOrOpacity, C.label = 23;
            case 23:
              return d < f.length ? (w = f[d], [4, this.renderStack(w)]) : [3, 26];
            case 24:
              C.sent(), C.label = 25;
            case 25:
              return d++, [3, 23];
            case 26:
              p = 0, b = t.positiveZIndex, C.label = 27;
            case 27:
              return p < b.length ? (w = b[p], [4, this.renderStack(w)]) : [3, 30];
            case 28:
              C.sent(), C.label = 29;
            case 29:
              return p++, [3, 27];
            case 30:
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.mask = function(t) {
      this.ctx.beginPath(), this.ctx.moveTo(0, 0), this.ctx.lineTo(this.canvas.width, 0), this.ctx.lineTo(this.canvas.width, this.canvas.height), this.ctx.lineTo(0, this.canvas.height), this.ctx.lineTo(0, 0), this.formatPath(t.slice(0).reverse()), this.ctx.closePath();
    }, e.prototype.path = function(t) {
      this.ctx.beginPath(), this.formatPath(t), this.ctx.closePath();
    }, e.prototype.formatPath = function(t) {
      var i = this;
      t.forEach(function(s, n) {
        var r = Rt(s) ? s.start : s;
        n === 0 ? i.ctx.moveTo(r.x, r.y) : i.ctx.lineTo(r.x, r.y), Rt(s) && i.ctx.bezierCurveTo(s.startControl.x, s.startControl.y, s.endControl.x, s.endControl.y, s.end.x, s.end.y);
      });
    }, e.prototype.renderRepeat = function(t, i, s, n) {
      this.path(t), this.ctx.fillStyle = i, this.ctx.translate(s, n), this.ctx.fill(), this.ctx.translate(-s, -n);
    }, e.prototype.resizeImage = function(t, i, s) {
      var n;
      if (t.width === i && t.height === s)
        return t;
      var r = (n = this.canvas.ownerDocument) !== null && n !== void 0 ? n : document, o = r.createElement("canvas");
      o.width = Math.max(1, i), o.height = Math.max(1, s);
      var a = o.getContext("2d");
      return a.drawImage(t, 0, 0, t.width, t.height, 0, 0, i, s), o;
    }, e.prototype.renderBackgroundImage = function(t) {
      return ut(this, void 0, void 0, function() {
        var i, s, n, r, o, a;
        return At(this, function(l) {
          switch (l.label) {
            case 0:
              i = t.styles.backgroundImage.length - 1, s = function(h) {
                var c, u, d, J, le, fe, Z, ae, S, f, J, le, fe, Z, ae, p, b, w, C, x, U, E, H, T, S, R, J, X, P, Z, ae, ce, le, fe, be, _e, Ke, We, Te, Ve, ze, ee;
                return At(this, function(Le) {
                  switch (Le.label) {
                    case 0:
                      if (h.type !== 0) return [3, 5];
                      c = void 0, u = h.url, Le.label = 1;
                    case 1:
                      return Le.trys.push([1, 3, , 4]), [4, n.context.cache.match(u)];
                    case 2:
                      return c = Le.sent(), [3, 4];
                    case 3:
                      return Le.sent(), n.context.logger.error("Error loading background-image " + u), [3, 4];
                    case 4:
                      return c && (d = Yo(t, i, [
                        c.width,
                        c.height,
                        c.width / c.height
                      ]), J = d[0], le = d[1], fe = d[2], Z = d[3], ae = d[4], S = n.ctx.createPattern(n.resizeImage(c, Z, ae), "repeat"), n.renderRepeat(J, S, le, fe)), [3, 6];
                    case 5:
                      Uy(h) ? (f = Yo(t, i, [null, null, null]), J = f[0], le = f[1], fe = f[2], Z = f[3], ae = f[4], p = yy(h.angle, Z, ae), b = p[0], w = p[1], C = p[2], x = p[3], U = p[4], E = document.createElement("canvas"), E.width = Z, E.height = ae, H = E.getContext("2d"), T = H.createLinearGradient(w, x, C, U), yc(h.stops, b).forEach(function(He) {
                        return T.addColorStop(He.stop, Je(He.color));
                      }), H.fillStyle = T, H.fillRect(0, 0, Z, ae), Z > 0 && ae > 0 && (S = n.ctx.createPattern(E, "repeat"), n.renderRepeat(J, S, le, fe))) : _y(h) && (R = Yo(t, i, [
                        null,
                        null,
                        null
                      ]), J = R[0], X = R[1], P = R[2], Z = R[3], ae = R[4], ce = h.position.length === 0 ? [Dl] : h.position, le = xe(ce[0], Z), fe = xe(ce[ce.length - 1], ae), be = Ey(h, le, fe, Z, ae), _e = be[0], Ke = be[1], _e > 0 && Ke > 0 && (We = n.ctx.createRadialGradient(X + le, P + fe, 0, X + le, P + fe, _e), yc(h.stops, _e * 2).forEach(function(He) {
                        return We.addColorStop(He.stop, Je(He.color));
                      }), n.path(J), n.ctx.fillStyle = We, _e !== Ke ? (Te = t.bounds.left + 0.5 * t.bounds.width, Ve = t.bounds.top + 0.5 * t.bounds.height, ze = Ke / _e, ee = 1 / ze, n.ctx.save(), n.ctx.translate(Te, Ve), n.ctx.transform(1, 0, 0, ze, 0, 0), n.ctx.translate(-Te, -Ve), n.ctx.fillRect(X, ee * (P - Ve) + Ve, Z, ae * ee), n.ctx.restore()) : n.ctx.fill())), Le.label = 6;
                    case 6:
                      return i--, [
                        2
                        /*return*/
                      ];
                  }
                });
              }, n = this, r = 0, o = t.styles.backgroundImage.slice(0).reverse(), l.label = 1;
            case 1:
              return r < o.length ? (a = o[r], [5, s(a)]) : [3, 4];
            case 2:
              l.sent(), l.label = 3;
            case 3:
              return r++, [3, 1];
            case 4:
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.renderSolidBorder = function(t, i, s) {
      return ut(this, void 0, void 0, function() {
        return At(this, function(n) {
          return this.path(eu(s, i)), this.ctx.fillStyle = Je(t), this.ctx.fill(), [
            2
            /*return*/
          ];
        });
      });
    }, e.prototype.renderDoubleBorder = function(t, i, s, n) {
      return ut(this, void 0, void 0, function() {
        var r, o;
        return At(this, function(a) {
          switch (a.label) {
            case 0:
              return i < 3 ? [4, this.renderSolidBorder(t, s, n)] : [3, 2];
            case 1:
              return a.sent(), [
                2
                /*return*/
              ];
            case 2:
              return r = DF(n, s), this.path(r), this.ctx.fillStyle = Je(t), this.ctx.fill(), o = SF(n, s), this.path(o), this.ctx.fill(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.renderNodeBackgroundAndBorders = function(t) {
      return ut(this, void 0, void 0, function() {
        var i, s, n, r, o, a, l, h, c = this;
        return At(this, function(u) {
          switch (u.label) {
            case 0:
              return this.applyEffects(t.getEffects(
                2
                /* BACKGROUND_BORDERS */
              )), i = t.container.styles, s = !Wi(i.backgroundColor) || i.backgroundImage.length, n = [
                { style: i.borderTopStyle, color: i.borderTopColor, width: i.borderTopWidth },
                { style: i.borderRightStyle, color: i.borderRightColor, width: i.borderRightWidth },
                { style: i.borderBottomStyle, color: i.borderBottomColor, width: i.borderBottomWidth },
                { style: i.borderLeftStyle, color: i.borderLeftColor, width: i.borderLeftWidth }
              ], r = zF(Rs(i.backgroundClip, 0), t.curves), s || i.boxShadow.length ? (this.ctx.save(), this.path(r), this.ctx.clip(), Wi(i.backgroundColor) || (this.ctx.fillStyle = Je(i.backgroundColor), this.ctx.fill()), [4, this.renderBackgroundImage(t.container)]) : [3, 2];
            case 1:
              u.sent(), this.ctx.restore(), i.boxShadow.slice(0).reverse().forEach(function(d) {
                c.ctx.save();
                var f = Tr(t.curves), p = d.inset ? 0 : NF, b = HF(f, -p + (d.inset ? 1 : -1) * d.spread.number, (d.inset ? 1 : -1) * d.spread.number, d.spread.number * (d.inset ? -2 : 2), d.spread.number * (d.inset ? -2 : 2));
                d.inset ? (c.path(f), c.ctx.clip(), c.mask(b)) : (c.mask(f), c.ctx.clip(), c.path(b)), c.ctx.shadowOffsetX = d.offsetX.number + p, c.ctx.shadowOffsetY = d.offsetY.number, c.ctx.shadowColor = Je(d.color), c.ctx.shadowBlur = d.blur.number, c.ctx.fillStyle = d.inset ? Je(d.color) : "rgba(0,0,0,1)", c.ctx.fill(), c.ctx.restore();
              }), u.label = 2;
            case 2:
              o = 0, a = 0, l = n, u.label = 3;
            case 3:
              return a < l.length ? (h = l[a], h.style !== 0 && !Wi(h.color) && h.width > 0 ? h.style !== 2 ? [3, 5] : [4, this.renderDashedDottedBorder(
                h.color,
                h.width,
                o,
                t.curves,
                2
                /* DASHED */
              )] : [3, 11]) : [3, 13];
            case 4:
              return u.sent(), [3, 11];
            case 5:
              return h.style !== 3 ? [3, 7] : [4, this.renderDashedDottedBorder(
                h.color,
                h.width,
                o,
                t.curves,
                3
                /* DOTTED */
              )];
            case 6:
              return u.sent(), [3, 11];
            case 7:
              return h.style !== 4 ? [3, 9] : [4, this.renderDoubleBorder(h.color, h.width, o, t.curves)];
            case 8:
              return u.sent(), [3, 11];
            case 9:
              return [4, this.renderSolidBorder(h.color, o, t.curves)];
            case 10:
              u.sent(), u.label = 11;
            case 11:
              o++, u.label = 12;
            case 12:
              return a++, [3, 3];
            case 13:
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.renderDashedDottedBorder = function(t, i, s, n, r) {
      return ut(this, void 0, void 0, function() {
        var o, a, l, h, c, u, d, f, p, b, w, C, x, U, E, H, E, H;
        return At(this, function(T) {
          return this.ctx.save(), o = TF(n, s), a = eu(n, s), r === 2 && (this.path(a), this.ctx.clip()), Rt(a[0]) ? (l = a[0].start.x, h = a[0].start.y) : (l = a[0].x, h = a[0].y), Rt(a[1]) ? (c = a[1].end.x, u = a[1].end.y) : (c = a[1].x, u = a[1].y), s === 0 || s === 2 ? d = Math.abs(l - c) : d = Math.abs(h - u), this.ctx.beginPath(), r === 3 ? this.formatPath(o) : this.formatPath(a.slice(0, 2)), f = i < 3 ? i * 3 : i * 2, p = i < 3 ? i * 2 : i, r === 3 && (f = i, p = i), b = !0, d <= f * 2 ? b = !1 : d <= f * 2 + p ? (w = d / (2 * f + p), f *= w, p *= w) : (C = Math.floor((d + p) / (f + p)), x = (d - C * f) / (C - 1), U = (d - (C + 1) * f) / C, p = U <= 0 || Math.abs(p - x) < Math.abs(p - U) ? x : U), b && (r === 3 ? this.ctx.setLineDash([0, f + p]) : this.ctx.setLineDash([f, p])), r === 3 ? (this.ctx.lineCap = "round", this.ctx.lineWidth = i) : this.ctx.lineWidth = i * 2 + 1.1, this.ctx.strokeStyle = Je(t), this.ctx.stroke(), this.ctx.setLineDash([]), r === 2 && (Rt(a[0]) && (E = a[3], H = a[0], this.ctx.beginPath(), this.formatPath([new K(E.end.x, E.end.y), new K(H.start.x, H.start.y)]), this.ctx.stroke()), Rt(a[1]) && (E = a[1], H = a[2], this.ctx.beginPath(), this.formatPath([new K(E.end.x, E.end.y), new K(H.start.x, H.start.y)]), this.ctx.stroke())), this.ctx.restore(), [
            2
            /*return*/
          ];
        });
      });
    }, e.prototype.render = function(t) {
      return ut(this, void 0, void 0, function() {
        var i;
        return At(this, function(s) {
          switch (s.label) {
            case 0:
              return this.options.backgroundColor && (this.ctx.fillStyle = Je(this.options.backgroundColor), this.ctx.fillRect(this.options.x, this.options.y, this.options.width, this.options.height)), i = MF(t), [4, this.renderStack(i)];
            case 1:
              return s.sent(), this.applyEffects([]), [2, this.canvas];
          }
        });
      });
    }, e;
  }(yf)
), VF = function(A) {
  return A instanceof rf || A instanceof nf ? !0 : A instanceof Rl && A.type !== Mr && A.type !== Hr;
}, zF = function(A, e) {
  switch (A) {
    case 0:
      return Tr(e);
    case 2:
      return FF(e);
    case 1:
    default:
      return Lr(e);
  }
}, GF = function(A) {
  switch (A) {
    case 1:
      return "center";
    case 2:
      return "right";
    case 0:
    default:
      return "left";
  }
}, WF = ["-apple-system", "system-ui"], jF = function(A) {
  return /iPhone OS 15_(0|1)/.test(window.navigator.userAgent) ? A.filter(function(e) {
    return WF.indexOf(e) === -1;
  }) : A;
}, XF = (
  /** @class */
  function(A) {
    Jt(e, A);
    function e(t, i) {
      var s = A.call(this, t, i) || this;
      return s.canvas = i.canvas ? i.canvas : document.createElement("canvas"), s.ctx = s.canvas.getContext("2d"), s.options = i, s.canvas.width = Math.floor(i.width * i.scale), s.canvas.height = Math.floor(i.height * i.scale), s.canvas.style.width = i.width + "px", s.canvas.style.height = i.height + "px", s.ctx.scale(s.options.scale, s.options.scale), s.ctx.translate(-i.x, -i.y), s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized (" + i.width + "x" + i.height + " at " + i.x + "," + i.y + ") with scale " + i.scale), s;
    }
    return e.prototype.render = function(t) {
      return ut(this, void 0, void 0, function() {
        var i, s;
        return At(this, function(n) {
          switch (n.label) {
            case 0:
              return i = rl(this.options.width * this.options.scale, this.options.height * this.options.scale, this.options.scale, this.options.scale, t), [4, YF(i)];
            case 1:
              return s = n.sent(), this.options.backgroundColor && (this.ctx.fillStyle = Je(this.options.backgroundColor), this.ctx.fillRect(0, 0, this.options.width * this.options.scale, this.options.height * this.options.scale)), this.ctx.drawImage(s, -this.options.x * this.options.scale, -this.options.y * this.options.scale), [2, this.canvas];
          }
        });
      });
    }, e;
  }(yf)
), YF = function(A) {
  return new Promise(function(e, t) {
    var i = new Image();
    i.onload = function() {
      e(i);
    }, i.onerror = t, i.src = "data:image/svg+xml;charset=utf-8," + encodeURIComponent(new XMLSerializer().serializeToString(A));
  });
}, JF = (
  /** @class */
  function() {
    function A(e) {
      var t = e.id, i = e.enabled;
      this.id = t, this.enabled = i, this.start = Date.now();
    }
    return A.prototype.debug = function() {
      for (var e = [], t = 0; t < arguments.length; t++)
        e[t] = arguments[t];
      this.enabled && (typeof window < "u" && window.console && typeof console.debug == "function" ? console.debug.apply(console, kn([this.id, this.getTime() + "ms"], e)) : this.info.apply(this, e));
    }, A.prototype.getTime = function() {
      return Date.now() - this.start;
    }, A.prototype.info = function() {
      for (var e = [], t = 0; t < arguments.length; t++)
        e[t] = arguments[t];
      this.enabled && typeof window < "u" && window.console && typeof console.info == "function" && console.info.apply(console, kn([this.id, this.getTime() + "ms"], e));
    }, A.prototype.warn = function() {
      for (var e = [], t = 0; t < arguments.length; t++)
        e[t] = arguments[t];
      this.enabled && (typeof window < "u" && window.console && typeof console.warn == "function" ? console.warn.apply(console, kn([this.id, this.getTime() + "ms"], e)) : this.info.apply(this, e));
    }, A.prototype.error = function() {
      for (var e = [], t = 0; t < arguments.length; t++)
        e[t] = arguments[t];
      this.enabled && (typeof window < "u" && window.console && typeof console.error == "function" ? console.error.apply(console, kn([this.id, this.getTime() + "ms"], e)) : this.info.apply(this, e));
    }, A.instances = {}, A;
  }()
), $F = (
  /** @class */
  function() {
    function A(e, t) {
      var i;
      this.windowBounds = t, this.instanceName = "#" + A.instanceCount++, this.logger = new JF({ id: this.instanceName, enabled: e.logging }), this.cache = (i = e.cache) !== null && i !== void 0 ? i : new mF(this, e);
    }
    return A.instanceCount = 1, A;
  }()
), ZF = function(A, e) {
  return e === void 0 && (e = {}), qF(A, e);
};
typeof window < "u" && mf.setContext(window);
var qF = function(A, e) {
  return ut(void 0, void 0, void 0, function() {
    var t, i, s, n, r, o, a, l, h, c, u, d, f, p, b, w, C, x, U, E, T, H, T, S, R, J, X, P, Z, ae, ce, le, fe, be, _e, Ke, We, Te, Ve, ze;
    return At(this, function(ee) {
      switch (ee.label) {
        case 0:
          if (!A || typeof A != "object")
            return [2, Promise.reject("Invalid element provided as first argument")];
          if (t = A.ownerDocument, !t)
            throw new Error("Element is not attached to a Document");
          if (i = t.defaultView, !i)
            throw new Error("Document is not attached to a Window");
          return s = {
            allowTaint: (S = e.allowTaint) !== null && S !== void 0 ? S : !1,
            imageTimeout: (R = e.imageTimeout) !== null && R !== void 0 ? R : 15e3,
            proxy: e.proxy,
            useCORS: (J = e.useCORS) !== null && J !== void 0 ? J : !1
          }, n = Ga({ logging: (X = e.logging) !== null && X !== void 0 ? X : !0, cache: e.cache }, s), r = {
            windowWidth: (P = e.windowWidth) !== null && P !== void 0 ? P : i.innerWidth,
            windowHeight: (Z = e.windowHeight) !== null && Z !== void 0 ? Z : i.innerHeight,
            scrollX: (ae = e.scrollX) !== null && ae !== void 0 ? ae : i.pageXOffset,
            scrollY: (ce = e.scrollY) !== null && ce !== void 0 ? ce : i.pageYOffset
          }, o = new Bi(r.scrollX, r.scrollY, r.windowWidth, r.windowHeight), a = new $F(n, o), l = (le = e.foreignObjectRendering) !== null && le !== void 0 ? le : !1, h = {
            allowTaint: (fe = e.allowTaint) !== null && fe !== void 0 ? fe : !1,
            onclone: e.onclone,
            ignoreElements: e.ignoreElements,
            inlineImages: l,
            copyStyles: l
          }, a.logger.debug("Starting document clone with size " + o.width + "x" + o.height + " scrolled to " + -o.left + "," + -o.top), c = new $c(a, A, h), u = c.clonedReferenceElement, u ? [4, c.toIFrame(t, o)] : [2, Promise.reject("Unable to find element in cloned iframe")];
        case 1:
          return d = ee.sent(), f = Il(u) || eF(u) ? HB(u.ownerDocument) : Wr(a, u), p = f.width, b = f.height, w = f.left, C = f.top, x = ex(a, u, e.backgroundColor), U = {
            canvas: e.canvas,
            backgroundColor: x,
            scale: (_e = (be = e.scale) !== null && be !== void 0 ? be : i.devicePixelRatio) !== null && _e !== void 0 ? _e : 1,
            x: ((Ke = e.x) !== null && Ke !== void 0 ? Ke : 0) + w,
            y: ((We = e.y) !== null && We !== void 0 ? We : 0) + C,
            width: (Te = e.width) !== null && Te !== void 0 ? Te : Math.ceil(p),
            height: (Ve = e.height) !== null && Ve !== void 0 ? Ve : Math.ceil(b)
          }, l ? (a.logger.debug("Document cloned, using foreign object rendering"), T = new XF(a, U), [4, T.render(u)]) : [3, 3];
        case 2:
          return E = ee.sent(), [3, 5];
        case 3:
          return a.logger.debug("Document cloned, element located at " + w + "," + C + " with size " + p + "x" + b + " using computed rendering"), a.logger.debug("Starting DOM parsing"), H = lf(a, u), x === H.styles.backgroundColor && (H.styles.backgroundColor = wi.TRANSPARENT), a.logger.debug("Starting renderer for element at " + U.x + "," + U.y + " with size " + U.width + "x" + U.height), T = new KF(a, U), [4, T.render(H)];
        case 4:
          E = ee.sent(), ee.label = 5;
        case 5:
          return (!((ze = e.removeContainer) !== null && ze !== void 0) || ze) && ($c.destroy(d) || a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")), a.logger.debug("Finished rendering"), [2, E];
      }
    });
  });
}, ex = function(A, e, t) {
  var i = e.ownerDocument, s = i.documentElement ? OA(A, getComputedStyle(i.documentElement).backgroundColor) : wi.TRANSPARENT, n = i.body ? OA(A, getComputedStyle(i.body).backgroundColor) : wi.TRANSPARENT, r = typeof t == "string" ? OA(A, t) : t === null ? wi.TRANSPARENT : 4294967295;
  return e === i.documentElement ? Wi(s) ? Wi(n) ? r : n : s : r;
};
const tx = {
  key: 0,
  class: "modal-backdrop"
}, ix = { class: "modal-card" }, sx = { class: "form-row" }, Ax = { class: "form-group" }, nx = { class: "form-group" }, rx = { class: "form-row" }, ox = { class: "form-group" }, ax = { class: "form-group" }, lx = { class: "form-group" }, hx = { class: "radio-group" }, cx = {
  key: 0,
  class: "form-group"
}, ux = { class: "form-row" }, dx = { class: "form-group" }, fx = { class: "form-group" }, gx = { class: "dialog-actions" }, px = ["disabled"], mx = {
  key: 1,
  class: "error-msg"
}, bx = /* @__PURE__ */ kr({
  __name: "AddClientDialog",
  props: {
    show: { type: Boolean },
    onClose: { type: Function },
    onAdded: { type: Function }
  },
  setup(A) {
    const e = A, t = au(), i = te(!1), s = te(""), n = lr({
      legal_entity: "",
      broker_account_id: "",
      flex_query_token: "",
      all_trades_flex_query_id: "",
      sync_mode: "manual",
      api_url: "",
      nlv: null,
      maintenance: null
    });
    jt(() => e.show, (a) => {
      a && (n.legal_entity = "", n.broker_account_id = "", n.flex_query_token = "", n.all_trades_flex_query_id = "", n.sync_mode = "manual", n.api_url = "", n.nlv = null, n.maintenance = null, s.value = "");
    });
    function r() {
      e.onClose();
    }
    async function o() {
      if (s.value = "", !n.legal_entity) {
        s.value = "Client name required";
        return;
      }
      if (n.sync_mode === "auto" && !n.api_url) {
        s.value = "API URL required for auto sync";
        return;
      }
      if (!n.nlv && !n.maintenance) {
        s.value = "Enter at least NLV or Maintenance Margin";
        return;
      }
      console.log("Submitting form", n), i.value = !0;
      try {
        const { data: a, error: l } = await t.schema("hf").from("user_accounts_master").select("internal_account_id");
        if (l) throw l;
        const h = (a || []).reduce((b, w) => {
          const C = parseInt(w.internal_account_id || "0", 10);
          return Number.isFinite(C) ? Math.max(b, C) : b;
        }, 0), c = String(h + 1), { data: u, error: d } = await t.schema("hf").from("user_accounts_master").insert([{
          internal_account_id: c,
          legal_entity: n.legal_entity,
          broker_account_id: n.broker_account_id,
          flex_query_token: n.flex_query_token,
          all_trades_flex_query_id: n.all_trades_flex_query_id,
          sync_mode: n.sync_mode,
          api_url: n.sync_mode === "auto" ? n.api_url : null
        }]).select("internal_account_id").single();
        if (d) throw d;
        const f = u == null ? void 0 : u.internal_account_id;
        if (!f) throw new Error("Failed to get new account ID");
        const p = (/* @__PURE__ */ new Date()).toISOString();
        n.maintenance == null && (n.maintenance = 0), await t.schema("hf").from("maintenance_margin").insert([{
          internal_account_id: f,
          maintenance: n.maintenance,
          fetched_at: p,
          run_id_of_fetch_script: null
        }]), n.nlv == null && (n.nlv = 0), await t.schema("hf").from("netliquidation").insert([{
          internal_account_id: f,
          nlv: n.nlv,
          fetched_at: p,
          run_id_of_fetch_script: null
        }]), e.onAdded(), r();
      } catch (a) {
        s.value = a.message || "Failed to add client";
      } finally {
        i.value = !1;
      }
    }
    return (a, l) => A.show ? (G(), W("div", tx, [
      y("div", ix, [
        l[20] || (l[20] = y("h2", null, "Add New Client", -1)),
        y("form", {
          onSubmit: St(o, ["prevent"])
        }, [
          y("div", sx, [
            y("div", Ax, [
              l[9] || (l[9] = y("label", null, "Client Name", -1)),
              et(y("input", {
                "onUpdate:modelValue": l[0] || (l[0] = (h) => n.legal_entity = h),
                type: "text",
                required: ""
              }, null, 512), [
                [mt, n.legal_entity]
              ])
            ]),
            y("div", nx, [
              l[10] || (l[10] = y("label", null, "Broker Account ID", -1)),
              et(y("input", {
                "onUpdate:modelValue": l[1] || (l[1] = (h) => n.broker_account_id = h),
                type: "text"
              }, null, 512), [
                [mt, n.broker_account_id]
              ])
            ])
          ]),
          y("div", rx, [
            y("div", ox, [
              l[11] || (l[11] = y("label", null, "Flex Query Token", -1)),
              et(y("input", {
                "onUpdate:modelValue": l[2] || (l[2] = (h) => n.flex_query_token = h),
                type: "text"
              }, null, 512), [
                [mt, n.flex_query_token]
              ])
            ]),
            y("div", ax, [
              l[12] || (l[12] = y("label", null, "All Trades Flex Query ID", -1)),
              et(y("input", {
                "onUpdate:modelValue": l[3] || (l[3] = (h) => n.all_trades_flex_query_id = h),
                type: "text"
              }, null, 512), [
                [mt, n.all_trades_flex_query_id]
              ])
            ])
          ]),
          y("div", lx, [
            l[15] || (l[15] = y("label", null, "Sync Mode", -1)),
            y("div", hx, [
              y("label", null, [
                et(y("input", {
                  type: "radio",
                  value: "auto",
                  "onUpdate:modelValue": l[4] || (l[4] = (h) => n.sync_mode = h)
                }, null, 512), [
                  [Pl, n.sync_mode]
                ]),
                l[13] || (l[13] = ki(" Auto Sync ", -1))
              ]),
              y("label", null, [
                et(y("input", {
                  type: "radio",
                  value: "manual",
                  "onUpdate:modelValue": l[5] || (l[5] = (h) => n.sync_mode = h)
                }, null, 512), [
                  [Pl, n.sync_mode]
                ]),
                l[14] || (l[14] = ki(" Manual ", -1))
              ])
            ])
          ]),
          n.sync_mode === "auto" ? (G(), W("div", cx, [
            l[16] || (l[16] = y("label", null, "API URL", -1)),
            et(y("input", {
              "onUpdate:modelValue": l[6] || (l[6] = (h) => n.api_url = h),
              type: "text",
              required: ""
            }, null, 512), [
              [mt, n.api_url]
            ])
          ])) : Se("", !0),
          y("div", ux, [
            y("div", dx, [
              l[17] || (l[17] = y("label", null, "NLV", -1)),
              et(y("input", {
                "onUpdate:modelValue": l[7] || (l[7] = (h) => n.nlv = h),
                type: "number",
                min: "0",
                step: "any",
                placeholder: "Net Liquidation Value",
                class: "input-wide"
              }, null, 512), [
                [
                  mt,
                  n.nlv,
                  void 0,
                  { number: !0 }
                ]
              ])
            ]),
            y("div", fx, [
              l[18] || (l[18] = y("label", null, "Maintenance Margin", -1)),
              et(y("input", {
                "onUpdate:modelValue": l[8] || (l[8] = (h) => n.maintenance = h),
                type: "number",
                min: "0",
                step: "any",
                placeholder: "Maintenance Margin",
                class: "input-wide"
              }, null, 512), [
                [
                  mt,
                  n.maintenance,
                  void 0,
                  { number: !0 }
                ]
              ])
            ])
          ]),
          y("div", gx, [
            y("button", {
              type: "submit",
              disabled: i.value,
              class: "btn-primary"
            }, "Add", 8, px),
            y("button", {
              type: "button",
              onClick: r,
              class: "btn-secondary"
            }, "Cancel")
          ]),
          s.value ? (G(), W("div", mx, [
            l[19] || (l[19] = y("span", { class: "error-icon" }, "", -1)),
            ki(" " + ue(s.value), 1)
          ])) : Se("", !0)
        ], 32)
      ])
    ])) : Se("", !0);
  }
}), Ef = (A, e) => {
  const t = A.__vccOpts || A;
  for (const [i, s] of e)
    t[i] = s;
  return t;
}, wx = /* @__PURE__ */ Ef(bx, [["__scopeId", "data-v-5f6b5b9b"]]);
var Jo = [
  "onChange",
  "onClose",
  "onDayCreate",
  "onDestroy",
  "onKeyDown",
  "onMonthChange",
  "onOpen",
  "onParseConfig",
  "onReady",
  "onValueUpdate",
  "onYearChange",
  "onPreCalendarPosition"
], Ws = {
  _disable: [],
  allowInput: !1,
  allowInvalidPreload: !1,
  altFormat: "F j, Y",
  altInput: !1,
  altInputClass: "form-control input",
  animate: typeof window == "object" && window.navigator.userAgent.indexOf("MSIE") === -1,
  ariaDateFormat: "F j, Y",
  autoFillDefaultTime: !0,
  clickOpens: !0,
  closeOnSelect: !0,
  conjunction: ", ",
  dateFormat: "Y-m-d",
  defaultHour: 12,
  defaultMinute: 0,
  defaultSeconds: 0,
  disable: [],
  disableMobile: !1,
  enableSeconds: !1,
  enableTime: !1,
  errorHandler: function(A) {
    return typeof console < "u" && console.warn(A);
  },
  getWeek: function(A) {
    var e = new Date(A.getTime());
    e.setHours(0, 0, 0, 0), e.setDate(e.getDate() + 3 - (e.getDay() + 6) % 7);
    var t = new Date(e.getFullYear(), 0, 4);
    return 1 + Math.round(((e.getTime() - t.getTime()) / 864e5 - 3 + (t.getDay() + 6) % 7) / 7);
  },
  hourIncrement: 1,
  ignoredFocusElements: [],
  inline: !1,
  locale: "default",
  minuteIncrement: 5,
  mode: "single",
  monthSelectorType: "dropdown",
  nextArrow: "<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",
  noCalendar: !1,
  now: /* @__PURE__ */ new Date(),
  onChange: [],
  onClose: [],
  onDayCreate: [],
  onDestroy: [],
  onKeyDown: [],
  onMonthChange: [],
  onOpen: [],
  onParseConfig: [],
  onReady: [],
  onValueUpdate: [],
  onYearChange: [],
  onPreCalendarPosition: [],
  plugins: [],
  position: "auto",
  positionElement: void 0,
  prevArrow: "<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",
  shorthandCurrentMonth: !1,
  showMonths: 1,
  static: !1,
  time_24hr: !1,
  weekNumbers: !1,
  wrap: !1
}, nn = {
  weekdays: {
    shorthand: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
    longhand: [
      "Sunday",
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday"
    ]
  },
  months: {
    shorthand: [
      "Jan",
      "Feb",
      "Mar",
      "Apr",
      "May",
      "Jun",
      "Jul",
      "Aug",
      "Sep",
      "Oct",
      "Nov",
      "Dec"
    ],
    longhand: [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December"
    ]
  },
  daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
  firstDayOfWeek: 0,
  ordinal: function(A) {
    var e = A % 100;
    if (e > 3 && e < 21)
      return "th";
    switch (e % 10) {
      case 1:
        return "st";
      case 2:
        return "nd";
      case 3:
        return "rd";
      default:
        return "th";
    }
  },
  rangeSeparator: " to ",
  weekAbbreviation: "Wk",
  scrollTitle: "Scroll to increment",
  toggleTitle: "Click to toggle",
  amPM: ["AM", "PM"],
  yearAriaLabel: "Year",
  monthAriaLabel: "Month",
  hourAriaLabel: "Hour",
  minuteAriaLabel: "Minute",
  time_24hr: !1
}, wt = function(A, e) {
  return e === void 0 && (e = 2), ("000" + A).slice(e * -1);
}, Tt = function(A) {
  return A === !0 ? 1 : 0;
};
function iu(A, e) {
  var t;
  return function() {
    var i = this, s = arguments;
    clearTimeout(t), t = setTimeout(function() {
      return A.apply(i, s);
    }, e);
  };
}
var $o = function(A) {
  return A instanceof Array ? A : [A];
};
function ct(A, e, t) {
  if (t === !0)
    return A.classList.add(e);
  A.classList.remove(e);
}
function ge(A, e, t) {
  var i = window.document.createElement(A);
  return e = e || "", t = t || "", i.className = e, t !== void 0 && (i.textContent = t), i;
}
function or(A) {
  for (; A.firstChild; )
    A.removeChild(A.firstChild);
}
function Ff(A, e) {
  if (e(A))
    return A;
  if (A.parentNode)
    return Ff(A.parentNode, e);
}
function ar(A, e) {
  var t = ge("div", "numInputWrapper"), i = ge("input", "numInput " + A), s = ge("span", "arrowUp"), n = ge("span", "arrowDown");
  if (navigator.userAgent.indexOf("MSIE 9.0") === -1 ? i.type = "number" : (i.type = "text", i.pattern = "\\d*"), e !== void 0)
    for (var r in e)
      i.setAttribute(r, e[r]);
  return t.appendChild(i), t.appendChild(s), t.appendChild(n), t;
}
function xt(A) {
  try {
    if (typeof A.composedPath == "function") {
      var e = A.composedPath();
      return e[0];
    }
    return A.target;
  } catch {
    return A.target;
  }
}
var Zo = function() {
}, Ir = function(A, e, t) {
  return t.months[e ? "shorthand" : "longhand"][A];
}, vx = {
  D: Zo,
  F: function(A, e, t) {
    A.setMonth(t.months.longhand.indexOf(e));
  },
  G: function(A, e) {
    A.setHours((A.getHours() >= 12 ? 12 : 0) + parseFloat(e));
  },
  H: function(A, e) {
    A.setHours(parseFloat(e));
  },
  J: function(A, e) {
    A.setDate(parseFloat(e));
  },
  K: function(A, e, t) {
    A.setHours(A.getHours() % 12 + 12 * Tt(new RegExp(t.amPM[1], "i").test(e)));
  },
  M: function(A, e, t) {
    A.setMonth(t.months.shorthand.indexOf(e));
  },
  S: function(A, e) {
    A.setSeconds(parseFloat(e));
  },
  U: function(A, e) {
    return new Date(parseFloat(e) * 1e3);
  },
  W: function(A, e, t) {
    var i = parseInt(e), s = new Date(A.getFullYear(), 0, 2 + (i - 1) * 7, 0, 0, 0, 0);
    return s.setDate(s.getDate() - s.getDay() + t.firstDayOfWeek), s;
  },
  Y: function(A, e) {
    A.setFullYear(parseFloat(e));
  },
  Z: function(A, e) {
    return new Date(e);
  },
  d: function(A, e) {
    A.setDate(parseFloat(e));
  },
  h: function(A, e) {
    A.setHours((A.getHours() >= 12 ? 12 : 0) + parseFloat(e));
  },
  i: function(A, e) {
    A.setMinutes(parseFloat(e));
  },
  j: function(A, e) {
    A.setDate(parseFloat(e));
  },
  l: Zo,
  m: function(A, e) {
    A.setMonth(parseFloat(e) - 1);
  },
  n: function(A, e) {
    A.setMonth(parseFloat(e) - 1);
  },
  s: function(A, e) {
    A.setSeconds(parseFloat(e));
  },
  u: function(A, e) {
    return new Date(parseFloat(e));
  },
  w: Zo,
  y: function(A, e) {
    A.setFullYear(2e3 + parseFloat(e));
  }
}, ls = {
  D: "",
  F: "",
  G: "(\\d\\d|\\d)",
  H: "(\\d\\d|\\d)",
  J: "(\\d\\d|\\d)\\w+",
  K: "",
  M: "",
  S: "(\\d\\d|\\d)",
  U: "(.+)",
  W: "(\\d\\d|\\d)",
  Y: "(\\d{4})",
  Z: "(.+)",
  d: "(\\d\\d|\\d)",
  h: "(\\d\\d|\\d)",
  i: "(\\d\\d|\\d)",
  j: "(\\d\\d|\\d)",
  l: "",
  m: "(\\d\\d|\\d)",
  n: "(\\d\\d|\\d)",
  s: "(\\d\\d|\\d)",
  u: "(.+)",
  w: "(\\d\\d|\\d)",
  y: "(\\d{2})"
}, VA = {
  Z: function(A) {
    return A.toISOString();
  },
  D: function(A, e, t) {
    return e.weekdays.shorthand[VA.w(A, e, t)];
  },
  F: function(A, e, t) {
    return Ir(VA.n(A, e, t) - 1, !1, e);
  },
  G: function(A, e, t) {
    return wt(VA.h(A, e, t));
  },
  H: function(A) {
    return wt(A.getHours());
  },
  J: function(A, e) {
    return e.ordinal !== void 0 ? A.getDate() + e.ordinal(A.getDate()) : A.getDate();
  },
  K: function(A, e) {
    return e.amPM[Tt(A.getHours() > 11)];
  },
  M: function(A, e) {
    return Ir(A.getMonth(), !0, e);
  },
  S: function(A) {
    return wt(A.getSeconds());
  },
  U: function(A) {
    return A.getTime() / 1e3;
  },
  W: function(A, e, t) {
    return t.getWeek(A);
  },
  Y: function(A) {
    return wt(A.getFullYear(), 4);
  },
  d: function(A) {
    return wt(A.getDate());
  },
  h: function(A) {
    return A.getHours() % 12 ? A.getHours() % 12 : 12;
  },
  i: function(A) {
    return wt(A.getMinutes());
  },
  j: function(A) {
    return A.getDate();
  },
  l: function(A, e) {
    return e.weekdays.longhand[A.getDay()];
  },
  m: function(A) {
    return wt(A.getMonth() + 1);
  },
  n: function(A) {
    return A.getMonth() + 1;
  },
  s: function(A) {
    return A.getSeconds();
  },
  u: function(A) {
    return A.getTime();
  },
  w: function(A) {
    return A.getDay();
  },
  y: function(A) {
    return String(A.getFullYear()).substring(2);
  }
}, xf = function(A) {
  var e = A.config, t = e === void 0 ? Ws : e, i = A.l10n, s = i === void 0 ? nn : i, n = A.isMobile, r = n === void 0 ? !1 : n;
  return function(o, a, l) {
    var h = l || s;
    return t.formatDate !== void 0 && !r ? t.formatDate(o, a, h) : a.split("").map(function(c, u, d) {
      return VA[c] && d[u - 1] !== "\\" ? VA[c](o, h, t) : c !== "\\" ? c : "";
    }).join("");
  };
}, dl = function(A) {
  var e = A.config, t = e === void 0 ? Ws : e, i = A.l10n, s = i === void 0 ? nn : i;
  return function(n, r, o, a) {
    if (!(n !== 0 && !n)) {
      var l = a || s, h, c = n;
      if (n instanceof Date)
        h = new Date(n.getTime());
      else if (typeof n != "string" && n.toFixed !== void 0)
        h = new Date(n);
      else if (typeof n == "string") {
        var u = r || (t || Ws).dateFormat, d = String(n).trim();
        if (d === "today")
          h = /* @__PURE__ */ new Date(), o = !0;
        else if (t && t.parseDate)
          h = t.parseDate(n, u);
        else if (/Z$/.test(d) || /GMT$/.test(d))
          h = new Date(n);
        else {
          for (var f = void 0, p = [], b = 0, w = 0, C = ""; b < u.length; b++) {
            var x = u[b], U = x === "\\", E = u[b - 1] === "\\" || U;
            if (ls[x] && !E) {
              C += ls[x];
              var H = new RegExp(C).exec(n);
              H && (f = !0) && p[x !== "Y" ? "push" : "unshift"]({
                fn: vx[x],
                val: H[++w]
              });
            } else U || (C += ".");
          }
          h = !t || !t.noCalendar ? new Date((/* @__PURE__ */ new Date()).getFullYear(), 0, 1, 0, 0, 0, 0) : new Date((/* @__PURE__ */ new Date()).setHours(0, 0, 0, 0)), p.forEach(function(T) {
            var S = T.fn, R = T.val;
            return h = S(h, R, l) || h;
          }), h = f ? h : void 0;
        }
      }
      if (!(h instanceof Date && !isNaN(h.getTime()))) {
        t.errorHandler(new Error("Invalid date provided: " + c));
        return;
      }
      return o === !0 && h.setHours(0, 0, 0, 0), h;
    }
  };
};
function Ut(A, e, t) {
  return t === void 0 && (t = !0), t !== !1 ? new Date(A.getTime()).setHours(0, 0, 0, 0) - new Date(e.getTime()).setHours(0, 0, 0, 0) : A.getTime() - e.getTime();
}
var Bx = function(A, e, t) {
  return A > Math.min(e, t) && A < Math.max(e, t);
}, qo = function(A, e, t) {
  return A * 3600 + e * 60 + t;
}, Cx = function(A) {
  var e = Math.floor(A / 3600), t = (A - e * 3600) / 60;
  return [e, t, A - e * 3600 - t * 60];
}, yx = {
  DAY: 864e5
};
function ea(A) {
  var e = A.defaultHour, t = A.defaultMinute, i = A.defaultSeconds;
  if (A.minDate !== void 0) {
    var s = A.minDate.getHours(), n = A.minDate.getMinutes(), r = A.minDate.getSeconds();
    e < s && (e = s), e === s && t < n && (t = n), e === s && t === n && i < r && (i = A.minDate.getSeconds());
  }
  if (A.maxDate !== void 0) {
    var o = A.maxDate.getHours(), a = A.maxDate.getMinutes();
    e = Math.min(e, o), e === o && (t = Math.min(a, t)), e === o && t === a && (i = A.maxDate.getSeconds());
  }
  return { hours: e, minutes: t, seconds: i };
}
typeof Object.assign != "function" && (Object.assign = function(A) {
  for (var e = [], t = 1; t < arguments.length; t++)
    e[t - 1] = arguments[t];
  if (!A)
    throw TypeError("Cannot convert undefined or null to object");
  for (var i = function(o) {
    o && Object.keys(o).forEach(function(a) {
      return A[a] = o[a];
    });
  }, s = 0, n = e; s < n.length; s++) {
    var r = n[s];
    i(r);
  }
  return A;
});
var rt = function() {
  return rt = Object.assign || function(A) {
    for (var e, t = 1, i = arguments.length; t < i; t++) {
      e = arguments[t];
      for (var s in e) Object.prototype.hasOwnProperty.call(e, s) && (A[s] = e[s]);
    }
    return A;
  }, rt.apply(this, arguments);
}, su = function() {
  for (var A = 0, e = 0, t = arguments.length; e < t; e++) A += arguments[e].length;
  for (var i = Array(A), s = 0, e = 0; e < t; e++)
    for (var n = arguments[e], r = 0, o = n.length; r < o; r++, s++)
      i[s] = n[r];
  return i;
}, Ex = 300;
function Fx(A, e) {
  var t = {
    config: rt(rt({}, Ws), Pe.defaultConfig),
    l10n: nn
  };
  t.parseDate = dl({ config: t.config, l10n: t.l10n }), t._handlers = [], t.pluginElements = [], t.loadedPlugins = [], t._bind = p, t._setHoursFromDate = u, t._positionCalendar = Zt, t.changeMonth = We, t.changeYear = He, t.clear = Te, t.close = Ve, t.onMouseOver = yt, t._createElement = ge, t.createDay = H, t.destroy = ze, t.isEnabled = Bt, t.jumpToDate = C, t.updateValue = dt, t.open = Ao, t.redraw = hn, t.set = sA, t.setDate = ro, t.toggle = Ji;
  function i() {
    t.utils = {
      getDaysInMonth: function(m, v) {
        return m === void 0 && (m = t.currentMonth), v === void 0 && (v = t.currentYear), m === 1 && (v % 4 === 0 && v % 100 !== 0 || v % 400 === 0) ? 29 : t.l10n.daysInMonth[m];
      }
    };
  }
  function s() {
    t.element = t.input = A, t.isOpen = !1, no(), Et(), Oe(), oo(), i(), t.isMobile || E(), w(), (t.selectedDates.length || t.config.noCalendar) && (t.config.enableTime && u(t.config.noCalendar ? t.latestSelectedDateObj : void 0), dt(!1)), o();
    var m = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
    !t.isMobile && m && Zt(), we("onReady");
  }
  function n() {
    var m;
    return ((m = t.calendarContainer) === null || m === void 0 ? void 0 : m.getRootNode()).activeElement || document.activeElement;
  }
  function r(m) {
    return m.bind(t);
  }
  function o() {
    var m = t.config;
    m.weekNumbers === !1 && m.showMonths === 1 || m.noCalendar !== !0 && window.requestAnimationFrame(function() {
      if (t.calendarContainer !== void 0 && (t.calendarContainer.style.visibility = "hidden", t.calendarContainer.style.display = "block"), t.daysContainer !== void 0) {
        var v = (t.days.offsetWidth + 1) * m.showMonths;
        t.daysContainer.style.width = v + "px", t.calendarContainer.style.width = v + (t.weekWrapper !== void 0 ? t.weekWrapper.offsetWidth : 0) + "px", t.calendarContainer.style.removeProperty("visibility"), t.calendarContainer.style.removeProperty("display");
      }
    });
  }
  function a(m) {
    if (t.selectedDates.length === 0) {
      var v = t.config.minDate === void 0 || Ut(/* @__PURE__ */ new Date(), t.config.minDate) >= 0 ? /* @__PURE__ */ new Date() : new Date(t.config.minDate.getTime()), F = ea(t.config);
      v.setHours(F.hours, F.minutes, F.seconds, v.getMilliseconds()), t.selectedDates = [v], t.latestSelectedDateObj = v;
    }
    m !== void 0 && m.type !== "blur" && Zi(m);
    var M = t._input.value;
    c(), dt(), t._input.value !== M && t._debouncedChange();
  }
  function l(m, v) {
    return m % 12 + 12 * Tt(v === t.l10n.amPM[1]);
  }
  function h(m) {
    switch (m % 24) {
      case 0:
      case 12:
        return 12;
      default:
        return m % 12;
    }
  }
  function c() {
    if (!(t.hourElement === void 0 || t.minuteElement === void 0)) {
      var m = (parseInt(t.hourElement.value.slice(-2), 10) || 0) % 24, v = (parseInt(t.minuteElement.value, 10) || 0) % 60, F = t.secondElement !== void 0 ? (parseInt(t.secondElement.value, 10) || 0) % 60 : 0;
      t.amPM !== void 0 && (m = l(m, t.amPM.textContent));
      var M = t.config.minTime !== void 0 || t.config.minDate && t.minDateHasTime && t.latestSelectedDateObj && Ut(t.latestSelectedDateObj, t.config.minDate, !0) === 0, k = t.config.maxTime !== void 0 || t.config.maxDate && t.maxDateHasTime && t.latestSelectedDateObj && Ut(t.latestSelectedDateObj, t.config.maxDate, !0) === 0;
      if (t.config.maxTime !== void 0 && t.config.minTime !== void 0 && t.config.minTime > t.config.maxTime) {
        var N = qo(t.config.minTime.getHours(), t.config.minTime.getMinutes(), t.config.minTime.getSeconds()), ie = qo(t.config.maxTime.getHours(), t.config.maxTime.getMinutes(), t.config.maxTime.getSeconds()), Y = qo(m, v, F);
        if (Y > ie && Y < N) {
          var Ae = Cx(N);
          m = Ae[0], v = Ae[1], F = Ae[2];
        }
      } else {
        if (k) {
          var j = t.config.maxTime !== void 0 ? t.config.maxTime : t.config.maxDate;
          m = Math.min(m, j.getHours()), m === j.getHours() && (v = Math.min(v, j.getMinutes())), v === j.getMinutes() && (F = Math.min(F, j.getSeconds()));
        }
        if (M) {
          var q = t.config.minTime !== void 0 ? t.config.minTime : t.config.minDate;
          m = Math.max(m, q.getHours()), m === q.getHours() && v < q.getMinutes() && (v = q.getMinutes()), v === q.getMinutes() && (F = Math.max(F, q.getSeconds()));
        }
      }
      d(m, v, F);
    }
  }
  function u(m) {
    var v = m || t.latestSelectedDateObj;
    v && v instanceof Date && d(v.getHours(), v.getMinutes(), v.getSeconds());
  }
  function d(m, v, F) {
    t.latestSelectedDateObj !== void 0 && t.latestSelectedDateObj.setHours(m % 24, v, F || 0, 0), !(!t.hourElement || !t.minuteElement || t.isMobile) && (t.hourElement.value = wt(t.config.time_24hr ? m : (12 + m) % 12 + 12 * Tt(m % 12 === 0)), t.minuteElement.value = wt(v), t.amPM !== void 0 && (t.amPM.textContent = t.l10n.amPM[Tt(m >= 12)]), t.secondElement !== void 0 && (t.secondElement.value = wt(F)));
  }
  function f(m) {
    var v = xt(m), F = parseInt(v.value) + (m.delta || 0);
    (F / 1e3 > 1 || m.key === "Enter" && !/[^\d]/.test(F.toString())) && He(F);
  }
  function p(m, v, F, M) {
    if (v instanceof Array)
      return v.forEach(function(k) {
        return p(m, k, F, M);
      });
    if (m instanceof Array)
      return m.forEach(function(k) {
        return p(k, v, F, M);
      });
    m.addEventListener(v, F, M), t._handlers.push({
      remove: function() {
        return m.removeEventListener(v, F, M);
      }
    });
  }
  function b() {
    we("onChange");
  }
  function w() {
    if (t.config.wrap && ["open", "close", "toggle", "clear"].forEach(function(F) {
      Array.prototype.forEach.call(t.element.querySelectorAll("[data-" + F + "]"), function(M) {
        return p(M, "click", t[F]);
      });
    }), t.isMobile) {
      ao();
      return;
    }
    var m = iu(so, 50);
    if (t._debouncedChange = iu(b, Ex), t.daysContainer && !/iPhone|iPad|iPod/i.test(navigator.userAgent) && p(t.daysContainer, "mouseover", function(F) {
      t.config.mode === "range" && yt(xt(F));
    }), p(t._input, "keydown", Ct), t.calendarContainer !== void 0 && p(t.calendarContainer, "keydown", Ct), !t.config.inline && !t.config.static && p(window, "resize", m), window.ontouchstart !== void 0 ? p(window.document, "touchstart", Le) : p(window.document, "mousedown", Le), p(window.document, "focus", Le, { capture: !0 }), t.config.clickOpens === !0 && (p(t._input, "focus", t.open), p(t._input, "click", t.open)), t.daysContainer !== void 0 && (p(t.monthNav, "click", ho), p(t.monthNav, ["keyup", "increment"], f), p(t.daysContainer, "click", iA)), t.timeContainer !== void 0 && t.minuteElement !== void 0 && t.hourElement !== void 0) {
      var v = function(F) {
        return xt(F).select();
      };
      p(t.timeContainer, ["increment"], a), p(t.timeContainer, "blur", a, { capture: !0 }), p(t.timeContainer, "click", x), p([t.hourElement, t.minuteElement], ["focus", "click"], v), t.secondElement !== void 0 && p(t.secondElement, "focus", function() {
        return t.secondElement && t.secondElement.select();
      }), t.amPM !== void 0 && p(t.amPM, "click", function(F) {
        a(F);
      });
    }
    t.config.allowInput && p(t._input, "blur", io);
  }
  function C(m, v) {
    var F = m !== void 0 ? t.parseDate(m) : t.latestSelectedDateObj || (t.config.minDate && t.config.minDate > t.now ? t.config.minDate : t.config.maxDate && t.config.maxDate < t.now ? t.config.maxDate : t.now), M = t.currentYear, k = t.currentMonth;
    try {
      F !== void 0 && (t.currentYear = F.getFullYear(), t.currentMonth = F.getMonth());
    } catch (N) {
      N.message = "Invalid date supplied: " + F, t.config.errorHandler(N);
    }
    v && t.currentYear !== M && (we("onYearChange"), Z()), v && (t.currentYear !== M || t.currentMonth !== k) && we("onMonthChange"), t.redraw();
  }
  function x(m) {
    var v = xt(m);
    ~v.className.indexOf("arrow") && U(m, v.classList.contains("arrowUp") ? 1 : -1);
  }
  function U(m, v, F) {
    var M = m && xt(m), k = F || M && M.parentNode && M.parentNode.firstChild, N = AA("increment");
    N.delta = v, k && k.dispatchEvent(N);
  }
  function E() {
    var m = window.document.createDocumentFragment();
    if (t.calendarContainer = ge("div", "flatpickr-calendar"), t.calendarContainer.tabIndex = -1, !t.config.noCalendar) {
      if (m.appendChild(le()), t.innerContainer = ge("div", "flatpickr-innerContainer"), t.config.weekNumbers) {
        var v = Ke(), F = v.weekWrapper, M = v.weekNumbers;
        t.innerContainer.appendChild(F), t.weekNumbers = M, t.weekWrapper = F;
      }
      t.rContainer = ge("div", "flatpickr-rContainer"), t.rContainer.appendChild(be()), t.daysContainer || (t.daysContainer = ge("div", "flatpickr-days"), t.daysContainer.tabIndex = -1), P(), t.rContainer.appendChild(t.daysContainer), t.innerContainer.appendChild(t.rContainer), m.appendChild(t.innerContainer);
    }
    t.config.enableTime && m.appendChild(fe()), ct(t.calendarContainer, "rangeMode", t.config.mode === "range"), ct(t.calendarContainer, "animate", t.config.animate === !0), ct(t.calendarContainer, "multiMonth", t.config.showMonths > 1), t.calendarContainer.appendChild(m);
    var k = t.config.appendTo !== void 0 && t.config.appendTo.nodeType !== void 0;
    if ((t.config.inline || t.config.static) && (t.calendarContainer.classList.add(t.config.inline ? "inline" : "static"), t.config.inline && (!k && t.element.parentNode ? t.element.parentNode.insertBefore(t.calendarContainer, t._input.nextSibling) : t.config.appendTo !== void 0 && t.config.appendTo.appendChild(t.calendarContainer)), t.config.static)) {
      var N = ge("div", "flatpickr-wrapper");
      t.element.parentNode && t.element.parentNode.insertBefore(N, t.element), N.appendChild(t.element), t.altInput && N.appendChild(t.altInput), N.appendChild(t.calendarContainer);
    }
    !t.config.static && !t.config.inline && (t.config.appendTo !== void 0 ? t.config.appendTo : window.document.body).appendChild(t.calendarContainer);
  }
  function H(m, v, F, M) {
    var k = Bt(v, !0), N = ge("span", m, v.getDate().toString());
    return N.dateObj = v, N.$i = M, N.setAttribute("aria-label", t.formatDate(v, t.config.ariaDateFormat)), m.indexOf("hidden") === -1 && Ut(v, t.now) === 0 && (t.todayDateElem = N, N.classList.add("today"), N.setAttribute("aria-current", "date")), k ? (N.tabIndex = -1, nA(v) && (N.classList.add("selected"), t.selectedDateElem = N, t.config.mode === "range" && (ct(N, "startRange", t.selectedDates[0] && Ut(v, t.selectedDates[0], !0) === 0), ct(N, "endRange", t.selectedDates[1] && Ut(v, t.selectedDates[1], !0) === 0), m === "nextMonthDay" && N.classList.add("inRange")))) : N.classList.add("flatpickr-disabled"), t.config.mode === "range" && lo(v) && !nA(v) && N.classList.add("inRange"), t.weekNumbers && t.config.showMonths === 1 && m !== "prevMonthDay" && M % 7 === 6 && t.weekNumbers.insertAdjacentHTML("beforeend", "<span class='flatpickr-day'>" + t.config.getWeek(v) + "</span>"), we("onDayCreate", N), N;
  }
  function T(m) {
    m.focus(), t.config.mode === "range" && yt(m);
  }
  function S(m) {
    for (var v = m > 0 ? 0 : t.config.showMonths - 1, F = m > 0 ? t.config.showMonths : -1, M = v; M != F; M += m)
      for (var k = t.daysContainer.children[M], N = m > 0 ? 0 : k.children.length - 1, ie = m > 0 ? k.children.length : -1, Y = N; Y != ie; Y += m) {
        var Ae = k.children[Y];
        if (Ae.className.indexOf("hidden") === -1 && Bt(Ae.dateObj))
          return Ae;
      }
  }
  function R(m, v) {
    for (var F = m.className.indexOf("Month") === -1 ? m.dateObj.getMonth() : t.currentMonth, M = v > 0 ? t.config.showMonths : -1, k = v > 0 ? 1 : -1, N = F - t.currentMonth; N != M; N += k)
      for (var ie = t.daysContainer.children[N], Y = F - t.currentMonth === N ? m.$i + v : v < 0 ? ie.children.length - 1 : 0, Ae = ie.children.length, j = Y; j >= 0 && j < Ae && j != (v > 0 ? Ae : -1); j += k) {
        var q = ie.children[j];
        if (q.className.indexOf("hidden") === -1 && Bt(q.dateObj) && Math.abs(m.$i - j) >= Math.abs(v))
          return T(q);
      }
    t.changeMonth(k), J(S(k), 0);
  }
  function J(m, v) {
    var F = n(), M = Cs(F || document.body), k = m !== void 0 ? m : M ? F : t.selectedDateElem !== void 0 && Cs(t.selectedDateElem) ? t.selectedDateElem : t.todayDateElem !== void 0 && Cs(t.todayDateElem) ? t.todayDateElem : S(v > 0 ? 1 : -1);
    k === void 0 ? t._input.focus() : M ? R(k, v) : T(k);
  }
  function X(m, v) {
    for (var F = (new Date(m, v, 1).getDay() - t.l10n.firstDayOfWeek + 7) % 7, M = t.utils.getDaysInMonth((v - 1 + 12) % 12, m), k = t.utils.getDaysInMonth(v, m), N = window.document.createDocumentFragment(), ie = t.config.showMonths > 1, Y = ie ? "prevMonthDay hidden" : "prevMonthDay", Ae = ie ? "nextMonthDay hidden" : "nextMonthDay", j = M + 1 - F, q = 0; j <= M; j++, q++)
      N.appendChild(H("flatpickr-day " + Y, new Date(m, v - 1, j), j, q));
    for (j = 1; j <= k; j++, q++)
      N.appendChild(H("flatpickr-day", new Date(m, v, j), j, q));
    for (var re = k + 1; re <= 42 - F && (t.config.showMonths === 1 || q % 7 !== 0); re++, q++)
      N.appendChild(H("flatpickr-day " + Ae, new Date(m, v + 1, re % k), re, q));
    var ft = ge("div", "dayContainer");
    return ft.appendChild(N), ft;
  }
  function P() {
    if (t.daysContainer !== void 0) {
      or(t.daysContainer), t.weekNumbers && or(t.weekNumbers);
      for (var m = document.createDocumentFragment(), v = 0; v < t.config.showMonths; v++) {
        var F = new Date(t.currentYear, t.currentMonth, 1);
        F.setMonth(t.currentMonth + v), m.appendChild(X(F.getFullYear(), F.getMonth()));
      }
      t.daysContainer.appendChild(m), t.days = t.daysContainer.firstChild, t.config.mode === "range" && t.selectedDates.length === 1 && yt();
    }
  }
  function Z() {
    if (!(t.config.showMonths > 1 || t.config.monthSelectorType !== "dropdown")) {
      var m = function(M) {
        return t.config.minDate !== void 0 && t.currentYear === t.config.minDate.getFullYear() && M < t.config.minDate.getMonth() ? !1 : !(t.config.maxDate !== void 0 && t.currentYear === t.config.maxDate.getFullYear() && M > t.config.maxDate.getMonth());
      };
      t.monthsDropdownContainer.tabIndex = -1, t.monthsDropdownContainer.innerHTML = "";
      for (var v = 0; v < 12; v++)
        if (m(v)) {
          var F = ge("option", "flatpickr-monthDropdown-month");
          F.value = new Date(t.currentYear, v).getMonth().toString(), F.textContent = Ir(v, t.config.shorthandCurrentMonth, t.l10n), F.tabIndex = -1, t.currentMonth === v && (F.selected = !0), t.monthsDropdownContainer.appendChild(F);
        }
    }
  }
  function ae() {
    var m = ge("div", "flatpickr-month"), v = window.document.createDocumentFragment(), F;
    t.config.showMonths > 1 || t.config.monthSelectorType === "static" ? F = ge("span", "cur-month") : (t.monthsDropdownContainer = ge("select", "flatpickr-monthDropdown-months"), t.monthsDropdownContainer.setAttribute("aria-label", t.l10n.monthAriaLabel), p(t.monthsDropdownContainer, "change", function(ie) {
      var Y = xt(ie), Ae = parseInt(Y.value, 10);
      t.changeMonth(Ae - t.currentMonth), we("onMonthChange");
    }), Z(), F = t.monthsDropdownContainer);
    var M = ar("cur-year", { tabindex: "-1" }), k = M.getElementsByTagName("input")[0];
    k.setAttribute("aria-label", t.l10n.yearAriaLabel), t.config.minDate && k.setAttribute("min", t.config.minDate.getFullYear().toString()), t.config.maxDate && (k.setAttribute("max", t.config.maxDate.getFullYear().toString()), k.disabled = !!t.config.minDate && t.config.minDate.getFullYear() === t.config.maxDate.getFullYear());
    var N = ge("div", "flatpickr-current-month");
    return N.appendChild(F), N.appendChild(M), v.appendChild(N), m.appendChild(v), {
      container: m,
      yearElement: k,
      monthElement: F
    };
  }
  function ce() {
    or(t.monthNav), t.monthNav.appendChild(t.prevMonthNav), t.config.showMonths && (t.yearElements = [], t.monthElements = []);
    for (var m = t.config.showMonths; m--; ) {
      var v = ae();
      t.yearElements.push(v.yearElement), t.monthElements.push(v.monthElement), t.monthNav.appendChild(v.container);
    }
    t.monthNav.appendChild(t.nextMonthNav);
  }
  function le() {
    return t.monthNav = ge("div", "flatpickr-months"), t.yearElements = [], t.monthElements = [], t.prevMonthNav = ge("span", "flatpickr-prev-month"), t.prevMonthNav.innerHTML = t.config.prevArrow, t.nextMonthNav = ge("span", "flatpickr-next-month"), t.nextMonthNav.innerHTML = t.config.nextArrow, ce(), Object.defineProperty(t, "_hidePrevMonthArrow", {
      get: function() {
        return t.__hidePrevMonthArrow;
      },
      set: function(m) {
        t.__hidePrevMonthArrow !== m && (ct(t.prevMonthNav, "flatpickr-disabled", m), t.__hidePrevMonthArrow = m);
      }
    }), Object.defineProperty(t, "_hideNextMonthArrow", {
      get: function() {
        return t.__hideNextMonthArrow;
      },
      set: function(m) {
        t.__hideNextMonthArrow !== m && (ct(t.nextMonthNav, "flatpickr-disabled", m), t.__hideNextMonthArrow = m);
      }
    }), t.currentYearElement = t.yearElements[0], $i(), t.monthNav;
  }
  function fe() {
    t.calendarContainer.classList.add("hasTime"), t.config.noCalendar && t.calendarContainer.classList.add("noCalendar");
    var m = ea(t.config);
    t.timeContainer = ge("div", "flatpickr-time"), t.timeContainer.tabIndex = -1;
    var v = ge("span", "flatpickr-time-separator", ":"), F = ar("flatpickr-hour", {
      "aria-label": t.l10n.hourAriaLabel
    });
    t.hourElement = F.getElementsByTagName("input")[0];
    var M = ar("flatpickr-minute", {
      "aria-label": t.l10n.minuteAriaLabel
    });
    if (t.minuteElement = M.getElementsByTagName("input")[0], t.hourElement.tabIndex = t.minuteElement.tabIndex = -1, t.hourElement.value = wt(t.latestSelectedDateObj ? t.latestSelectedDateObj.getHours() : t.config.time_24hr ? m.hours : h(m.hours)), t.minuteElement.value = wt(t.latestSelectedDateObj ? t.latestSelectedDateObj.getMinutes() : m.minutes), t.hourElement.setAttribute("step", t.config.hourIncrement.toString()), t.minuteElement.setAttribute("step", t.config.minuteIncrement.toString()), t.hourElement.setAttribute("min", t.config.time_24hr ? "0" : "1"), t.hourElement.setAttribute("max", t.config.time_24hr ? "23" : "12"), t.hourElement.setAttribute("maxlength", "2"), t.minuteElement.setAttribute("min", "0"), t.minuteElement.setAttribute("max", "59"), t.minuteElement.setAttribute("maxlength", "2"), t.timeContainer.appendChild(F), t.timeContainer.appendChild(v), t.timeContainer.appendChild(M), t.config.time_24hr && t.timeContainer.classList.add("time24hr"), t.config.enableSeconds) {
      t.timeContainer.classList.add("hasSeconds");
      var k = ar("flatpickr-second");
      t.secondElement = k.getElementsByTagName("input")[0], t.secondElement.value = wt(t.latestSelectedDateObj ? t.latestSelectedDateObj.getSeconds() : m.seconds), t.secondElement.setAttribute("step", t.minuteElement.getAttribute("step")), t.secondElement.setAttribute("min", "0"), t.secondElement.setAttribute("max", "59"), t.secondElement.setAttribute("maxlength", "2"), t.timeContainer.appendChild(ge("span", "flatpickr-time-separator", ":")), t.timeContainer.appendChild(k);
    }
    return t.config.time_24hr || (t.amPM = ge("span", "flatpickr-am-pm", t.l10n.amPM[Tt((t.latestSelectedDateObj ? t.hourElement.value : t.config.defaultHour) > 11)]), t.amPM.title = t.l10n.toggleTitle, t.amPM.tabIndex = -1, t.timeContainer.appendChild(t.amPM)), t.timeContainer;
  }
  function be() {
    t.weekdayContainer ? or(t.weekdayContainer) : t.weekdayContainer = ge("div", "flatpickr-weekdays");
    for (var m = t.config.showMonths; m--; ) {
      var v = ge("div", "flatpickr-weekdaycontainer");
      t.weekdayContainer.appendChild(v);
    }
    return _e(), t.weekdayContainer;
  }
  function _e() {
    if (t.weekdayContainer) {
      var m = t.l10n.firstDayOfWeek, v = su(t.l10n.weekdays.shorthand);
      m > 0 && m < v.length && (v = su(v.splice(m, v.length), v.splice(0, m)));
      for (var F = t.config.showMonths; F--; )
        t.weekdayContainer.children[F].innerHTML = `
      <span class='flatpickr-weekday'>
        ` + v.join("</span><span class='flatpickr-weekday'>") + `
      </span>
      `;
    }
  }
  function Ke() {
    t.calendarContainer.classList.add("hasWeeks");
    var m = ge("div", "flatpickr-weekwrapper");
    m.appendChild(ge("span", "flatpickr-weekday", t.l10n.weekAbbreviation));
    var v = ge("div", "flatpickr-weeks");
    return m.appendChild(v), {
      weekWrapper: m,
      weekNumbers: v
    };
  }
  function We(m, v) {
    v === void 0 && (v = !0);
    var F = v ? m : m - t.currentMonth;
    F < 0 && t._hidePrevMonthArrow === !0 || F > 0 && t._hideNextMonthArrow === !0 || (t.currentMonth += F, (t.currentMonth < 0 || t.currentMonth > 11) && (t.currentYear += t.currentMonth > 11 ? 1 : -1, t.currentMonth = (t.currentMonth + 12) % 12, we("onYearChange"), Z()), P(), we("onMonthChange"), $i());
  }
  function Te(m, v) {
    if (m === void 0 && (m = !0), v === void 0 && (v = !0), t.input.value = "", t.altInput !== void 0 && (t.altInput.value = ""), t.mobileInput !== void 0 && (t.mobileInput.value = ""), t.selectedDates = [], t.latestSelectedDateObj = void 0, v === !0 && (t.currentYear = t._initialDate.getFullYear(), t.currentMonth = t._initialDate.getMonth()), t.config.enableTime === !0) {
      var F = ea(t.config), M = F.hours, k = F.minutes, N = F.seconds;
      d(M, k, N);
    }
    t.redraw(), m && we("onChange");
  }
  function Ve() {
    t.isOpen = !1, t.isMobile || (t.calendarContainer !== void 0 && t.calendarContainer.classList.remove("open"), t._input !== void 0 && t._input.classList.remove("active")), we("onClose");
  }
  function ze() {
    t.config !== void 0 && we("onDestroy");
    for (var m = t._handlers.length; m--; )
      t._handlers[m].remove();
    if (t._handlers = [], t.mobileInput)
      t.mobileInput.parentNode && t.mobileInput.parentNode.removeChild(t.mobileInput), t.mobileInput = void 0;
    else if (t.calendarContainer && t.calendarContainer.parentNode)
      if (t.config.static && t.calendarContainer.parentNode) {
        var v = t.calendarContainer.parentNode;
        if (v.lastChild && v.removeChild(v.lastChild), v.parentNode) {
          for (; v.firstChild; )
            v.parentNode.insertBefore(v.firstChild, v);
          v.parentNode.removeChild(v);
        }
      } else
        t.calendarContainer.parentNode.removeChild(t.calendarContainer);
    t.altInput && (t.input.type = "text", t.altInput.parentNode && t.altInput.parentNode.removeChild(t.altInput), delete t.altInput), t.input && (t.input.type = t.input._type, t.input.classList.remove("flatpickr-input"), t.input.removeAttribute("readonly")), [
      "_showTimeInput",
      "latestSelectedDateObj",
      "_hideNextMonthArrow",
      "_hidePrevMonthArrow",
      "__hideNextMonthArrow",
      "__hidePrevMonthArrow",
      "isMobile",
      "isOpen",
      "selectedDateElem",
      "minDateHasTime",
      "maxDateHasTime",
      "days",
      "daysContainer",
      "_input",
      "_positionElement",
      "innerContainer",
      "rContainer",
      "monthNav",
      "todayDateElem",
      "calendarContainer",
      "weekdayContainer",
      "prevMonthNav",
      "nextMonthNav",
      "monthsDropdownContainer",
      "currentMonthElement",
      "currentYearElement",
      "navigationCurrentMonth",
      "selectedDateElem",
      "config"
    ].forEach(function(F) {
      try {
        delete t[F];
      } catch {
      }
    });
  }
  function ee(m) {
    return t.calendarContainer.contains(m);
  }
  function Le(m) {
    if (t.isOpen && !t.config.inline) {
      var v = xt(m), F = ee(v), M = v === t.input || v === t.altInput || t.element.contains(v) || m.path && m.path.indexOf && (~m.path.indexOf(t.input) || ~m.path.indexOf(t.altInput)), k = !M && !F && !ee(m.relatedTarget), N = !t.config.ignoredFocusElements.some(function(ie) {
        return ie.contains(v);
      });
      k && N && (t.config.allowInput && t.setDate(t._input.value, !1, t.config.altInput ? t.config.altFormat : t.config.dateFormat), t.timeContainer !== void 0 && t.minuteElement !== void 0 && t.hourElement !== void 0 && t.input.value !== "" && t.input.value !== void 0 && a(), t.close(), t.config && t.config.mode === "range" && t.selectedDates.length === 1 && t.clear(!1));
    }
  }
  function He(m) {
    if (!(!m || t.config.minDate && m < t.config.minDate.getFullYear() || t.config.maxDate && m > t.config.maxDate.getFullYear())) {
      var v = m, F = t.currentYear !== v;
      t.currentYear = v || t.currentYear, t.config.maxDate && t.currentYear === t.config.maxDate.getFullYear() ? t.currentMonth = Math.min(t.config.maxDate.getMonth(), t.currentMonth) : t.config.minDate && t.currentYear === t.config.minDate.getFullYear() && (t.currentMonth = Math.max(t.config.minDate.getMonth(), t.currentMonth)), F && (t.redraw(), we("onYearChange"), Z());
    }
  }
  function Bt(m, v) {
    var F;
    v === void 0 && (v = !0);
    var M = t.parseDate(m, void 0, v);
    if (t.config.minDate && M && Ut(M, t.config.minDate, v !== void 0 ? v : !t.minDateHasTime) < 0 || t.config.maxDate && M && Ut(M, t.config.maxDate, v !== void 0 ? v : !t.maxDateHasTime) > 0)
      return !1;
    if (!t.config.enable && t.config.disable.length === 0)
      return !0;
    if (M === void 0)
      return !1;
    for (var k = !!t.config.enable, N = (F = t.config.enable) !== null && F !== void 0 ? F : t.config.disable, ie = 0, Y = void 0; ie < N.length; ie++) {
      if (Y = N[ie], typeof Y == "function" && Y(M))
        return k;
      if (Y instanceof Date && M !== void 0 && Y.getTime() === M.getTime())
        return k;
      if (typeof Y == "string") {
        var Ae = t.parseDate(Y, void 0, !0);
        return Ae && Ae.getTime() === M.getTime() ? k : !k;
      } else if (typeof Y == "object" && M !== void 0 && Y.from && Y.to && M.getTime() >= Y.from.getTime() && M.getTime() <= Y.to.getTime())
        return k;
    }
    return !k;
  }
  function Cs(m) {
    return t.daysContainer !== void 0 ? m.className.indexOf("hidden") === -1 && m.className.indexOf("flatpickr-disabled") === -1 && t.daysContainer.contains(m) : !1;
  }
  function io(m) {
    var v = m.target === t._input, F = t._input.value.trimEnd() !== Fe();
    v && F && !(m.relatedTarget && ee(m.relatedTarget)) && t.setDate(t._input.value, !0, m.target === t.altInput ? t.config.altFormat : t.config.dateFormat);
  }
  function Ct(m) {
    var v = xt(m), F = t.config.wrap ? A.contains(v) : v === t._input, M = t.config.allowInput, k = t.isOpen && (!M || !F), N = t.config.inline && F && !M;
    if (m.keyCode === 13 && F) {
      if (M)
        return t.setDate(t._input.value, !0, v === t.altInput ? t.config.altFormat : t.config.dateFormat), t.close(), v.blur();
      t.open();
    } else if (ee(v) || k || N) {
      var ie = !!t.timeContainer && t.timeContainer.contains(v);
      switch (m.keyCode) {
        case 13:
          ie ? (m.preventDefault(), a(), Es()) : iA(m);
          break;
        case 27:
          m.preventDefault(), Es();
          break;
        case 8:
        case 46:
          F && !t.config.allowInput && (m.preventDefault(), t.clear());
          break;
        case 37:
        case 39:
          if (!ie && !F) {
            m.preventDefault();
            var Y = n();
            if (t.daysContainer !== void 0 && (M === !1 || Y && Cs(Y))) {
              var Ae = m.keyCode === 39 ? 1 : -1;
              m.ctrlKey ? (m.stopPropagation(), We(Ae), J(S(1), 0)) : J(void 0, Ae);
            }
          } else t.hourElement && t.hourElement.focus();
          break;
        case 38:
        case 40:
          m.preventDefault();
          var j = m.keyCode === 40 ? 1 : -1;
          t.daysContainer && v.$i !== void 0 || v === t.input || v === t.altInput ? m.ctrlKey ? (m.stopPropagation(), He(t.currentYear - j), J(S(1), 0)) : ie || J(void 0, j * 7) : v === t.currentYearElement ? He(t.currentYear - j) : t.config.enableTime && (!ie && t.hourElement && t.hourElement.focus(), a(m), t._debouncedChange());
          break;
        case 9:
          if (ie) {
            var q = [
              t.hourElement,
              t.minuteElement,
              t.secondElement,
              t.amPM
            ].concat(t.pluginElements).filter(function(je) {
              return je;
            }), re = q.indexOf(v);
            if (re !== -1) {
              var ft = q[re + (m.shiftKey ? -1 : 1)];
              m.preventDefault(), (ft || t._input).focus();
            }
          } else !t.config.noCalendar && t.daysContainer && t.daysContainer.contains(v) && m.shiftKey && (m.preventDefault(), t._input.focus());
          break;
      }
    }
    if (t.amPM !== void 0 && v === t.amPM)
      switch (m.key) {
        case t.l10n.amPM[0].charAt(0):
        case t.l10n.amPM[0].charAt(0).toLowerCase():
          t.amPM.textContent = t.l10n.amPM[0], c(), dt();
          break;
        case t.l10n.amPM[1].charAt(0):
        case t.l10n.amPM[1].charAt(0).toLowerCase():
          t.amPM.textContent = t.l10n.amPM[1], c(), dt();
          break;
      }
    (F || ee(v)) && we("onKeyDown", m);
  }
  function yt(m, v) {
    if (v === void 0 && (v = "flatpickr-day"), !(t.selectedDates.length !== 1 || m && (!m.classList.contains(v) || m.classList.contains("flatpickr-disabled")))) {
      for (var F = m ? m.dateObj.getTime() : t.days.firstElementChild.dateObj.getTime(), M = t.parseDate(t.selectedDates[0], void 0, !0).getTime(), k = Math.min(F, t.selectedDates[0].getTime()), N = Math.max(F, t.selectedDates[0].getTime()), ie = !1, Y = 0, Ae = 0, j = k; j < N; j += yx.DAY)
        Bt(new Date(j), !0) || (ie = ie || j > k && j < N, j < M && (!Y || j > Y) ? Y = j : j > M && (!Ae || j < Ae) && (Ae = j));
      var q = Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+" + t.config.showMonths + ") > ." + v));
      q.forEach(function(re) {
        var ft = re.dateObj, je = ft.getTime(), qi = Y > 0 && je < Y || Ae > 0 && je > Ae;
        if (qi) {
          re.classList.add("notAllowed"), ["inRange", "startRange", "endRange"].forEach(function(Ci) {
            re.classList.remove(Ci);
          });
          return;
        } else if (ie && !qi)
          return;
        ["startRange", "inRange", "endRange", "notAllowed"].forEach(function(Ci) {
          re.classList.remove(Ci);
        }), m !== void 0 && (m.classList.add(F <= t.selectedDates[0].getTime() ? "startRange" : "endRange"), M < F && je === M ? re.classList.add("startRange") : M > F && je === M && re.classList.add("endRange"), je >= Y && (Ae === 0 || je <= Ae) && Bx(je, M, F) && re.classList.add("inRange"));
      });
    }
  }
  function so() {
    t.isOpen && !t.config.static && !t.config.inline && Zt();
  }
  function Ao(m, v) {
    if (v === void 0 && (v = t._positionElement), t.isMobile === !0) {
      if (m) {
        m.preventDefault();
        var F = xt(m);
        F && F.blur();
      }
      t.mobileInput !== void 0 && (t.mobileInput.focus(), t.mobileInput.click()), we("onOpen");
      return;
    } else if (t._input.disabled || t.config.inline)
      return;
    var M = t.isOpen;
    t.isOpen = !0, M || (t.calendarContainer.classList.add("open"), t._input.classList.add("active"), we("onOpen"), Zt(v)), t.config.enableTime === !0 && t.config.noCalendar === !0 && t.config.allowInput === !1 && (m === void 0 || !t.timeContainer.contains(m.relatedTarget)) && setTimeout(function() {
      return t.hourElement.select();
    }, 50);
  }
  function $t(m) {
    return function(v) {
      var F = t.config["_" + m + "Date"] = t.parseDate(v, t.config.dateFormat), M = t.config["_" + (m === "min" ? "max" : "min") + "Date"];
      F !== void 0 && (t[m === "min" ? "minDateHasTime" : "maxDateHasTime"] = F.getHours() > 0 || F.getMinutes() > 0 || F.getSeconds() > 0), t.selectedDates && (t.selectedDates = t.selectedDates.filter(function(k) {
        return Bt(k);
      }), !t.selectedDates.length && m === "min" && u(F), dt()), t.daysContainer && (hn(), F !== void 0 ? t.currentYearElement[m] = F.getFullYear().toString() : t.currentYearElement.removeAttribute(m), t.currentYearElement.disabled = !!M && F !== void 0 && M.getFullYear() === F.getFullYear());
    };
  }
  function no() {
    var m = [
      "wrap",
      "weekNumbers",
      "allowInput",
      "allowInvalidPreload",
      "clickOpens",
      "time_24hr",
      "enableTime",
      "noCalendar",
      "altInput",
      "shorthandCurrentMonth",
      "inline",
      "static",
      "enableSeconds",
      "disableMobile"
    ], v = rt(rt({}, JSON.parse(JSON.stringify(A.dataset || {}))), e), F = {};
    t.config.parseDate = v.parseDate, t.config.formatDate = v.formatDate, Object.defineProperty(t.config, "enable", {
      get: function() {
        return t.config._enable;
      },
      set: function(q) {
        t.config._enable = cn(q);
      }
    }), Object.defineProperty(t.config, "disable", {
      get: function() {
        return t.config._disable;
      },
      set: function(q) {
        t.config._disable = cn(q);
      }
    });
    var M = v.mode === "time";
    if (!v.dateFormat && (v.enableTime || M)) {
      var k = Pe.defaultConfig.dateFormat || Ws.dateFormat;
      F.dateFormat = v.noCalendar || M ? "H:i" + (v.enableSeconds ? ":S" : "") : k + " H:i" + (v.enableSeconds ? ":S" : "");
    }
    if (v.altInput && (v.enableTime || M) && !v.altFormat) {
      var N = Pe.defaultConfig.altFormat || Ws.altFormat;
      F.altFormat = v.noCalendar || M ? "h:i" + (v.enableSeconds ? ":S K" : " K") : N + (" h:i" + (v.enableSeconds ? ":S" : "") + " K");
    }
    Object.defineProperty(t.config, "minDate", {
      get: function() {
        return t.config._minDate;
      },
      set: $t("min")
    }), Object.defineProperty(t.config, "maxDate", {
      get: function() {
        return t.config._maxDate;
      },
      set: $t("max")
    });
    var ie = function(q) {
      return function(re) {
        t.config[q === "min" ? "_minTime" : "_maxTime"] = t.parseDate(re, "H:i:S");
      };
    };
    Object.defineProperty(t.config, "minTime", {
      get: function() {
        return t.config._minTime;
      },
      set: ie("min")
    }), Object.defineProperty(t.config, "maxTime", {
      get: function() {
        return t.config._maxTime;
      },
      set: ie("max")
    }), v.mode === "time" && (t.config.noCalendar = !0, t.config.enableTime = !0), Object.assign(t.config, F, v);
    for (var Y = 0; Y < m.length; Y++)
      t.config[m[Y]] = t.config[m[Y]] === !0 || t.config[m[Y]] === "true";
    Jo.filter(function(q) {
      return t.config[q] !== void 0;
    }).forEach(function(q) {
      t.config[q] = $o(t.config[q] || []).map(r);
    }), t.isMobile = !t.config.disableMobile && !t.config.inline && t.config.mode === "single" && !t.config.disable.length && !t.config.enable && !t.config.weekNumbers && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    for (var Y = 0; Y < t.config.plugins.length; Y++) {
      var Ae = t.config.plugins[Y](t) || {};
      for (var j in Ae)
        Jo.indexOf(j) > -1 ? t.config[j] = $o(Ae[j]).map(r).concat(t.config[j]) : typeof v[j] > "u" && (t.config[j] = Ae[j]);
    }
    v.altInputClass || (t.config.altInputClass = ys().className + " " + t.config.altInputClass), we("onParseConfig");
  }
  function ys() {
    return t.config.wrap ? A.querySelector("[data-input]") : A;
  }
  function Et() {
    typeof t.config.locale != "object" && typeof Pe.l10ns[t.config.locale] > "u" && t.config.errorHandler(new Error("flatpickr: invalid locale " + t.config.locale)), t.l10n = rt(rt({}, Pe.l10ns.default), typeof t.config.locale == "object" ? t.config.locale : t.config.locale !== "default" ? Pe.l10ns[t.config.locale] : void 0), ls.D = "(" + t.l10n.weekdays.shorthand.join("|") + ")", ls.l = "(" + t.l10n.weekdays.longhand.join("|") + ")", ls.M = "(" + t.l10n.months.shorthand.join("|") + ")", ls.F = "(" + t.l10n.months.longhand.join("|") + ")", ls.K = "(" + t.l10n.amPM[0] + "|" + t.l10n.amPM[1] + "|" + t.l10n.amPM[0].toLowerCase() + "|" + t.l10n.amPM[1].toLowerCase() + ")";
    var m = rt(rt({}, e), JSON.parse(JSON.stringify(A.dataset || {})));
    m.time_24hr === void 0 && Pe.defaultConfig.time_24hr === void 0 && (t.config.time_24hr = t.l10n.time_24hr), t.formatDate = xf(t), t.parseDate = dl({ config: t.config, l10n: t.l10n });
  }
  function Zt(m) {
    if (typeof t.config.position == "function")
      return void t.config.position(t, m);
    if (t.calendarContainer !== void 0) {
      we("onPreCalendarPosition");
      var v = m || t._positionElement, F = Array.prototype.reduce.call(t.calendarContainer.children, function(dn, xs) {
        return dn + xs.offsetHeight;
      }, 0), M = t.calendarContainer.offsetWidth, k = t.config.position.split(" "), N = k[0], ie = k.length > 1 ? k[1] : null, Y = v.getBoundingClientRect(), Ae = window.innerHeight - Y.bottom, j = N === "above" || N !== "below" && Ae < F && Y.top > F, q = window.pageYOffset + Y.top + (j ? -F - 2 : v.offsetHeight + 2);
      if (ct(t.calendarContainer, "arrowTop", !j), ct(t.calendarContainer, "arrowBottom", j), !t.config.inline) {
        var re = window.pageXOffset + Y.left, ft = !1, je = !1;
        ie === "center" ? (re -= (M - Y.width) / 2, ft = !0) : ie === "right" && (re -= M - Y.width, je = !0), ct(t.calendarContainer, "arrowLeft", !ft && !je), ct(t.calendarContainer, "arrowCenter", ft), ct(t.calendarContainer, "arrowRight", je);
        var qi = window.document.body.offsetWidth - (window.pageXOffset + Y.right), Ci = re + M > window.document.body.offsetWidth, co = qi + M > window.document.body.offsetWidth;
        if (ct(t.calendarContainer, "rightMost", Ci), !t.config.static)
          if (t.calendarContainer.style.top = q + "px", !Ci)
            t.calendarContainer.style.left = re + "px", t.calendarContainer.style.right = "auto";
          else if (!co)
            t.calendarContainer.style.left = "auto", t.calendarContainer.style.right = qi + "px";
          else {
            var Ht = eA();
            if (Ht === void 0)
              return;
            var un = window.document.body.offsetWidth, uo = Math.max(0, un / 2 - M / 2), fo = ".flatpickr-calendar.centerMost:before", Ft = ".flatpickr-calendar.centerMost:after", Fs = Ht.cssRules.length, rA = "{left:" + Y.left + "px;right:auto;}";
            ct(t.calendarContainer, "rightMost", !1), ct(t.calendarContainer, "centerMost", !0), Ht.insertRule(fo + "," + Ft + rA, Fs), t.calendarContainer.style.left = uo + "px", t.calendarContainer.style.right = "auto";
          }
      }
    }
  }
  function eA() {
    for (var m = null, v = 0; v < document.styleSheets.length; v++) {
      var F = document.styleSheets[v];
      if (F.cssRules) {
        try {
          F.cssRules;
        } catch {
          continue;
        }
        m = F;
        break;
      }
    }
    return m ?? tA();
  }
  function tA() {
    var m = document.createElement("style");
    return document.head.appendChild(m), m.sheet;
  }
  function hn() {
    t.config.noCalendar || t.isMobile || (Z(), $i(), P());
  }
  function Es() {
    t._input.focus(), window.navigator.userAgent.indexOf("MSIE") !== -1 || navigator.msMaxTouchPoints !== void 0 ? setTimeout(t.close, 0) : t.close();
  }
  function iA(m) {
    m.preventDefault(), m.stopPropagation();
    var v = function(q) {
      return q.classList && q.classList.contains("flatpickr-day") && !q.classList.contains("flatpickr-disabled") && !q.classList.contains("notAllowed");
    }, F = Ff(xt(m), v);
    if (F !== void 0) {
      var M = F, k = t.latestSelectedDateObj = new Date(M.dateObj.getTime()), N = (k.getMonth() < t.currentMonth || k.getMonth() > t.currentMonth + t.config.showMonths - 1) && t.config.mode !== "range";
      if (t.selectedDateElem = M, t.config.mode === "single")
        t.selectedDates = [k];
      else if (t.config.mode === "multiple") {
        var ie = nA(k);
        ie ? t.selectedDates.splice(parseInt(ie), 1) : t.selectedDates.push(k);
      } else t.config.mode === "range" && (t.selectedDates.length === 2 && t.clear(!1, !1), t.latestSelectedDateObj = k, t.selectedDates.push(k), Ut(k, t.selectedDates[0], !0) !== 0 && t.selectedDates.sort(function(q, re) {
        return q.getTime() - re.getTime();
      }));
      if (c(), N) {
        var Y = t.currentYear !== k.getFullYear();
        t.currentYear = k.getFullYear(), t.currentMonth = k.getMonth(), Y && (we("onYearChange"), Z()), we("onMonthChange");
      }
      if ($i(), P(), dt(), !N && t.config.mode !== "range" && t.config.showMonths === 1 ? T(M) : t.selectedDateElem !== void 0 && t.hourElement === void 0 && t.selectedDateElem && t.selectedDateElem.focus(), t.hourElement !== void 0 && t.hourElement !== void 0 && t.hourElement.focus(), t.config.closeOnSelect) {
        var Ae = t.config.mode === "single" && !t.config.enableTime, j = t.config.mode === "range" && t.selectedDates.length === 2 && !t.config.enableTime;
        (Ae || j) && Es();
      }
      b();
    }
  }
  var ai = {
    locale: [Et, _e],
    showMonths: [ce, o, be],
    minDate: [C],
    maxDate: [C],
    positionElement: [qt],
    clickOpens: [
      function() {
        t.config.clickOpens === !0 ? (p(t._input, "focus", t.open), p(t._input, "click", t.open)) : (t._input.removeEventListener("focus", t.open), t._input.removeEventListener("click", t.open));
      }
    ]
  };
  function sA(m, v) {
    if (m !== null && typeof m == "object") {
      Object.assign(t.config, m);
      for (var F in m)
        ai[F] !== void 0 && ai[F].forEach(function(M) {
          return M();
        });
    } else
      t.config[m] = v, ai[m] !== void 0 ? ai[m].forEach(function(M) {
        return M();
      }) : Jo.indexOf(m) > -1 && (t.config[m] = $o(v));
    t.redraw(), dt(!0);
  }
  function Yi(m, v) {
    var F = [];
    if (m instanceof Array)
      F = m.map(function(M) {
        return t.parseDate(M, v);
      });
    else if (m instanceof Date || typeof m == "number")
      F = [t.parseDate(m, v)];
    else if (typeof m == "string")
      switch (t.config.mode) {
        case "single":
        case "time":
          F = [t.parseDate(m, v)];
          break;
        case "multiple":
          F = m.split(t.config.conjunction).map(function(M) {
            return t.parseDate(M, v);
          });
          break;
        case "range":
          F = m.split(t.l10n.rangeSeparator).map(function(M) {
            return t.parseDate(M, v);
          });
          break;
      }
    else
      t.config.errorHandler(new Error("Invalid date supplied: " + JSON.stringify(m)));
    t.selectedDates = t.config.allowInvalidPreload ? F : F.filter(function(M) {
      return M instanceof Date && Bt(M, !1);
    }), t.config.mode === "range" && t.selectedDates.sort(function(M, k) {
      return M.getTime() - k.getTime();
    });
  }
  function ro(m, v, F) {
    if (v === void 0 && (v = !1), F === void 0 && (F = t.config.dateFormat), m !== 0 && !m || m instanceof Array && m.length === 0)
      return t.clear(v);
    Yi(m, F), t.latestSelectedDateObj = t.selectedDates[t.selectedDates.length - 1], t.redraw(), C(void 0, v), u(), t.selectedDates.length === 0 && t.clear(!1), dt(v), v && we("onChange");
  }
  function cn(m) {
    return m.slice().map(function(v) {
      return typeof v == "string" || typeof v == "number" || v instanceof Date ? t.parseDate(v, void 0, !0) : v && typeof v == "object" && v.from && v.to ? {
        from: t.parseDate(v.from, void 0),
        to: t.parseDate(v.to, void 0)
      } : v;
    }).filter(function(v) {
      return v;
    });
  }
  function oo() {
    t.selectedDates = [], t.now = t.parseDate(t.config.now) || /* @__PURE__ */ new Date();
    var m = t.config.defaultDate || ((t.input.nodeName === "INPUT" || t.input.nodeName === "TEXTAREA") && t.input.placeholder && t.input.value === t.input.placeholder ? null : t.input.value);
    m && Yi(m, t.config.dateFormat), t._initialDate = t.selectedDates.length > 0 ? t.selectedDates[0] : t.config.minDate && t.config.minDate.getTime() > t.now.getTime() ? t.config.minDate : t.config.maxDate && t.config.maxDate.getTime() < t.now.getTime() ? t.config.maxDate : t.now, t.currentYear = t._initialDate.getFullYear(), t.currentMonth = t._initialDate.getMonth(), t.selectedDates.length > 0 && (t.latestSelectedDateObj = t.selectedDates[0]), t.config.minTime !== void 0 && (t.config.minTime = t.parseDate(t.config.minTime, "H:i")), t.config.maxTime !== void 0 && (t.config.maxTime = t.parseDate(t.config.maxTime, "H:i")), t.minDateHasTime = !!t.config.minDate && (t.config.minDate.getHours() > 0 || t.config.minDate.getMinutes() > 0 || t.config.minDate.getSeconds() > 0), t.maxDateHasTime = !!t.config.maxDate && (t.config.maxDate.getHours() > 0 || t.config.maxDate.getMinutes() > 0 || t.config.maxDate.getSeconds() > 0);
  }
  function Oe() {
    if (t.input = ys(), !t.input) {
      t.config.errorHandler(new Error("Invalid input element specified"));
      return;
    }
    t.input._type = t.input.type, t.input.type = "text", t.input.classList.add("flatpickr-input"), t._input = t.input, t.config.altInput && (t.altInput = ge(t.input.nodeName, t.config.altInputClass), t._input = t.altInput, t.altInput.placeholder = t.input.placeholder, t.altInput.disabled = t.input.disabled, t.altInput.required = t.input.required, t.altInput.tabIndex = t.input.tabIndex, t.altInput.type = "text", t.input.setAttribute("type", "hidden"), !t.config.static && t.input.parentNode && t.input.parentNode.insertBefore(t.altInput, t.input.nextSibling)), t.config.allowInput || t._input.setAttribute("readonly", "readonly"), qt();
  }
  function qt() {
    t._positionElement = t.config.positionElement || t._input;
  }
  function ao() {
    var m = t.config.enableTime ? t.config.noCalendar ? "time" : "datetime-local" : "date";
    t.mobileInput = ge("input", t.input.className + " flatpickr-mobile"), t.mobileInput.tabIndex = 1, t.mobileInput.type = m, t.mobileInput.disabled = t.input.disabled, t.mobileInput.required = t.input.required, t.mobileInput.placeholder = t.input.placeholder, t.mobileFormatStr = m === "datetime-local" ? "Y-m-d\\TH:i:S" : m === "date" ? "Y-m-d" : "H:i:S", t.selectedDates.length > 0 && (t.mobileInput.defaultValue = t.mobileInput.value = t.formatDate(t.selectedDates[0], t.mobileFormatStr)), t.config.minDate && (t.mobileInput.min = t.formatDate(t.config.minDate, "Y-m-d")), t.config.maxDate && (t.mobileInput.max = t.formatDate(t.config.maxDate, "Y-m-d")), t.input.getAttribute("step") && (t.mobileInput.step = String(t.input.getAttribute("step"))), t.input.type = "hidden", t.altInput !== void 0 && (t.altInput.type = "hidden");
    try {
      t.input.parentNode && t.input.parentNode.insertBefore(t.mobileInput, t.input.nextSibling);
    } catch {
    }
    p(t.mobileInput, "change", function(v) {
      t.setDate(xt(v).value, !1, t.mobileFormatStr), we("onChange"), we("onClose");
    });
  }
  function Ji(m) {
    if (t.isOpen === !0)
      return t.close();
    t.open(m);
  }
  function we(m, v) {
    if (t.config !== void 0) {
      var F = t.config[m];
      if (F !== void 0 && F.length > 0)
        for (var M = 0; F[M] && M < F.length; M++)
          F[M](t.selectedDates, t.input.value, t, v);
      m === "onChange" && (t.input.dispatchEvent(AA("change")), t.input.dispatchEvent(AA("input")));
    }
  }
  function AA(m) {
    var v = document.createEvent("Event");
    return v.initEvent(m, !0, !0), v;
  }
  function nA(m) {
    for (var v = 0; v < t.selectedDates.length; v++) {
      var F = t.selectedDates[v];
      if (F instanceof Date && Ut(F, m) === 0)
        return "" + v;
    }
    return !1;
  }
  function lo(m) {
    return t.config.mode !== "range" || t.selectedDates.length < 2 ? !1 : Ut(m, t.selectedDates[0]) >= 0 && Ut(m, t.selectedDates[1]) <= 0;
  }
  function $i() {
    t.config.noCalendar || t.isMobile || !t.monthNav || (t.yearElements.forEach(function(m, v) {
      var F = new Date(t.currentYear, t.currentMonth, 1);
      F.setMonth(t.currentMonth + v), t.config.showMonths > 1 || t.config.monthSelectorType === "static" ? t.monthElements[v].textContent = Ir(F.getMonth(), t.config.shorthandCurrentMonth, t.l10n) + " " : t.monthsDropdownContainer.value = F.getMonth().toString(), m.value = F.getFullYear().toString();
    }), t._hidePrevMonthArrow = t.config.minDate !== void 0 && (t.currentYear === t.config.minDate.getFullYear() ? t.currentMonth <= t.config.minDate.getMonth() : t.currentYear < t.config.minDate.getFullYear()), t._hideNextMonthArrow = t.config.maxDate !== void 0 && (t.currentYear === t.config.maxDate.getFullYear() ? t.currentMonth + 1 > t.config.maxDate.getMonth() : t.currentYear > t.config.maxDate.getFullYear()));
  }
  function Fe(m) {
    var v = m || (t.config.altInput ? t.config.altFormat : t.config.dateFormat);
    return t.selectedDates.map(function(F) {
      return t.formatDate(F, v);
    }).filter(function(F, M, k) {
      return t.config.mode !== "range" || t.config.enableTime || k.indexOf(F) === M;
    }).join(t.config.mode !== "range" ? t.config.conjunction : t.l10n.rangeSeparator);
  }
  function dt(m) {
    m === void 0 && (m = !0), t.mobileInput !== void 0 && t.mobileFormatStr && (t.mobileInput.value = t.latestSelectedDateObj !== void 0 ? t.formatDate(t.latestSelectedDateObj, t.mobileFormatStr) : ""), t.input.value = Fe(t.config.dateFormat), t.altInput !== void 0 && (t.altInput.value = Fe(t.config.altFormat)), m !== !1 && we("onValueUpdate");
  }
  function ho(m) {
    var v = xt(m), F = t.prevMonthNav.contains(v), M = t.nextMonthNav.contains(v);
    F || M ? We(F ? -1 : 1) : t.yearElements.indexOf(v) >= 0 ? v.select() : v.classList.contains("arrowUp") ? t.changeYear(t.currentYear + 1) : v.classList.contains("arrowDown") && t.changeYear(t.currentYear - 1);
  }
  function Zi(m) {
    m.preventDefault();
    var v = m.type === "keydown", F = xt(m), M = F;
    t.amPM !== void 0 && F === t.amPM && (t.amPM.textContent = t.l10n.amPM[Tt(t.amPM.textContent === t.l10n.amPM[0])]);
    var k = parseFloat(M.getAttribute("min")), N = parseFloat(M.getAttribute("max")), ie = parseFloat(M.getAttribute("step")), Y = parseInt(M.value, 10), Ae = m.delta || (v ? m.which === 38 ? 1 : -1 : 0), j = Y + ie * Ae;
    if (typeof M.value < "u" && M.value.length === 2) {
      var q = M === t.hourElement, re = M === t.minuteElement;
      j < k ? (j = N + j + Tt(!q) + (Tt(q) && Tt(!t.amPM)), re && U(void 0, -1, t.hourElement)) : j > N && (j = M === t.hourElement ? j - N - Tt(!t.amPM) : k, re && U(void 0, 1, t.hourElement)), t.amPM && q && (ie === 1 ? j + Y === 23 : Math.abs(j - Y) > ie) && (t.amPM.textContent = t.l10n.amPM[Tt(t.amPM.textContent === t.l10n.amPM[0])]), M.value = wt(j);
    }
  }
  return s(), t;
}
function js(A, e) {
  for (var t = Array.prototype.slice.call(A).filter(function(r) {
    return r instanceof HTMLElement;
  }), i = [], s = 0; s < t.length; s++) {
    var n = t[s];
    try {
      if (n.getAttribute("data-fp-omit") !== null)
        continue;
      n._flatpickr !== void 0 && (n._flatpickr.destroy(), n._flatpickr = void 0), n._flatpickr = Fx(n, e || {}), i.push(n._flatpickr);
    } catch (r) {
      console.error(r);
    }
  }
  return i.length === 1 ? i[0] : i;
}
typeof HTMLElement < "u" && typeof HTMLCollection < "u" && typeof NodeList < "u" && (HTMLCollection.prototype.flatpickr = NodeList.prototype.flatpickr = function(A) {
  return js(this, A);
}, HTMLElement.prototype.flatpickr = function(A) {
  return js([this], A);
});
var Pe = function(A, e) {
  return typeof A == "string" ? js(window.document.querySelectorAll(A), e) : A instanceof Node ? js([A], e) : js(A, e);
};
Pe.defaultConfig = {};
Pe.l10ns = {
  en: rt({}, nn),
  default: rt({}, nn)
};
Pe.localize = function(A) {
  Pe.l10ns.default = rt(rt({}, Pe.l10ns.default), A);
};
Pe.setDefaults = function(A) {
  Pe.defaultConfig = rt(rt({}, Pe.defaultConfig), A);
};
Pe.parseDate = dl({});
Pe.formatDate = xf({});
Pe.compareDates = Ut;
typeof jQuery < "u" && typeof jQuery.fn < "u" && (jQuery.fn.flatpickr = function(A) {
  return js(this, A);
});
Date.prototype.fp_incr = function(A) {
  return new Date(this.getFullYear(), this.getMonth(), this.getDate() + (typeof A == "string" ? parseInt(A, 10) : A));
};
typeof window < "u" && (window.flatpickr = Pe);
const xx = { class: "notification-container" }, Qx = { class: "notification-content" }, Ux = { class: "notification-icon" }, _x = { class: "notification-message" }, Hx = ["onClick"], Mx = { class: "dashboard-container" }, Dx = {
  key: 0,
  class: "loading"
}, Sx = {
  key: 1,
  class: "error"
}, Tx = { key: 2 }, Lx = { class: "metric-block" }, Rx = { class: "block-header" }, Ix = { key: 1 }, kx = { class: "summary-date-picker" }, Ox = ["value"], Px = {
  key: 1,
  style: { "margin-left": "0.7em", color: "#888" }
}, Nx = { class: "header-tools" }, Kx = ["title"], Vx = { key: 0 }, zx = { key: 1 }, Gx = ["disabled"], Wx = {
  key: 0,
  class: "screenshot-spinner"
}, jx = { key: 1 }, Xx = { class: "columns-content" }, Yx = ["value"], Jx = { class: "column-label" }, $x = {
  key: 0,
  style: { "font-size": "11px", color: "#888", "font-style": "italic", display: "inline-block" }
}, Zx = ["onClick"], qx = { class: "columns-footer" }, eQ = {
  key: 0,
  class: "summary-filters-bar"
}, tQ = { class: "filters-tags" }, iQ = ["onClick"], sQ = {
  key: 1,
  class: "graph-section"
}, AQ = {
  key: 0,
  class: "graph-loading"
}, nQ = {
  key: 1,
  class: "graph-error"
}, rQ = {
  key: 2,
  class: "chart-section"
}, oQ = { class: "chart-container" }, aQ = {
  key: 3,
  class: "graph-empty"
}, lQ = {
  key: 2,
  class: "graph-section"
}, hQ = {
  key: 0,
  class: "graph-loading"
}, cQ = {
  key: 1,
  class: "graph-loading"
}, uQ = {
  key: 2,
  class: "chart-section"
}, dQ = { class: "chart-container" }, fQ = {
  key: 3,
  class: "graph-empty"
}, gQ = { class: "breakdown-header" }, pQ = { class: "breakdown-header-left" }, mQ = { class: "breakdown-header-right" }, bQ = { class: "docker-control-section" }, wQ = ["disabled", "onClick"], vQ = { key: 0 }, BQ = { key: 1 }, CQ = ["disabled", "onClick"], yQ = { key: 0 }, EQ = { key: 1 }, FQ = { class: "breakdown-columns" }, xQ = { class: "breakdown-stage stage-1" }, QQ = { class: "stage-item" }, UQ = { class: "item-value" }, _Q = { class: "formula" }, HQ = { class: "stage-item" }, MQ = { class: "item-value" }, DQ = { class: "formula" }, SQ = { class: "stage-item" }, TQ = { class: "item-value" }, LQ = { class: "formula" }, RQ = { class: "stage-item" }, IQ = { class: "item-value" }, kQ = { class: "formula" }, OQ = { class: "breakdown-stage stage-2" }, PQ = { class: "stage-item" }, NQ = { class: "item-value" }, KQ = { class: "formula" }, VQ = { class: "stage-item" }, zQ = { class: "item-value" }, GQ = { class: "formula" }, WQ = { class: "stage-item" }, jQ = { class: "item-value" }, XQ = { class: "formula" }, YQ = { class: "stage-item" }, JQ = { class: "item-value" }, $Q = { class: "formula" }, ZQ = ["onClick"], qQ = { class: "context-menu-icon" }, eU = {
  key: 0,
  class: "active-indicator"
}, tU = {
  key: 0,
  class: "context-menu-separator"
}, iU = { class: "context-menu-info" }, sU = { class: "context-menu-value" }, AU = {
  key: 0,
  class: "rename-dialog-backdrop"
}, nU = { class: "rename-dialog" }, rU = ["placeholder"], oU = { class: "dialog-actions" }, aU = {
  key: 1,
  class: "screenshots-modal"
}, lU = { class: "modal-content" }, hU = {
  key: 0,
  class: "screenshots-loading"
}, cU = {
  key: 1,
  class: "screenshots-empty"
}, uU = {
  key: 2,
  class: "screenshots-list-vertical"
}, dU = ["onClick"], fU = ["src", "alt"], gU = { class: "screenshot-list-meta" }, pU = { key: 0 }, mU = {
  key: 1,
  style: { color: "#666", "font-style": "italic", display: "block" }
}, bU = { style: { display: "flex", gap: "8px", "margin-top": "6px" } }, wU = ["href", "download"], vU = ["onClick"], BU = ["onClick"], CU = { class: "dialog-actions" }, yU = { class: "screenshot-preview-content" }, EU = ["src"], FU = { class: "screenshot-preview-meta" }, xU = ["href", "download"], QU = {
  key: 2,
  class: "rename-dialog-backdrop"
}, UU = { class: "rename-dialog" }, _U = {
  class: "dialog-actions",
  style: { "justify-content": "flex-start" }
}, HU = { class: "toast-container" }, MU = ["onClick"], DU = { class: "toast-icon" }, SU = { key: 0 }, TU = { key: 1 }, LU = { key: 2 }, RU = { key: 3 }, IU = { class: "toast-content" }, kU = { class: "toast-title" }, OU = {
  key: 0,
  class: "toast-message"
}, PU = ["onClick"], NU = {
  key: 3,
  class: "rename-dialog-backdrop"
}, KU = { class: "rename-dialog" }, VU = { class: "dialog-actions" }, zU = {
  key: 4,
  class: "rename-dialog-backdrop"
}, GU = { class: "rename-dialog" }, WU = { class: "dialog-actions" }, jU = {
  key: 5,
  class: "rename-dialog-backdrop"
}, XU = { class: "rename-dialog" }, YU = { class: "dialog-actions" }, JU = {
  key: 6,
  class: "rename-dialog-backdrop"
}, $U = { class: "rename-dialog" }, Au = "https://ibkr-docker-manage.aiworkspace.pro/docker_control.php", ZU = /* @__PURE__ */ kr({
  __name: "Summary",
  props: {
    showHeaderLink: { type: Boolean, default: !1 },
    userId: { default: "67e578fd-2cf7-48a4-b028-a11a3f89bb9b" },
    window: { default: null }
  },
  emits: ["minimize", "maximize"],
  setup(A, { emit: e }) {
    const t = (/* @__PURE__ */ new Date()).toISOString().slice(0, 10), i = te(null);
    function s() {
      i.value = null;
    }
    const n = te(null);
    zr.register(
      Ka,
      Va,
      fr,
      yA,
      nB,
      dB,
      sB
    );
    const r = A, o = e, a = te(null);
    let l = null;
    const h = te(!1), c = Bm(50, r.userId, i), u = Cm(100, r.userId, i), d = $f("demo", r.userId, i), f = te(null);
    Ye(() => !f.value || !d.data.value ? [] : d.data.value.filter(
      (B) => B.internal_account_id === f.value
    )), Ye(() => {
      var g;
      if (!f.value) return "";
      const B = (g = Bt.value) == null ? void 0 : g.find(
        (_) => String(_.nlv_internal_account_id) === f.value
      );
      return (B == null ? void 0 : B.legal_entity) || "Account";
    });
    function p(B) {
      return !B || B.length !== 6 ? "" : `20${B.substring(0, 2)}-${B.substring(2, 4)}-${B.substring(4, 6)}`;
    }
    function b(B) {
      if (!B) return [];
      const g = String(B), _ = g.match(/^([A-Z]+)\b/), L = (_ == null ? void 0 : _[1]) ?? "", O = g.match(/\s([CP])\b/), Q = (O == null ? void 0 : O[1]) ?? "", z = g.match(/\s(\d+(?:\.\d+)?)\s+[CP]\b/), Me = (z == null ? void 0 : z[1]) ?? "", $ = g.match(/\b(\d{6})[CP]/), I = $ ? p($[1]) : "";
      return [L, I, Me, Q].filter(Boolean);
    }
    function w(B, g) {
      var Me;
      const _ = B.getElement(), L = _.querySelector(".positions-subtable-holder");
      if (L) {
        L.remove(), f.value = null;
        return;
      }
      document.querySelectorAll(".positions-subtable-holder").forEach(($) => $.remove()), f.value = g;
      const O = ((Me = d.data.value) == null ? void 0 : Me.filter(
        ($) => $.internal_account_id === g
      )) || [], Q = document.createElement("div");
      Q.className = "positions-subtable-holder", Q.style.boxSizing = "border-box", Q.style.padding = "10px 30px 10px 10px", Q.style.borderTop = "1px solid #ddd", Q.style.borderBottom = "2px solid #4f46e5", Q.style.background = "#f8fafc";
      const z = document.createElement("div");
      z.style.border = "1px solid #e5e7eb", z.style.borderRadius = "4px", z.style.overflow = "hidden", Q.appendChild(z), _.appendChild(Q), new Gl(z, {
        layout: "fitData",
        data: O,
        placeholder: "No positions for this account",
        initialSort: [{ column: "dte", dir: "asc" }],
        columns: [
          // Financial Instrument group
          { title: "Financial Instrument", headerHozAlign: "center", columns: [
            {
              title: "Name",
              field: "symbol",
              width: 220,
              cssClass: "col-group-start",
              formatter: ($) => {
                const I = $.getValue();
                return I ? b(I).map((oe) => `<span class="fi-tag">${oe}</span>`).join("") : "";
              },
              bottomCalc: () => "Total",
              bottomCalcFormatter: () => "<strong>Total</strong>"
            },
            {
              title: "Entry Unit Price",
              field: "avgPrice",
              hozAlign: "right",
              width: 80,
              titleFormatter: () => "Entry<br>Unit<br>Price",
              formatter: ($) => {
                const I = $.getValue();
                return I == null || !Number.isFinite(I) ? "" : `<span style="color:#425466;">$${Number(I).toLocaleString("en-US", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>`;
              }
            },
            {
              title: "Current<br>market<br>price",
              field: "option_market_price",
              hozAlign: "right",
              width: 95,
              titleFormatter: () => "Current<br>market<br>price",
              formatter: ($) => {
                const I = $.getRow().getData();
                let se = null;
                return I.asset_class === "OPT" ? se = I.option_market_price ?? I.price ?? null : se = I.market_price ?? I.price ?? null, se == null ? '<span style="color:#aaa;">-</span>' : `<span style="color:#425466;">$${Number(se).toLocaleString("en-US", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>`;
              }
            },
            {
              title: "Contract<br>Qty",
              field: "contract_quantity",
              hozAlign: "right",
              width: 90,
              formatter: ($) => {
                const I = $.getValue();
                return I != null ? `<span style="color:#425466;">${Number(I).toLocaleString()}</span>` : "";
              },
              bottomCalc: ($) => $.reduce((I, se) => I + Math.abs(Number(se) || 0), 0),
              bottomCalcFormatter: ($) => {
                const I = $.getValue();
                return `<strong>${Number(I).toLocaleString()}</strong>`;
              }
            },
            {
              title: "Premium<br>Received",
              field: "computed_cash_flow_on_entry",
              hozAlign: "right",
              width: 100,
              cssClass: "col-group-end",
              formatter: ($) => {
                const I = $.getValue();
                return I == null ? "" : `<span style="color:${I > 0 ? "#16a34a" : I < 0 ? "#dc2626" : "#374151"}">${ee(I)}</span>`;
              },
              bottomCalc: "sum",
              bottomCalcFormatter: ($) => {
                const I = $.getValue();
                return `<strong style="color:${I > 0 ? "#16a34a" : I < 0 ? "#dc2626" : "#374151"}">${ee(I)}</strong>`;
              }
            }
          ] },
          // DTE
          {
            title: "DTE",
            field: "dte",
            hozAlign: "right",
            width: 75,
            sorter: ($, I, se, oe) => {
              const Be = (Xe) => {
                if (Xe.asset_class !== "OPT") return 1 / 0;
                const qe = b(Xe.symbol);
                if (!qe[1]) return 1 / 0;
                const Vt = Math.ceil((new Date(qe[1]).getTime() - Date.now()) / 864e5);
                return Vt < 0 ? 1 / 0 : Vt;
              };
              return Be(se.getData()) - Be(oe.getData());
            },
            formatter: ($) => {
              const I = $.getRow().getData();
              if (I.asset_class !== "OPT") return '<span style="color:#aaa;font-style:italic;">N/A</span>';
              const oe = b(I.symbol)[1];
              if (!oe) return "-";
              const Be = new Date(oe), Xe = /* @__PURE__ */ new Date();
              Xe.setHours(0, 0, 0, 0), Be.setHours(0, 0, 0, 0);
              const qe = Math.ceil((Be.getTime() - Xe.getTime()) / 864e5);
              return qe < 0 ? '<span style="color:#dc3545;font-weight:bold;">Expired</span>' : `<span style="${qe <= 7 ? "color:#dc3545;font-weight:bold;" : qe <= 30 ? "color:#fd7e14;font-weight:bold;" : "color:inherit;"}">${qe}d</span>`;
            }
          },
          // Delta
          {
            title: "Delta",
            field: "delta",
            hozAlign: "right",
            width: 75,
            formatter: ($) => {
              if ($.getRow().getData().asset_class !== "OPT") return "";
              const se = $.getValue();
              if (se == null) return '<span style="color:#aaa;">-</span>';
              const oe = parseFloat(se);
              if (isNaN(oe)) return "-";
              const Be = Math.abs(oe);
              return `<span style="${Be >= 0.7 ? "color:#dc3545;font-weight:bold;" : Be >= 0.3 ? "color:#fd7e14;" : "color:#28a745;"}">${oe.toFixed(2)}</span>`;
            }
          },
          // P&L group
          { title: "P&L", headerHozAlign: "center", columns: [
            {
              title: "Close<br>now",
              field: "unrealized_pnl",
              hozAlign: "right",
              width: 90,
              cssClass: "col-group-start",
              formatter: ($) => {
                const I = $.getValue();
                return I == null ? "" : `<span style="color:${I > 0 ? "#16a34a" : I < 0 ? "#dc2626" : "#374151"}">${ee(Math.round(I))}</span>`;
              },
              bottomCalc: "sum",
              bottomCalcFormatter: ($) => {
                const I = Math.round($.getValue());
                return `<strong style="color:${I > 0 ? "#16a34a" : I < 0 ? "#dc2626" : "#374151"}">${ee(I)}</strong>`;
              }
            },
            {
              title: "Wait<br>till<br>expiry",
              field: "be_price_pnl",
              hozAlign: "right",
              width: 75,
              formatter: ($) => {
                const I = $.getRow().getData();
                if (I.asset_class !== "OPT") return '<span style="color:#aaa;font-style:italic;">N/A</span>';
                const se = I.computed_be_price != null ? parseFloat(I.computed_be_price) : NaN, oe = I.market_price != null ? parseFloat(I.market_price) : NaN;
                if (isNaN(se) || isNaN(oe) || !I.symbol) return '<span style="color:#aaa;font-style:italic;">N/A</span>';
                const Be = I.contract_quantity || I.qty || 0;
                if (Be === 0) return '<span style="color:#aaa;font-style:italic;">N/A</span>';
                const Xe = b(I.symbol), qe = Xe[2] ? parseFloat(Xe[2]) : NaN, Vt = Xe[3];
                if (isNaN(qe) || Vt !== "P" && Vt !== "C") return '<span style="color:#aaa;font-style:italic;">N/A</span>';
                const Ei = Math.abs(Be), Fi = I.multiplier || 100;
                let ei;
                if (Vt === "P") {
                  const zt = Math.min(oe, qe);
                  ei = Be < 0 ? (zt - se) * Ei * Fi : (se - zt) * Ei * Fi;
                } else {
                  const zt = Math.max(oe, qe);
                  ei = Be < 0 ? (se - zt) * Ei * Fi : (zt - se) * Ei * Fi;
                }
                return `<span style="color:${ei > 0 ? "#16a34a" : ei < 0 ? "#dc2626" : "#374151"}">${ee(Math.round(ei))}</span>`;
              },
              bottomCalc: ($, I) => {
                let se = 0;
                for (const oe of I) {
                  if (oe.asset_class !== "OPT" || oe.computed_be_price == null || oe.market_price == null || !oe.symbol) continue;
                  const Be = parseFloat(oe.computed_be_price), Xe = parseFloat(oe.market_price);
                  if (isNaN(Be) || isNaN(Xe)) continue;
                  const qe = oe.contract_quantity || oe.qty || 0;
                  if (qe === 0) continue;
                  const Vt = b(oe.symbol), Ei = Vt[2] ? parseFloat(Vt[2]) : NaN, Fi = Vt[3];
                  if (isNaN(Ei) || Fi !== "P" && Fi !== "C") continue;
                  const ei = Math.abs(qe), lA = oe.multiplier || 100;
                  if (Fi === "P") {
                    const zt = Math.min(Xe, Ei);
                    se += qe < 0 ? (zt - Be) * ei * lA : (Be - zt) * ei * lA;
                  } else {
                    const zt = Math.max(Xe, Ei);
                    se += qe < 0 ? (Be - zt) * ei * lA : (zt - Be) * ei * lA;
                  }
                }
                return se;
              },
              bottomCalcFormatter: ($) => {
                const I = Math.round($.getValue());
                return `<strong style="color:${I > 0 ? "#16a34a" : I < 0 ? "#dc2626" : "#374151"}">${ee(I)}</strong>`;
              }
            },
            {
              title: "Unrealized<br>P&L %",
              field: "unrealized_pnl_pct",
              hozAlign: "right",
              width: 90,
              cssClass: "col-group-end",
              formatter: ($) => {
                const I = $.getRow().getData(), se = parseFloat(I.unrealized_pnl), oe = parseFloat(I.computed_cash_flow_on_entry);
                if (isNaN(se) || isNaN(oe) || oe === 0) return '<span style="color:#aaa;font-style:italic;">N/A</span>';
                const Be = se / Math.abs(oe) * 100, Xe = `${Be >= 0 ? "+" : ""}${Be.toFixed(1)}%`;
                return `<span style="color:${Be > 0 ? "#16a34a" : Be < 0 ? "#dc2626" : "#374151"}">${Xe}</span>`;
              }
            }
          ] },
          // Underlying Instrument group
          { title: "Underlying Instrument", headerHozAlign: "center", columns: [
            {
              title: "Break<br>even<br>price",
              field: "computed_be_price",
              hozAlign: "right",
              width: 90,
              cssClass: "col-group-start",
              formatter: ($) => {
                const I = $.getValue();
                return I == null ? "-" : `$${parseFloat(I).toLocaleString("en-US", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
              }
            },
            {
              title: "Current<br>market<br>price",
              field: "market_price",
              hozAlign: "right",
              width: 90,
              formatter: ($) => {
                const I = $.getValue();
                return I != null ? `$${Number(I).toLocaleString("en-US", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` : '<span style="color:#aaa;">-</span>';
              }
            },
            {
              title: "Entry<br>Unit<br>Price",
              field: "ul_entry_price",
              hozAlign: "right",
              width: 70,
              cssClass: "col-group-end",
              formatter: () => '<span style="color:#aaa;font-style:italic;">N/A</span>'
            }
          ] },
          // Buying Power if Exercised
          {
            title: "Buying<br>Power<br>if<br>Exercised",
            field: "computed_cash_flow_on_exercise",
            hozAlign: "right",
            width: 100,
            formatter: ($) => {
              const I = $.getValue();
              return I == null ? "" : `<span style="color:${I > 0 ? "#16a34a" : I < 0 ? "#dc2626" : "#374151"}">${ee(I)}</span>`;
            },
            bottomCalc: "sum",
            bottomCalcFormatter: ($) => {
              const I = $.getValue();
              return `<strong style="color:${I > 0 ? "#16a34a" : I < 0 ? "#dc2626" : "#374151"}">${ee(I)}</strong>`;
            }
          },
          // Premium / Exercised %
          {
            title: "Premium<br>/<br>Exercised %",
            field: "entry_exercise_cash_flow_pct",
            hozAlign: "right",
            width: 90,
            formatter: ($) => {
              const I = $.getRow().getData();
              if (I.asset_class === "OPT" && I.computed_cash_flow_on_entry != null && I.computed_cash_flow_on_exercise != null && I.computed_cash_flow_on_exercise !== 0) {
                const se = I.computed_cash_flow_on_entry / I.computed_cash_flow_on_exercise * 100;
                return `<span>${Math.abs(parseFloat(se.toFixed(2)))}%</span>`;
              }
              return '<span style="color:#aaa;font-style:italic;">N/A</span>';
            }
          }
        ]
      });
    }
    lr({});
    const C = te(null), x = te(null), U = lr({}), E = te(null), H = lr({
      bansi: { isLoading: !1, isStarting: !1, isStopping: !1, online: !1 },
      cis: { isLoading: !1, isStarting: !1, isStopping: !1, online: !1 },
      hediye: { isLoading: !1, isStarting: !1, isStopping: !1, online: !1 },
      ovlg: { isLoading: !1, isStarting: !1, isStopping: !1, online: !1 },
      sc: { isLoading: !1, isStarting: !1, isStopping: !1, online: !1 },
      stamp: { isLoading: !1, isStarting: !1, isStopping: !1, online: !1 },
      vk: { isLoading: !1, isStarting: !1, isStopping: !1, online: !1 },
      jkmdm: { isLoading: !1, isStarting: !1, isStopping: !1, online: !1 },
      ristc: { isLoading: !1, isStarting: !1, isStopping: !1, online: !1 },
      internext: { isLoading: !1, isStarting: !1, isStopping: !1, online: !1 }
    }), T = te([]);
    let S = 0;
    function R() {
      return new URLSearchParams(window.location.search).get(`${r.window}_all_cts_clientId`);
    }
    function J(B) {
      if (!B) return null;
      const g = B.match(/Client\s*(\d+)/i);
      return g ? parseInt(g[1]) : null;
    }
    const X = te("Summary"), P = te(!1), Z = te("");
    function ae() {
      return new URL(window.location.href).searchParams.get(`${r.window}_summary_app_name`) || "Summary";
    }
    function ce(B) {
      const g = new URL(window.location.href);
      B && B.trim() && B !== "Summary" ? g.searchParams.set(`${r.window}_summary_app_name`, B.trim()) : g.searchParams.delete(`${r.window}_summary_app_name`), window.history.replaceState({}, "", g.toString());
    }
    function le() {
      Z.value = X.value, P.value = !0;
    }
    function fe() {
      X.value = Z.value.trim() || "Summary", ce(X.value), P.value = !1;
    }
    Aa(() => {
      E.value = R(), X.value = ae(), yt.value = so(), window.addEventListener("popstate", () => {
        E.value = R(), X.value = ae();
      });
    });
    const be = au(), _e = fl(), Ke = Is({
      queryKey: Ye(() => ["nlvHistory", C.value]),
      queryFn: async () => {
        if (!C.value) return [];
        console.log(" Querying NLV history for account:", C.value);
        const { data: B, error: g } = await be.schema("hf").from("netliquidation").select("internal_account_id, fetched_at, nlv").eq("internal_account_id", C.value).gte("fetched_at", new Date(Date.now() - 30 * 24 * 60 * 60 * 1e3).toISOString()).order("fetched_at", { ascending: !0 });
        if (g)
          throw console.error(" NLV history query error:", g), g;
        return console.log(" NLV history query success:", B == null ? void 0 : B.length, "records"), B || [];
      },
      staleTime: 6e4,
      enabled: Ye(() => !!C.value && x.value === "nlv")
    }), We = Is({
      queryKey: Ye(() => ["maintenanceHistory", C.value]),
      queryFn: async () => {
        if (!C.value) return [];
        console.log(" Querying Maintenance Margin history for account:", C.value);
        const { data: B, error: g } = await be.schema("hf").from("maintenance_margin").select("internal_account_id, fetched_at, maintenance").eq("internal_account_id", C.value).gte("fetched_at", new Date(Date.now() - 30 * 24 * 60 * 60 * 1e3).toISOString()).order("fetched_at", { ascending: !0 });
        if (g)
          throw console.error(" Maintenance Margin history query error:", g), g;
        return console.log(" Maintenance Margin history query success:", B == null ? void 0 : B.length, "records"), B || [];
      },
      staleTime: 6e4,
      enabled: Ye(() => !!C.value && x.value === "mm")
    }), Te = te(!1);
    function Ve() {
      Te.value = !1, _e.invalidateQueries();
    }
    function ze() {
      Te.value = !0;
    }
    function ee(B) {
      if (B == null) return "$0";
      const g = typeof B == "string" ? parseFloat(B) : B;
      return isNaN(g) ? "$0" : new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
      }).format(g);
    }
    function Le(B, g, _) {
      const L = 1 - _, O = 1 - g, z = 1 - L * O;
      return B / z;
    }
    const He = Ye(() => {
      if (!c.data.value) return [];
      const B = /* @__PURE__ */ new Map();
      return u.data.value && u.data.value.forEach((g) => {
        B.set(g.internal_account_id, g.settled_cash);
      }), c.data.value.map((g) => {
        const _ = Le(g.nlv_val, 0.3, 0.15), L = Le(g.nlv_val, 0.3, 0.1), O = _ * 30 / 100, Q = L * 30 / 100, z = typeof g.maintenance_val == "string" ? parseFloat(g.maintenance_val) : g.maintenance_val, Me = O - z, $ = Q - z, I = Me * 100 / 30, se = $ * 100 / 30, oe = (g.net_cash_transactions_amount || 0) + (g.net_transfers_amount || 0), Be = B.get(g.nlv_internal_account_id || "") || 0;
        return {
          ...g,
          maintenance_val_numeric: z,
          // Add numeric version for calculations
          maxGmvNlvSide: _,
          maxGmvMaintenanceSide: L,
          mkNlvSide: O,
          mkMaintenanceSide: Q,
          maintnanceMarginHeadroomNlvSide: Me,
          maintnanceMarginHeadroomMaintenanceSide: $,
          addlGmvAllowedNlvSide: I,
          addlGmvAllowedMaintenanceSide: se,
          total_deposits: oe,
          settled_cash: Be
        };
      });
    }), Bt = Ye(() => {
      let B = He.value || [];
      if (B = B.filter((L) => h.value ? L.archived === !0 : L.archived !== !0), console.log("Archived only:", B), !E.value)
        return B;
      const g = J(E.value);
      if (g === null)
        return B;
      const _ = g - 1;
      return _ >= 0 && _ < B.length ? [B[_]] : B;
    });
    Ye(() => {
      if (!He.value) return null;
      const B = He.value.reduce((Q, z) => Q + (z.nlv_val || 0), 0), g = He.value.reduce((Q, z) => {
        const Me = typeof z.maintenance_val == "string" ? parseFloat(z.maintenance_val) : z.maintenance_val;
        return Q + (isNaN(Me) ? 0 : Me);
      }, 0), _ = He.value.reduce((Q, z) => Q + (z.excess_maintenance_margin || 0), 0), L = He.value.reduce((Q, z) => Q + (z.addlGmvAllowedNlvSide || 0), 0), O = He.value.reduce((Q, z) => Q + (z.addlGmvAllowedMaintenanceSide || 0), 0);
      return {
        totalNlv: B,
        totalMaintenance: g,
        totalExcessMaintenance: _,
        totalAddlGmvToStopReducing: L,
        totalAddlGmvToStartReducing: O
      };
    });
    function Cs(B) {
      console.log(" toggleBreakdown called with ID:", B), console.log(" Current breakdownVisibility state:", U);
      const g = typeof B == "string" ? parseInt(B) : B, _ = U[g];
      Object.keys(U).forEach((L) => {
        const O = parseInt(L);
        U[O] = !1;
      }), U[g] = !_, console.log(" Updated breakdownVisibility state:", U), console.log(" breakdownVisibility[" + g + "]:", U[g]);
    }
    const io = Ye(() => {
      var g;
      console.log(" Computing breakdown items..."), console.log(" filteredMetrics:", Bt.value), console.log(" breakdownVisibility:", U);
      const B = ((g = Bt.value) == null ? void 0 : g.filter((_) => {
        const L = typeof _.nlv_internal_account_id == "string" ? parseInt(_.nlv_internal_account_id) : _.nlv_internal_account_id, O = U[L];
        return console.log(" Item", L, "(original:", _.nlv_internal_account_id, ") should show:", O), O;
      })) || [];
      return console.log(" Final breakdown items:", B), B;
    }), Ct = nu("eventBus"), yt = te({});
    function so() {
      const g = new URL(window.location.href).searchParams.get(`${r.window}_summary_col_renames`);
      if (!g) return {};
      try {
        const _ = g.split("-and-"), L = {};
        return _.forEach((O) => {
          const [Q, ...z] = O.split(":");
          Q && z.length && (L[Q] = decodeURIComponent(z.join(":")));
        }), L;
      } catch {
        return {};
      }
    }
    function Ao(B) {
      const g = new URL(window.location.href), _ = Object.entries(B).filter(([L, O]) => O && O.trim()).map(([L, O]) => `${L}:${encodeURIComponent(O)}`).join("-and-");
      _ ? g.searchParams.set(`${r.window}_summary_col_renames`, _) : g.searchParams.delete(`${r.window}_summary_col_renames`), window.history.replaceState({}, "", g.toString());
    }
    jt(yt, (B) => {
      Ao(B), Gt(() => qt());
    }, { deep: !0 });
    const $t = [
      { field: "account", label: "Account" },
      { field: "nlv_val", label: "NLV" },
      { field: "maintenance_val", label: "Maintenance Margin" },
      { field: "mm_nlv_ratio", label: "MM/NLV" },
      { field: "excess_maintenance_margin", label: "Excess Maintenance Margin" },
      // Add this line
      { field: "addlGmvAllowedNlvSide", label: "Stop-adding threshold (Add'l GMV)" },
      { field: "addlGmvAllowedMaintenanceSide", label: "Start-reducing threshold (Add'l GMV)" },
      { field: "total_deposits", label: "Total Deposits this year" },
      { field: "settled_cash", label: "Settled Cash" }
    ];
    function no() {
      const g = new URL(window.location.href).searchParams.get(`${r.window}_summary_cols`);
      if (!g)
        return $t.map((Q) => Q.field);
      const _ = g.split("-and-").map((Q) => Q.trim()).filter(Boolean), L = new Set($t.map((Q) => Q.field)), O = _.filter((Q) => L.has(Q));
      return O.length ? O : $t.map((Q) => Q.field);
    }
    function ys(B) {
      const g = new URL(window.location.href);
      g.searchParams.set(`${r.window}_summary_cols`, B.join("-and-")), window.history.replaceState({}, "", g.toString());
    }
    const Et = te(no()), Zt = te(!1), eA = te(null), tA = te(null);
    function hn() {
      Zt.value = !Zt.value;
    }
    function Es() {
      Zt.value = !1;
    }
    function iA(B) {
      Zt.value && tA.value && eA.value && !tA.value.contains(B.target) && !eA.value.contains(B.target) && Es();
    }
    jt(Et, (B) => {
      ys(B), Gt(() => {
        qt();
      });
    }, { deep: !0 });
    const ai = te(!1), sA = te(null), Yi = te("");
    function ro(B, g) {
      sA.value = B, Yi.value = g, ai.value = !0;
    }
    function cn() {
      sA.value && (yt.value = {
        ...yt.value,
        [sA.value]: Yi.value.trim()
      }, ai.value = !1, Gt(() => qt()));
    }
    function oo() {
      ai.value = !1;
    }
    function Oe(B) {
      const g = $t.find((_) => _.field === B);
      return yt.value[B] || ((g == null ? void 0 : g.label) ?? B);
    }
    function qt() {
      if (!a.value) return;
      if (l) {
        try {
          l.destroy();
        } catch {
        }
        l = null;
      }
      const B = [
        {
          title: "",
          field: "_expand",
          frozen: !0,
          headerSort: !1,
          width: 36,
          hozAlign: "center",
          cssClass: "expand-col",
          formatter: (g) => {
            const _ = g.getRow().getData();
            if (_.isTotal) return "";
            const L = String(_.nlv_internal_account_id);
            return `<span class="expand-icon" style="cursor:pointer;font-size:16px;">${f.value === L ? "" : "+"}</span>`;
          },
          cellClick: (g, _) => {
            const L = _.getRow().getData();
            if (L.isTotal) return;
            const O = String(L.nlv_internal_account_id);
            w(_.getRow(), O), l && l.getRows().forEach((Q) => {
              const z = Q.getCell("_expand");
              if (z) {
                const Me = Q.getData();
                if (!Me.isTotal) {
                  const $ = String(Me.nlv_internal_account_id), I = f.value === $;
                  z.getElement().innerHTML = `<span class="expand-icon" style="cursor:pointer;font-size:16px;">${I ? "" : "+"}</span>`;
                }
              }
            });
          }
        },
        {
          title: Oe("account"),
          field: "account",
          frozen: !0,
          headerSort: !1,
          width: Ft.value.account || void 0,
          // Apply saved width
          formatter: (g) => {
            const _ = g.getRow().getData();
            if (_.isTotal)
              return `<div class="account-cell total-row">
            <span class="account-name">All Accounts</span>
          </div>`;
            _.addlGmvAllowedNlvSide < 0 && _.addlGmvAllowedMaintenanceSide < 0 || _.addlGmvAllowedNlvSide < 0;
            let L = `<span class="account-name">${_.legal_entity || _.account}</span>`;
            return Rf.value.has(_.nlv_internal_account_id) && (L += `<button class="edit-btn" data-id="${_.nlv_internal_account_id}"></button>`), `<div class="account-cell clickable-account">${L}</div>`;
          },
          titleFormatter: (g) => `<div class="header-with-close">
          <span>${Oe("account")}</span>
        </div>`,
          cellClick: (g, _) => {
            const L = _.getRow().getData();
            g.target.classList.contains("edit-btn") ? If(L.nlv_internal_account_id, L.nlv_val, L.maintenance_val) : L.isTotal || AA(L.account);
          }
        },
        {
          title: Oe("nlv_val"),
          field: "nlv_val",
          hozAlign: "right",
          width: Ft.value.nlv_val || void 0,
          // Apply saved width
          formatter: (g) => {
            const _ = g.getRow().getData(), L = ee(g.getValue());
            return _.isTotal ? `<span class="cell-value total-cell">${L}</span>` : `<div class="cell-with-graph">
          <span class="cell-value">${L}</span>
        </div>`;
          },
          titleFormatter: (g) => `<div class="header-with-close">
          <span>${Oe("nlv_val")}</span>
          <button class="header-close-btn" data-field="nlv_val" title="Hide column"></button>
        </div>`,
          bottomCalc: "sum",
          bottomCalcFormatter: (g) => ee(g.getValue())
        },
        {
          title: Oe("maintenance_val"),
          field: "maintenance_val",
          hozAlign: "right",
          width: Ft.value.maintenance_val || void 0,
          // Apply saved width
          formatter: (g) => {
            const _ = g.getRow().getData(), L = typeof g.getValue() == "string" ? parseFloat(g.getValue()) : g.getValue(), O = ee(L);
            return _.isTotal ? `<span class="cell-value total-cell">${O}</span>` : `<div class="cell-with-graph">
          <span class="cell-value">${O}</span>
        </div>`;
          },
          titleFormatter: (g) => `<div class="header-with-close">
          <span>${Oe("maintenance_val")}</span>
          <button class="header-close-btn" data-field="maintenance_val" title="Hide column"></button>
        </div>`,
          bottomCalc: "sum",
          bottomCalcFormatter: (g) => {
            const _ = typeof g.getValue() == "string" ? parseFloat(g.getValue()) : g.getValue();
            return ee(_);
          }
        },
        {
          title: Oe("mm_nlv_ratio"),
          field: "mm_nlv_ratio",
          hozAlign: "right",
          width: Ft.value.mm_nlv_ratio || void 0,
          formatter: (g) => {
            const _ = g.getRow().getData(), L = _.nlv_val, O = typeof _.maintenance_val == "string" ? parseFloat(_.maintenance_val) : _.maintenance_val;
            if (!L || L === 0) return "<span>N/A</span>";
            const z = (O / L * 100).toFixed(2) + "%";
            return _.isTotal ? `<span class="cell-value total-cell">${z}</span>` : `<span class="cell-value">${z}</span>`;
          },
          titleFormatter: (g) => `<div class="header-with-close">
          <span>${Oe("mm_nlv_ratio")}</span>
          <button class="header-close-btn" data-field="mm_nlv_ratio" title="Hide column"></button>
        </div>`,
          sorter: (g, _, L, O) => {
            const Q = L.getData(), z = O.getData(), Me = Q.nlv_val ? Q.maintenance_val_numeric / Q.nlv_val : 0, $ = z.nlv_val ? z.maintenance_val_numeric / z.nlv_val : 0;
            return Me - $;
          }
        },
        {
          title: Oe("excess_maintenance_margin"),
          field: "excess_maintenance_margin",
          hozAlign: "right",
          width: Ft.value.excess_maintenance_margin || void 0,
          // Apply saved width
          formatter: (g) => {
            const _ = g.getValue(), L = ee(_);
            return `<span class="${_ < 0 ? "negative" : ""}">${L}</span>`;
          },
          titleFormatter: (g) => `<div class="header-with-close">
          <span>${Oe("excess_maintenance_margin")}</span>
          <button class="header-close-btn" data-field="excess_maintenance_margin" title="Hide column"></button>
        </div>`,
          bottomCalc: "sum",
          bottomCalcFormatter: (g) => ee(g.getValue())
        },
        {
          title: Oe("addlGmvAllowedNlvSide"),
          field: "addlGmvAllowedNlvSide",
          hozAlign: "right",
          width: Ft.value.addlGmvAllowedNlvSide || void 0,
          // Apply saved width
          formatter: (g) => {
            const _ = g.getValue(), L = ee(_);
            return `<span class="${_ < 0 ? "negative" : ""}">${L}</span>`;
          },
          titleFormatter: (g) => `<div class="header-with-close">
          <span>${Oe("addlGmvAllowedNlvSide")}</span>
          <button class="header-close-btn" data-field="addlGmvAllowedNlvSide" title="Hide column"></button>
        </div>`,
          bottomCalc: "sum",
          bottomCalcFormatter: (g) => ee(g.getValue())
        },
        {
          title: Oe("addlGmvAllowedMaintenanceSide"),
          field: "addlGmvAllowedMaintenanceSide",
          hozAlign: "right",
          width: Ft.value.addlGmvAllowedMaintenanceSide || void 0,
          // Apply saved width
          formatter: (g) => {
            const _ = g.getValue(), L = ee(_);
            return `<span class="${_ < 0 ? "negative" : ""}">${L}</span>`;
          },
          titleFormatter: (g) => `<div class="header-with-close">
          <span>${Oe("addlGmvAllowedMaintenanceSide")}</span>
          <button class="header-close-btn" data-field="addlGmvAllowedMaintenanceSide" title="Hide column"></button>
        </div>`,
          bottomCalc: "sum",
          bottomCalcFormatter: (g) => ee(g.getValue())
        },
        {
          title: Oe("total_deposits"),
          field: "total_deposits",
          hozAlign: "right",
          width: Ft.value.total_deposits || void 0,
          formatter: (g) => {
            const _ = g.getValue();
            return `<span class="cell-value">${ee(_)}</span>`;
          },
          titleFormatter: (g) => `<div class="header-with-close">
          <span>${Oe("total_deposits")}</span>
          <button class="header-close-btn" data-field="total_deposits" title="Hide column"></button>
        </div>`,
          bottomCalc: "sum",
          bottomCalcFormatter: (g) => ee(g.getValue())
        },
        {
          title: Oe("settled_cash"),
          field: "settled_cash",
          hozAlign: "right",
          width: Ft.value.settled_cash || void 0,
          formatter: (g) => {
            const _ = g.getValue(), L = ee(_);
            return `<span class="cell-value ${_ < 0 ? "negative" : ""}">${L}</span>`;
          },
          titleFormatter: (g) => `<div class="header-with-close">
          <span>${Oe("settled_cash")}</span>
          <button class="header-close-btn" data-field="settled_cash" title="Hide column"></button>
        </div>`,
          bottomCalc: "sum",
          bottomCalcFormatter: (g) => ee(g.getValue())
        }
      ].filter((g) => g.field === "_expand" || Et.value.includes(g.field));
      try {
        l = new Gl(a.value, {
          data: Ji.value,
          columns: B,
          layout: "fitColumns",
          height: "auto",
          placeholder: "No data available",
          columnDefaults: {
            resizable: !0,
            headerSort: !0
          },
          rowFormatter: (g) => {
            const _ = g.getData(), L = g.getElement();
            _.isTotal && L && (L.style.backgroundColor = "#f8f9fa", L.style.fontWeight = "bold");
          }
        }), l.on("columnResized", (g) => {
          const _ = g.getField(), L = g.getWidth();
          Ft.value[_] = L, fo(Ft.value);
        }), l.on("tableBuilt", () => {
          var _;
          const g = (_ = a.value) == null ? void 0 : _.querySelectorAll(".header-close-btn");
          g == null || g.forEach((L) => {
            L.addEventListener("click", (O) => {
              O.stopPropagation();
              const Q = O.target.getAttribute("data-field");
              Q && ao(Q);
            });
          });
        }), l.on("cellContext", (g, _) => {
          g.preventDefault();
          const L = _.getRow(), O = L.getData(), Q = L.getElement();
          if (Q && Q.classList.contains("tabulator-calcs") && (_.getField() === "nlv_val" || _.getField() === "maintenance_val")) {
            Lf(g, _.getField());
            return;
          }
          O && O.nlv_internal_account_id !== void 0 && ho(
            g,
            typeof O.nlv_internal_account_id == "string" ? parseInt(O.nlv_internal_account_id) : O.nlv_internal_account_id,
            _.getField()
          );
        }), we();
      } catch (g) {
        console.error("Error creating Tabulator:", g);
      }
    }
    function ao(B) {
      const g = Et.value.indexOf(B);
      g > -1 && (Et.value.splice(g, 1), ys(Et.value), Gt(() => {
        qt();
      }));
    }
    const Ji = Ye(() => He.value ? Bt.value.map((g) => ({
      ...g,
      account: g.legal_entity,
      isTotal: !1
    })) : []);
    function we() {
      const B = [];
      if (l) {
        const g = l.getFilters();
        for (const _ of g)
          _.field === "account" && _.value && B.push({ field: "account", value: String(_.value) });
      }
      dt.value = B;
    }
    function AA(B) {
      if (!l || B === void 0 || B === null) return;
      l.clearFilter(), l.setFilter([
        { field: "account", type: "=", value: String(B) }
      ]), we();
      const g = new URL(window.location.href);
      g.searchParams.set(`${r.window}_all_cts_clientId`, String(B)), window.history.replaceState({}, "", g.toString()), Ct && Ct.emit("account-filter-changed", {
        accountId: String(B),
        source: "summary"
      });
    }
    function nA(B) {
      if (!l) return;
      const g = l.getFilters().some((L) => L.field === B);
      l.clearFilter(), we();
      const _ = new URL(window.location.href);
      _.searchParams.delete(`${r.window}_all_cts_clientId`), window.history.replaceState({}, "", _.toString()), E.value = null, g && Ct && Ct.emit("account-filter-changed", {
        accountId: null,
        source: "summary"
      }), Gt(() => {
        l && l.replaceData(Ji.value);
      });
    }
    function lo() {
      if (!l) return;
      const B = l.getFilters().some((_) => _.field === "account");
      l.clearFilter(), we();
      const g = new URL(window.location.href);
      g.searchParams.delete(`${r.window}_all_cts_clientId`), window.history.replaceState({}, "", g.toString()), B && Ct && Ct.emit("account-filter-changed", {
        accountId: null,
        source: "summary"
      });
    }
    function $i(B) {
      B.source === "summary" || !l || (B.accountId ? l.setFilter([
        { field: "account", type: "=", value: B.accountId }
      ]) : l.clearFilter(), we());
    }
    jt([() => c.data.value, E], () => {
      l && Gt(() => {
        l.replaceData(Ji.value);
      });
    }), jt(Et, (B) => {
      ys(B), Gt(() => {
        qt();
      });
    }, { deep: !0 }), jt(i, () => {
      c.refetch && c.refetch(), u.refetch && u.refetch();
    }), jt(() => u.data.value, () => {
      l && Gt(() => {
        l.replaceData(Ji.value);
      });
    }), Aa(() => {
      E.value = R(), window.addEventListener("popstate", () => {
        E.value = R();
      }), document.addEventListener("click", Zi), document.addEventListener("click", iA), co(), Ct && Ct.on("account-filter-changed", $i), Gt(() => {
        c.isSuccess.value && qt();
      });
    }), jt(() => c.isSuccess.value, (B) => {
      B && Gt(() => {
        qt(), n.value && Pe(n.value, {
          dateFormat: "Y-m-d",
          maxDate: t,
          clickOpens: !0,
          // Add this to prevent timezone issues
          parseDate: (g) => /* @__PURE__ */ new Date(g + "T00:00:00"),
          onChange: (g) => {
            if (g.length > 0) {
              const _ = g[0], L = _.getFullYear(), O = String(_.getMonth() + 1).padStart(2, "0"), Q = String(_.getDate()).padStart(2, "0");
              i.value = `${L}-${O}-${Q}`;
            }
          }
        });
      });
    }), Gf(() => {
      if (l) {
        try {
          l.destroy();
        } catch {
        }
        l = null;
      }
      document.removeEventListener("click", Zi), document.removeEventListener("click", iA), j.forEach((B) => clearInterval(B)), j.length = 0, Ct && Ct.off("account-filter-changed", $i);
    });
    const Fe = te({
      visible: !1,
      x: 0,
      y: 0,
      accountId: null,
      columnId: null,
      fetchedAt: null
    }), dt = te([]);
    function ho(B, g, _) {
      var O;
      const L = (O = He.value) == null ? void 0 : O.find((Q) => (typeof Q.nlv_internal_account_id == "string" ? parseInt(Q.nlv_internal_account_id) : Q.nlv_internal_account_id) === g);
      Fe.value = {
        visible: !0,
        x: B.clientX,
        y: B.clientY,
        accountId: g,
        columnId: _,
        fetchedAt: (L == null ? void 0 : L.fetched_at_val) || null
      };
    }
    function Zi() {
      Fe.value.visible = !1;
    }
    const m = Ye(() => {
      var L;
      if (console.log(" Computing context menu items for accountId:", Fe.value.accountId, "columnId:", Fe.value.columnId), typeof Fe.value.accountId > "u") return [];
      const B = [];
      B.push({
        icon: "",
        label: "Details",
        action: "details",
        active: U[Fe.value.accountId] || !1
      });
      const g = Fe.value.columnId;
      if (g === "nlv_val" ? B.push({
        icon: "",
        label: "NLV Graph",
        action: "nlv_graph",
        active: v(Fe.value.accountId, "nlv")
      }) : g === "maintenance_val" && B.push({
        icon: "",
        label: "Maintenance Graph",
        action: "mm_graph",
        active: v(Fe.value.accountId, "mm")
      }), Fe.value.accountId && B.push({
        icon: "",
        label: "Rename Account",
        action: "rename_account"
      }), Fe.value.accountId === null) {
        const O = [];
        return Fe.value.columnId === "nlv_val" ? O.push({
          icon: "",
          label: "Total NLV Graph",
          action: "total_nlv_graph",
          active: li.value && ht.value === "nlv"
        }) : Fe.value.columnId === "maintenance_val" && O.push({
          icon: "",
          label: "Total Maintenance Graph",
          action: "total_mm_graph",
          active: li.value && ht.value === "mm"
        }), O;
      }
      const _ = (L = He.value) == null ? void 0 : L.find((O) => (typeof O.nlv_internal_account_id == "string" ? parseInt(O.nlv_internal_account_id) : O.nlv_internal_account_id) === Fe.value.accountId);
      return _ && B.push({
        icon: _.archived ? "" : "",
        label: _.archived ? "Recover Client" : "Archive Client",
        action: _.archived ? "recover_client" : "archive_client"
      }), B;
    });
    function v(B, g) {
      return C.value === B && x.value === g;
    }
    function F(B) {
      var _, L, O, Q;
      if (B === "total_nlv_graph") {
        li.value = !li.value || ht.value !== "nlv", ht.value = "nlv", Zi();
        return;
      }
      if (B === "total_mm_graph") {
        li.value = !li.value || ht.value !== "mm", ht.value = "mm", Zi();
        return;
      }
      const g = Fe.value.accountId;
      if (g) {
        switch (B) {
          case "details":
            Cs(g);
            break;
          case "nlv_graph":
            M(g, "nlv");
            break;
          case "mm_graph":
            M(g, "mm");
            break;
          case "archive_client":
            Of(((_ = Fe.value.accountId) == null ? void 0 : _.toString()) || "");
            break;
          case "recover_client":
            Pf(((L = Fe.value.accountId) == null ? void 0 : L.toString()) || "");
            break;
          case "rename_account": {
            const z = (O = He.value) == null ? void 0 : O.find((Me) => (typeof Me.nlv_internal_account_id == "string" ? parseInt(Me.nlv_internal_account_id) : Me.nlv_internal_account_id) === g);
            Qf(
              ((Q = z == null ? void 0 : z.nlv_internal_account_id) == null ? void 0 : Q.toString()) || "",
              (z == null ? void 0 : z.legal_entity) || ""
            );
            break;
          }
        }
        Zi();
      }
    }
    function M(B, g) {
      C.value === B && x.value === g ? (C.value = null, x.value = null) : (C.value = B, x.value = g);
    }
    const k = Ye(() => x.value ? x.value === "nlv" ? Ke : We : null), N = Ye(() => {
      var L;
      const B = k.value;
      if (!((L = B == null ? void 0 : B.data.value) != null && L.length)) return null;
      const g = B.data.value, _ = x.value === "nlv";
      return {
        labels: g.map((O) => new Date(O.fetched_at).toLocaleDateString("en-US", { month: "short", day: "numeric" })),
        datasets: [
          {
            label: _ ? "NLV" : "Maintenance Margin",
            data: g.map((O) => _ ? O.nlv : O.maintenance),
            borderColor: _ ? "#3b82f6" : "#10b981",
            backgroundColor: _ ? "rgba(59, 130, 246, 0.1)" : "rgba(16, 185, 129, 0.1)",
            tension: 0.4,
            fill: !0
          }
        ]
      };
    }), ie = Ye(() => {
      var L;
      let B = null;
      if (ht.value === "nlv" && (B = kl), ht.value === "mm" && (B = Ol), !((L = B == null ? void 0 : B.data.value) != null && L.length)) return null;
      const g = B.data.value, _ = ht.value === "nlv";
      return {
        labels: g.map((O) => new Date(O.fetched_at).toLocaleDateString("en-US", { month: "short", day: "numeric" })),
        datasets: [
          {
            label: _ ? "Total NLV" : "Total Maintenance Margin",
            data: g.map((O) => O.total),
            borderColor: _ ? "#3b82f6" : "#10b981",
            backgroundColor: _ ? "rgba(59, 130, 246, 0.1)" : "rgba(16, 185, 129, 0.1)",
            tension: 0.4,
            fill: !0
          }
        ]
      };
    }), Y = {
      responsive: !0,
      maintainAspectRatio: !1,
      plugins: {
        legend: {
          display: !0,
          position: "top"
        },
        tooltip: {
          mode: "index",
          intersect: !1,
          callbacks: {
            label: function(B) {
              return `${B.dataset.label}: ${ee(B.parsed.y)}`;
            }
          }
        }
      },
      scales: {
        y: {
          beginAtZero: !1,
          ticks: {
            callback: function(B) {
              return ee(B);
            }
          }
        }
      }
    };
    function Ae(B) {
      if (!B) return "N/A";
      try {
        return new Date(B).toLocaleString("en-US", {
          timeZone: "America/Los_Angeles",
          year: "numeric",
          month: "short",
          day: "numeric",
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit"
        });
      } catch {
        return "Invalid date";
      }
    }
    const j = [];
    function q(B) {
      return {
        1: "bansi",
        2: "cis",
        3: "hediye",
        4: "ovlg",
        5: "sc",
        6: "stamp",
        7: "vk",
        8: "jkmdm",
        11: "ristc",
        12: "internext"
      }[B] || "";
    }
    function re(B) {
      return (typeof B.nlv_internal_account_id == "string" ? parseInt(B.nlv_internal_account_id) : B.nlv_internal_account_id) || 0;
    }
    function ft(B) {
      const g = q(B), _ = H[g];
      return {
        online: (_ == null ? void 0 : _.online) || !1,
        lastUpdated: (_ == null ? void 0 : _.lastUpdated) || null
      };
    }
    async function je(B) {
      const g = H[B];
      if (g) {
        g.isLoading = !0;
        try {
          const _ = B === "vk" ? "https://ibkr.vk.to5001.aiworkspace.pro/api/maintenance" : `https://ibkr.${B}.to5001.aiworkspace.pro/api/maintenance`, O = await (await fetch(_)).json();
          O.maintenance_margin_amount ? (g.online = !0, g.lastUpdated = /* @__PURE__ */ new Date(), g.lastError = null) : (g.online = !1, g.lastUpdated = /* @__PURE__ */ new Date(), g.lastError = O.error || "Unknown error");
        } catch (_) {
          g.online = !1, g.lastUpdated = /* @__PURE__ */ new Date(), g.lastError = String(_);
        } finally {
          g.isLoading = !1;
        }
      }
    }
    async function qi(B) {
      const g = H[B];
      if (g) {
        g.isStarting = !0, g.isLoading = !0;
        try {
          const L = await (await fetch(`${Au}?action=start&container_name=${B}`)).json();
          L.status === "success" ? (Ht("success", `Container ${B} started successfully`), await je(B)) : Ht("error", `Failed to start ${B}: ${L.error}`);
        } catch (_) {
          Ht("error", `Error starting ${B}: ${_}`);
        } finally {
          g.isStarting = !1, g.isLoading = !1;
        }
      }
    }
    async function Ci(B) {
      const g = H[B];
      if (g) {
        g.isStopping = !0, g.isLoading = !0;
        try {
          const L = await (await fetch(`${Au}?action=stop&container_name=${B}`)).json();
          L.status === "success" ? (Ht("success", `Container ${B} stopped successfully`), await je(B)) : Ht("error", `Failed to stop ${B}: ${L.error}`);
        } catch (_) {
          Ht("error", `Error stopping ${B}: ${_}`);
        } finally {
          g.isStopping = !1, g.isLoading = !1;
        }
      }
    }
    function co() {
      Object.keys(H).forEach((g) => {
        je(g);
        const _ = setInterval(() => je(g), 3e4);
        j.push(_);
      });
    }
    function Ht(B, g) {
      const _ = S++;
      T.value.push({ id: _, type: B, message: g }), setTimeout(() => un(_), 5e3);
    }
    function un(B) {
      const g = T.value.findIndex((_) => _.id === B);
      g !== -1 && T.value.splice(g, 1);
    }
    function uo() {
      const g = new URL(window.location.href).searchParams.get(`${r.window}_summary_col_widths`);
      if (!g) return {};
      try {
        const _ = g.split("-and-"), L = {};
        return _.forEach((O) => {
          const [Q, z] = O.split(":");
          Q && z && (L[Q] = parseInt(z));
        }), L;
      } catch (_) {
        return console.warn("Error parsing column widths from URL:", _), {};
      }
    }
    function fo(B) {
      const g = new URL(window.location.href), _ = Object.entries(B).filter(([L, O]) => O > 0).map(([L, O]) => `${L}:${O}`).join("-and-");
      _ ? g.searchParams.set(`${r.window}_summary_col_widths`, _) : g.searchParams.delete(`${r.window}_summary_col_widths`), window.history.replaceState({}, "", g.toString());
    }
    const Ft = te(uo()), Fs = te(!1), rA = te(null), dn = te(""), xs = te("");
    function Qf(B, g) {
      rA.value = B, dn.value = g, xs.value = g, Fs.value = !0;
    }
    async function Uf() {
      if (!(!r.userId || !rA.value))
        try {
          const { error: B } = await be.schema("hf").from("user_account_alias").upsert({
            user_id: r.userId,
            internal_account_id: rA.value,
            alias: xs.value,
            updated_at: (/* @__PURE__ */ new Date()).toISOString()
          }, { onConflict: "user_id,internal_account_id" });
          if (B) throw B;
          Fs.value = !1, await _e.invalidateQueries(), Ht("success", "Account renamed");
        } catch (B) {
          Ht("error", B.message);
        }
    }
    const fn = te(!1), gn = te([]), yi = te(null), go = te(!1), pn = te(!1), oA = te(!1), aA = te(""), mn = te(!1), bn = te(""), po = te(null);
    function _f() {
      aA.value = "", oA.value = !0;
    }
    async function Hf() {
      if (!a.value) {
        oA.value = !1;
        return;
      }
      oA.value = !1, pn.value = !0;
      try {
        const g = (await ZF(a.value)).toDataURL("image/png"), { error: _ } = await be.schema("hf").from("summary_screenshots").insert([{
          user_id: r.userId,
          created_at: (/* @__PURE__ */ new Date()).toISOString(),
          image_data: g.replace(/^data:image\/png;base64,/, ""),
          name: aA.value ? aA.value.trim() : null,
          archived: !1,
          meta: {
            filters: {
              account: dt.value,
              columns: $t.filter((L) => Et.value.includes(L.field)).map((L) => L.field)
            }
          }
        }]);
        if (_) throw _;
        Mt("success", "Screenshot saved!"), wn();
      } catch (B) {
        Mt("error", "Screenshot failed", B.message);
      } finally {
        pn.value = !1;
      }
    }
    async function Mf(B) {
      try {
        const { error: g } = await be.schema("hf").from("summary_screenshots").update({ archived: !0 }).eq("id", B);
        if (g) throw g;
        Mt("success", "Screenshot archived"), wn();
      } catch (g) {
        Mt("error", "Archive failed", g.message);
      }
    }
    async function wn() {
      if (!r.userId) {
        gn.value = [];
        return;
      }
      go.value = !0;
      const { data: B, error: g } = await be.schema("hf").from("summary_screenshots").select("*").eq("user_id", r.userId).eq("archived", !1).order("created_at", { ascending: !1 }).limit(20);
      g || (gn.value = B || []), go.value = !1;
    }
    const vn = te([]);
    let Df = 0;
    function Mt(B, g, _) {
      const L = Df++;
      vn.value.push({ id: L, type: B, title: g, message: _ }), setTimeout(() => mo(L), 5e3);
    }
    function mo(B) {
      const g = vn.value.findIndex((_) => _.id === B);
      g !== -1 && vn.value.splice(g, 1);
    }
    function Sf(B) {
      po.value = B.id, bn.value = B.name || "", mn.value = !0;
    }
    async function Tf() {
      if (po.value)
        try {
          const { error: B } = await be.schema("hf").from("summary_screenshots").update({ name: bn.value }).eq("id", po.value);
          if (B) throw B;
          mn.value = !1, Mt("success", "Screenshot renamed"), wn();
        } catch (B) {
          Mt("error", "Rename failed", B.message);
        }
    }
    jt(fn, (B) => {
      B && wn();
    });
    const li = te(!1), ht = te(null), kl = Is({
      queryKey: ["totalNlvHistory"],
      queryFn: async () => {
        const { data: B, error: g } = await be.schema("hf").rpc("get_nlv_run_summaries");
        if (g) throw g;
        return B || [];
      },
      enabled: Ye(() => li.value && ht.value === "nlv")
    }), Ol = Is({
      queryKey: ["totalMaintenanceHistory"],
      queryFn: async () => {
        const { data: B, error: g } = await be.schema("hf").rpc("get_maintenance_run_summaries");
        if (g) throw g;
        return B || [];
      },
      enabled: Ye(() => li.value && ht.value === "mm")
    });
    function Lf(B, g) {
      Fe.value = {
        visible: !0,
        x: B.clientX,
        y: B.clientY,
        accountId: null,
        // No accountId for total row
        columnId: g,
        fetchedAt: null
      };
    }
    const Rf = Ye(() => new Set(
      He.value.filter((B) => B.sync_mode === "manual").map((B) => B.nlv_internal_account_id)
    )), es = te(null), Bn = te(null), Cn = te(null);
    function If(B, g, _) {
      es.value = B, Bn.value = g, Cn.value = _;
    }
    async function kf() {
      if (es.value)
        try {
          const B = (/* @__PURE__ */ new Date()).toISOString();
          await be.schema("hf").from("netliquidation").insert([{
            internal_account_id: es.value,
            nlv: Bn.value,
            fetched_at: B
          }]), await be.schema("hf").from("maintenance_margin").insert([{
            internal_account_id: es.value,
            maintenance: Cn.value,
            fetched_at: B
          }]), Mt("success", "Values updated"), es.value = null, await _e.invalidateQueries();
        } catch (B) {
          Mt("error", "Update failed", B.message);
        }
    }
    async function Of(B) {
      try {
        const { error: g } = await be.schema("hf").from("user_accounts_master").update({ archived: !0 }).eq("internal_account_id", B);
        if (g) throw g;
        Mt("success", "Client archived"), await _e.invalidateQueries();
      } catch (g) {
        Mt("error", "Archive failed", g.message);
      }
    }
    async function Pf(B) {
      try {
        const { error: g } = await be.schema("hf").from("user_accounts_master").update({ archived: !1 }).eq("internal_account_id", B);
        if (g) throw g;
        Mt("success", "Client recovered"), await _e.invalidateQueries();
      } catch (g) {
        Mt("error", "Recover failed", g.message);
      }
    }
    return jt(Bt, (B) => {
      l && l.replaceData(Ji.value);
    }), (B, g) => {
      var L, O;
      const _ = Wf("router-link");
      return G(), W(xi, null, [
        y("div", xx, [
          (G(!0), W(xi, null, ts(T.value, (Q) => (G(), W("div", {
            key: Q.id,
            class: yn(["notification", Q.type])
          }, [
            y("div", Qx, [
              y("span", Ux, ue(Q.type === "success" ? "" : ""), 1),
              y("span", _x, ue(Q.message), 1)
            ]),
            y("button", {
              class: "notification-close",
              onClick: (z) => un(Q.id)
            }, "", 8, Hx)
          ], 2))), 128))
        ]),
        y("div", Mx, [
          hi(c).isLoading.value ? (G(), W("div", Dx, [...g[24] || (g[24] = [
            y("div", { class: "loading-spinner" }, null, -1),
            y("p", null, "Loading the latest metrics...", -1)
          ])])) : hi(c).isError.value ? (G(), W("div", Sx, [
            g[25] || (g[25] = y("h2", null, "Error Loading Data", -1)),
            g[26] || (g[26] = y("p", null, "An error occurred while fetching the metrics:", -1)),
            y("pre", null, ue(hi(c).error.value), 1)
          ])) : hi(c).isSuccess.value ? (G(), W("div", Tx, [
            y("div", Lx, [
              y("div", Rx, [
                y("h2", null, [
                  A.showHeaderLink ? (G(), jf(_, {
                    key: 0,
                    to: "/summary",
                    class: "summary-link"
                  }, {
                    default: Nl(() => [
                      ki(ue(X.value), 1)
                    ]),
                    _: 1
                  })) : (G(), W("span", Ix, ue(X.value), 1)),
                  y("button", {
                    class: "appname-rename-btn",
                    onClick: le,
                    title: "Rename app",
                    style: { width: "auto", padding: "2px 7px", "font-size": "13px", background: "none", border: "none", color: "#888", cursor: "pointer" }
                  }, "")
                ]),
                y("div", kx, [
                  g[27] || (g[27] = y("label", { for: "summaryAsOfDate" }, "As of:", -1)),
                  y("input", {
                    id: "summaryAsOfDate",
                    ref_key: "summaryDateInput",
                    ref: n,
                    type: "text",
                    value: i.value || "",
                    placeholder: "Select date",
                    readonly: "",
                    style: { "margin-left": "0.5em", cursor: "pointer", padding: "4px 8px", border: "1px solid #d1d5db", "border-radius": "4px" }
                  }, null, 8, Ox),
                  i.value ? (G(), W("button", {
                    key: 0,
                    onClick: s,
                    style: { "margin-left": "0.5em", padding: "4px 8px", border: "1px solid #d1d5db", "border-radius": "4px", cursor: "pointer", width: "auto" }
                  }, "Clear")) : Se("", !0),
                  hi(c).isFetching.value ? (G(), W("span", Px, "Loading...")) : Se("", !0)
                ]),
                y("div", Nx, [
                  y("button", {
                    class: "btn",
                    onClick: g[0] || (g[0] = (Q) => h.value = !h.value),
                    title: h.value ? "Hide archived clients" : "Show archived clients"
                  }, [
                    h.value ? (G(), W("span", Vx, "")) : (G(), W("span", zx, ""))
                  ], 8, Kx),
                  y("button", {
                    onClick: ze,
                    class: "btn",
                    title: "Add Client"
                  }, ""),
                  y("button", {
                    onClick: _f,
                    class: "screenshot-btn",
                    title: "Take Screenshot",
                    disabled: pn.value
                  }, [
                    pn.value ? (G(), W("span", Wx)) : (G(), W("span", jx, ""))
                  ], 8, Gx),
                  y("button", {
                    onClick: g[1] || (g[1] = (Q) => fn.value = !0),
                    class: "screenshot-btn",
                    title: "See Old Screenshots"
                  }, ""),
                  y("button", {
                    ref_key: "summaryColumnsBtnRef",
                    ref: eA,
                    class: "columns-btn",
                    "aria-label": "Column settings",
                    onClick: St(hn, ["stop"]),
                    title: "Column Settings"
                  }, [...g[28] || (g[28] = [
                    y("svg", {
                      class: "icon",
                      viewBox: "0 0 24 24",
                      width: "18",
                      height: "18",
                      "aria-hidden": "true"
                    }, [
                      y("path", {
                        fill: "currentColor",
                        d: "M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.21-.37-.3-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.03-.22-.22-.39-.44-.39h-3.84c-.22 0-.41.16-.44.39l-.36 2.54c-.59.24-1.13.56-1.62.94l-2.39-.96c-.22-.09-.47 0-.59.22l-1.92 3.32c-.12.21-.07.47.12.61l2.03 1.58c.04.31.06.63.06.94s-.02.63-.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.21.37.3.59.22l2.39.96c.5.38 1.03.7 1.62.94l.36 2.54c.03.22.22.39.44.39h3.84c.22 0 .41-.16.44-.39l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.09.47 0 .59-.22l1.92-3.32c.12-.21.07-.47-.12-.61l-2.03-1.58ZM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5Z"
                      })
                    ], -1)
                  ])], 512),
                  y("button", {
                    onClick: g[2] || (g[2] = (Q) => o("maximize")),
                    class: "maximize-button",
                    title: "Maximize"
                  }, "  "),
                  y("button", {
                    onClick: g[3] || (g[3] = (Q) => o("minimize")),
                    class: "minimize-button",
                    title: "Close"
                  }, " X "),
                  Zt.value ? (G(), W("div", {
                    key: 0,
                    ref_key: "summaryColumnsPopupRef",
                    ref: tA,
                    class: "columns-dropdown",
                    onClick: g[6] || (g[6] = St(() => {
                    }, ["stop"]))
                  }, [
                    g[29] || (g[29] = y("div", { class: "columns-header" }, [
                      y("span", { class: "columns-title" }, "Columns")
                    ], -1)),
                    y("div", Xx, [
                      (G(), W(xi, null, ts($t, (Q) => y("label", {
                        key: Q.field,
                        class: "column-option"
                      }, [
                        et(y("input", {
                          type: "checkbox",
                          value: Q.field,
                          "onUpdate:modelValue": g[4] || (g[4] = (z) => Et.value = z),
                          class: "column-checkbox"
                        }, null, 8, Yx), [
                          [Xf, Et.value]
                        ]),
                        y("span", Jx, [
                          ki(ue(yt.value[Q.field] || Q.label) + " ", 1),
                          yt.value[Q.field] ? (G(), W("span", $x, " (" + ue(Q.label) + ") ", 1)) : Se("", !0)
                        ]),
                        y("button", {
                          class: "col-rename-btn",
                          type: "button",
                          onClick: St((z) => ro(Q.field, yt.value[Q.field] || Q.label), ["stop"]),
                          title: "Rename column",
                          style: { "margin-left": "6px", "font-size": "13px", background: "none", border: "none", color: "#888", cursor: "pointer" }
                        }, "", 8, Zx)
                      ])), 64))
                    ]),
                    y("div", qx, [
                      y("button", {
                        class: "btn-link",
                        onClick: g[5] || (g[5] = (Q) => Et.value = $t.map((z) => z.field))
                      }, " Show All "),
                      y("button", {
                        class: "btn-done",
                        onClick: Es
                      }, "Done")
                    ])
                  ], 512)) : Se("", !0),
                  En(wx, {
                    show: Te.value,
                    onClose: () => Te.value = !1,
                    onAdded: Ve
                  }, null, 8, ["show", "onClose"])
                ])
              ]),
              dt.value.length ? (G(), W("div", eQ, [
                g[30] || (g[30] = y("span", { class: "filters-label" }, "Filtered by:", -1)),
                y("div", tQ, [
                  (G(!0), W(xi, null, ts(dt.value, (Q) => (G(), W("span", {
                    key: `${Q.field}-${Q.value}`,
                    class: "filter-tag"
                  }, [
                    y("strong", null, ue(Q.field === "account" ? "Account" : Q.field) + ":", 1),
                    ki(" " + ue(Q.value) + " ", 1),
                    y("button", {
                      class: "tag-clear",
                      onClick: (z) => nA(Q.field),
                      "aria-label": "Clear filter"
                    }, "", 8, iQ)
                  ]))), 128)),
                  y("button", {
                    class: "btn btn-clear-all",
                    onClick: lo
                  }, "Clear all")
                ])
              ])) : Se("", !0),
              y("div", {
                ref_key: "tableDiv",
                ref: a,
                class: "summary-grid"
              }, null, 512),
              C.value && x.value ? (G(), W("div", sQ, [
                (L = k.value) != null && L.isLoading.value ? (G(), W("div", AQ, " Loading " + ue(x.value === "nlv" ? "NLV" : "Maintenance Margin") + " historical data... ", 1)) : (O = k.value) != null && O.isError.value ? (G(), W("div", nQ, " Error loading " + ue(x.value === "nlv" ? "NLV" : "Maintenance Margin") + " historical data: " + ue(k.value.error.value), 1)) : N.value ? (G(), W("div", rQ, [
                  y("h4", null, ue(x.value === "nlv" ? "NLV" : "Maintenance Margin") + " History ", 1),
                  y("div", oQ, [
                    En(hi(ic), {
                      data: N.value,
                      options: Y,
                      height: 300
                    }, null, 8, ["data"])
                  ])
                ])) : (G(), W("div", aQ, " No " + ue(x.value === "nlv" ? "NLV" : "Maintenance Margin") + " historical data available ", 1))
              ])) : Se("", !0),
              li.value && ht.value ? (G(), W("div", lQ, [
                ht.value === "nlv" && hi(kl).isLoading.value ? (G(), W("div", hQ, " Loading Total NLV historical data... ")) : ht.value === "mm" && hi(Ol).isLoading.value ? (G(), W("div", cQ, " Loading Total Maintenance Margin historical data... ")) : ie.value ? (G(), W("div", uQ, [
                  y("h4", null, ue(ht.value === "nlv" ? "Total NLV" : "Total Maintenance Margin") + " History ", 1),
                  y("div", dQ, [
                    En(hi(ic), {
                      data: ie.value,
                      options: Y,
                      height: 300
                    }, null, 8, ["data"])
                  ])
                ])) : (G(), W("div", fQ, " No historical data available "))
              ])) : Se("", !0),
              (G(!0), W(xi, null, ts(io.value, (Q) => {
                var z, Me, $, I, se;
                return G(), W("div", {
                  key: `breakdown-${typeof Q.nlv_internal_account_id == "string" ? parseInt(Q.nlv_internal_account_id) : Q.nlv_internal_account_id}`,
                  class: "calculation-breakdown"
                }, [
                  y("div", gQ, [
                    y("div", pQ, [
                      y("div", null, " Calculation breakdown for " + ue(Q.legal_entity || `Client${((z = He.value) == null ? void 0 : z.findIndex((oe) => {
                        const Be = typeof oe.nlv_internal_account_id == "string" ? parseInt(oe.nlv_internal_account_id) : oe.nlv_internal_account_id, Xe = typeof Q.nlv_internal_account_id == "string" ? parseInt(Q.nlv_internal_account_id) : Q.nlv_internal_account_id;
                        return Be === Xe;
                      })) + 1}`) + ": ", 1),
                      g[31] || (g[31] = y("div", null, "Assumptions: maintenance margin (m) = 30%", -1))
                    ]),
                    y("div", mQ, [
                      y("div", bQ, [
                        y("div", {
                          class: yn(["container-status-badge", ft(re(Q)).online ? "status-online" : "status-offline"])
                        }, ue(ft(re(Q)).online ? " Online" : " Offline"), 3),
                        ft(re(Q)).online ? (G(), W("button", {
                          key: 1,
                          class: "docker-control-btn stop-btn",
                          disabled: (I = H[q(re(Q))]) == null ? void 0 : I.isLoading,
                          onClick: St((oe) => Ci(q(re(Q))), ["stop"])
                        }, [
                          (se = H[q(re(Q))]) != null && se.isStopping ? (G(), W("span", yQ, "Stopping...")) : (G(), W("span", EQ, " Stop Container"))
                        ], 8, CQ)) : (G(), W("button", {
                          key: 0,
                          class: "docker-control-btn start-btn",
                          disabled: (Me = H[q(re(Q))]) == null ? void 0 : Me.isLoading,
                          onClick: St((oe) => qi(q(re(Q))), ["stop"])
                        }, [
                          ($ = H[q(re(Q))]) != null && $.isStarting ? (G(), W("span", vQ, "Starting...")) : (G(), W("span", BQ, " Start Container"))
                        ], 8, wQ))
                      ])
                    ])
                  ]),
                  y("div", FQ, [
                    y("div", xQ, [
                      g[36] || (g[36] = y("div", { class: "stage-header" }, "Stage-1 (drop d = 15%)", -1)),
                      y("div", QQ, [
                        g[32] || (g[32] = y("div", { class: "item-label" }, "Max GMV that survives stop-adding threshold", -1)),
                        y("div", UQ, [
                          y("span", _Q, "Gmax = NLV / [ 1 - (1 - d) x (1 - m) ] = " + ue(ee(Q.maxGmvNlvSide)), 1)
                        ])
                      ]),
                      y("div", HQ, [
                        g[33] || (g[33] = y("div", { class: "item-label" }, "Max Maintenance margin (Before drop) to survive drop", -1)),
                        y("div", MQ, [
                          y("span", DQ, "Mk = Gmax x m = " + ue(ee(Q.mkNlvSide)), 1)
                        ])
                      ]),
                      y("div", SQ, [
                        g[34] || (g[34] = y("div", { class: "item-label" }, "Maintenance margin headroom", -1)),
                        y("div", TQ, [
                          y("span", LQ, "Mk - M = " + ue(ee(Q.maintnanceMarginHeadroomNlvSide)), 1)
                        ])
                      ]),
                      y("div", RQ, [
                        g[35] || (g[35] = y("div", { class: "item-label" }, "Add'l GMV allowed", -1)),
                        y("div", IQ, [
                          y("span", kQ, "(Mk - M) / m = " + ue(ee(Q.addlGmvAllowedNlvSide)), 1)
                        ])
                      ])
                    ]),
                    y("div", OQ, [
                      g[41] || (g[41] = y("div", { class: "stage-header" }, "Stage-2 (drop d = 10%)", -1)),
                      y("div", PQ, [
                        g[37] || (g[37] = y("div", { class: "item-label" }, "Max GMV that survives start-reducing threshold", -1)),
                        y("div", NQ, [
                          y("span", KQ, "Gmax = NLV / [ 1 - (1 - d) x (1 - m) ] = " + ue(ee(Q.maxGmvMaintenanceSide)), 1)
                        ])
                      ]),
                      y("div", VQ, [
                        g[38] || (g[38] = y("div", { class: "item-label" }, "Max Maintenance margin (Before drop) to survive drop", -1)),
                        y("div", zQ, [
                          y("span", GQ, "Mk = Gmax x m = " + ue(ee(Q.mkMaintenanceSide)), 1)
                        ])
                      ]),
                      y("div", WQ, [
                        g[39] || (g[39] = y("div", { class: "item-label" }, "Maintenance margin headroom", -1)),
                        y("div", jQ, [
                          y("span", XQ, "Mk - M = " + ue(ee(Q.maintnanceMarginHeadroomMaintenanceSide)), 1)
                        ])
                      ]),
                      y("div", YQ, [
                        g[40] || (g[40] = y("div", { class: "item-label" }, "Add'l GMV allowed", -1)),
                        y("div", JQ, [
                          y("span", $Q, "(Mk - M) / m = " + ue(ee(Q.addlGmvAllowedMaintenanceSide)), 1)
                        ])
                      ])
                    ])
                  ])
                ]);
              }), 128)),
              Fe.value.visible ? (G(), W("div", {
                key: 3,
                class: "context-menu",
                style: Yf({ left: Fe.value.x + "px", top: Fe.value.y + "px" }),
                onClick: g[7] || (g[7] = St(() => {
                }, ["stop"]))
              }, [
                (G(!0), W(xi, null, ts(m.value, (Q, z) => (G(), W("div", {
                  key: Q.action,
                  class: yn(["context-menu-item", { active: Q.active }]),
                  onClick: (Me) => F(Q.action)
                }, [
                  y("span", qQ, ue(Q.icon), 1),
                  y("span", null, ue(Q.label), 1),
                  Q.active ? (G(), W("span", eU, "")) : Se("", !0)
                ], 10, ZQ))), 128)),
                m.value.length > 0 ? (G(), W("div", tU)) : Se("", !0),
                y("div", iU, [
                  g[42] || (g[42] = y("span", { class: "context-menu-label" }, "Fetched:", -1)),
                  y("span", sU, ue(Ae(Fe.value.fetchedAt)) + " (PST) ", 1)
                ])
              ], 4)) : Se("", !0)
            ])
          ])) : Se("", !0)
        ]),
        Fs.value ? (G(), W("div", AU, [
          y("div", nU, [
            g[43] || (g[43] = y("h3", null, "Rename Account", -1)),
            et(y("input", {
              "onUpdate:modelValue": g[8] || (g[8] = (Q) => xs.value = Q),
              placeholder: dn.value
            }, null, 8, rU), [
              [mt, xs.value]
            ]),
            y("div", oU, [
              y("button", { onClick: Uf }, "Save"),
              y("button", {
                onClick: g[9] || (g[9] = (Q) => Fs.value = !1)
              }, "Cancel")
            ])
          ])
        ])) : Se("", !0),
        fn.value ? (G(), W("div", aU, [
          y("div", lU, [
            g[45] || (g[45] = y("h3", { class: "screenshots-title" }, "Past Screenshots", -1)),
            go.value ? (G(), W("div", hU, "Loading screenshots...")) : gn.value.length === 0 ? (G(), W("div", cU, "No screenshots yet.")) : (G(), W("div", uU, [
              (G(!0), W(xi, null, ts(gn.value, (Q) => (G(), W("div", {
                key: Q.id,
                class: "screenshot-list-item",
                onClick: (z) => yi.value = Q
              }, [
                y("img", {
                  src: `data:image/png;base64,${Q.image_data}`,
                  class: "screenshot-thumb",
                  alt: `Screenshot taken at ${new Date(Q.created_at).toLocaleString()}`
                }, null, 8, fU),
                y("div", gU, [
                  Q.name ? (G(), W("strong", pU, ue(Q.name), 1)) : (G(), W("span", mU, "(Unnamed)")),
                  y("span", null, [
                    ki(ue(new Date(Q.created_at).toLocaleString("en-US", {
                      timeZone: "America/Los_Angeles",
                      dateStyle: "medium",
                      timeStyle: "short"
                    })) + " ", 1),
                    g[44] || (g[44] = y("span", { style: { color: "#888", "font-size": "12px" } }, "PST", -1))
                  ]),
                  y("div", bU, [
                    y("a", {
                      href: `data:image/png;base64,${Q.image_data}`,
                      download: `positions-screenshot-${Q.id}.png`,
                      class: "screenshot-download-link",
                      onClick: g[10] || (g[10] = St(() => {
                      }, ["stop"]))
                    }, "", 8, wU),
                    y("button", {
                      class: "screenshot-archive-btn",
                      onClick: St((z) => Mf(Q.id), ["stop"]),
                      title: "Archive screenshot",
                      style: { background: "none", border: "1px solid #e9ecef", padding: "4px 8px", "border-radius": "6px", cursor: "pointer" }
                    }, "  ", 8, vU),
                    y("button", {
                      class: "screenshot-rename-btn",
                      onClick: St((z) => Sf(Q), ["stop"]),
                      title: "Rename screenshot",
                      style: { background: "none", border: "1px solid #e9ecef", padding: "4px 8px", "border-radius": "6px", cursor: "pointer" }
                    }, "  ", 8, BU)
                  ])
                ])
              ], 8, dU))), 128))
            ])),
            y("div", CU, [
              y("button", {
                onClick: g[11] || (g[11] = (Q) => fn.value = !1),
                class: "screenshots-close"
              }, "Close")
            ])
          ]),
          yi.value ? (G(), W("div", {
            key: 0,
            class: "screenshot-preview-modal",
            onClick: g[13] || (g[13] = St((Q) => yi.value = null, ["self"]))
          }, [
            y("div", yU, [
              y("img", {
                src: `data:image/png;base64,${yi.value.image_data}`,
                class: "screenshot-full-img"
              }, null, 8, EU),
              y("div", FU, [
                y("span", null, [
                  ki(ue(new Date(yi.value.created_at).toLocaleString("en-US", {
                    timeZone: "America/Los_Angeles",
                    dateStyle: "medium",
                    timeStyle: "short"
                  })) + " ", 1),
                  g[46] || (g[46] = y("span", { style: { color: "#888", "font-size": "12px" } }, "PST", -1))
                ]),
                y("a", {
                  href: `data:image/png;base64,${yi.value.image_data}`,
                  download: `positions-screenshot-${yi.value.id}.png`,
                  class: "screenshot-download-link"
                }, " Download", 8, xU),
                y("button", {
                  onClick: g[12] || (g[12] = (Q) => yi.value = null),
                  class: "screenshot-preview-close"
                }, "Close")
              ])
            ])
          ])) : Se("", !0)
        ])) : Se("", !0),
        oA.value ? (G(), W("div", QU, [
          y("div", UU, [
            g[47] || (g[47] = y("h3", null, "Name screenshot", -1)),
            et(y("input", {
              "onUpdate:modelValue": g[14] || (g[14] = (Q) => aA.value = Q),
              placeholder: "Enter a name (optional)"
            }, null, 512), [
              [mt, aA.value]
            ]),
            y("div", _U, [
              y("button", { onClick: Hf }, "Save & Capture"),
              y("button", {
                onClick: g[15] || (g[15] = (Q) => oA.value = !1)
              }, "Cancel")
            ])
          ])
        ])) : Se("", !0),
        y("div", HU, [
          En(Jf, {
            name: "toast",
            tag: "div"
          }, {
            default: Nl(() => [
              (G(!0), W(xi, null, ts(vn.value, (Q) => (G(), W("div", {
                key: Q.id,
                class: yn(["toast", `toast-${Q.type}`]),
                onClick: (z) => mo(Q.id)
              }, [
                y("div", DU, [
                  Q.type === "success" ? (G(), W("span", SU, "")) : Q.type === "error" ? (G(), W("span", TU, "")) : Q.type === "warning" ? (G(), W("span", LU, "")) : (G(), W("span", RU, ""))
                ]),
                y("div", IU, [
                  y("div", kU, ue(Q.title), 1),
                  Q.message ? (G(), W("div", OU, ue(Q.message), 1)) : Se("", !0)
                ]),
                y("button", {
                  class: "toast-close",
                  onClick: St((z) => mo(Q.id), ["stop"])
                }, "", 8, PU)
              ], 10, MU))), 128))
            ]),
            _: 1
          })
        ]),
        mn.value ? (G(), W("div", NU, [
          y("div", KU, [
            g[48] || (g[48] = y("h3", null, "Rename Screenshot", -1)),
            et(y("input", {
              "onUpdate:modelValue": g[16] || (g[16] = (Q) => bn.value = Q),
              placeholder: "Enter new name"
            }, null, 512), [
              [mt, bn.value]
            ]),
            y("div", VU, [
              y("button", { onClick: Tf }, "Save"),
              y("button", {
                onClick: g[17] || (g[17] = (Q) => mn.value = !1)
              }, "Cancel")
            ])
          ])
        ])) : Se("", !0),
        es.value ? (G(), W("div", zU, [
          y("div", GU, [
            g[49] || (g[49] = y("h3", null, "Edit NLV & Maintenance Margin", -1)),
            g[50] || (g[50] = y("label", null, "NLV:", -1)),
            et(y("input", {
              type: "number",
              "onUpdate:modelValue": g[18] || (g[18] = (Q) => Bn.value = Q)
            }, null, 512), [
              [mt, Bn.value]
            ]),
            g[51] || (g[51] = y("label", null, "Maintenance Margin:", -1)),
            et(y("input", {
              type: "number",
              "onUpdate:modelValue": g[19] || (g[19] = (Q) => Cn.value = Q)
            }, null, 512), [
              [mt, Cn.value]
            ]),
            y("div", WU, [
              y("button", { onClick: kf }, "Save"),
              y("button", {
                onClick: g[20] || (g[20] = (Q) => es.value = null)
              }, "Cancel")
            ])
          ])
        ])) : Se("", !0),
        P.value ? (G(), W("div", jU, [
          y("div", XU, [
            g[52] || (g[52] = y("h3", null, "Rename App", -1)),
            et(y("input", {
              "onUpdate:modelValue": g[21] || (g[21] = (Q) => Z.value = Q),
              placeholder: "App name"
            }, null, 512), [
              [mt, Z.value]
            ]),
            y("div", YU, [
              y("button", { onClick: fe }, "Save"),
              y("button", {
                onClick: g[22] || (g[22] = (Q) => P.value = !1)
              }, "Cancel")
            ])
          ])
        ])) : Se("", !0),
        ai.value ? (G(), W("div", JU, [
          y("div", $U, [
            g[53] || (g[53] = y("h3", null, "Rename Column", -1)),
            et(y("input", {
              "onUpdate:modelValue": g[23] || (g[23] = (Q) => Yi.value = Q),
              placeholder: "Column name"
            }, null, 512), [
              [mt, Yi.value]
            ]),
            y("div", { class: "dialog-actions" }, [
              y("button", { onClick: cn }, "Save"),
              y("button", { onClick: oo }, "Cancel")
            ])
          ])
        ])) : Se("", !0)
      ], 64);
    };
  }
}), a_ = /* @__PURE__ */ Ef(ZU, [["__scopeId", "data-v-211e08f5"]]);
export {
  a_ as Summary,
  a_ as default
};
